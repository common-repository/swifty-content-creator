var swifty;!function(){if(!swifty||!swifty.requirejs){swifty?require=swifty:swifty={};var requirejs,require,define;!function(ba){function G(a){return"[object Function]"===K.call(a)}function H(a){return"[object Array]"===K.call(a)}function v(a,b){if(a){var c;for(c=0;c<a.length&&(!a[c]||!b(a[c],c,a));c+=1);}}function T(a,b){if(a){var c;for(c=a.length-1;c>-1&&(!a[c]||!b(a[c],c,a));c-=1);}}function t(a,b){return fa.call(a,b)}function m(a,b){return t(a,b)&&a[b]}function B(a,b){for(var c in a)if(t(a,c)&&b(a[c],c))break}function U(a,b,c,d){return b&&B(b,function(b,e){(c||!t(a,e))&&(!d||"object"!=typeof b||!b||H(b)||G(b)||b instanceof RegExp?a[e]=b:(a[e]||(a[e]={}),U(a[e],b,c,d)))}),a}function u(a,b){return function(){return b.apply(a,arguments)}}function ca(a){throw a}function da(a){if(!a)return a;var b=ba;return v(a.split("."),function(a){b=b[a]}),b}function C(a,b,c,d){return b=Error(b+"\nhttp://requirejs.org/docs/errors.html#"+a),b.requireType=a,b.requireModules=d,c&&(b.originalError=c),b}function ga(a){function b(a,b,c){var d,e,f,g,h,i,j,k,b=b&&b.split("/"),l=D.map,n=l&&l["*"];if(a){for(a=a.split("/"),e=a.length-1,D.nodeIdCompat&&Q.test(a[e])&&(a[e]=a[e].replace(Q,"")),"."===a[0].charAt(0)&&b&&(e=b.slice(0,b.length-1),a=e.concat(a)),e=a,f=0;f<e.length;f++)g=e[f],"."===g?(e.splice(f,1),f-=1):".."===g&&0!==f&&(1!=f||".."!==e[2])&&".."!==e[f-1]&&f>0&&(e.splice(f-1,2),f-=2);a=a.join("/")}if(c&&l&&(b||n)){e=a.split("/"),f=e.length;a:for(;f>0;f-=1){if(h=e.slice(0,f).join("/"),b)for(g=b.length;g>0;g-=1)if((c=m(l,b.slice(0,g).join("/")))&&(c=m(c,h))){d=c,i=f;break a}!j&&n&&m(n,h)&&(j=m(n,h),k=f)}!d&&j&&(d=j,i=k),d&&(e.splice(0,i,d),a=e.join("/"))}return(d=m(D.pkgs,a))?d:a}function c(a){z&&v(document.getElementsByTagName("script"),function(b){return b.getAttribute("data-requiremodule")===a&&b.getAttribute("data-requirecontext")===x.contextName?(b.parentNode.removeChild(b),!0):void 0})}function d(a){var b=m(D.paths,a);return b&&H(b)&&1<b.length?(b.shift(),x.require.undef(a),x.makeRequire(null,{skipMap:!0})([a]),!0):void 0}function e(a){var b,c=a?a.indexOf("!"):-1;return c>-1&&(b=a.substring(0,c),a=a.substring(c+1,a.length)),[b,a]}function f(a,c,d,f){var g,h,i=null,j=c?c.name:null,k=a,l=!0,n="";return a||(l=!1,a="_@r"+(P+=1)),a=e(a),i=a[0],a=a[1],i&&(i=b(i,j,f),h=m(K,i)),a&&(i?n=h&&h.normalize?h.normalize(a,function(a){return b(a,j,f)}):-1===a.indexOf("!")?b(a,j,f):a:(n=b(a,j,f),a=e(n),i=a[0],n=a[1],d=!0,g=x.nameToUrl(n))),d=!i||h||d?"":"_unnormalized"+(S+=1),{prefix:i,name:n,parentMap:c,unnormalized:!!d,url:g,originalName:k,isDefine:l,id:(i?i+"!"+n:n)+d}}function h(a){var b=a.id,c=m(E,b);return c||(c=E[b]=new x.Module(a)),c}function i(a,b,c){var d=a.id,e=m(E,d);!t(K,d)||e&&!e.defineEmitComplete?(e=h(a),e.error&&"error"===b?c(e.error):e.on(b,c)):"defined"===b&&c(K[d])}function j(a,b){var c=a.requireModules,d=!1;b?b(a):(v(c,function(b){(b=m(E,b))&&(b.error=a,b.events.error&&(d=!0,b.emit("error",a)))}),d||g.onError(a))}function k(){R.length&&(ha.apply(J,[J.length,0].concat(R)),R=[])}function l(a){delete E[a],delete F[a]}function n(a,b,c){var d=a.map.id;a.error?a.emit("error",a.error):(b[d]=!0,v(a.depMaps,function(d,e){var f=d.id,g=m(E,f);g&&!a.depMatched[e]&&!c[f]&&(m(b,f)?(a.defineDep(e,K[f]),a.check()):n(g,b,c))}),c[d]=!0)}function o(){var a,b,e=(a=1e3*D.waitSeconds)&&x.startTime+a<(new Date).getTime(),f=[],g=[],h=!1,i=!0;if(!s){if(s=!0,B(F,function(a){var j=a.map,k=j.id;if(a.enabled&&(j.isDefine||g.push(a),!a.error))if(!a.inited&&e)d(k)?h=b=!0:(f.push(k),c(k));else if(!a.inited&&a.fetched&&j.isDefine&&(h=!0,!j.prefix))return i=!1}),e&&f.length)return a=C("timeout","Load timeout for modules: "+f,null,f),a.contextName=x.contextName,j(a);i&&v(g,function(a){n(a,{},{})}),e&&!b||!h||!z&&!ea||A||(A=setTimeout(function(){A=0,o()},50)),s=!1}}function p(a){t(K,a[0])||h(f(a[0],null,!0)).init(a[1],a[2])}function q(a){var a=a.currentTarget||a.srcElement,b=x.onScriptLoad;return a.detachEvent&&!Y?a.detachEvent("onreadystatechange",b):a.removeEventListener("load",b,!1),b=x.onScriptError,(!a.detachEvent||Y)&&a.removeEventListener("error",b,!1),{node:a,id:a&&a.getAttribute("data-requiremodule")}}function r(){var a;for(k();J.length;){if(a=J.shift(),null===a[0])return j(C("mismatch","Mismatched anonymous define() module: "+a[a.length-1]));p(a)}}var s,w,x,y,A,D={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},E={},F={},I={},J=[],K={},L={},O={},P=1,S=1;return y={require:function(a){return a.require?a.require:a.require=x.makeRequire(a.map)},exports:function(a){return a.usingExports=!0,a.map.isDefine?a.exports?K[a.map.id]=a.exports:a.exports=K[a.map.id]={}:void 0},module:function(a){return a.module?a.module:a.module={id:a.map.id,uri:a.map.url,config:function(){return m(D.config,a.map.id)||{}},exports:a.exports||(a.exports={})}}},w=function(a){this.events=m(I,a.id)||{},this.map=a,this.shim=m(D.shim,a.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},w.prototype={init:function(a,b,c,d){d=d||{},this.inited||(this.factory=b,c?this.on("error",c):this.events.error&&(c=u(this,function(a){this.emit("error",a)})),this.depMaps=a&&a.slice(0),this.errback=c,this.inited=!0,this.ignore=d.ignore,d.enabled||this.enabled?this.enable():this.check())},defineDep:function(a,b){this.depMatched[a]||(this.depMatched[a]=!0,this.depCount-=1,this.depExports[a]=b)},fetch:function(){if(!this.fetched){this.fetched=!0,x.startTime=(new Date).getTime();var a=this.map;if(!this.shim)return a.prefix?this.callPlugin():this.load();x.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],u(this,function(){return a.prefix?this.callPlugin():this.load()}))}},load:function(){var a=this.map.url;L[a]||(L[a]=!0,x.load(this.map.id,a))},check:function(){if(this.enabled&&!this.enabling){var a,b,c=this.map.id;b=this.depExports;var d=this.exports,e=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,1>this.depCount&&!this.defined){if(G(e)){if(this.events.error&&this.map.isDefine||g.onError!==ca)try{d=x.execCb(c,e,b,d)}catch(f){a=f}else d=x.execCb(c,e,b,d);if(this.map.isDefine&&void 0===d&&((b=this.module)?d=b.exports:this.usingExports&&(d=this.exports)),a)return a.requireMap=this.map,a.requireModules=this.map.isDefine?[this.map.id]:null,a.requireType=this.map.isDefine?"define":"require",j(this.error=a)}else d=e;this.exports=d,this.map.isDefine&&!this.ignore&&(K[c]=d,g.onResourceLoad)&&g.onResourceLoad(x,this.map,this.depMaps),l(c),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else this.fetch()}},callPlugin:function(){var a=this.map,c=a.id,d=f(a.prefix);this.depMaps.push(d),i(d,"defined",u(this,function(d){var e,k;k=m(O,this.map.id);var n=this.map.name,o=this.map.parentMap?this.map.parentMap.name:null,p=x.makeRequire(a.parentMap,{enableBuildCallback:!0});this.map.unnormalized?(d.normalize&&(n=d.normalize(n,function(a){return b(a,o,!0)})||""),d=f(a.prefix+"!"+n,this.map.parentMap),i(d,"defined",u(this,function(a){this.init([],function(){return a},null,{enabled:!0,ignore:!0})})),(k=m(E,d.id))&&(this.depMaps.push(d),this.events.error&&k.on("error",u(this,function(a){this.emit("error",a)})),k.enable())):k?(this.map.url=x.nameToUrl(k),this.load()):(e=u(this,function(a){this.init([],function(){return a},null,{enabled:!0})}),e.error=u(this,function(a){this.inited=!0,this.error=a,a.requireModules=[c],B(E,function(a){0===a.map.id.indexOf(c+"_unnormalized")&&l(a.map.id)}),j(a)}),e.fromText=u(this,function(b,d){var i=a.name,k=f(i),l=M;d&&(b=d),l&&(M=!1),h(k),t(D.config,c)&&(D.config[i]=D.config[c]);try{g.exec(b)}catch(m){return j(C("fromtexteval","fromText eval for "+c+" failed: "+m,m,[c]))}l&&(M=!0),this.depMaps.push(k),x.completeLoad(i),p([i],e)}),d.load(a.name,p,e,D))})),x.enable(d,this),this.pluginMaps[d.id]=d},enable:function(){F[this.map.id]=this,this.enabling=this.enabled=!0,v(this.depMaps,u(this,function(a,b){var c,d;if("string"==typeof a){if(a=f(a,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[b]=a,c=m(y,a.id))return void(this.depExports[b]=c(this));this.depCount+=1,i(a,"defined",u(this,function(a){this.defineDep(b,a),this.check()})),this.errback&&i(a,"error",u(this,this.errback))}c=a.id,d=E[c],!t(y,c)&&d&&!d.enabled&&x.enable(a,this)})),B(this.pluginMaps,u(this,function(a){var b=m(E,a.id);b&&!b.enabled&&x.enable(a,this)})),this.enabling=!1,this.check()},on:function(a,b){var c=this.events[a];c||(c=this.events[a]=[]),c.push(b)},emit:function(a,b){v(this.events[a],function(a){a(b)}),"error"===a&&delete this.events[a]}},x={config:D,contextName:a,registry:E,defined:K,urlFetched:L,defQueue:J,Module:w,makeModuleMap:f,nextTick:g.nextTick,onError:j,configure:function(a){a.baseUrl&&"/"!==a.baseUrl.charAt(a.baseUrl.length-1)&&(a.baseUrl+="/");var b=D.shim,c={paths:!0,bundles:!0,config:!0,map:!0};B(a,function(a,b){c[b]?(D[b]||(D[b]={}),U(D[b],a,!0,!0)):D[b]=a}),a.bundles&&B(a.bundles,function(a,b){v(a,function(a){a!==b&&(O[a]=b)})}),a.shim&&(B(a.shim,function(a,c){H(a)&&(a={deps:a}),!a.exports&&!a.init||a.exportsFn||(a.exportsFn=x.makeShimExports(a)),b[c]=a}),D.shim=b),a.packages&&v(a.packages,function(a){var b,a="string"==typeof a?{name:a}:a;b=a.name,a.location&&(D.paths[b]=a.location),D.pkgs[b]=a.name+"/"+(a.main||"main").replace(ia,"").replace(Q,"")}),B(E,function(a,b){!a.inited&&!a.map.unnormalized&&(a.map=f(b))}),(a.deps||a.callback)&&x.require(a.deps||[],a.callback)},makeShimExports:function(a){return function(){var b;return a.init&&(b=a.init.apply(ba,arguments)),b||a.exports&&da(a.exports)}},makeRequire:function(d,e){function i(b,c,k){var l,m;return e.enableBuildCallback&&c&&G(c)&&(c.__requireJsBuild=!0),"string"==typeof b?G(c)?j(C("requireargs","Invalid require call"),k):d&&t(y,b)?y[b](E[d.id]):g.get?g.get(x,b,d,i):(l=f(b,d,!1,!0),l=l.id,t(K,l)?K[l]:j(C("notloaded",'Module name "'+l+'" has not been loaded yet for context: '+a+(d?"":". Use require([])")))):(r(),x.nextTick(function(){r(),m=h(f(null,d)),m.skipMap=e.skipMap,m.init(b,c,k,{enabled:!0}),o()}),i)}return e=e||{},U(i,{isBrowser:z,toUrl:function(a){var c,e=a.lastIndexOf("."),f=a.split("/")[0];return-1!==e&&("."!==f&&".."!==f||e>1)&&(c=a.substring(e,a.length),a=a.substring(0,e)),x.nameToUrl(b(a,d&&d.id,!0),c,!0)},defined:function(a){return t(K,f(a,d,!1,!0).id)},specified:function(a){return a=f(a,d,!1,!0).id,t(K,a)||t(E,a)}}),d||(i.undef=function(a){k();var b=f(a,d,!0),e=m(E,a);c(a),delete K[a],delete L[b.url],delete I[a],T(J,function(b,c){b[0]===a&&J.splice(c,1)}),e&&(e.events.defined&&(I[a]=e.events),l(a))}),i},enable:function(a){m(E,a.id)&&h(a).enable()},completeLoad:function(a){var b,c,e=m(D.shim,a)||{},f=e.exports;for(k();J.length;){if(c=J.shift(),null===c[0]){if(c[0]=a,b)break;b=!0}else c[0]===a&&(b=!0);p(c)}if(c=m(E,a),!b&&!t(K,a)&&c&&!c.inited){if(D.enforceDefine&&(!f||!da(f)))return d(a)?void 0:j(C("nodefine","No define call for "+a,null,[a]));p([a,e.deps||[],e.exportsFn])}o()},nameToUrl:function(a,b,c){var d,e,f;if((d=m(D.pkgs,a))&&(a=d),d=m(O,a))return x.nameToUrl(d,b,c);if(g.jsExtRegExp.test(a))d=a+(b||"");else{for(d=D.paths,a=a.split("/"),e=a.length;e>0;e-=1)if(f=a.slice(0,e).join("/"),f=m(d,f)){H(f)&&(f=f[0]),a.splice(0,e,f);break}d=a.join("/"),d+=b||(/^data\:|\?/.test(d)||c?"":".js"),d=("/"===d.charAt(0)||d.match(/^[\w\+\.\-]+:/)?"":D.baseUrl)+d}return D.urlArgs?d+((-1===d.indexOf("?")?"?":"&")+D.urlArgs):d},load:function(a,b){g.load(x,a,b)},execCb:function(a,b,c,d){return b.apply(d,c)},onScriptLoad:function(a){("load"===a.type||ja.test((a.currentTarget||a.srcElement).readyState))&&(N=null,a=q(a),x.completeLoad(a.id))},onScriptError:function(a){var b=q(a);return d(b.id)?void 0:j(C("scripterror","Script error for: "+b.id,a,[b.id]))}},x.require=x.makeRequire(),x}var g,x,y,D,I,E,N,J,s,O,ka=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,la=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,Q=/\.js$/,ia=/^\.\//;x=Object.prototype;var K=x.toString,fa=x.hasOwnProperty,ha=Array.prototype.splice,z=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),ea=!z&&"undefined"!=typeof importScripts,ja=z&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,Y="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),F={},q={},R=[],M=!1;if("undefined"==typeof define){if("undefined"!=typeof requirejs){if(G(requirejs))return;q=requirejs,requirejs=void 0}"undefined"!=typeof require&&!G(require)&&(q=require,require=void 0),g=requirejs=function(a,b,c,d){var e,f="_";return!H(a)&&"string"!=typeof a&&(e=a,H(b)?(a=b,b=c,c=d):a=[]),e&&e.context&&(f=e.context),(d=m(F,f))||(d=F[f]=g.s.newContext(f)),e&&d.configure(e),d.require(a,b,c)},g.config=function(a){return g(a)},g.nextTick="undefined"!=typeof setTimeout?function(a){setTimeout(a,4)}:function(a){a()},require||(require=g),g.version="2.1.14",g.jsExtRegExp=/^\/|:|\?|\.js$/,g.isBrowser=z,x=g.s={contexts:F,newContext:ga},g({}),v(["toUrl","undef","defined","specified"],function(a){g[a]=function(){var b=F._;return b.require[a].apply(b,arguments)}}),z&&(y=x.head=document.getElementsByTagName("head")[0],D=document.getElementsByTagName("base")[0])&&(y=x.head=D.parentNode),g.onError=ca,g.createNode=function(a){var b=a.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return b.type=a.scriptType||"text/javascript",b.charset="utf-8",b.async=!0,b},g.load=function(a,b,c){var d=a&&a.config||{};if(z)return d=g.createNode(d,b,c),d.setAttribute("data-requirecontext",a.contextName),d.setAttribute("data-requiremodule",b),!d.attachEvent||d.attachEvent.toString&&0>d.attachEvent.toString().indexOf("[native code")||Y?(d.addEventListener("load",a.onScriptLoad,!1),d.addEventListener("error",a.onScriptError,!1)):(M=!0,d.attachEvent("onreadystatechange",a.onScriptLoad)),d.src=c,J=d,D?y.insertBefore(d,D):y.appendChild(d),J=null,d;if(ea)try{importScripts(c),a.completeLoad(b)}catch(e){a.onError(C("importscripts","importScripts failed for "+b+" at "+c,e,[b]))}},z&&!q.skipDataMain&&T(document.getElementsByTagName("script"),function(a){return y||(y=a.parentNode),(I=a.getAttribute("data-main"))?(s=I,q.baseUrl||(E=s.split("/"),s=E.pop(),O=E.length?E.join("/")+"/":"./",q.baseUrl=O),s=s.replace(Q,""),g.jsExtRegExp.test(s)&&(s=I),q.deps=q.deps?q.deps.concat(s):[s],!0):void 0}),define=function(a,b,c){var d,e;"string"!=typeof a&&(c=b,b=a,a=null),H(b)||(c=b,b=null),!b&&G(c)&&(b=[],c.length&&(c.toString().replace(ka,"").replace(la,function(a,c){b.push(c)}),b=(1===c.length?["require"]:["require","exports","module"]).concat(b))),M&&((d=J)||(N&&"interactive"===N.readyState||T(document.getElementsByTagName("script"),function(a){return"interactive"===a.readyState?N=a:void 0}),d=N),d&&(a||(a=d.getAttribute("data-requiremodule")),e=F[d.getAttribute("data-requirecontext")])),(e?e.defQueue:R).push([a,b,c])},define.amd={jQuery:!0},g.exec=function(b){return eval(b)},g(q)}}(this),swifty.requirejs=requirejs,swifty.require=require,swifty.define=define}}(),swifty.define("requireLib",function(){}),swifty.define("can/util/can",[],function(){var a="undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:global,b={};("undefined"==typeof GLOBALCAN||GLOBALCAN!==!1)&&(a.can=b),b.global=a,b.k=function(){},b.isDeferred=b.isPromise=function(a){return a&&"function"==typeof a.then&&"function"==typeof a.pipe},b.isMapLike=function(a){return b.Map&&(a instanceof b.Map||a&&a.___get)};var c=0;b.cid=function(a,b){return a._cid||(c++,a._cid=(b||"")+c),a._cid},b.VERSION="2.3.21",b.simpleExtend=function(a,b){for(var c in b)a[c]=b[c];return a},b.last=function(a){return a&&a[a.length-1]},b.isDOM=function(a){return(a.ownerDocument||a)===b.global.document},b.childNodes=function(a){var b=a.childNodes;if("length"in b)return b;for(var c=a.firstChild,d=[];c;)d.push(c),c=c.nextSibling;return d};var d=Function.prototype.bind;b.proxy=d?function(a,b){return d.call(a,b)}:function(a,b){return function(){return a.apply(b,arguments)}},b.frag=function(a,c){var d,e=c||b.document||b.global.document;return a&&"string"!=typeof a?11===a.nodeType?a:"number"==typeof a.nodeType?(d=e.createDocumentFragment(),d.appendChild(a),d):"number"==typeof a.length?(d=e.createDocumentFragment(),b.each(a,function(a){d.appendChild(b.frag(a))}),b.childNodes(d).length||d.appendChild(e.createTextNode("")),d):(d=b.buildFragment(""+a,e),b.childNodes(d).length||d.appendChild(e.createTextNode("")),d):(d=b.buildFragment(null==a?"":""+a,e),d.childNodes.length||d.appendChild(e.createTextNode("")),d)},b.scope=b.viewModel=function(a,c,d){a=b.$(a);var e=b.data(a,"scope")||b.data(a,"viewModel");switch(e||(e=new b.Map,b.data(a,"scope",e),b.data(a,"viewModel",e)),arguments.length){case 0:case 1:return e;case 2:return e.attr(c);default:return e.attr(c,d),a}};var e=function(a){var b=String(a).replace(/^\s+|\s+$/g,"").match(/^([^:\/?#]+:)?(\/\/(?:[^:@]*(?::[^:@]*)?@)?(([^:\/?#]*)(?::(\d*))?))?([^?#]*)(\?[^#]*)?(#[\s\S]*)?/);return b?{href:b[0]||"",protocol:b[1]||"",authority:b[2]||"",host:b[3]||"",hostname:b[4]||"",port:b[5]||"",pathname:b[6]||"",search:b[7]||"",hash:b[8]||""}:null};return b.joinURIs=function(a,b){function c(a){var b=[];return a.replace(/^(\.\.?(\/|$))+/,"").replace(/\/(\.(\/|$))+/g,"/").replace(/\/\.\.$/,"/../").replace(/\/?[^\/]*/g,function(a){"/.."===a?b.pop():b.push(a)}),b.join("").replace(/^\//,"/"===a.charAt(0)?"/":"")}return b=e(b||""),a=e(a||""),b&&a?(b.protocol||a.protocol)+(b.protocol||b.authority?b.authority:a.authority)+c(b.protocol||b.authority||"/"===b.pathname.charAt(0)?b.pathname:b.pathname?(a.authority&&!a.pathname?"/":"")+a.pathname.slice(0,a.pathname.lastIndexOf("/")+1)+b.pathname:a.pathname)+(b.protocol||b.authority||b.pathname?b.search:b.search||a.search)+b.hash:null},b["import"]=function(a,c){var d=new b.Deferred;return"object"==typeof window.System&&b.isFunction(window.System["import"])?window.System["import"](a,{name:c}).then(b.proxy(d.resolve,d),b.proxy(d.reject,d)):window.define&&window.define.amd?window.require([a],function(a){d.resolve(a)}):window.steal?steal.steal(a,function(a){d.resolve(a)}):window.require?d.resolve(window.require(a)):d.resolve(),d.promise()},b.__observe=function(){},b.isNode="object"==typeof process&&"[object process]"==={}.toString.call(process),b.isBrowserWindow="undefined"!=typeof window&&"undefined"!=typeof document&&"undefined"==typeof SimpleDOM,b.isWebWorker="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,b}),swifty.define("can/util/attr",["can/util/can"],function(a){var b=a.global.setImmediate||function(a){return setTimeout(a,0)},c={input:!0,textarea:!0,select:!0},d=function(b,d){return d in b||a.document&&c[b.nodeName.toLowerCase()]},e={MutationObserver:a.global.MutationObserver||a.global.WebKitMutationObserver||a.global.MozMutationObserver,map:{"class":function(a,b){return b=b||"","http://www.w3.org/2000/svg"===a.namespaceURI?a.setAttribute("class",b):a.className=b,b},value:"value",innertext:"innerText",innerhtml:"innerHTML",textcontent:"textContent","for":"htmlFor",checked:!0,disabled:!0,readonly:function(a,b){return a.readOnly=!0,b},required:!0,src:function(a,b){return null==b||""===b?(a.removeAttribute("src"),null):(a.setAttribute("src",b),b)},style:function(){var b=a.global.document&&document.createElement("div");return b&&b.style&&"cssText"in b.style?function(a,b){return a.style.cssText=b||""}:function(a,b){return a.setAttribute("style",b)}}()},defaultValue:["input","textarea"],setAttrOrProp:function(a,b,c){b=b.toLowerCase();var d=e.map[b];d!==!0||c?this.set(a,b,c):this.remove(a,b)},setSelectValue:function(a,b){if(null!=b)for(var c=a.getElementsByTagName("option"),d=0;d<c.length;d++)if(b==c[d].value)return void(c[d].selected=!0);a.selectedIndex=-1},set:function(b,c,f){var g=a.isDOM(b)&&e.MutationObserver;c=c.toLowerCase();var h;g||(h=e.get(b,c));var i,j=e.map[c];"function"==typeof j?i=j(b,f):j===!0&&d(b,c)?(i=b[c]=!0,"checked"===c&&"radio"===b.type&&a.inArray((b.nodeName+"").toLowerCase(),e.defaultValue)>=0&&(b.defaultChecked=!0)):"string"==typeof j&&d(b,j)?(i=f,(b[j]!==f||"OPTION"===b.nodeName.toUpperCase())&&(b[j]=f),"value"===j&&a.inArray((b.nodeName+"").toLowerCase(),e.defaultValue)>=0&&(b.defaultValue=f)):e.setAttribute(b,c,f),g||i===h||e.trigger(b,c,h)},setAttribute:function(){var b=a.global.document;if(b&&document.createAttribute)try{b.createAttribute("{}")}catch(c){var d={},e=document.createElement("div");return function(a,b,c){var f,g,h=b.charAt(0);"{"!==h&&"("!==h&&"*"!==h||!a.setAttributeNode?a.setAttribute(b,c):(f=d[b],f||(e.innerHTML="<div "+b+'=""></div>',f=d[b]=e.childNodes[0].attributes[0]),g=f.cloneNode(),g.value=c,a.setAttributeNode(g))}}return function(a,b,c){a.setAttribute(b,c)}}(),trigger:function(c,d,e){return a.data(a.$(c),"canHasAttributesBindings")?(d=d.toLowerCase(),b(function(){a.trigger(c,{type:"attributes",attributeName:d,target:c,oldValue:e,bubbles:!1},[])})):void 0},get:function(a,b){b=b.toLowerCase();var c=e.map[b];return"string"==typeof c&&d(a,c)?a[c]:c===!0&&d(a,b)?a[b]:a.getAttribute(b)},remove:function(a,b){b=b.toLowerCase();var c;e.MutationObserver||(c=e.get(a,b));var f=e.map[b];"function"==typeof f&&f(a,void 0),f===!0&&d(a,b)?a[b]=!1:"string"==typeof f&&d(a,f)?a[f]="":a.removeAttribute(b),e.MutationObserver||null==c||e.trigger(a,b,c)},has:function(){var b=a.global.document&&document.createElement("div");return b&&b.hasAttribute?function(a,b){return a.hasAttribute(b)}:function(a,b){return null!==a.getAttribute(b)}}()};return e}),swifty.define("can/event",["can/util/can"],function(a){return a.addEvent=function(a,b){var c=this.__bindEvents||(this.__bindEvents={}),d=c[a]||(c[a]=[]);return d.push({handler:b,name:a}),this},a.listenTo=function(b,c,d){var e=this.__listenToEvents;e||(e=this.__listenToEvents={});var f=a.cid(b),g=e[f];g||(g=e[f]={obj:b,events:{}});var h=g.events[c];h||(h=g.events[c]=[]),h.push(d),a.bind.call(b,c,d)},a.stopListening=function(b,c,d){var e=this.__listenToEvents,f=e,g=0;if(!e)return this;if(b){var h=a.cid(b);if((f={})[h]=e[h],!e[h])return this}for(var i in f){var j,k=f[i];b=e[i].obj,c?(j={})[c]=k.events[c]:j=k.events;for(var l in j){var m=j[l]||[];for(g=0;g<m.length;)d&&d===m[g]||!d?(a.unbind.call(b,l,m[g]),m.splice(g,1)):g++;m.length||delete k.events[l]}a.isEmptyObject(k.events)&&delete e[i]}return this},a.removeEvent=function(a,b,c){if(!this.__bindEvents)return this;for(var d,e=this.__bindEvents[a]||[],f=0,g="function"==typeof b;f<e.length;)d=e[f],(c?c(d,a,b):g&&d.handler===b||!g&&(d.cid===b||!b))?e.splice(f,1):f++;return this},a.dispatch=function(a,b){var c=this.__bindEvents;if(c){var d;"string"==typeof a?(d=a,a={type:a}):d=a.type;var e=c[d];if(e){e=e.slice(0);var f=[a];b&&f.push.apply(f,b);for(var g=0,h=e.length;h>g;g++)e[g].handler.apply(this,f);return a}}},a.one=function(b,c){var d=function(){return a.unbind.call(this,b,d),c.apply(this,arguments)};return a.bind.call(this,b,d),this},a.event={on:function(){return 0===arguments.length&&a.Control&&this instanceof a.Control?a.Control.prototype.on.call(this):a.addEvent.apply(this,arguments)},off:function(){return 0===arguments.length&&a.Control&&this instanceof a.Control?a.Control.prototype.off.call(this):a.removeEvent.apply(this,arguments)},bind:a.addEvent,unbind:a.removeEvent,delegate:function(b,c,d){return a.addEvent.call(this,c,d)},undelegate:function(b,c,d){return a.removeEvent.call(this,c,d)},trigger:a.dispatch,one:a.one,addEvent:a.addEvent,removeEvent:a.removeEvent,listenTo:a.listenTo,stopListening:a.stopListening,dispatch:a.dispatch},a.event}),swifty.define("can/fragment",["can/util/can"],function(a){var b=/^\s*<(\w+)[^>]*>/,c={}.toString,d=function(d,e,f){void 0===e&&(e=b.test(d)&&RegExp.$1),d&&"[object Function]"===c.call(d.replace)&&(d=d.replace(/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,"<$1></$2>"));var g=f.createElement("div"),h=f.createElement("div");"tbody"===e||"tfoot"===e||"thead"===e||"colgroup"===e?(h.innerHTML="<table>"+d+"</table>",g=3===h.firstChild.nodeType?h.lastChild:h.firstChild):"col"===e?(h.innerHTML="<table><colgroup>"+d+"</colgroup></table>",g=3===h.firstChild.nodeType?h.lastChild:h.firstChild.firstChild):"tr"===e?(h.innerHTML="<table><tbody>"+d+"</tbody></table>",g=3===h.firstChild.nodeType?h.lastChild:h.firstChild.firstChild):"td"===e||"th"===e?(h.innerHTML="<table><tbody><tr>"+d+"</tr></tbody></table>",g=3===h.firstChild.nodeType?h.lastChild:h.firstChild.firstChild.firstChild):"option"===e?(h.innerHTML="<select>"+d+"</select>",g=3===h.firstChild.nodeType?h.lastChild:h.firstChild):g.innerHTML=""+d;var i={},j=a.childNodes(g);i.length=j.length;for(var k=0;k<j.length;k++)i[k]=j[k];return[].slice.call(i)};return a.buildFragment=function(a,b){if(a&&11===a.nodeType)return a;b?b.length&&(b=b[0]):b=document;for(var c=d(a,void 0,b),e=(b||document).createDocumentFragment(),f=0,g=c.length;g>f;f++)e.appendChild(c[f]);return e},function(){var b="<-\n>",c=a.buildFragment(b,document);if(b!==c.firstChild.nodeValue){var d=a.buildFragment;a.buildFragment=function(a,b){var c=d(a,b);return 1===c.childNodes.length&&3===c.childNodes[0].nodeType&&(c.childNodes[0].nodeValue=a),c}}}(),a}),swifty.define("can/util/isArrayLike",["can/util/can"],function(a){a.isArrayLike=function(a){var b=a&&"boolean"!=typeof a&&"number"!=typeof a&&"length"in a&&a.length;return"function"!=typeof arr&&(0===b||"number"==typeof b&&b>0&&b-1 in a)}}),swifty.define("can/util/each",["can/util/can","can/util/isArrayLike"],function(a){return a.each=function(b,c,d){var e,f,g,h=0;if(b)if(a.isArrayLike(b))if(a.List&&b instanceof a.List)for(f=b.attr("length");f>h&&(g=b.attr(h),c.call(d||g,g,h,b)!==!1);h++);else for(f=b.length;f>h&&(g=b[h],c.call(d||g,g,h,b)!==!1);h++);else if("object"==typeof b)if(a.Map&&b instanceof a.Map||b===a.route){var i=a.Map.keys(b);for(h=0,f=i.length;f>h&&(e=i[h],g=b.attr(e),c.call(d||g,g,e,b)!==!1);h++);}else for(e in b)if(Object.prototype.hasOwnProperty.call(b,e)&&c.call(d||b[e],b[e],e,b)===!1)break;return b},a}),swifty.define("can/util/inserted",["can/util/can"],function(a){a.inserted=function(b,c){if(b.length){b=a.makeArray(b);for(var d,e,f=c||b[0].ownerDocument||b[0],g=!1,h=a.$(f.contains?f:f.body),i=0;void 0!==(e=b[i]);i++){if(!g){if(!e.getElementsByTagName)continue;if(!a.has(h,e).length)return;g=!0}if(g&&e.getElementsByTagName){d=a.makeArray(e.getElementsByTagName("*")),a.trigger(e,"inserted",[],!1);for(var j,k=0;void 0!==(j=d[k]);k++)a.trigger(j,"inserted",[],!1)}}}},a.appendChild=function(b,c,d){var e;e=11===c.nodeType?a.makeArray(a.childNodes(c)):[c],b.appendChild(c),a.inserted(e,d)},a.insertBefore=function(b,c,d,e){var f;f=11===c.nodeType?a.makeArray(a.childNodes(c)):[c],b.insertBefore(c,d),a.inserted(f,e)}}),swifty.define("can/util/jquery",["jquery","can/util/can","can/util/attr","can/event","can/fragment","can/util/each","can/util/inserted"],function(a,b,c){var d=function(a){return a.nodeName&&(1===a.nodeType||9===a.nodeType)||a==window||a.addEventListener};a=a||window.jQuery,a.extend(b,a,{trigger:function(c,e,f,g){d(c)?a.event.trigger(e,f,c,!g):c.trigger?c.trigger(e,f):("string"==typeof e&&(e={type:e}),e.target=e.target||c,f&&(f.length&&"string"==typeof f?f=[f]:f.length||(f=[f])),f||(f=[]),b.dispatch.call(c,e,f))},event:b.event,addEvent:b.addEvent,removeEvent:b.removeEvent,buildFragment:b.buildFragment,$:a,each:b.each,bind:function(c,e){return this.bind&&this.bind!==b.bind?this.bind(c,e):d(this)?a.event.add(this,c,e):b.addEvent.call(this,c,e),this},unbind:function(c,e){return this.unbind&&this.unbind!==b.unbind?this.unbind(c,e):d(this)?a.event.remove(this,c,e):b.removeEvent.call(this,c,e),this},delegate:function(c,e,f){return this.delegate?this.delegate(c,e,f):d(this)?a(this).delegate(c,e,f):b.bind.call(this,e,f),this},undelegate:function(c,e,f){return this.undelegate?this.undelegate(c,e,f):d(this)?a(this).undelegate(c,e,f):b.unbind.call(this,e,f),this},proxy:b.proxy,attr:c}),b.on=b.bind,b.off=b.unbind,a.each(["append","filter","addClass","remove","data","get","has"],function(a,c){b[c]=function(a){return a[c].apply(a,b.makeArray(arguments).slice(1))}});var e=a.cleanData;a.cleanData=function(c){a.each(c,function(a,c){c&&b.trigger(c,"removed",[],!1)}),e(c)};var f,g=a.fn.domManip;a.fn.domManip=function(){for(var a=1;a<arguments.length;a++)if("function"==typeof arguments[a]){f=a;break}return g.apply(this,arguments)},a(document.createElement("div")).append(document.createElement("div"));var h=function(a){var c=a.childNodes;if("length"in c)return b.makeArray(c);for(var d=a.firstChild,e=[];d;)e.push(d),d=d.nextSibling;return e};void 0===f?(a.fn.domManip=g,b.each(["after","prepend","before","append","replaceWith"],function(c){var d=a.fn[c];a.fn[c]=function(){var a=[],c=b.makeArray(arguments);null!=c[0]&&("string"==typeof c[0]&&(c[0]=b.buildFragment(c[0])),a=11===c[0].nodeType?h(c[0]):b.isArrayLike(c[0])?b.makeArray(c[0]):[c[0]]);var e=d.apply(this,c);return b.inserted(a),e}})):a.fn.domManip=2===f?function(a,c,d){return g.call(this,a,c,function(a){var c;11===a.nodeType&&(c=b.makeArray(b.childNodes(a)));var e=d.apply(this,arguments);return b.inserted(c?c:[a]),e})}:function(a,c){return g.call(this,a,function(a){var d;11===a.nodeType&&(d=b.makeArray(b.childNodes(a)));var e=c.apply(this,arguments);return b.inserted(d?d:[a]),e})};var i=a.attr;a.attr=function(a,c){if(b.isDOM(a)&&b.attr.MutationObserver)return i.apply(this,arguments);var d,e;arguments.length>=3&&(d=i.call(this,a,c));var f=i.apply(this,arguments);return arguments.length>=3&&(e=i.call(this,a,c)),e!==d&&b.attr.trigger(a,c,d),f};var j=a.removeAttr;return a.removeAttr=function(a,c){if(b.isDOM(a)&&b.attr.MutationObserver)return j.apply(this,arguments);var d=i.call(this,a,c),e=j.apply(this,arguments);return null!=d&&b.attr.trigger(a,c,d),e},a.event.special.attributes={setup:function(){if(b.isDOM(this)&&b.attr.MutationObserver){var a=this,c=new b.attr.MutationObserver(function(c){c.forEach(function(c){var d=b.simpleExtend({},c);b.trigger(a,d,[])})});c.observe(this,{attributes:!0,attributeOldValue:!0}),b.data(b.$(this),"canAttributesObserver",c)}else b.data(b.$(this),"canHasAttributesBindings",!0)},teardown:function(){b.isDOM(this)&&b.attr.MutationObserver?(b.data(b.$(this),"canAttributesObserver").disconnect(),a.removeData(this,"canAttributesObserver")):a.removeData(this,"canHasAttributesBindings")}},a.event.special.inserted={},a.event.special.removed={},b}),swifty.define("can/util/library",["can/util/jquery"],function(a){return a}),swifty.define("can/util/bind",["can/util/library"],function(a){return a.bindAndSetup=function(){return a.addEvent.apply(this,arguments),this.__inSetup||(this._bindings?this._bindings++:(this._bindings=1,this._bindsetup&&this._bindsetup())),this},a.unbindAndTeardown=function(b){if(!this.__bindEvents)return this;var c=this.__bindEvents[b]||[],d=c.length;return a.removeEvent.apply(this,arguments),this._bindings=null===this._bindings?0:this._bindings-(d-c.length),!this._bindings&&this._bindteardown&&this._bindteardown(),this},a}),swifty.define("can/bubble",["can/util/library"],function(a){var b=a.bubble={bind:function(a,c){if(!a.__inSetup){var d,e=b.events(a,c),f=e.length;a._bubbleBindings||(a._bubbleBindings={});for(var g=0;f>g;g++)d=e[g],a._bubbleBindings[d]?a._bubbleBindings[d]++:(a._bubbleBindings[d]=1,b.childrenOf(a,d))}},unbind:function(c,d){for(var e,f=b.events(c,d),g=f.length,h=0;g>h;h++)e=f[h],c._bubbleBindings&&c._bubbleBindings[e]--,c._bubbleBindings&&!c._bubbleBindings[e]&&(delete c._bubbleBindings[e],b.teardownChildrenFrom(c,e),a.isEmptyObject(c._bubbleBindings)&&delete c._bubbleBindings)},add:function(c,d,e){if(d instanceof a.Map&&c._bubbleBindings)for(var f in c._bubbleBindings)c._bubbleBindings[f]&&(b.teardownFromParent(c,d,f),b.toParent(d,c,e,f))},addMany:function(a,c){for(var d=0,e=c.length;e>d;d++)b.add(a,c[d],d)},remove:function(c,d){if(d instanceof a.Map&&c._bubbleBindings)for(var e in c._bubbleBindings)c._bubbleBindings[e]&&b.teardownFromParent(c,d,e)
},removeMany:function(a,c){for(var d=0,e=c.length;e>d;d++)b.remove(a,c[d])},set:function(c,d,e,f){return a.isMapLike(e)&&b.add(c,e,d),a.isMapLike(f)&&b.remove(c,f),e},events:function(a,b){return a.constructor._bubbleRule(b,a)},toParent:function(b,c,d,e){a.listenTo.call(c,b,e,function(){var f=a.makeArray(arguments),g=f.shift();f[0]=(a.List&&c instanceof a.List?c.indexOf(b):d)+(f[0]?"."+f[0]:""),g.triggeredNS=g.triggeredNS||{},g.triggeredNS[c._cid]||(g.triggeredNS[c._cid]=!0,a.trigger(c,g,f),"change"===e&&a.trigger(c,f[0],[f[2],f[3]]))})},childrenOf:function(a,c){a._each(function(d,e){d&&d.bind&&b.toParent(d,a,e,c)})},teardownFromParent:function(b,c,d){c&&c.unbind&&a.stopListening.call(b,c,d)},teardownChildrenFrom:function(a,c){a._each(function(d){b.teardownFromParent(a,d,c)})},isBubbling:function(a,b){return a._bubbleBindings&&a._bubbleBindings[b]}};return b}),swifty.define("can/util/object/isplain",["can/util/can"],function(a){var b=Object.prototype.hasOwnProperty,c=function(a){return null!==a&&a==a.window},d=function(a){if(!a||"object"!=typeof a||a.nodeType||c(a))return!1;try{if(a.constructor&&!b.call(a,"constructor")&&!b.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(d){return!1}var e;for(e in a);return void 0===e||b.call(a,e)};return a.isPlainObject=d,a}),swifty.define("can/map_helpers",["can/util/library","can/util/object/isplain"],function(a){var b={attrParts:function(a,b){return b?[a]:"object"==typeof a?a:(""+a).split(".")},canMakeObserve:function(b){return b&&!a.isDeferred(b)&&(a.isArray(b)||a.isPlainObject(b))},serialize:function(){var c=null;return function(d,e,f){var g=a.cid(d),h=!1;return c||(h=!0,c={attr:{},serialize:{}}),c[e][g]=f,d.each(function(g,h){var i,j=a.isMapLike(g),k=j&&c[e][a.cid(g)];i=k?k:d["___"+e]?d["___"+e](h,g):b.getValue(d,h,g,e),void 0!==i&&(f[h]=i)}),h&&(c=null),f}}(),getValue:function(b,c,d,e){return a.isMapLike(d)?d[e]():d},define:null,addComputedAttr:function(a,b,c){a._computedAttrs[b]={compute:c,count:0,handler:function(c,d,e){a._triggerChange(b,"set",d,e,c.batchNum)}}},addToMap:function(b,e){var f;c||(f=d,c={});var g=b._cid,h=a.cid(b);return c[h]||(c[h]={obj:b,instance:e,added:!g}),f},getMapFromObject:function(a){return c&&c[a._cid]&&c[a._cid].instance}},c=null,d=function(){for(var a in c)c[a].added&&delete c[a].obj._cid;c=null};return b}),swifty.define("can/util/string",["can/util/library"],function(a){var b=/_|-/,c=/\=\=/,d=/([A-Z]+)([A-Z][a-z])/g,e=/([a-z\d])([A-Z])/g,f=/([a-z\d])([A-Z])/g,g=/\{([^\}]+)\}/g,h=/"/g,i=/'/g,j=/-+(.)?/g,k=/[a-z][A-Z]/g,l=function(a,b,c){var d=a[b];return void 0===d&&c===!0&&(d=a[b]={}),d},m=function(a){return/^f|^o/.test(typeof a)},n=function(a){var b=null===a||void 0===a||isNaN(a)&&""+a=="NaN";return""+(b?"":a)};return a.extend(a,{esc:function(a){return n(a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(h,"&#34;").replace(i,"&#39;")},getObject:function(b,c,d){var e,f,g,h,i=b?b.split("."):[],j=i.length,k=0;if(c=a.isArray(c)?c:[c||window],h=c.length,!j)return c[0];for(k;h>k;k++){for(e=c[k],g=void 0,f=0;j>f&&m(e);f++)g=e,e=l(g,i[f]);if(void 0!==g&&void 0!==e)break}if(d===!1&&void 0!==e&&delete g[i[f-1]],d===!0&&void 0===e)for(e=c[0],f=0;j>f&&m(e);f++)e=l(e,i[f],!0);return e},capitalize:function(a){return a.charAt(0).toUpperCase()+a.slice(1)},camelize:function(a){return n(a).replace(j,function(a,b){return b?b.toUpperCase():""})},hyphenate:function(a){return n(a).replace(k,function(a){return a.charAt(0)+"-"+a.charAt(1).toLowerCase()})},underscore:function(a){return a.replace(c,"/").replace(d,"$1_$2").replace(e,"$1_$2").replace(f,"_").toLowerCase()},sub:function(b,c,d){var e=[];return b=b||"",e.push(b.replace(g,function(b,f){var g=a.getObject(f,c,d===!0?!1:void 0);return void 0===g||null===g?(e=null,""):m(g)&&e?(e.push(g),""):""+g})),null===e?e:e.length<=1?e[0]:e},replacer:g,undHash:b}),a}),swifty.define("can/construct",["can/util/string"],function(a){var b,c=0;try{Object.getOwnPropertyDescriptor({}),b=!0}catch(d){b=!1}var e=function(a,b){var c=Object.getOwnPropertyDescriptor(a,b);return c&&(c.get||c.set)?c:null},f=function(b,c,d){d=d||b;var f;for(var g in b)(f=e(b,g))?this._defineProperty(d,c,g,f):a.Construct._overwrite(d,c,g,b[g])},g=function(b,c,d){d=d||b;for(var e in b)a.Construct._overwrite(d,c,e,b[e])};return a.Construct=function(){return arguments.length?a.Construct.extend.apply(a.Construct,arguments):void 0},a.extend(a.Construct,{constructorExtends:!0,newInstance:function(){var a,b=this.instance();return b.setup&&(b.__inSetup=!0,a=b.setup.apply(b,arguments),delete b.__inSetup),b.init&&b.init.apply(b,a||arguments),b},_inherit:b?f:g,_defineProperty:function(a,b,c,d){Object.defineProperty(a,c,d)},_overwrite:function(a,b,c,d){a[c]=d},setup:function(b){this.defaults=a.extend(!0,{},b.defaults,this.defaults)},instance:function(){c=1;var a=new this;return c=0,a},extend:function(b,d,e){function f(){return c?void 0:this.constructor!==j&&arguments.length&&j.constructorExtends?j.extend.apply(j,arguments):j.newInstance.apply(j,arguments)}var g=b,h=d,i=e;"string"!=typeof g&&(i=h,h=g,g=null),i||(i=h,h=null),i=i||{};var j,k,l,m,n,o,p,q,r,s=this,t=this.prototype;r=this.instance(),a.Construct._inherit(i,t,r),g?(k=g.split("."),p=k.pop()):h&&h.shortName?p=h.shortName:this.shortName&&(p=this.shortName),"undefined"==typeof constructorName&&(j=function(){return f.apply(this,arguments)});for(o in s)s.hasOwnProperty(o)&&(j[o]=s[o]);a.Construct._inherit(h,s,j),g&&(l=a.getObject(k.join("."),window,!0),q=l,m=a.underscore(g.replace(/\./g,"_")),n=a.underscore(p),l[p]=j),a.extend(j,{constructor:j,prototype:r,namespace:q,_shortName:n,fullName:g,_fullName:m}),void 0!==p&&(j.shortName=p),j.prototype.constructor=j;var u=[s].concat(a.makeArray(arguments)),v=j.setup.apply(j,u);return j.init&&j.init.apply(j,v||u),j}}),a.Construct.prototype.setup=function(){},a.Construct.prototype.init=function(){},a.Construct}),swifty.define("can/util/batch",["can/util/can"],function(a){var b=1,c=0,d=null,e=null,f=[],g=!1;a.batch={start:function(a){if(c++,1===c){var d={events:[],callbacks:[],number:b++};f.push(d),a&&d.callbacks.push(a),e=d}},stop:function(b,h){if(b?c=0:c--,0===c){e=null;var i;if(g===!1){g=!0;for(var j,k=[];i=f.shift();){var l=i.events;k.push.apply(k,i.callbacks),d=i,a.batch.batchNum=i.number;var m;for(h&&a.batch.start(),j=0,m=l.length;m>j;j++)a.dispatch.apply(l[j][0],l[j][1]);a.batch._onDispatchedEvents(i.number),d=null,a.batch.batchNum=void 0}for(j=k.length-1;j>=0;j--)k[j]();g=!1}}},_onDispatchedEvents:function(){},trigger:function(b,c,d){b.__inSetup||(c="string"==typeof c?{type:c}:c,e?(c.batchNum=e.number,e.events.push([b,[c,d]])):c.batchNum?a.dispatch.call(b,c,d):f.length?(a.batch.start(),c.batchNum=e.number,e.events.push([b,[c,d]]),a.batch.stop()):a.dispatch.call(b,c,d))},afterPreviousEvents:function(b){var c=a.last(f);if(c){var d={};a.bind.call(d,"ready",b),c.events.push([d,[{type:"ready"},[]]])}else b({})},after:function(a){var b=e||d;b?b.callbacks.push(a):a({})}}}),swifty.define("can/get_value_and_bind",["can/util/library"],function(a){function b(b,c,d){this.newObserved={},this.oldObserved=null,this.func=b,this.context=c,this.compute=d,this.onDependencyChange=a.proxy(this.onDependencyChange,this),this.depth=null,this.childDepths={},this.ignore=0,this.inBatch=!1,this.ready=!1,d.observedInfo=this,this.setReady=a.proxy(this._setReady,this)}a.simpleExtend(b.prototype,{getPrimaryDepth:function(){return this.compute._primaryDepth},_setReady:function(){this.ready=!0},getDepth:function(){return null!==this.depth?this.depth:this.depth=this._getDepth()},_getDepth:function(){var a=0,b=this.childDepths;for(var c in b)b[c]>a&&(a=b[c]);return a+1},addEdge:function(a){a.obj.bind(a.event,this.onDependencyChange),a.obj.observedInfo&&(this.childDepths[a.obj._cid]=a.obj.observedInfo.getDepth(),this.depth=null)},removeEdge:function(a){a.obj.unbind(a.event,this.onDependencyChange),a.obj.observedInfo&&(delete this.childDepths[a.obj._cid],this.depth=null)},dependencyChange:function(a){this.bound&&this.ready&&(void 0!==a.batchNum?a.batchNum!==this.batchNum&&(b.registerUpdate(this),this.batchNum=a.batchNum):this.updateCompute(a.batchNum))},onDependencyChange:function(a,b,c){this.dependencyChange(a,b,c)},updateCompute:function(a){if(this.bound){var b=this.value;this.getValueAndBind(),this.compute.updater(this.value,b,a)}},getValueAndBind:function(){this.bound=!0,this.oldObserved=this.newObserved||{},this.ignore=0,this.newObserved={},this.ready=!1,f.push(this),this.value=this.func.call(this.context),f.pop(),this.updateBindings(),a.batch.afterPreviousEvents(this.setReady)},updateBindings:function(){var a,b,c=this.newObserved,d=this.oldObserved;for(a in c)b=c[a],d[a]?d[a]=null:this.addEdge(b);for(a in d)b=d[a],b&&this.removeEdge(b)},teardown:function(){this.bound=!1;for(var a in this.newObserved){var b=this.newObserved[a];this.removeEdge(b)}this.newObserved={}}});var c=[],d=1/0,e=0;b.registerUpdate=function(a){var b=a.getDepth()-1,f=a.getPrimaryDepth();d=Math.min(f,d),e=Math.max(f,e);var g=c[f]||(c[f]={observeInfos:[],current:1/0,max:0}),h=g.observeInfos[b]||(g.observeInfos[b]=[]);h.push(a),g.current=Math.min(b,g.current),g.max=Math.max(b,g.max)},b.batchEnd=function(a){for(var b;;){if(!(e>=d))return c=[],d=1/0,void(e=0);var f=c[d];if(f&&f.current<=f.max){var g=f.observeInfos[f.current];g&&(b=g.pop())?b.updateCompute(a):f.current++}else d++}};var f=[];return a.__observe=function(a,b){var c=f[f.length-1];if(c&&!c.ignore){var d=b+"",e=a._cid+"|"+d;c.traps?c.traps.push({obj:a,event:d,name:e}):c.newObserved[e]||(c.newObserved[e]={obj:a,event:d})}},a.__reading=a.__observe,a.__trapObserves=function(){if(f.length){var a=f[f.length-1],b=a.traps=[];return function(){return a.traps=null,b}}return function(){return[]}},a.__observes=function(a){var b=f[f.length-1];if(b)for(var c=0,d=a.length;d>c;c++){var e=a[c],g=e.name;b.newObserved[g]||(b.newObserved[g]=e)}},a.__isRecordingObserves=function(){var a=f.length;return a&&0===f[a-1].ignore},a.__notObserve=function(a){return function(){if(f.length){var b=f[f.length-1];b.ignore++;var c=a.apply(this,arguments);return b.ignore--,c}return a.apply(this,arguments)}},a.batch._onDispatchedEvents=b.batchEnd,b}),swifty.define("can/map",["can/util/library","can/util/bind","can/bubble","can/map_helpers","can/construct","can/util/batch","can/get_value_and_bind"],function(a,b,c,d){var e={constructor:!0},f=a.Map=a.Construct.extend({setup:function(){if(a.Construct.setup.apply(this,arguments),this._computedPropertyNames=[],a.Map){this.defaults||(this.defaults={});for(var b in this.prototype)"define"!==b&&"constructor"!==b&&("function"!=typeof this.prototype[b]||this.prototype[b].prototype instanceof a.Construct)?this.defaults[b]=this.prototype[b]:this.prototype[b].isComputed&&this._computedPropertyNames.push(b);d.define&&d.define(this)}!a.List||this.prototype instanceof a.List||(this.List=f.List.extend({Map:this},{}))},shortName:"Map",_bubbleRule:function(a){return"change"===a||a.indexOf(".")>=0?["change"]:[]},bind:a.bindAndSetup,unbind:a.unbindAndTeardown,id:"id",keys:function(b){var c=[];a.__observe(b,"__keys");for(var d in b._data)c.push(d);return c}},{setup:function(b){b instanceof a.Map&&(b=b.serialize()),this._data={},a.cid(this,".map"),this._setupComputedProperties();var c=b&&d.addToMap(b,this),e=this._setupDefaults(b),f=a.extend(a.extend(!0,{},e),b);this.attr(f),c&&c()},_setupComputedProperties:function(){this._computedAttrs={};for(var a=this.constructor._computedPropertyNames,b=0,c=a.length;c>b;b++){var e=a[b];d.addComputedAttr(this,e,this[e].clone(this))}},_setupDefaults:function(){return this.constructor.defaults||{}},attr:function(a,b){var c=typeof a;return void 0===a?this._getAttrs():"string"!==c&&"number"!==c?this._setAttrs(a,b):1===arguments.length?this._get(a+""):(this._set(a+"",b),this)},_get:function(b){var c=b.indexOf(".");if(c>=0){var d=this.___get(b);if(void 0!==d)return a.__observe(this,b),d;var e=b.substr(0,c),f=b.substr(c+1),g=this.__get(e);return g&&g._get?g._get(f):void 0}return this.__get(b)},__get:function(b){return e[b]||this._computedAttrs[b]||a.__observe(this,b),this.___get(b)},___get:function(a){if(void 0!==a){var b=this._computedAttrs[a];return b&&b.compute?b.compute():this._data.hasOwnProperty(a)?this._data[a]:void 0}return this._data},_set:function(b,c,d){var e,f=b.indexOf(".");if(f>=0&&!d){var g=b.substr(0,f),h=b.substr(f+1);if(e=this.__inSetup?void 0:this.___get(g),!a.isMapLike(e))throw new Error("can.Map: Object does not exist");e._set(h,c)}else e=this.__inSetup?void 0:this.___get(b),this.__convert&&(c=this.__convert(b,c)),this.__set(b,this.__type(c,b),e)},__type:function(b){if("object"==typeof b&&!(b instanceof a.Map)&&d.canMakeObserve(b)){var c=d.getMapFromObject(b);if(c)return c;if(a.isArray(b)){var e=a.List;return new e(b)}var f=this.constructor.Map||a.Map;return new f(b)}return b},__set:function(a,b,d){if(b!==d){var e=this._computedAttrs[a],f=e||void 0!==d||this.___get().hasOwnProperty(a)?"set":"add";this.___set(a,"object"==typeof b?c.set(this,a,b,d):b),e&&e.count||this._triggerChange(a,f,b,d),"object"==typeof d&&c.teardownFromParent(this,d)}},___set:function(a,b){var c=this._computedAttrs[a];c?c.compute(b):this._data[a]=b,"function"==typeof this.constructor.prototype[a]||c||(this[a]=b)},removeAttr:function(a){return this._remove(a)},_remove:function(a){var b=d.attrParts(a),c=b.shift(),e=this.___get(c);return b.length&&e?e.removeAttr(b):("string"==typeof a&&~a.indexOf(".")&&(c=a),this.__remove(c,e),e)},__remove:function(a,b){a in this._data&&(this.___remove(a),this._triggerChange(a,"remove",void 0,b))},___remove:function(a){delete this._data[a],a in this.constructor.prototype||delete this[a]},___serialize:function(a,b){return d.getValue(this,a,b,"serialize")},_getAttrs:function(){return d.serialize(this,"attr",{})},_setAttrs:function(b,c){b=a.simpleExtend({},b);var e,f,g=this;a.batch.start(),this._each(function(e,h){if("_cid"!==h){if(f=b[h],void 0===f)return void(c&&g.removeAttr(h));g.__convert&&(f=g.__convert(h,f)),a.isMapLike(e)&&d.canMakeObserve(f)?e.attr(f,c):e!==f&&g.__set(h,g.__type(f,h),e),delete b[h]}});for(e in b)"_cid"!==e&&(f=b[e],this._set(e,f,!0));return a.batch.stop(),this},serialize:function(){return d.serialize(this,"serialize",{})},_triggerChange:function(b,d,e,f,g){c.isBubbling(this,"change")&&a.batch.trigger(this,{type:"change",target:this,batchNum:g},[b,d,e,f]),a.batch.trigger(this,{type:b,target:this,batchNum:g},[e,f]),("remove"===d||"add"===d)&&a.batch.trigger(this,{type:"__keys",target:this,batchNum:g})},_bindsetup:function(){},_bindteardown:function(){},one:a.one,bind:function(b){var d=this._computedAttrs&&this._computedAttrs[b];return d&&d.compute&&(d.count?d.count++:(d.count=1,d.compute.bind("change",d.handler))),c.bind(this,b),a.bindAndSetup.apply(this,arguments)},unbind:function(b){var d=this._computedAttrs&&this._computedAttrs[b];return d&&(1===d.count?(d.count=0,d.compute.unbind("change",d.handler)):d.count--),c.unbind(this,b),a.unbindAndTeardown.apply(this,arguments)},compute:function(b){if(a.isFunction(this.constructor.prototype[b]))return a.compute(this[b],this);var c=a.compute.read.reads(b),d=c.length-1;return a.compute(function(b){return arguments.length?void a.compute.read(this,c.slice(0,d)).value.attr(c[d].key,b):a.compute.read(this,c,{args:[]}).value},this)},each:function(){return a.each.apply(void 0,[this].concat(a.makeArray(arguments)))},_each:function(a){var b=this.___get();for(var c in b)b.hasOwnProperty(c)&&a(b[c],c)},dispatch:a.dispatch});return f.prototype.on=f.prototype.bind,f.prototype.off=f.prototype.unbind,f.on=f.bind,f.off=f.unbind,f}),swifty.define("can/list",["can/util/library","can/map","can/bubble","can/map_helpers"],function(a,b,c,d){var e=[].splice,f=function(){var a={0:"a",length:1};return e.call(a,0,1),!a[0]}(),g=b.extend({Map:b},{setup:function(b,c){this.length=0,a.cid(this,".map"),this._setupComputedProperties(),b=b||[];var e;a.isDeferred(b)?this.replace(b):(e=b.length&&d.addToMap(b,this),this.push.apply(this,a.makeArray(b||[]))),e&&e(),a.simpleExtend(this,c)},_triggerChange:function(c,d,e,f){b.prototype._triggerChange.apply(this,arguments);var g=+c;~(""+c).indexOf(".")||isNaN(g)||("add"===d?(a.batch.trigger(this,d,[e,g]),a.batch.trigger(this,"length",[this.length])):"remove"===d?(a.batch.trigger(this,d,[f,g]),a.batch.trigger(this,"length",[this.length])):a.batch.trigger(this,d,[e,g]))},___get:function(a){if(a){var b=this._computedAttrs[a];return b&&b.compute?b.compute():this[a]}return this},__set:function(b,c,d){if(b=isNaN(+b)||b%1?b:+b,"number"==typeof b&&b>this.length-1){var e=new Array(b+1-this.length);return e[e.length-1]=c,this.push.apply(this,e),e}return a.Map.prototype.__set.call(this,""+b,c,d)},___set:function(a,b){this[a]=b,+a>=this.length&&(this.length=+a+1)},__remove:function(a,b){isNaN(+a)?(delete this[a],this._triggerChange(a,"remove",void 0,b)):this.splice(a,1)},_each:function(a){for(var b=this.___get(),c=0;c<b.length;c++)a(b[c],c)},serialize:function(){return d.serialize(this,"serialize",[])},splice:function(b,d){var g,h,i,j=a.makeArray(arguments),k=[],l=j.length>2;for(b=b||0,g=0,h=j.length-2;h>g;g++)i=g+2,j[i]=this.__type(j[i],i),k.push(j[i]),this[g+b]!==j[i]&&(l=!1);if(l&&this.length<=k.length)return k;void 0===d&&(d=j[1]=this.length-b);var m=e.apply(this,j);if(!f)for(g=this.length;g<m.length+this.length;g++)delete this[g];return a.batch.start(),d>0&&(c.removeMany(this,m),this._triggerChange(""+b,"remove",void 0,m)),j.length>2&&(c.addMany(this,k),this._triggerChange(""+b,"add",k,m)),a.batch.stop(),m},_getAttrs:function(){return d.serialize(this,"attr",[])},_setAttrs:function(b,c){b=a.makeArray(b),a.batch.start(),this._updateAttrs(b,c),a.batch.stop()},_updateAttrs:function(b,c){for(var e=Math.min(b.length,this.length),f=0;e>f;f++){var g=this[f],h=b[f];a.isMapLike(g)&&d.canMakeObserve(h)?g.attr(h,c):g!==h&&this._set(f+"",h)}b.length>this.length?this.push.apply(this,b.slice(this.length)):b.length<this.length&&c&&this.splice(b.length)}}),h=function(b){return b[0]&&a.isArray(b[0])?b[0]:a.makeArray(b)};return a.each({push:"length",unshift:0},function(b,d){var e=[][d];g.prototype[d]=function(){a.batch.start();for(var d,f,g=[],h=b?this.length:0,i=arguments.length;i--;)f=arguments[i],g[i]=c.set(this,i,this.__type(f,i));return d=e.apply(this,g),(!this.comparator||g.length)&&this._triggerChange(""+h,"add",g,void 0),a.batch.stop(),d}}),a.each({pop:"length",shift:0},function(b,d){g.prototype[d]=function(){if(!this.length)return void 0;var e=h(arguments),f=b&&this.length?this.length-1:0,g=[][d].apply(this,e);return a.batch.start(),this._triggerChange(""+f,"remove",void 0,[g]),g&&g.unbind&&c.remove(this,g),a.batch.stop(),g}}),a.extend(g.prototype,{indexOf:function(b,c){return a.__observe(this,"length"),a.inArray(b,this,c)},join:function(){return a.__observe(this,"length"),[].join.apply(this,arguments)},reverse:function(){var b=[].reverse.call(a.makeArray(this));return this.replace(b)},slice:function(){a.__observe(this,"length");var b=Array.prototype.slice.apply(this,arguments);return new this.constructor(b)},concat:function(){var b=[];return a.each(a.makeArray(arguments),function(c,d){b[d]=c instanceof a.List?c.serialize():c}),new this.constructor(Array.prototype.concat.apply(this.serialize(),b))},forEach:function(b,c){return a.each(this,b,c||this)},replace:function(b){if(a.isDeferred(b)){this._promise&&(this._promise.__isCurrentPromise=!1);var c=this._promise=b;c.__isCurrentPromise=!0;var d=this;b.then(function(a){c.__isCurrentPromise&&d.replace(a)})}else this.splice.apply(this,[0,this.length].concat(a.makeArray(b||[])));return this},filter:function(a,b){var c,d=new this.constructor,e=this;return this.each(function(f,g){c=a.call(b|e,f,g,e),c&&d.push(f)}),d},map:function(b,c){var d=new a.List,e=this;return this.each(function(a,f){var g=b.call(c|e,a,f,e);d.push(g)}),d}}),a.List=b.List=g,a.List}),swifty.define("can/util/string/deparam",["can/util/library","can/util/string"],function(a){var b=/^\d+$/,c=/([^\[\]]+)|(\[\])/g,d=/([^?#]*)(#.*)?$/,e=function(a){return decodeURIComponent(a.replace(/\+/g," "))};return a.extend(a,{deparam:function(f){var g,h,i={};return f&&d.test(f)&&(g=f.split("&"),a.each(g,function(a){var d=a.split("="),f=e(d.shift()),g=e(d.join("=")),j=i;if(f){d=f.match(c);for(var k=0,l=d.length-1;l>k;k++)j[d[k]]||(j[d[k]]=b.test(d[k+1])||"[]"===d[k+1]?[]:{}),j=j[d[k]];h=d.pop(),"[]"===h?j.push(g):j[h]=g}})),i}}),a}),swifty.define("can/route",["can/util/library","can/map","can/list","can/util/string/deparam"],function(a){var b,c,d,e,f=/\:([\w\.]+)/g,g=/^(?:&[^=]+=[^&]*)+/,h=function(b){var c=[];return a.each(b,function(b,d){c.push(("className"===d?"class":d)+'="'+("href"===d?b:a.esc(b))+'"')}),c.join(" ")},i=function(a,b){var c=0,d=0,e={};for(var f in a.defaults)a.defaults[f]===b[f]&&(e[f]=1,c++);for(;d<a.names.length;d++){if(!b.hasOwnProperty(a.names[d]))return-1;e[a.names[d]]||c++}return c},j=window.location,k=function(a){return(a+"").replace(/([.?*+\^$\[\]\\(){}|\-])/g,"\\$1")},l=a.each,m=a.extend,n=function(b){return b&&"object"==typeof b?(b=b instanceof a.Map?b:a.isFunction(b.slice)?b.slice():a.extend({},b),a.each(b,function(a,c){b[c]=n(a)})):void 0!==b&&null!==b&&a.isFunction(b.toString)&&(b=b.toString()),b},o=function(a){return a.replace(/\\/g,"")},p=[],q=function(c,f){e=1,p.push(f),clearTimeout(b),b=setTimeout(function(){e=0;var b=a.route.data.serialize(),c=a.route.param(b,!0);a.route._call("setURL",c,p),a.batch.trigger(r,"__url",[c,d]),d=c,p=[]},10)},r=a.extend({},a.event),s=function(a){var b=a.attr;return a.attr=function(a){var c,d=void 0===this.define||void 0===this.define[a]||!!this.define[a].serialize;return c=d?n(Array.apply(null,arguments)):arguments,b.apply(this,c)},a};a.route=function(b,c){var d=a.route._call("root");d.lastIndexOf("/")===d.length-1&&0===b.indexOf("/")&&(b=b.substr(1)),c=c||{};for(var e,g,h=[],i="",j=f.lastIndex=0,l=a.route._call("querySeparator"),m=a.route._call("matchSlashes");e=f.exec(b);)h.push(e[1]),i+=o(b.substring(j,f.lastIndex-e[0].length)),g="\\"+(o(b.substr(f.lastIndex,1))||l+(m?"":"|/")),i+="([^"+g+"]"+(c[e[1]]?"*":"+")+")",j=f.lastIndex;return i+=b.substr(j).replace("\\",""),a.route.routes[b]={test:new RegExp("^"+i+"($|"+k(l)+")"),route:b,names:h,defaults:c,length:b.split("/").length},a.route},m(a.route,{param:function(b,c){var d,e,g=0,h=b.route,j=0;if(delete b.route,l(b,function(){j++}),l(a.route.routes,function(a){return e=i(a,b),e>g&&(d=a,g=e),e>=j?!1:void 0}),a.route.routes[h]&&i(a.route.routes[h],b)===g&&(d=a.route.routes[h]),d){var k,n=m({},b),o=d.route.replace(f,function(a,c){return delete n[c],b[c]===d.defaults[c]?"":encodeURIComponent(b[c])}).replace("\\","");return l(d.defaults,function(a,b){n[b]===a&&delete n[b]}),k=a.param(n),c&&a.route.attr("route",d.route),o+(k?a.route._call("querySeparator")+k:"")}return a.isEmptyObject(b)?"":a.route._call("querySeparator")+a.param(b)},deparam:function(b){var c=a.route._call("root");c.lastIndexOf("/")===c.length-1&&0===b.indexOf("/")&&(b=b.substr(1));var d={length:-1},e=a.route._call("querySeparator"),f=a.route._call("paramsMatcher");if(l(a.route.routes,function(a){a.test.test(b)&&a.length>d.length&&(d=a)}),d.length>-1){var g=b.match(d.test),h=g.shift(),i=b.substr(h.length-(g[g.length-1]===e?1:0)),j=i&&f.test(i)?a.deparam(i.slice(1)):{};return j=m(!0,{},d.defaults,j),l(g,function(a,b){a&&a!==e&&(j[d.names[b]]=decodeURIComponent(a))}),j.route=d.route,j}return b.charAt(0)!==e&&(b=e+b),f.test(b)?a.deparam(b.slice(1)):{}},data:s(new a.Map({})),map:function(b){var c;c=b.prototype instanceof a.Map?new b:b,a.route.data=s(c)},routes:{},ready:function(b){return b!==!0&&(a.route._setup(),(a.isBrowserWindow||a.isWebWorker)&&a.route.setState()),a.route},url:function(b,c){return c&&(a.__observe(r,"__url"),b=a.extend({},a.route.deparam(a.route._call("matchingPartOfURL")),b)),a.route._call("root")+a.route.param(b)},link:function(b,c,d,e){return"<a "+h(m({href:a.route.url(c,e)},d))+">"+b+"</a>"},current:function(b){return a.__observe(r,"__url"),this._call("matchingPartOfURL")===a.route.param(b)},bindings:{hashchange:{paramsMatcher:g,querySeparator:"&",matchSlashes:!1,bind:function(){a.bind.call(window,"hashchange",t)},unbind:function(){a.unbind.call(window,"hashchange",t)},matchingPartOfURL:function(){var b=a.route.location||j;return b.href.split(/#!?/)[1]||""},setURL:function(a){return j.hash!=="#"+a&&(j.hash="!"+a),a},root:"#!"}},defaultBinding:"hashchange",currentBinding:null,_setup:function(){a.route.currentBinding||(a.route._call("bind"),a.route.bind("change",q),a.route.currentBinding=a.route.defaultBinding)},_teardown:function(){a.route.currentBinding&&(a.route._call("unbind"),a.route.unbind("change",q),a.route.currentBinding=null),clearTimeout(b),e=0},_call:function(){var b=a.makeArray(arguments),c=b.shift(),d=a.route.bindings[a.route.currentBinding||a.route.defaultBinding],e=d[c];return e.apply?e.apply(d,b):e}}),l(["bind","unbind","on","off","delegate","undelegate","removeAttr","compute","_get","___get","each"],function(b){a.route[b]=function(){return a.route.data[b]?a.route.data[b].apply(a.route.data,arguments):void 0}}),a.route.attr=function(){return a.route.data.attr.apply(a.route.data,arguments)},a.route.batch=a.batch;var t=a.route.setState=function(){var b=a.route._call("matchingPartOfURL"),f=c;c=a.route.deparam(b),e&&b===d||(a.route.batch.start(),u(f,c,a.route.data),a.route.attr(c),a.route.batch.trigger(r,"__url",[b,d]),a.route.batch.stop())},u=function(a,b,c){for(var d in a)void 0===b[d]?c.removeAttr(d):"[object Object]"===Object.prototype.toString.call(a[d])&&u(a[d],b[d],c.attr(d))};return a.route}),swifty.define("can/control",["can/util/library","can/construct"],function(a){var b,c=function(b,c,d){return a.bind.call(b,c,d),function(){a.unbind.call(b,c,d)}},d=a.isFunction,e=a.extend,f=a.each,g=[].slice,h=/\{([^\}]+)\}/g,i=a.getObject("$.event.special",[a])||{},j=function(b,c,d,e){return a.delegate.call(b,c,d,e),function(){a.undelegate.call(b,c,d,e)}},k=function(b,d,e,f){return f?j(b,a.trim(f),d,e):c(b,d,e)},l=a.Control=a.Construct({setup:function(){if(a.Construct.setup.apply(this,arguments),a.Control){var b,c=this;c.actions={};for(b in c.prototype)c._isAction(b)&&(c.actions[b]=c._action(b))}},_shifter:function(b,c){var e="string"==typeof c?b[c]:c;return d(e)||(e=b[e]),function(){return b.called=c,e.apply(b,[this.nodeName?a.$(this):this].concat(g.call(arguments,0)))}},_isAction:function(a){var b=this.prototype[a],c=typeof b;return"constructor"!==a&&("function"===c||"string"===c&&d(this.prototype[b]))&&!!(i[a]||m[a]||/[^\w]/.test(a))},_action:function(c,d){if(h.lastIndex=0,d||!h.test(c)){var e=d?a.sub(c,this._lookup(d)):c;if(!e)return null;var f=a.isArray(e),g=f?e[1]:e,i=g.split(/\s+/g),j=i.pop();return{processor:m[j]||b,parts:[g,i.join(" "),j],delegate:f?e[0]:void 0}}},_lookup:function(a){return[a,window]},processors:{},defaults:{}},{setup:function(b,c){var d,f=this.constructor,g=f.pluginName||f._fullName;return this.element=a.$(b),g&&"can_control"!==g&&this.element.addClass(g),d=a.data(this.element,"controls"),d||(d=[],a.data(this.element,"controls",d)),d.push(this),this.options=e({},f.defaults,c),this.on(),[this.element,this.options]},on:function(b,c,d,e){if(!b){this.off();var f,g,h=this.constructor,i=this._bindings,j=h.actions,l=this.element,m=a.Control._shifter(this,"destroy");for(f in j)j.hasOwnProperty(f)&&(g=j[f]||h._action(f,this.options,this),g&&(i.control[f]=g.processor(g.delegate||l,g.parts[2],g.parts[1],f,this)));return a.bind.call(l,"removed",m),i.user.push(function(b){a.unbind.call(b,"removed",m)}),i.user.length}return"string"==typeof b&&(e=d,d=c,c=b,b=this.element),void 0===e&&(e=d,d=c,c=null),"string"==typeof e&&(e=a.Control._shifter(this,e)),this._bindings.user.push(k(b,d,e,c)),this._bindings.user.length},off:function(){var a=this.element[0],b=this._bindings;b&&(f(b.user||[],function(b){b(a)}),f(b.control||{},function(b){b(a)})),this._bindings={user:[],control:{}}},destroy:function(){if(null!==this.element){var b,c=this.constructor,d=c.pluginName||c._fullName;this.off(),d&&"can_control"!==d&&this.element.removeClass(d),b=a.data(this.element,"controls"),b.splice(a.inArray(this,b),1),a.trigger(this,"destroyed"),this.element=null}}}),m=a.Control.processors;return b=function(b,c,d,e,f){return k(b,c,a.Control._shifter(f,e),d)},f(["change","click","contextmenu","dblclick","keydown","keyup","keypress","mousedown","mousemove","mouseout","mouseover","mouseup","reset","resize","scroll","select","submit","focusin","focusout","mouseenter","mouseleave","touchstart","touchmove","touchcancel","touchend","touchleave","inserted","removed","dragstart","dragenter","dragover","dragleave","drag","drop","dragend"],function(a){m[a]=b}),l}),swifty.define("can/control/route",["can/util/library","can/route","can/control"],function(a){return a.Control.processors.route=function(b,c,d,e,f){d=d||"",a.route.routes[d]||("/"===d[0]&&(d=d.substring(1)),a.route(d));var g,h=function(b){if(a.route.attr("route")===d&&(void 0===b.batchNum||b.batchNum!==g)){g=b.batchNum;var c=a.route.attr();delete c.route,a.isFunction(f[e])?f[e](c):f[f[e]](c)}};return a.route.bind("change",h),function(){a.route.unbind("change",h)}},a}),swifty.define("can/model",["can/util/library","can/map","can/list"],function(a){var b=function(b,c,d){var e=new a.Deferred;return b.then(function(){var b=a.makeArray(arguments),f=!0;try{b[0]=d.apply(c,b)}catch(g){f=!1,e.rejectWith(e,[g].concat(b))}f&&e.resolveWith(e,b)},function(){e.rejectWith(this,arguments)}),"function"==typeof b.abort&&(e.abort=function(){return b.abort()}),e},c=0,d=function(b){return a.__observe(b,b.constructor.id),b.___get(b.constructor.id)},e=function(b,c,d,e,f,g){var h={};if("string"==typeof b){var i=b.split(/\s+/);h.url=i.pop(),i.length&&(h.type=i.pop())}else a.extend(h,b);return h.data="object"!=typeof c||a.isArray(c)?c:a.extend(h.data||{},c),h.url=a.sub(h.url,h.data,!0),a.ajax(a.extend({type:d||"post",dataType:e||"json",success:f,error:g},h))},f=function(c,e,f,g,h){var i;a.isArray(c)?(i=c[1],c=c[0]):i=c.serialize(),i=[i];var j,k,l=c.constructor;return("update"===e||"destroy"===e)&&i.unshift(d(c)),k=l[e].apply(l,i),j=b(k,c,function(a){return c[h||e+"d"](a,k),c}),k.abort&&(j.abort=function(){k.abort()}),j.then(f,g),j},g={models:function(b,c,d){if(a.Model._reqs++,b){if(b instanceof this.List)return b;var e=this,f=[],g=e.List||o,h=c instanceof a.List?c:new g,i=b instanceof o,j=i?b.serialize():b;if(j=e.parseModels(j,d),j.data&&(b=j,j=j.data),"undefined"==typeof j||!a.isArray(j))throw new Error("Could not get any raw data while converting using .models");return h.length&&h.splice(0),a.each(j,function(a){f.push(e.model(a,d))}),h.push.apply(h,f),a.isArray(b)||a.each(b,function(a,b){"data"!==b&&h.attr(b,a)}),setTimeout(a.proxy(this._clean,this),1),h}},model:function(b,c,d){if(b){b="function"==typeof b.serialize?b.serialize():this.parseModel(b,d);var e=b[this.id];(e||0===e)&&this.store[e]&&(c=this.store[e]);var f=c&&a.isFunction(c.attr)?c.attr(b,this.removeAttr||!1):new this(b);return f}}},h={parseModel:function(b){return function(c){return b?a.getObject(b,c):c}},parseModels:function(b){return function(c){if(a.isArray(c))return c;b=b||"data";var d=a.getObject(b,c);if(!a.isArray(d))throw new Error("Could not get any raw data while converting using .models");return d}}},i={create:{url:"_shortName",type:"post"},update:{data:function(b,c){c=c||{};var d=this.id;return c[d]&&c[d]!==b&&(c["new"+a.capitalize(b)]=c[d],delete c[d]),c[d]=b,c},type:"put"},destroy:{type:"delete",data:function(a,b){return b=b||{},b.id=b[this.id]=a,b}},findAll:{url:"_shortName"},findOne:{}},j=function(a,b){return function(c){return c=a.data?a.data.apply(this,arguments):c,e(b||this[a.url||"_url"],c,a.type||"get")}},k=function(a,b){if(a.resource){var c=a.resource.replace(/\/+$/,"");return"findAll"===b||"create"===b?c:c+"/{"+a.id+"}"}};a.Model=a.Map.extend({fullName:"can.Model",_reqs:0,setup:function(b,d,e,f){if("string"!=typeof d&&(f=e,e=d),f||(f=e),this.store={},a.Map.setup.apply(this,arguments),a.Model){e&&e.List?(this.List=e.List,this.List.Map=this):this.List=b.List.extend({Map:this},{});
var l=this,m=a.proxy(this._clean,l);a.each(i,function(c,d){if(e&&e[d]&&("string"==typeof e[d]||"object"==typeof e[d])?l[d]=j(c,e[d]):e&&e.resource&&!a.isFunction(e[d])&&(l[d]=j(c,k(l,d))),l["make"+a.capitalize(d)]){var f=l["make"+a.capitalize(d)](l[d]);a.Construct._overwrite(l,b,d,function(){a.Model._reqs++;var b=f.apply(this,arguments),c=b.then(m,m);return c.abort=b.abort,c})}});var n={};a.each(g,function(c,d){var f="parse"+a.capitalize(d),g=e&&e[d]||l[d];"string"==typeof g?(l[f]=g,a.Construct._overwrite(l,b,d,c)):e&&e[d]&&(n[f]=!0)}),a.each(h,function(c,d){var f=e&&e[d]||l[d];if("string"==typeof f)a.Construct._overwrite(l,b,d,c(f));else if(!(e&&a.isFunction(e[d])||l[d])){var g=c();g.useModelConverter=n[d],a.Construct._overwrite(l,b,d,g)}}),"can.Model"!==l.fullName&&l.fullName||(l.fullName="Model"+ ++c),a.Model._reqs=0,this._url=this._shortName+"/{"+this.id+"}"}},_ajax:j,_makeRequest:f,_clean:function(){if(a.Model._reqs--,!a.Model._reqs)for(var b in this.store)this.store[b]._bindings||delete this.store[b];return arguments[0]},models:g.models,model:g.model},{setup:function(b){var c=b&&b[this.constructor.id];a.Model._reqs&&null!=c&&(this.constructor.store[c]=this),a.Map.prototype.setup.apply(this,arguments)},isNew:function(){var a=d(this);return!(a||0===a)},save:function(a,b){return f(this,this.isNew()?"create":"update",a,b)},destroy:function(b,c){if(this.isNew()){var d=this,e=a.Deferred();return e.then(b,c),e.done(function(a){d.destroyed(a)}).resolve(d)}return f(this,"destroy",b,c,"destroyed")},_bindsetup:function(){var b=this.___get(this.constructor.id);return null!=b&&(this.constructor.store[b]=this),a.Map.prototype._bindsetup.apply(this,arguments)},_bindteardown:function(){return delete this.constructor.store[d(this)],a.Map.prototype._bindteardown.apply(this,arguments)},___set:function(b,c){a.Map.prototype.___set.call(this,b,c),b===this.constructor.id&&this._bindings&&(this.constructor.store[d(this)]=this)}});var l=function(a){return function(b,c,d){return this[a](b,null,d)}},m=function(a){return this.parseModel.useModelConverter?this.model(a):this.parseModel(a)},n={makeFindAll:l("models"),makeFindOne:l("model"),makeCreate:m,makeUpdate:m,makeDestroy:m};a.each(n,function(c,d){a.Model[d]=function(d){return function(){var e=a.makeArray(arguments),f=a.isFunction(e[1])?e.splice(0,1):e.splice(0,2),g=b(d.apply(this,f),this,c);return g.then(e[0],e[1]),g}}}),a.each(["created","updated","destroyed"],function(b){a.Model.prototype[b]=function(c){var d=this,e=d.constructor;c&&"object"==typeof c&&this.attr(a.isFunction(c.attr)?c.attr():c),a.dispatch.call(this,{type:b,target:this},[]),a.dispatch.call(e,b,[this])}});var o=a.Model.List=a.List.extend({_bubbleRule:function(b,c){var d=a.List._bubbleRule(b,c);return d.push("destroyed"),d}},{setup:function(b){a.isPlainObject(b)&&!a.isArray(b)?(a.List.prototype.setup.apply(this),this.replace(a.isDeferred(b)?b:this.constructor.Map.findAll(b))):a.List.prototype.setup.apply(this,arguments),this.bind("destroyed",a.proxy(this._destroyed,this))},_destroyed:function(a,b){if(/\w+/.test(b))for(var c;(c=this.indexOf(a.target))>-1;)this.splice(c,1)}});return a.Model}),swifty.define("can/read",["can/util/library"],function(a){var b=function(a,c,e){e=e||{};for(var f,g,h={foundObservable:!1},i=d(a,0,c,e,h),j=c.length,k=0;j>k;){g=i;for(var l=0,m=b.propertyReaders.length;m>l;l++){var n=b.propertyReaders[l];if(n.test(i)){i=n.read(i,c[k],k,e,h);break}}if(k+=1,i=d(i,k,c,e,h,g),f=typeof i,k<c.length&&(null===i||"function"!==f&&"object"!==f))return e.earlyExit&&e.earlyExit(g,k-1,i),{value:void 0,parent:g}}return void 0===i&&e.earlyExit&&e.earlyExit(g,k-1),{value:i,parent:g}},c=function(a,b){var c=b[a-1];return c&&c.at},d=function(a,c,d,e,f,g){var h;do{h=!1;for(var i=0,j=b.valueReaders.length;j>i;i++)b.valueReaders[i].test(a,c,d,e)&&(a=b.valueReaders[i].read(a,c,d,e,f,g))}while(h);return a};b.valueReaders=[{name:"compute",test:function(a,b,d){return a&&a.isComputed&&!c(b,d)},read:function(b,c,d,e,f){return e.readCompute===!1&&c===d.length?b:(!f.foundObservable&&e.foundObservable&&(e.foundObservable(b,c),f.foundObservable=!0),b instanceof a.Compute?b.get():b())}},{name:"function",test:function(b){var c=typeof b;return!("function"!==c||b.isComputed||a.Construct&&b.prototype instanceof a.Construct||a.route&&b===a.route)},read:function(b,d,e,f,g,h){return c(d,e)?d===e.length?a.proxy(b,h):b:f.callMethodsOnObservables&&a.isMapLike(h)?b.apply(h,f.args||[]):f.isArgument&&d===e.length?f.proxyMethods!==!1?a.proxy(b,h):b:b.apply(h,f.args||[])}}],b.propertyReaders=[{name:"map",test:a.isMapLike,read:function(a,b,c,d,e){!e.foundObservable&&d.foundObservable&&(d.foundObservable(a,c),e.foundObservable=!0);var f=a.attr(b.key);return void 0!==f?f:a[b.key]}},{name:"promise",test:function(b){return a.isPromise(b)},read:function(b,c,d,e,f){!f.foundObservable&&e.foundObservable&&(e.foundObservable(b,d),f.foundObservable=!0);var g=b.__observeData;return b.__observeData||(g=b.__observeData={isPending:!0,state:"pending",isResolved:!1,isRejected:!1,value:void 0,reason:void 0},a.cid(g),a.simpleExtend(g,a.event),b.then(function(a){g.isPending=!1,g.isResolved=!0,g.value=a,g.state="resolved",g.dispatch("state",["resolved","pending"])},function(a){g.isPending=!1,g.isRejected=!0,g.reason=a,g.state="rejected",g.dispatch("state",["rejected","pending"])})),a.__observe(g,"state"),c.key in g?g[c.key]:b[c.key]}},{name:"object",test:function(){return!0},read:function(a,b){return null==a?void 0:b.key in a?a[b.key]:b.at&&e[b.key]&&"@"+b.key in a?(b.at=!1,a["@"+b.key]):void 0}}];var e={index:!0,key:!0,event:!0,element:!0,viewModel:!0};return b.write=function(b,c,d,e){return e=e||{},a.isMapLike(b)?!e.isArgument&&b._data&&b._data[c]&&b._data[c].isComputed?b._data[c](d):b.attr(c,d):b[c]&&b[c].isComputed?b[c](d):void("object"==typeof b&&(b[c]=d))},b.reads=function(a){var b=[],c=0,d=!1;"@"===a.charAt(0)&&(c=1,d=!0);for(var e="",f=c;f<a.length;f++){var g=a.charAt(f);"."===g||"@"===g?"\\"!==a.charAt(f-1)?(b.push({key:e,at:d}),d="@"===g,e=""):e=e.substr(0,e.length-1)+".":e+=g}return b.push({key:e,at:d}),b},b}),swifty.define("can/proto_compute",["can/util/library","can/util/bind","can/read","can/get_value_and_bind","can/util/batch"],function(a,b,c,d){a.Compute=function(){a.cid(this,"compute");for(var b=[],c=0,d=arguments.length;d>c;c++)b[c]=arguments[c];var e=typeof b[1];"function"==typeof b[0]?this._setupGetterSetterFn(b[0],b[1],b[2],b[3]):b[1]?"string"===e?this._setupProperty(b[0],b[1],b[2]):"function"===e?this._setupSetter(b[0],b[1],b[2]):b[1]&&b[1].fn?this._setupAsyncCompute(b[0],b[1]):this._setupSettings(b[0],b[1]):this._setupSimpleValue(b[0]),this._args=b,this._primaryDepth=0,this.isComputed=!0},a.simpleExtend(a.Compute.prototype,{setPrimaryDepth:function(a){this._primaryDepth=a},_setupGetterSetterFn:function(b,c,d){this._set=c?a.proxy(b,c):b,this._get=c?a.proxy(b,c):b,this._canObserve=d===!1?!1:!0;var e=f(this,b,c||this);a.simpleExtend(this,e)},_setupProperty:function(b,c,d){var e,f=a.isMapLike(b),g=this;f?(e=function(a,b,c){g.updater(b,c,a.batchNum)},this.hasDependencies=!0,this._get=function(){return b.attr(c)},this._set=function(a){b.attr(c,a)}):(e=function(){g.updater(g._get(),g.value)},this._get=function(){return a.getObject(c,[b])},this._set=function(d){var e=c.split("."),f=e.pop(),g=a.getObject(e.join("."),[b]);g[f]=d}),this._on=function(){a.bind.call(b,d||c,e),this.value=this._get()},this._off=function(){return a.unbind.call(b,d||c,e)}},_setupSetter:function(b,c,d){this.value=b,this._set=c,a.simpleExtend(this,d)},_setupSettings:function(a,b){if(this.value=a,this._set=b.set||this._set,this._get=b.get||this._get,!b.__selfUpdater){var c=this,d=this.updater;this.updater=function(){d.call(c,c._get(),c.value)}}this._on=b.on?b.on:this._on,this._off=b.off?b.off:this._off},_setupAsyncCompute:function(b,c){var d=this;this.value=b,this._setUpdates=!0,this.lastSetValue=new a.Compute(b),this._set=function(a){return a===d.lastSetValue.get()?this.value:d.lastSetValue.set(a)},this._get=function(){return g.call(c.context,d.lastSetValue.get())};var e,g=c.fn;if(0===g.length)e=f(this,g,c.context);else if(1===g.length)e=f(this,function(){return g.call(c.context,d.lastSetValue.get())},c);else{var h=this.updater,i=function(a){h.call(d,a,d.value)};this.updater=function(a){h.call(d,a,d.value)},e=f(this,function(){var a=g.call(c.context,d.lastSetValue.get(),i);return void 0!==a?a:this.value},this)}a.simpleExtend(this,e)},_setupSimpleValue:function(a){this.value=a},_bindsetup:a.__notObserve(function(){this.bound=!0,this._on(this.updater)}),_bindteardown:function(){this._off(this.updater),this.bound=!1},bind:a.bindAndSetup,unbind:a.unbindAndTeardown,clone:function(b){return b&&"function"==typeof this._args[0]?this._args[1]=b:b&&(this._args[2]=b),new a.Compute(this._args[0],this._args[1],this._args[2],this._args[3])},_on:a.k,_off:a.k,get:function(){return a.__isRecordingObserves()&&this._canObserve!==!1&&(a.__observe(this,"change"),this.bound||a.Compute.temporarilyBind(this)),this.bound?this.value:this._get()},_get:function(){return this.value},set:function(a){var b=this.value,c=this._set(a,b);return this._setUpdates?this.value:this.hasDependencies?this._get():(this.value=void 0===c?this._get():c,e(this,this.value,b),this.value)},_set:function(a){return this.value=a},updater:function(a,b,c){this.value=a,e(this,a,b,c)},toFunction:function(){return a.proxy(this._computeFn,this)},_computeFn:function(a){return arguments.length?this.set(a):this.get()}});var e=function(b,c,d,e){var f=c!==d&&!(c!==c&&d!==d);f&&a.batch.trigger(b,{type:"change",batchNum:e},[c,d])},f=function(b,c,e){var f=new d(c,e,b);return{_on:function(){f.getValueAndBind(),b.value=f.value,b.hasDependencies=!a.isEmptyObject(f.newObserved)},_off:function(){f.teardown()},getDepth:function(){return f.getDepth()}}};a.Compute.temporarilyBind=function(b){var c=b.computeInstance||b;c.bind("change",a.k),g||(g=[],setTimeout(h,10)),g.push(c)};var g,h=function(){for(var b=0,c=g.length;c>b;b++)g[b].unbind("change",a.k);g=null};return a.Compute.async=function(b,c,d){return new a.Compute(b,{fn:c,context:d})},a.Compute.truthy=function(b){return new a.Compute(function(){var a=b.get();return"function"==typeof a&&(a=a.get()),!!a})},a.Compute.read=c,a.Compute.set=c.write,a.Compute}),swifty.define("can/compute",["can/util/library","can/util/bind","can/util/batch","can/proto_compute"],function(a){return a.compute=function(b,c,d,e){var f=new a.Compute(b,c,d,e),g=f.bind,h=f.unbind,i=function(a){return arguments.length?f.set(a):f.get()},j=a.cid(i,"compute"),k="__handler"+j;return i.bind=function(a,b){var c=b&&b[k];return b&&!c&&(c=b[k]=function(){b.apply(i,arguments)}),g.call(f,a,c)},i.unbind=function(a,b){var c=b&&b[k];return c?(delete b[k],f.unbind(a,c)):h.apply(f,arguments)},i.isComputed=f.isComputed,i.clone=function(d){return"function"==typeof b&&(c=d),a.compute(b,c,d,e)},i.computeInstance=f,i},a.compute.truthy=function(b){return a.compute(function(){var a=b();return"function"==typeof a&&(a=a()),!!a})},a.compute.async=function(b,c,d){return a.compute(b,{fn:c,context:d})},a.compute.read=a.Compute.read,a.compute.set=a.Compute.set,a.compute.temporarilyBind=a.Compute.temporarilyBind,a.compute}),swifty.define("can/map/define",["can/util/library","can/map_helpers","can/map","can/compute"],function(a,b){if(!a.define){var c=a.define={},d=function(a,b,c){var d,e;if(c){if(d=c[b],e=c["*"],d&&void 0!==d[a])return d[a];if(e&&void 0!==e[a])return e[a]}};b.define=function(b){var d=b.prototype.define;b.defaultGenerators={};for(var e in d){var f=d[e].type;"string"==typeof f&&"object"==typeof c.types[f]&&(delete d[e].type,a.extend(d[e],c.types[f])),"value"in d[e]&&("function"==typeof d[e].value?b.defaultGenerators[e]=d[e].value:b.defaults[e]=d[e].value),"function"==typeof d[e].Value&&!function(a){b.defaultGenerators[e]=function(){return new a}}(d[e].Value)}};var e=a.Map.prototype._setupDefaults;a.Map.prototype._setupDefaults=function(a){var b=e.call(this),c={},d=this.constructor,f=this._get;this._get=function(a){var d=-1!==a.indexOf(".")?a.substr(0,a.indexOf(".")):a;return d in b&&!(d in c)&&(this.attr(d,b[d]),c[d]=!0),f.apply(this,arguments)};for(var g in d.defaultGenerators)a&&g in a||(b[g]=d.defaultGenerators[g].call(this));return delete this._get,b};var f=a.Map.prototype,g=f.__set;f.__set=function(b,c,e,f,h){var i=function(c){var d=h&&h.call(j,c);return d!==!1&&a.trigger(j,"error",[b,c],!0),!1},j=this,k=d("set",b,this.define),l=d("get",b,this.define);if(k){a.batch.start();var m=!1,n=k.call(this,c,function(a){l?j[b](a):g.call(j,b,a,e,f,i),m=!0},i,l?this._computedAttrs[b].compute.computeInstance.lastSetValue.get():e);return l?(void 0!==n&&!m&&k.length>=1&&this._computedAttrs[b].compute(n),void a.batch.stop()):void 0===n&&!m&&k.length>=1?void a.batch.stop():(m||g.call(j,b,0===k.length&&void 0===n?c:n,e,f,i),a.batch.stop(),this)}return g.call(j,b,c,e,f,i),this},c.types={date:function(a){var b=typeof a;return"string"===b?(a=Date.parse(a),isNaN(a)?null:new Date(a)):"number"===b?new Date(a):a},number:function(a){return null==a?a:+a},"boolean":function(a){return"false"!==a&&"0"!==a&&a?!0:!1},htmlbool:function(a){return"string"==typeof a||!!a},"*":function(a){return a},string:function(a){return null==a?a:""+a},compute:{set:function(a,b,c,d){return a.isComputed?a:d&&d.isComputed?(d(a),d):a},get:function(a){return a&&a.isComputed?a():a}}};var h=f.__type;f.__type=function(b,e){var f=d("type",e,this.define),g=d("Type",e,this.define),i=b;return"string"==typeof f&&(f=c.types[f]),f||g?(f&&(i=f.call(this,i,e)),!g||i instanceof g||(i=new g(i)),i):(a.isPlainObject(i)&&i.define&&(i=a.Map.extend(i),i=new i),h.call(this,i,e))};var i=f.__remove;f.__remove=function(b,c){var e,f=d("remove",b,this.define);return f?(a.batch.start(),e=f.call(this,c),e===!1?void a.batch.stop():(e=i.call(this,b,c),a.batch.stop(),e)):i.call(this,b,c)};var j=f._setupComputedProperties;f._setupComputedProperties=function(){j.apply(this,arguments);for(var c in this.define){var d=this.define[c],e=d.get;e&&b.addComputedAttr(this,c,a.compute.async(void 0,e,this))}};var k=f.___serialize;f.___serialize=function(a,b){return l(this,a,b)};var l=function(a,b,c){var e="*"===b?!1:d("serialize",b,a.define);return void 0===e?k.call(a,b,c):e!==!1?"function"==typeof e?e.call(a,c,b):k.call(a,b,c):void 0},m=f.serialize;return f.serialize=function(a){var b=m.apply(this,arguments);if(a)return b;var c,d;for(var e in this.define)e in b||(c=this.define&&this.define[e]&&this.define[e].serialize,c&&(d=l(this,e,this.attr(e)),void 0!==d&&(b[e]=d)));return b},a.define}}),swifty.define("can/view/compute_data",["can/util/library","can/compute","can/get_value_and_bind"],function(a,b,c){var d=function(b){return b.reads&&1===b.reads.length&&b.root instanceof a.Map&&!a.isFunction(b.root[b.reads[0].key])},e=function(b,c,d,e,f){if(!(arguments.length>4)){if(e.root)return a.compute.read(e.root,e.reads,d).value;var g=b.read(c,d);return e.scope=g.scope,e.initialValue=g.value,e.reads=g.reads,e.root=g.rootObserve,e.setRoot=g.setRoot,g.value}var h=e.root||e.setRoot;if(h)if(h.isComputed)h(f);else if(e.reads.length){var i=e.reads.length-1,j=e.reads.length?a.compute.read(h,e.reads.slice(0,i)).value:h;a.compute.set(j,e.reads[i].key,f,d)}};return function(b,f,g){g=g||{args:[]};var h={},i=function(a){return arguments.length?e(b,f,g,h,a):e(b,f,g,h)},j=a.compute(void 0,{on:function(){k.getValueAndBind(),d(h)&&(k.dependencyChange=function(a,b){return"function"!=typeof b?this.newVal=b:(k.dependencyChange=c.prototype.dependencyChange,k.getValueAndBind=c.prototype.getValueAndBind),c.prototype.dependencyChange.call(this,a)},k.getValueAndBind=function(){this.value=this.newVal}),j.computeInstance.value=k.value,j.computeInstance.hasDependencies=!a.isEmptyObject(k.newObserved)},off:function(){k.dependencyChange=c.prototype.dependencyChange,k.getValueAndBind=c.prototype.getValueAndBind,k.teardown()},set:i,get:i,__selfUpdater:!0}),k=new c(i,null,j.computeInstance);return h.compute=j,h}}),swifty.define("can/view",["can/util/library"],function(a){var b=a.isFunction,c=a.makeArray,d=1,e=function(a){var b=function(){return j.frag(a.apply(this,arguments))};return b.render=function(){return a.apply(a,arguments)},b},f=function(a,b){if(!a.length)throw new Error("can.view: No template or empty template:"+b)},g=function(c,d){if(b(c)){var e=a.Deferred();return e.resolve(c)}var g,h,i,k="string"==typeof c?c:c.url,l=c.engine&&"."+c.engine||k.match(/\.[\w\d]+$/);if(k.match(/^#/)&&(k=k.substr(1)),(h=document.getElementById(k))&&(l="."+h.type.match(/\/(x\-)?(.+)/)[2]),l||j.cached[k]||(k+=l=j.ext),a.isArray(l)&&(l=l[0]),i=j.toId(k),k.match(/^\/\//)&&(k=k.substr(2),k=window.steal?steal.config().root.mapJoin(""+steal.id(k)):k),window.require&&require.toUrl&&(k=require.toUrl(k)),g=j.types[l],j.cached[i])return j.cached[i];if(h)return j.registerView(i,h.innerHTML,g);var m=new a.Deferred;return a.ajax({async:d,url:k,dataType:"text",error:function(a){f("",k),m.reject(a)},success:function(a){f(a,k),j.registerView(i,a,g,m)}}),m},h=function(b){var c=[];if(a.isDeferred(b))return[b];for(var d in b)a.isDeferred(b[d])&&c.push(b[d]);return c},i=function(b){return a.isArray(b)&&"success"===b[1]?b[0]:b},j=a.view=a.template=function(a,c,d,e){return b(d)&&(e=d,d=void 0),j.renderAs("fragment",a,c,d,e)};return a.extend(j,{frag:function(a,b){return j.hookup(j.fragment(a),b)},fragment:function(b){return a.frag(b,document)},toId:function(b){return a.map(b.toString().split(/\/|\./g),function(a){return a?a:void 0}).join("_")},toStr:function(a){return null==a?"":""+a},hookup:function(b,c){var d,e,f=[];return a.each(b.childNodes?a.makeArray(b.childNodes):b,function(b){1===b.nodeType&&(f.push(b),f.push.apply(f,a.makeArray(b.getElementsByTagName("*"))))}),a.each(f,function(a){a.getAttribute&&(d=a.getAttribute("data-view-id"))&&(e=j.hookups[d])&&(e(a,c,d),delete j.hookups[d],a.removeAttribute("data-view-id"))}),b},hookups:{},hook:function(a){return j.hookups[++d]=a," data-view-id='"+d+"'"},cached:{},cachedRenderers:{},cache:!0,register:function(b){this.types["."+b.suffix]=b,a[b.suffix]=j[b.suffix]=function(a,c){var d,f;if(!c)return f=function(){return d||(d=b.fragRenderer?b.fragRenderer(null,a):e(b.renderer(null,a))),d.apply(this,arguments)},f.render=function(){var c=b.renderer(null,a);return c.apply(c,arguments)},f;var g=function(){return d||(d=b.fragRenderer?b.fragRenderer(a,c):b.renderer(a,c)),d.apply(this,arguments)};return b.fragRenderer?j.preload(a,g):j.preloadStringRenderer(a,g)}},types:{},ext:".ejs",registerScript:function(a,b,c){return"can.view.preloadStringRenderer('"+b+"',"+j.types["."+a].script(b,c)+");"},preload:function(b,c){var d=j.cached[b]=(new a.Deferred).resolve(function(a,b){return c.call(a,a,b)});return d.__view_id=b,j.cachedRenderers[b]=c,c},preloadStringRenderer:function(a,b){return this.preload(a,e(b))},render:function(b,c,d,e,f){return a.view.renderAs("string",b,c,d,e,f)},renderTo:function(a,b,c,d,e){return("string"===a&&b.render?b.render:b)(c,d,e)},renderAs:function(d,e,f,k,l,m){void 0!==l&&"string"==typeof l.expression&&(m=l,l=void 0),b(k)&&(l=k,k=void 0);var n,o,p,q,r=h(f);if(r.length)return n=new a.Deferred,o=a.extend({},f),r.push(g(e,!0)),a.when.apply(a,r).then(function(b){var e,g=c(arguments),h=g.pop();if(a.isDeferred(f))o=i(b);else for(var j in f)a.isDeferred(f[j])&&(o[j]=i(g.shift()));e=a.view.renderTo(d,h,o,k,m),n.resolve(e,o),l&&l(e,o)},function(){n.reject.apply(n,arguments)}),n;if(p=b(l),n=a.__notObserve(g)(e,p),p)q=n,n.then(function(b){l(f?a.view.renderTo(d,b,f,k,m):b)});else{if("resolved"===n.state()&&n.__view_id){var s=j.cachedRenderers[n.__view_id];return f?a.view.renderTo(d,s,f,k,m):s}n.then(function(b){q=f?a.view.renderTo(d,b,f,k,m):b})}return q},registerView:function(b,c,d,f){var g,h="object"==typeof d?d:j.types[d||j.ext];return g=h.fragRenderer?h.fragRenderer(b,c):e(h.renderer(b,c)),f=f||new a.Deferred,j.cache&&(j.cached[b]=f,f.__view_id=b,j.cachedRenderers[b]=g),f.resolve(g)},simpleHelper:function(b){return function(){var c=[];return a.each(arguments,function(a,b){if(b<=arguments.length){for(;a&&a.isComputed;)a=a();c.push(a)}}),b.apply(this,c)}}}),a}),swifty.define("can/view/scope",["can/util/library","can/view/compute_data","can/construct","can/map","can/list","can/view","can/compute"],function(a,b){function c(a,b,c){this._context=a,this._parent=b,this._meta=c||{},this.__cache={}}function d(a,b,d){a.helpers||a.partials||a.tags||(a={helpers:a}),c.call(this,a,b,d)}return a.simpleExtend(c,{read:a.compute.read,Refs:a.Map.extend({shortName:"ReferenceMap"},{}),refsScope:function(){return new a.view.Scope(new this.Refs)}}),a.simpleExtend(c.prototype,{add:function(a,b){return a!==this._context?new this.constructor(a,this,b):this},read:function(b,c){if("%root"===b)return{value:this.getRoot()};var d="./"===b.substr(0,2),e="../"===b.substr(0,3),f="."===b||"this"===b,g=".."===b,h=d||e||f||g;if(h&&this._meta.notContext)return this._parent.read(b,c);var i;if(d)i=!0,b=b.substr(2);else{if(e){for(var j=this._parent;j._meta.notContext;)j=j._parent;return j.read(b.substr(3)||".",c)}if(f)return{value:this._context};if(g)return{value:this._parent._context}}var k=a.compute.read.reads(b);return"*"===k[0].key.charAt(0)?this.getRefs()._read(k,c,!0):this._read(k,c,i)},_read:function(b,c,d){for(var e,f,g,h,i,j=this,k=[],l=-1,m=a.simpleExtend({foundObservable:function(a,c){f=a,g=b.slice(c)},earlyExit:function(a,b){b>l&&(i=f,h=g,l=b)}},c);j;){if(e=j._context,null!==e&&("object"==typeof e||"function"==typeof e)){var n=a.__trapObserves(),o=a.compute.read(e,b,m),p=n();if(void 0!==o.value)return a.__observes(p),{scope:j,rootObserve:f,value:o.value,reads:g};k.push.apply(k,p)}j=d?null:j._parent}return a.__observes(k),{setRoot:i,reads:h,value:void 0}},get:a.__notObserve(function(b,c){c=a.simpleExtend({isArgument:!0},c);var d=this.read(b,c);return d.value}),getScope:function(a){for(var b=this;b;){if(a(b))return b;b=b._parent}},getContext:function(a){var b=this.getScope(a);return b&&b._context},getRefs:function(){return this.getScope(function(a){return a._context instanceof c.Refs})},getRoot:function(){for(var a=this,b=this;a._parent;)b=a,a=a._parent;return a._context instanceof c.Refs&&(a=b),a._context},set:function(b,c,d){var e,f,g=b.lastIndexOf("."),h=b.lastIndexOf("/");if(h>g?(e=b.substring(0,h),f=b.substring(h+1,b.length)):-1!==g?(e=b.substring(0,g),f=b.substring(g+1,b.length)):(e=".",f=b),"*"===b.charAt(0))a.compute.set(this.getRefs()._context,b,c,d);else{var i=this.read(e,d).value;a.compute.set(i,f,c,d)}},attr:a.__notObserve(function(b,c,d){return d=a.simpleExtend({isArgument:!0},d),2===arguments.length?this.set(b,c,d):this.get(b,d)}),computeData:function(a,c){return b(this,a,c)},compute:function(a,b){return this.computeData(a,b).compute},cloneFromRef:function(){for(var b,d,e=[],f=this;f;){if(b=f._context,b instanceof c.Refs){d=f._parent;break}e.unshift(b),f=f._parent}return d?(a.each(e,function(a){d=d.add(a)}),d):this}}),a.view.Scope=c,d.prototype=new c,d.prototype.constructor=d,a.view.Options=d,c}),swifty.define("can/elements",["can/util/library","can/view"],function(a){var b="undefined"!=typeof document?document:null,c=b&&function(){return 1===a.$(document.createComment("~")).length}(),d={tagToContentPropMap:{option:b&&"textContent"in document.createElement("option")?"textContent":"innerText",textarea:"value"},attrMap:a.attr.map,attrReg:/([^\s=]+)[\s]*=[\s]*/,defaultValue:a.attr.defaultValue,tagMap:{"":"span",colgroup:"col",table:"tbody",tr:"td",ol:"li",ul:"li",tbody:"tr",thead:"tr",tfoot:"tr",select:"option",optgroup:"option"},reverseTagMap:{col:"colgroup",tr:"tbody",option:"select",td:"tr",th:"tr",li:"ul"},selfClosingTags:{col:!0},getParentNode:function(a,b){return b&&11===a.parentNode.nodeType?b:a.parentNode},setAttr:a.attr.set,getAttr:a.attr.get,removeAttr:a.attr.remove,contentText:function(a){return"string"==typeof a?a:a||0===a?""+a:""},after:function(b,c){var d=b[b.length-1];d.nextSibling?a.insertBefore(d.parentNode,c,d.nextSibling,a.document):a.appendChild(d.parentNode,c,a.document)},replace:function(b,e){var f,g=b[0].parentNode;"SELECT"===g.nodeName.toUpperCase()&&g.selectedIndex>=0&&(f=g.value),d.after(b,e),a.remove(a.$(b)).length<b.length&&!c&&a.each(b,function(a){8===a.nodeType&&a.parentNode.removeChild(a)}),void 0!==f&&(g.value=f)}};return a.view.elements=d,d}),swifty.define("can/view/callbacks",["can/util/library","can/view"],function(a){var b=a.view.attr=function(a,b){if(!b){var e=c[a];if(!e)for(var f=0,g=d.length;g>f;f++){var h=d[f];if(h.match.test(a)){e=h.handler;break}}return e}"string"==typeof a?c[a]=b:d.push({match:a,handler:b})},c={},d=[],e=/[-\:]/,f=a.view.tag=function(b,c){if(!c){var d=g[b.toLowerCase()];return!d&&e.test(b)&&(d=function(){}),d}a.global.html5&&(a.global.html5.elements+=" "+b,a.global.html5.shivDocument()),g[b.toLowerCase()]=c},g={};return a.view.callbacks={_tags:g,_attributes:c,_regExpAttributes:d,tag:f,attr:b,tagHandler:function(b,c,d){var e,f=d.options.get("tags."+c,{proxyMethods:!1}),h=f||g[c],i=d.scope;if(e=h?a.__notObserve(h)(b,d):i,e&&d.subtemplate){i!==e&&(i=i.add(e));var j=d.subtemplate(i,d.options),k="string"==typeof j?a.view.frag(j):j;a.appendChild(b,k)}}},a.view.callbacks}),swifty.define("can/scanner",["can/view","can/elements","can/view/callbacks"],function(can,elements,viewCallbacks){var newLine=/(\r|\n)+/g,notEndTag=/\//,clean=function(a){return a.split("\\").join("\\\\").split("\n").join("\\n").split('"').join('\\"').split("	").join("\\t")},getTag=function(a,b,c){if(a)return a;for(;c<b.length;){if("<"===b[c]&&!notEndTag.test(b[c+1]))return elements.reverseTagMap[b[c+1]]||"span";c++}return""},bracketNum=function(a){return--a.split("{").length- --a.split("}").length},myEval=function(script){eval(script)},attrReg=/([^\s]+)[\s]*=[\s]*$/,startTxt="var ___v1ew = [];",finishTxt="return ___v1ew.join('')",put_cmd="___v1ew.push(\n",insert_cmd=put_cmd,htmlTag=null,quote=null,beforeQuote=null,rescan=null,getAttrName=function(){var a=beforeQuote.match(attrReg);return a&&a[1]},status=function(){return quote?"'"+getAttrName()+"'":htmlTag?1:0},top=function(a){return a[a.length-1]},Scanner;return can.view.Scanner=Scanner=function(a){can.extend(this,{text:{},tokens:[]},a),this.text.options=this.text.options||"",this.tokenReg=[],this.tokenSimple={"<":"<",">":">",'"':'"',"'":"'"},this.tokenComplex=[],this.tokenMap={};for(var b,c=0;b=this.tokens[c];c++)b[2]?(this.tokenReg.push(b[2]),this.tokenComplex.push({abbr:b[1],re:new RegExp(b[2]),rescan:b[3]})):(this.tokenReg.push(b[1]),this.tokenSimple[b[1]]=b[0]),this.tokenMap[b[0]]=b[1];this.tokenReg=new RegExp("("+this.tokenReg.slice(0).concat(["<",">",'"',"'"]).join("|")+")","g")},Scanner.prototype={helpers:[],scan:function(a,b){var c=[],d=0,e=this.tokenSimple,f=this.tokenComplex;a=a.replace(newLine,"\n"),this.transform&&(a=this.transform(a)),a.replace(this.tokenReg,function(b,g){var h=arguments[arguments.length-2];if(h>d&&c.push(a.substring(d,h)),e[b])c.push(b);else for(var i,j=0;i=f[j];j++)if(i.re.test(b)){c.push(i.abbr),i.rescan&&c.push(i.rescan(g));break}d=h+g.length}),d<a.length&&c.push(a.substr(d));var g,h,i,j,k="",l=[startTxt+(this.text.start||"")],m=function(a,b){l.push(put_cmd,'"',clean(a),'"'+(b||"")+");")},n=[],o=null,p=!1,q={attributeHookups:[],tagHookups:[],lastTagHookup:""},r=function(){q.lastTagHookup=q.tagHookups.pop()+q.tagHookups.length},s="",t=[],u=!1,v=!1,w=0,x=this.tokenMap;for(htmlTag=quote=beforeQuote=null;void 0!==(i=c[w++]);){if(null===o)switch(i){case x.left:case x.escapeLeft:case x.returnLeft:p=htmlTag&&1;case x.commentLeft:o=i,k.length&&m(k),k="";break;case x.escapeFull:p=htmlTag&&1,rescan=1,o=x.escapeLeft,k.length&&m(k),rescan=c[w++],k=rescan.content||rescan,rescan.before&&m(rescan.before),c.splice(w,0,x.right);break;case x.commentFull:break;case x.templateLeft:k+=x.left;break;case"<":0!==c[w].indexOf("!--")&&(htmlTag=1,p=0),k+=i;break;case">":htmlTag=0;var y="/"===k.substr(k.length-1)||"--"===k.substr(k.length-2),z="";if(q.attributeHookups.length&&(z="attrs: ['"+q.attributeHookups.join("','")+"'], ",q.attributeHookups=[]),s+q.tagHookups.length!==q.lastTagHookup&&s===top(q.tagHookups))y&&(k=k.substr(0,k.length-1)),l.push(put_cmd,'"',clean(k),'"',",can.view.pending({tagName:'"+s+"',"+z+"scope: "+(this.text.scope||"this")+this.text.options),y?(l.push("}));"),k="/>",r()):"<"===c[w]&&c[w+1]==="/"+s?(l.push("}));"),k=i,r()):(l.push(",subtemplate: function("+this.text.argNames+"){\n"+startTxt+(this.text.start||"")),k="");else if(p||!u&&elements.tagToContentPropMap[t[t.length-1]]||z){var A=",can.view.pending({"+z+"scope: "+(this.text.scope||"this")+this.text.options+'}),"';y?m(k.substr(0,k.length-1),A+'/>"'):m(k,A+'>"'),k="",p=0}else k+=i;(y||u)&&(t.pop(),s=t[t.length-1],u=!1),q.attributeHookups=[];break;case"'":case'"':if(htmlTag)if(quote&&quote===i){quote=null;var B=getAttrName();if(viewCallbacks.attr(B)&&q.attributeHookups.push(B),v){k+=i,m(k),l.push(finishTxt,"}));\n"),k="",v=!1;break}}else if(null===quote&&(quote=i,beforeQuote=g,j=getAttrName(),"img"===s&&"src"===j||"style"===j)){m(k.replace(attrReg,"")),k="",v=!0,l.push(insert_cmd,"can.view.txt(2,'"+getTag(s,c,w)+"',"+status()+",this,function(){",startTxt),m(j+"="+i);break}default:if("<"===g){s="!--"===i.substr(0,3)?"!--":i.split(/\s/)[0];var C,D=!1;0===s.indexOf("/")&&(D=!0,C=s.substr(1)),D?(top(t)===C&&(s=C,u=!0),top(q.tagHookups)===C&&(m(k.substr(0,k.length-1)),l.push(finishTxt+"}}) );"),k="><",r())):(s.lastIndexOf("/")===s.length-1&&(s=s.substr(0,s.length-1)),"!--"!==s&&viewCallbacks.tag(s)&&("content"===s&&elements.tagMap[top(t)]&&(i=i.replace("content",elements.tagMap[top(t)])),q.tagHookups.push(s)),t.push(s))}k+=i}else switch(i){case x.right:case x.returnRight:switch(o){case x.left:h=bracketNum(k),1===h?(l.push(insert_cmd,"can.view.txt(0,'"+getTag(s,c,w)+"',"+status()+",this,function(){",startTxt,k),n.push({before:"",after:finishTxt+"}));\n"})):(d=n.length&&-1===h?n.pop():{after:";"},d.before&&l.push(d.before),l.push(k,";",d.after));break;case x.escapeLeft:case x.returnLeft:h=bracketNum(k),h&&n.push({before:finishTxt,after:"}));\n"});for(var E=o===x.escapeLeft?1:0,F={insert:insert_cmd,tagName:getTag(s,c,w),status:status(),specialAttribute:v},G=0;G<this.helpers.length;G++){var H=this.helpers[G];if(H.name.test(k)){k=H.fn(k,F),H.name.source===/^>[\s]*\w*/.source&&(E=0);break}}"object"==typeof k?k.startTxt&&k.end&&v?l.push(insert_cmd,"can.view.toStr( ",k.content,"() ) );"):(k.startTxt?l.push(insert_cmd,"can.view.txt(\n"+("string"==typeof status()||(null!=k.escaped?k.escaped:E))+",\n'"+s+"',\n"+status()+",\nthis,\n"):k.startOnlyTxt&&l.push(insert_cmd,"can.view.onlytxt(this,\n"),l.push(k.content),k.end&&l.push("));")):v?l.push(insert_cmd,k,");"):l.push(insert_cmd,"can.view.txt(\n"+("string"==typeof status()||E)+",\n'"+s+"',\n"+status()+",\nthis,\nfunction(){ "+(this.text.escape||"")+"return ",k,h?startTxt:"}));\n"),rescan&&rescan.after&&rescan.after.length&&(m(rescan.after.length),rescan=null)}o=null,k="";break;case x.templateLeft:k+=x.left;break;default:k+=i}g=i}k.length&&m(k),l.push(";");var I=l.join(""),J={out:(this.text.outStart||"")+I+" "+finishTxt+(this.text.outEnd||"")};return myEval.call(J,"this.fn = (function("+this.text.argNames+"){"+J.out+"});\r\n//# sourceURL="+b+".js"),J}},can.view.pending=function(a){var b=can.view.getHooks();return can.view.hook(function(c){can.each(b,function(a){a(c)}),a.templateType="legacy",a.tagName&&viewCallbacks.tagHandler(c,a.tagName,a),can.each(a&&a.attrs||[],function(b){a.attributeName=b;var d=viewCallbacks.attr(b);d&&d(c,a)})})},can.view.tag("content",function(a,b){return b.scope}),can.view.Scanner=Scanner,Scanner}),swifty.define("can/view/node_lists",["can/util/library","can/elements"],function(a){var b=!0;try{document.createTextNode("")._=0}catch(c){b=!1}var d={},e={},f="ejs_"+Math.random(),g=0,h=function(a,c){var d=c||e,h=i(a,d);return h?h:b||3!==a.nodeType?(++g,a[f]=(a.nodeName?"element_":"obj_")+g):(++g,d["text_"+g]=a,"text_"+g)},i=function(a,c){if(b||3!==a.nodeType)return a[f];for(var d in c)if(c[d]===a)return d},j=[].splice,k=[].push,l=function(a){for(var b=0,c=0,d=a.length;d>c;c++){var e=a[c];
e.nodeType?b++:b+=l(e)}return b},m=function(a,b){for(var c={},d=0,e=a.length;e>d;d++){var f=o.first(a[d]);c[h(f,b)]=a[d]}return c},n=function(a,b,c){for(var d in b)c[d]||a.newDeepChildren.push(b[d])},o={id:h,update:function(b,c){var d=o.unregisterChildren(b);c=a.makeArray(c);var e=b.length;return j.apply(b,[0,e].concat(c)),b.replacements?(o.nestReplacements(b),b.deepChildren=b.newDeepChildren,b.newDeepChildren=[]):o.nestList(b),d},nestReplacements:function(a){for(var b=0,c={},d=m(a.replacements,c),e=a.replacements.length,f={};b<a.length&&e;){var g=a[b],h=i(g,c),j=d[h];j&&(a.splice(b,l(j),j),f[h]=!0,e--),b++}e&&n(a,d,f),a.replacements=[]},nestList:function(a){for(var b=0;b<a.length;){var c=a[b],e=d[h(c)];e?e!==a&&a.splice(b,l(e),e):d[h(c)]=a,b++}},last:function(a){var b=a[a.length-1];return b.nodeType?b:o.last(b)},first:function(a){var b=a[0];return b.nodeType?b:o.first(b)},flatten:function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];d.nodeType?b.push(d):b.push.apply(b,o.flatten(d))}return b},register:function(b,c,d,e){return a.cid(b),b.unregistered=c,b.parentList=d,b.nesting=d&&"undefined"!=typeof d.nesting?d.nesting+1:0,d?(b.deepChildren=[],b.newDeepChildren=[],b.replacements=[],d!==!0&&(e?d.replacements.push(b):d.newDeepChildren.push(b))):o.nestList(b),b},unregisterChildren:function(b){var c=[];return a.each(b,function(a){a.nodeType?(b.replacements||delete d[h(a)],c.push(a)):k.apply(c,o.unregister(a,!0))}),a.each(b.deepChildren,function(a){o.unregister(a,!0)}),c},unregister:function(a,b){var c=o.unregisterChildren(a,!0);if(a.unregistered){var d=a.unregistered;if(a.replacements=a.unregistered=null,!b){var e=a.parentList&&a.parentList.deepChildren;if(e){var f=e.indexOf(a);-1!==f&&e.splice(f,1)}}d()}return c},nodeMap:d};return a.view.nodeLists=o,o}),swifty.define("can/view/parser",[],function(){function a(a,b){for(var c=0;c<a.length;c++)b(a[c],c)}function b(b){var c={},d=b.split(",");return a(d,function(a){c[a]=!0}),c}function c(a,b){for(var c=0,d=a.length;d>c;c++){var e=a[c];b[e.tokenType].apply(b,e.args)}return a}var d="A-Za-z0-9",e="-:_"+d,f="[^=>\\s\\/]+",g="\\s*=\\s*",h="\\{[^\\}\\{]\\}",i="\\{\\{[^\\}]\\}\\}\\}?",j="(?:"+g+"(?:(?:"+i+")|(?:"+h+")|(?:\"[^\"]*\")|(?:'[^']*')|[^>\\s]+))?",k="\\{\\{[^\\}]*\\}\\}\\}?",l="\\{\\{([^\\}]*)\\}\\}\\}?",m=new RegExp("^<(["+d+"]["+e+"]*)((?:\\s*(?:(?:(?:"+f+")?"+j+")|(?:"+k+")+))*)\\s*(\\/?)>"),n=new RegExp("^<\\/(["+e+"]+)[^>]*>"),o=new RegExp(l,"g"),p=/<|\{\{/,q=/\s/,r=b("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed"),s=b("a,address,article,applet,aside,audio,blockquote,button,canvas,center,dd,del,dir,div,dl,dt,fieldset,figcaption,figure,footer,form,frameset,h1,h2,h3,h4,h5,h6,header,hgroup,hr,iframe,ins,isindex,li,map,menu,noframes,noscript,object,ol,output,p,pre,section,script,table,tbody,td,tfoot,th,thead,tr,ul,video"),t=b("a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,textarea,tt,u,var"),u=b("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr"),v=b("script"),w="start,end,close,attrStart,attrEnd,attrValue,chars,comment,special,done".split(","),x=function(){},y=function(b,d,e){function f(a,b,c,e){if(b=b.toLowerCase(),s[b]&&!t[b])for(var f=z.last();f&&t[f]&&!s[f];)g("",f),f=z.last();u[b]&&z.last()===b&&g("",b),e=r[b]||!!e,d.start(b,e),e||z.push(b),y.parseAttrs(c,d),d.end(b,e)}function g(a,b){var c;if(b)for(b=b.toLowerCase(),c=z.length-1;c>=0&&z[c]!==b;c--);else c=0;if(c>=0){for(var e=z.length-1;e>=c;e--)d.close&&d.close(z[e]);z.length=c}}function h(a,b){d.special&&d.special(b)}if("object"==typeof b)return c(b,d);var i=[];d=d||{},e&&a(w,function(a){var b=d[a]||x;d[a]=function(){b.apply(this,arguments)!==!1&&i.push({tokenType:a,args:[].slice.call(arguments,0)})}});var j,k,l,q=function(){B&&d.chars&&d.chars(B),B=""},z=[],A=b,B="";for(z.last=function(){return this[this.length-1]};b;){if(k=!0,z.last()&&v[z.last()])b=b.replace(new RegExp("([\\s\\S]*?)</"+z.last()+"[^>]*>"),function(a,b){return b=b.replace(/<!--([\s\S]*?)-->|<!\[CDATA\[([\s\S]*?)]]>/g,"$1$2"),d.chars&&d.chars(b),""}),g("",z.last());else if(0===b.indexOf("<!--")?(j=b.indexOf("-->"),j>=0&&(q(),d.comment&&d.comment(b.substring(4,j)),b=b.substring(j+3),k=!1)):0===b.indexOf("</")?(l=b.match(n),l&&(q(),b=b.substring(l[0].length),l[0].replace(n,g),k=!1)):0===b.indexOf("<")?(l=b.match(m),l&&(q(),b=b.substring(l[0].length),l[0].replace(m,f),k=!1)):0===b.indexOf("{{")&&(l=b.match(o),l&&(q(),b=b.substring(l[0].length),l[0].replace(o,h))),k){j=b.search(p),0===j&&b===A&&(B+=b.charAt(0),b=b.substr(1),j=b.search(p));var C=0>j?b:b.substring(0,j);b=0>j?"":b.substring(j),C&&(B+=C)}if(b===A)throw new Error("Parse Error: "+b);A=b}return q(),g(),d.done(),i},z=function(a,b,c,d){a.attrStart=d.substring("number"==typeof a.nameStart?a.nameStart:b,b),c.attrStart(a.attrStart),a.inName=!1},A=function(a,b,c,d){void 0!==a.valueStart&&a.valueStart<b?c.attrValue(d.substring(a.valueStart,b)):!a.inValue,c.attrEnd(a.attrStart),a.attrStart=void 0,a.valueStart=void 0,a.inValue=!1,a.inName=!1,a.lookingForEq=!1,a.inQuote=!1,a.lookingForName=!0};return y.parseAttrs=function(a,b){if(a){for(var c,d=0,e={inDoubleCurly:!1,inName:!1,nameStart:void 0,inValue:!1,valueStart:void 0,inQuote:!1,attrStart:void 0,lookingForName:!0,lookingForValue:!1,lookingForEq:!1};d<a.length;){c=d;var f=a.charAt(d),g=a.charAt(d+1),h=a.charAt(d+2);if(d++,"{"===f&&"{"===g)e.inValue&&c>e.valueStart?b.attrValue(a.substring(e.valueStart,c)):e.inName&&e.nameStart<c?(z(e,c,b,a),A(e,c,b,a)):e.lookingForValue?e.inValue=!0:e.lookingForEq&&e.attrStart&&A(e,c,b,a),e.inDoubleCurly=!0,e.doubleCurlyStart=c+2,d++;else if(e.inDoubleCurly){if("}"===f&&"}"===g){var i="}"===h?1:0;b.special(a.substring(e.doubleCurlyStart,c)),e.inDoubleCurly=!1,e.inValue&&(e.valueStart=c+2+i),d+=1+i}}else e.inValue?e.inQuote?f===e.inQuote&&A(e,c,b,a):q.test(f)&&A(e,c,b,a):"="===f&&(e.lookingForEq||e.lookingForName||e.inName)?(e.attrStart||z(e,c,b,a),e.lookingForValue=!0,e.lookingForEq=!1,e.lookingForName=!1):e.inName?q.test(f)&&(z(e,c,b,a),e.lookingForEq=!0):e.lookingForName?q.test(f)||(e.attrStart&&A(e,c,b,a),e.nameStart=c,e.inName=!0):e.lookingForValue&&(q.test(f)||(e.lookingForValue=!1,e.inValue=!0,"'"===f||'"'===f?(e.inQuote=f,e.valueStart=c+1):e.valueStart=c))}e.inName?(z(e,c+1,b,a),A(e,c+1,b,a)):e.lookingForEq?A(e,c+1,b,a):e.inValue&&A(e,c+1,b,a)}},y}),swifty.define("can/util/diff",[],function(){var a=[].slice;return function(b,c){for(var d=0,e=0,f=b.length,g=c.length,h=[];f>d&&g>e;){var i=b[d],j=c[e];if(i!==j)if(g>e+1&&c[e+1]===i)h.push({index:e,deleteCount:0,insert:[c[e]]}),d++,e+=2;else{if(!(f>d+1&&b[d+1]===j))return h.push({index:e,deleteCount:f-d,insert:a.call(c,e)}),h;h.push({index:e,deleteCount:1,insert:[]}),d+=2,e++}else d++,e++}return e===g&&d===f?h:(h.push({index:e,deleteCount:f-d,insert:a.call(c,e)}),h)}}),swifty.define("can/view/live",["can/util/library","can/elements","can/view","can/view/node_lists","can/view/parser","can/util/diff"],function(a,b,c,d,e,f){b=b||a.view.elements,d=d||a.view.NodeLists,e=e||a.view.parser;var g=function(b,c,d){var e=!1,f=function(){return e||(e=!0,d(g),a.unbind.call(b,"removed",f)),!0},g={teardownCheck:function(a){return a?!1:f()}};return a.bind.call(b,"removed",f),c(g),g},h=function(a){var b=a.childNodes;if("length"in b)return b;for(var c=a.firstChild,d=[];c;)d.push(c),c=c.nextSibling;return d},i=function(a,b,c){return g(a,function(){b.computeInstance.bind("change",c)},function(a){b.computeInstance.unbind("change",c),a.nodeList&&d.unregister(a.nodeList)})},j=function(a){var b,c={};return e.parseAttrs(a,{attrStart:function(a){c[a]="",b=a},attrValue:function(a){c[b]+=a},attrEnd:function(){}}),c},k=[].splice,l=function(a){return a&&a.nodeType},m=function(a){a.firstChild||a.appendChild(a.ownerDocument.createTextNode(""))},n=function(b){var c="string"==typeof b,d=a.frag(b);return c?a.view.hookup(d):d},o=function(b,c,e,f,g){var i=[];c&&(d.register(i,null,!0,!0),i.parentList=c,i.expression="#each SUBEXPRESSION");var j=e.apply(f,g.concat([i])),k=n(j),l=a.makeArray(h(k));return c?(d.update(i,l),b.push(i)):b.push(d.register(l)),k},p=function(b,c,e){var f=b.splice(c+1,e),g=[];return a.each(f,function(a){var b=d.unregister(a);[].push.apply(g,b)}),g},q=function(a,c,d,e){if(c&&0===a.length){var f=[],g=o(f,e,c,a,[a]);b.after([d[0]],g),d.push(f[0])}},r={},s={registerChildMutationCallback:function(a,b){return b?void(r[a]=b):r[a]},callChildMutationCallback:function(a){var b=a&&r[a.nodeName.toLowerCase()];b&&b(a)},list:function(c,e,h,i,j,l,m){var n,r=l||[c],t=[],u=!1,v=!1,w=function(c,e,f){if(u){var g=A.ownerDocument.createDocumentFragment(),j=[],m=[];a.each(e,function(b,c){var d=a.compute(c+f),e=o(j,l,h,i,[b,d]);g.appendChild(e),m.push(d)});var n=f+1;if(!t.length){var q=p(r,0,r.length-1);a.remove(a.$(q))}if(r[n]){var v=d.first(r[n]);a.insertBefore(v.parentNode,g,v)}else b.after(1===n?[A]:[d.last(r[n-1])],g);k.apply(r,[n,0].concat(j)),k.apply(t,[f,0].concat(m));for(var w=f+m.length,x=t.length;x>w;w++)t[w](w);c.callChildMutationCallback!==!1&&s.callChildMutationCallback(A.parentNode)}},x=function(a,b,c){y({},{length:1},c,!0),w({},[b],c)},y=function(b,c,e,f,g){if(u&&(f||!D.teardownCheck(A.parentNode))){0>e&&(e=t.length+e);var h=p(r,e,c.length);t.splice(e,c.length);for(var i=e,j=t.length;j>i;i++)t[i](i);g?d.unregister(r):(q(n,m,r,l),a.remove(a.$(h)),b.callChildMutationCallback!==!1&&s.callChildMutationCallback(A.parentNode))}},z=function(b,c,e,f){if(u){e+=1,f+=1;var g,h=r[e],i=a.frag(d.flatten(r[f]));g=e>f?d.last(h).nextSibling:d.first(h);var j=r[0].parentNode;j.insertBefore(i,g);var k=r[f];[].splice.apply(r,[f,1]),[].splice.apply(r,[e,0,k]),e-=1,f-=1;var l=t[f];[].splice.apply(t,[f,1]),[].splice.apply(t,[e,0,l]);var m=Math.min(f,e),n=t.length;for(n;n>m;m++)t[m](m);b.callChildMutationCallback!==!1&&s.callChildMutationCallback(A.parentNode)}},A=c.ownerDocument.createTextNode(""),B=function(a){n&&n.unbind&&n.unbind("add",w).unbind("set",x).unbind("remove",y).unbind("move",z),y({callChildMutationCallback:!!a},{length:r.length-1},0,!0,a)},C=function(b,c,d){if(!v){if(u=!0,c&&d){n=c||[];var e=f(d,c);d.unbind&&d.unbind("add",w).unbind("set",x).unbind("remove",y).unbind("move",z);for(var g=0,h=e.length;h>g;g++){var i=e[g];i.deleteCount&&y({callChildMutationCallback:!1},{length:i.deleteCount},i.index,!0),i.insert.length&&w({callChildMutationCallback:!1},i.insert,i.index)}}else d&&B(),n=c||[],w({callChildMutationCallback:!1},n,0),q(n,m,r,l);s.callChildMutationCallback(A.parentNode),u=!1,n.bind&&n.bind("add",w).bind("set",x).bind("remove",y).bind("move",z),a.batch.afterPreviousEvents(function(){u=!0})}};j=b.getParentNode(c,j);var D=g(j,function(){a.isFunction(e)&&e.bind("change",C)},function(){a.isFunction(e)&&e.unbind("change",C),B(!0)});l?(b.replace(r,A),d.update(r,[A]),l.unregistered=function(){D.teardownCheck(),v=!0}):s.replace(r,A,D.teardownCheck),C({},a.isFunction(e)?e():e)},html:function(c,e,f,g){var j;f=b.getParentNode(c,f),j=i(f,e,function(a,b){var c=d.first(k).parentNode;c&&n(b);var e=d.first(k).parentNode;j.teardownCheck(e),s.callChildMutationCallback(e)});var k=g||[c],n=function(c){var e="function"==typeof c,g=l(c),i=a.frag(e?"":c),j=a.makeArray(k);m(i),g||e||(i=a.view.hookup(i,f)),j=d.update(k,h(i)),e&&c(i.firstChild),b.replace(j,i)};j.nodeList=k,g?g.unregistered=j.teardownCheck:d.register(k,j.teardownCheck),n(e())},replace:function(c,e,f){var g=c.slice(0),i=a.frag(e);return d.register(c,f),"string"==typeof e&&(i=a.view.hookup(i,c[0].parentNode)),d.update(c,h(i)),b.replace(g,i),c},text:function(c,e,f,g){var h=b.getParentNode(c,f),j=i(h,e,function(b,c){"unknown"!=typeof k.nodeValue&&(k.nodeValue=a.view.toStr(c)),j.teardownCheck(k.parentNode)}),k=c.ownerDocument.createTextNode(a.view.toStr(e()));g?(g.unregistered=j.teardownCheck,j.nodeList=g,d.update(g,[k]),b.replace([c],k)):j.nodeList=s.replace([c],k,j.teardownCheck)},setAttributes:function(b,c){var d=j(c);for(var e in d)a.attr.set(b,e,d[e])},attributes:function(c,d,e){var f={},g=function(d){var e,g=j(d);for(e in g){var h=g[e],i=f[e];h!==i&&a.attr.set(c,e,h),delete f[e]}for(e in f)b.removeAttr(c,e);f=g};i(c,d,function(a,b){g(b)}),arguments.length>=3?f=j(e):g(d())},attributePlaceholder:"__!!__",attributeReplace:/__!!__/g,attribute:function(c,d,e){i(c,e,function(){b.setAttr(c,d,h.render())});var f,g=a.$(c);f=a.data(g,"hooks"),f||a.data(g,"hooks",f={});var h,j=String(b.getAttr(c,d)),k=j.split(s.attributePlaceholder),l=[];l.push(k.shift(),k.join(s.attributePlaceholder)),f[d]?f[d].computes.push(e):f[d]={render:function(){var a=0,c=j?j.replace(s.attributeReplace,function(){return b.contentText(h.computes[a++]())}):b.contentText(h.computes[a++]());return c},computes:[e],batchNum:void 0},h=f[d],l.splice(1,0,e()),b.setAttr(c,d,l.join(""))},specialAttribute:function(a,c,d){i(a,d,function(d,e){b.setAttr(a,c,u(e))}),b.setAttr(a,c,u(d()))},simpleAttribute:function(a,c,d){i(a,d,function(d,e){b.setAttr(a,c,e)}),b.setAttr(a,c,d())}};s.attr=s.simpleAttribute,s.attrs=s.attributes,s.getAttributeParts=j;var t=/(\r|\n)+/g,u=function(a){var c=/^["'].*["']$/;return a=a.replace(b.attrReg,"").replace(t,""),c.test(a)?a.substr(1,a.length-2):a};return a.view.live=s,s}),swifty.define("can/render",["can/view","can/elements","can/view/live","can/util/string"],function(a,b,c){var d,e=[],f=function(a){var c=b.tagMap[a]||"span";return"span"===c?"@@!!@@":"<"+c+">"+f(c)+"</"+c+">"},g=function(b,c){if("string"==typeof b)return b;if(!b&&0!==b)return"";var d=b.hookup&&function(a,c){b.hookup.call(b,a,c)}||"function"==typeof b&&b;return d?c?"<"+c+" "+a.view.hook(d)+"></"+c+">":(e.push(d),""):""+b},h=function(b,c){return"string"==typeof b||"number"==typeof b?a.esc(b):g(b,c)},i=!1,j=function(){};return a.extend(a.view,{live:c,setupLists:function(){var b,c=a.view.lists;return a.view.lists=function(a,c){return b={list:a,renderer:c},Math.random()},function(){return a.view.lists=c,b}},getHooks:function(){var a=e.slice(0);return d=a,e=[],a},onlytxt:function(a,b){return h(b.call(a))},txt:function(k,l,m,n,o){var p,q,r,s,t=b.tagMap[l]||"span",u=!1,v=j;if(i)p=o.call(n);else{("string"==typeof m||1===m)&&(i=!0);var w=a.view.setupLists();v=function(){r.unbind("change",j)},r=a.compute(o,n,!1),r.bind("change",j),q=w(),p=r(),i=!1,u=r.computeInstance.hasDependencies}if(q)return v(),"<"+t+a.view.hook(function(a,b){c.list(a,q.list,q.renderer,n,b)})+"></"+t+">";if(!u||"function"==typeof p)return v(),(i||2===k||!k?g:h)(p,0===m&&t);var x=b.tagToContentPropMap[l];if(0!==m||x)return 1===m?(e.push(function(a){c.attributes(a,r,r()),v()}),r()):2===k?(s=m,e.push(function(a){c.specialAttribute(a,s,r),v()}),r()):(s=0===m?x:m,(0===m?d:e).push(function(a){c.attribute(a,s,r),v()}),c.attributePlaceholder);var y=!!b.selfClosingTags[t];return"<"+t+a.view.hook(k&&"object"!=typeof p?function(a,b){c.text(a,r,b),v()}:function(a,b){c.html(a,r,b),v()})+(y?"/>":">"+f(t)+"</"+t+">")}}),a}),swifty.define("can/view/utils",["can/util/library","can/view/scope"],function(can){var Options=can.view.Options;return{isArrayLike:function(a){return a&&a.splice&&"number"==typeof a.length},isObserveLike:function(a){return a instanceof can.Map||a&&!!a._get},emptyHandler:function(){},jsonParse:function(str){return"'"===str[0]?str.substr(1,str.length-2):"undefined"===str?void 0:can.global.JSON?JSON.parse(str):eval("("+str+")")},mixins:{last:function(){return this.stack[this.stack.length-1]},add:function(a){this.last().add(a)},subSectionDepth:function(){return this.stack.length-1}},convertToScopes:function(a,b,c,d,e,f){e&&(a.fn=this.makeRendererConvertScopes(e,b,c,d)),f&&(a.inverse=this.makeRendererConvertScopes(f,b,c,d))},makeRendererConvertScopes:function(a,b,c,d){var e=function(c,d,e){return a(c||b,d,e)};return can.__notObserve(function(a,f,g){void 0===a||a instanceof can.view.Scope||(a=b.add(a)),void 0===f||f instanceof Options||(f=c.add(f));var h=e(a,f||c,g||d);return h})},Options:Options}}),swifty.define("can/view/mustache_helpers",["can/util/library","can/view/utils","can/view/live"],function(a,b,c){c=c||a.view.live;var d=function(c){return b.isObserveLike(c)&&b.isArrayLike(c)&&c.attr("length")?c:a.isFunction(c)?c():c},e=function(a){var b={};for(var c in a){var d=a[c];b[c]=d&&d.isComputed?d():d}return b},f=function(a){return a&&"function"==typeof a.fn&&"function"==typeof a.inverse},g={each:function(e,f){var g,h,i,j=d(e),k=[];if(j instanceof a.List)return function(b){var d=[b];d.expression="live.list",a.view.nodeLists.register(d,null,f.nodeList,!0),a.view.nodeLists.update(f.nodeList,[b]);var g=function(a,b,c){return f.fn(f.scope.add({"%index":b,"@index":b},{notContext:!0}).add(a),f.options,c)};c.list(b,e,g,f.context,b.parentNode,d,function(a,b){return f.inverse(f.scope.add(a),f.options,b)})};var l=j;if(l&&b.isArrayLike(l))for(i=0;i<l.length;i++)k.push(f.fn(f.scope.add({"%index":i,"@index":i},{notContext:!0}).add(l[i])));else if(b.isObserveLike(l))for(g=a.Map.keys(l),i=0;i<g.length;i++)h=g[i],k.push(f.fn(f.scope.add({"%key":h,"@key":h},{notContext:!0}).add(l[h])));else if(l instanceof Object)for(h in l)k.push(f.fn(f.scope.add({"%key":h,"@key":h},{notContext:!0}).add(l[h])));return k},"@index":function(b,c){c||(c=b,b=0);var d=c.scope.attr("@index");return""+((a.isFunction(d)?d():d)+b)},"if":function(b,c){var e;return e=a.isFunction(b)?a.compute.truthy(b)():!!d(b),e?c.fn(c.scope||this):c.inverse(c.scope||this)},is:function(){var b,c,e=arguments[arguments.length-1];if(arguments.length-2<=0)return e.inverse();var f=arguments,g=a.compute(function(){for(var e=0;e<f.length-1;e++){if(c=d(f[e]),c=a.isFunction(c)?c():c,e>0&&c!==b)return!1;b=c}return!0});return g()?e.fn():e.inverse()},eq:function(){return g.is.apply(this,arguments)},unless:function(b,c){return g["if"].apply(this,[b,a.extend({},c,{fn:c.inverse,inverse:c.fn})])},"with":function(a,b){var c=a;return a=d(a),a?b.fn(c):void 0},log:function(a,b){"undefined"!=typeof console&&console.log},data:function(b){var c=2===arguments.length?this:arguments[1];return function(d){a.data(a.$(d),b,c||this.context)}},"switch":function(a,b){d(a);var c=!1,e=b.helpers.add({"case":function(b,e){return c||d(a)!==d(b)?void 0:(c=!0,e.fn(e.scope||this))},"default":function(a){return c?void 0:a.fn(a.scope||this)}});return b.fn(b.scope,e)},joinBase:function(){var b=[].slice.call(arguments),c=b.pop(),e=a.map(b,function(b){var c=d(b);return a.isFunction(c)?c():c}).join(""),f=c.helpers.attr("helpers.module"),g=f?f.uri:void 0,h="."===e[0];if(h&&g)return a.joinURIs(g,e);var i=a.baseURL||"undefined"!=typeof System&&(System.renderingLoader&&System.renderingLoader.baseURL||System.baseURL)||location.pathname;return"/"!==e[0]&&"/"!==i[i.length-1]&&(i+="/"),a.joinURIs(i,e)},routeUrl:function(b,c){return b||(b={}),"function"==typeof b.fn&&"function"==typeof b.inverse&&(b=e(b.hash)),a.route.url(b,"boolean"==typeof c?c:void 0)},routeCurrent:function(b){var c=a.last(arguments),d=c&&f(c);return!c||!d||c.exprData instanceof a.expression.Call?a.route.current(f(b)?{}:b||{}):a.route.current(e(b.hash||{}))?b.fn():b.inverse()}};g.routeCurrent.callAsMethod=!0,g.eachOf=g.each;var h=function(a,b){g[a]=b};return{registerHelper:h,registerSimpleHelper:function(b,c){h(b,a.view.simpleHelper(c))},getHelper:function(a,b){var c=b&&b.get("helpers."+a,{proxyMethods:!1});return c||(c=g[a]),c?{fn:c}:void 0}}}),swifty.define("can/view/expression",["can/util/library","can/view/utils","can/view/mustache_helpers","can/view/scope"],function(a,b,c){var d=function(b,c,d){var e=c.computeData(b,d);return a.compute.temporarilyBind(e.compute),e},e=function(a,b,c,e){var f=d(a,b,e);return f.compute.computeInstance.hasDependencies?{value:f.compute,computeData:f}:{value:f.initialValue,computeData:f}},f=function(a,b,d,f){var g=e(a,b,d,f);if(void 0===g.computeData.initialValue){"@"===a.charAt(0)&&"@index"!==a&&(a=a.substr(1));var h=c.getHelper(a,d);g.helper=h&&h.fn}return g},g=function(a){return a instanceof k||a instanceof h||a instanceof l?a:new k(a)},h=function(a){this._value=a};h.prototype.value=function(){return this._value};var i=function(a,b){this.key=a,this.rootExpr=b};i.prototype.value=function(a,b){var c=f(this.key,a,b);return this.isHelper=c.helper&&!c.helper.callAsMethod,c.helper||c.value};var j=function(){i.apply(this,arguments)};j.prototype.value=function(a,b){return e(this.key,a,b).value};var k=function(a,b){this.expr=a,this.modifiers=b||{},this.isCompute=!1};k.prototype.value=function(){return this.expr.value.apply(this.expr,arguments)};var l=function(a){this.hashExprs=a};l.prototype.value=function(){var b={};for(var c in this.hashExprs){var d=this.hashExprs[c],e=d.value.apply(d,arguments);b[c]={call:e&&e.isComputed&&(!d.modifiers||!d.modifiers.compute),value:e}}return a.compute(function(){var a={};for(var c in b)a[c]=b[c].call?b[c].value():b[c].value;return a})};var m=function(b,c,d){d&&!a.isEmptyObject(d)&&c.push(new l(d)),this.methodExpr=b,this.argExprs=a.map(c,g)};m.prototype.args=function(){for(var a=[],b=0,c=this.argExprs.length;c>b;b++){var d=this.argExprs[b],e=d.value.apply(d,arguments);a.push({call:e&&e.isComputed&&(!d.modifiers||!d.modifiers.compute),value:e})}return function(){for(var b=[],c=0,d=a.length;d>c;c++)b[c]=a[c].call?a[c].value():a[c].value;return b}},m.prototype.value=function(b,c,d){var e=this.methodExpr.value(b,c);this.isHelper=this.methodExpr.isHelper;var f=this.args(b,c);return a.compute(function(a){var b=e;if(b&&b.isComputed&&(b=b()),"function"==typeof b){var c=f();return d&&c.push(d),arguments.length&&c.unshift(new B.SetIdentifier(a)),b.apply(null,c)}})};var n=function(){i.apply(this,arguments)};n.prototype.value=function(a,b){var c=f(this.key,a,b,{isArgument:!0,args:[a.attr("."),a]});return c.helper||c.value};var o=function(){i.apply(this,arguments)};o.prototype.value=function(a,b){return e(this.key,a,b,{callMethodsOnObservables:!0,isArgument:!0,args:[a.attr("."),a]}).value};var p=function(a,b,c){this.methodExpr=a,this.argExprs=b,this.hashExprs=c,this.mode=null};p.prototype.args=function(){for(var a=[],b=0,c=this.argExprs.length;c>b;b++){var d=this.argExprs[b];a.push(d.value.apply(d,arguments))}return a},p.prototype.hash=function(){var a={};for(var b in this.hashExprs){var c=this.hashExprs[b];a[b]=c.value.apply(c,arguments)}return a},p.prototype.helperAndValue=function(b,e){var f,g,i,j,k=this.argExprs.length||!a.isEmptyObject(this.hashExprs),l=this.methodExpr instanceof h?""+this.methodExpr._value:this.methodExpr.key;if(k){f=c.getHelper(l,e);var m=b.attr(".");f||"function"!=typeof m[l]||(f={fn:m[l]})}if(!f){j=this.args(b,e);var n=d(l,b,{isArgument:!1,args:j&&j.length?j:[b.attr("."),b]}),o=n.compute;i=n.initialValue,g=n.compute.computeInstance.hasDependencies?o:i,k||void 0!==i||(f=c.getHelper(l,e))}return{value:g,args:j,helper:f&&f.fn}},p.prototype.evaluator=function(c,d,e,f,g,h,i,j){var k={fn:function(){},inverse:function(){}},l=d.attr("."),m=this.args(d,e,g,h,i,j),n=this.hash(d,e,g,h,i,j);return b.convertToScopes(k,d,e,g,h,i),a.simpleExtend(k,{context:l,scope:d,contexts:d,hash:n,nodeList:g,exprData:this,helperOptions:e,helpers:e}),m.push(k),function(){return c.apply(l,m)}},p.prototype.value=function(b,c,d,e,f,g){var h=this.helperAndValue(b,c),i=h.helper;if(!i)return h.value;var j=this.evaluator(i,b,c,d,e,f,g),k=a.compute(j);return a.compute.temporarilyBind(k),k.computeInstance.hasDependencies?k:k()};var q=/[\w\.\\\-_@\/\&%]+/,r=/('.*?'|".*?"|=|[\w\.\\\-_@\/*%\$]+|[\(\)]|,|\~)/g,s=/^('.*?'|".*?"|[0-9]+\.?[0-9]*|true|false|null|undefined)$/,t=function(a){return q.test(a)},u=/^[\.@]\w/,v=function(a){return t(a)&&u.test(a)},w=function(a){return a.children||(a.children=[]),a},x=function(){this.root={children:[],type:"Root"},this.current=this.root,this.stack=[this.root]};a.simpleExtend(x.prototype,{top:function(){return a.last(this.stack)},isRootTop:function(){return this.top()===this.root},popTo:function(a){this.popUntil(a),this.isRootTop()||this.stack.pop()},firstParent:function(b){for(var c=this.stack.length-2;c>0&&-1===a.inArray(this.stack[c].type,b);)c--;return this.stack[c]},popUntil:function(b){for(;-1===a.inArray(this.top().type,b)&&!this.isRootTop();)this.stack.pop();return this.top()},addTo:function(a,b){var c=this.popUntil(a);w(c).children.push(b)},addToAndPush:function(a,b){this.addTo(a,b),this.stack.push(b)},topLastChild:function(){return a.last(this.top().children)},replaceTopLastChild:function(a){var b=w(this.top()).children;return b.pop(),b.push(a),a},replaceTopLastChildAndPush:function(a){this.replaceTopLastChild(a),this.stack.push(a)},replaceTopAndPush:function(a){var b;return this.top()===this.root?b=w(this.top()).children:(this.stack.pop(),b=w(this.top()).children),b.pop(),b.push(a),this.stack.push(a),a}});var y=function(a){var b=a.lastIndexOf("./"),c=a.lastIndexOf(".");if(c>b)return a.substr(0,c)+"@"+a.substr(c+1);var d=-1===b?0:b+2,e=a.charAt(d);return"."===e||"@"===e?a.substr(0,d)+"@"+a.substr(d+1):a.substr(0,d)+"@"+a.substr(d)},z=function(a){return"Lookup"===a.type&&(a.key=y(a.key)),a},A=function(a){var b=a.top();if(b&&"Lookup"===b.type){var c=a.stack[a.stack.length-2];"Helper"!==c.type&&c&&a.replaceTopAndPush({type:"Helper",method:b})}},B={convertKeyToLookup:y,Literal:h,Lookup:i,ScopeLookup:j,Arg:k,Hashes:l,Call:m,Helper:p,HelperLookup:n,HelperScopeLookup:o,SetIdentifier:function(a){this.value=a},tokenize:function(b){var c=[];return(a.trim(b)+" ").replace(r,function(a,b){c.push(b)}),c},lookupRules:{"default":function(a,b,c){var d=("Helper"!==b||a.root?"":"Helper")+(c?"Scope":"")+"Lookup";return B[d]},method:function(){return j}},methodRules:{"default":function(a){return"Call"===a.type?m:p},call:function(){return m}},parse:function(a,b){b=b||{};var c=this.ast(a);b.lookupRule||(b.lookupRule="default"),"string"==typeof b.lookupRule&&(b.lookupRule=B.lookupRules[b.lookupRule]),b.methodRule||(b.methodRule="default"),"string"==typeof b.methodRule&&(b.methodRule=B.methodRules[b.methodRule]);var d=this.hydrateAst(c,b,b.baseMethodType||"Helper");return d},hydrateAst:function(b,c,d,e){var f,g=this;if("Lookup"===b.type)return new(c.lookupRule(b,d,e))(b.key,b.root&&this.hydrateAst(b.root,c,d));if("Literal"===b.type)return new h(b.value);if("Arg"===b.type)return new k(this.hydrateAst(b.children[0],c,d,e),{compute:!0});if("Hashes"===b.type)return f={},a.each(b.children,function(a){f[a.prop]=g.hydrateAst(a.children[0],c,b.type,!0)}),new l(f);if("Hash"===b.type)throw new Error("");if("Call"===b.type||"Helper"===b.type){var i=[];return f={},a.each(b.children,function(a){"Hash"===a.type?f[a.prop]=g.hydrateAst(a.children[0],c,b.type,!0):i.push(g.hydrateAst(a,c,b.type,!0))}),new(c.methodRule(b))(this.hydrateAst(b.method,c,b.type),i,f)}},ast:function(a){var b=this.tokenize(a);return this.parseAst(b,{index:0})},parseAst:function(c,d){for(var e,f=new x;d.index<c.length;){var g=c[d.index],h=c[d.index+1];if(d.index++,s.test(g))A(f),f.addTo(["Helper","Call","Hash"],{type:"Literal",value:b.jsonParse(g)});else if("="===h){if(e=f.top(),e&&"Lookup"===e.type){var i=f.firstParent(["Call","Helper","Hash"]);("Call"===i.type||"Root"===i.type)&&(f.popUntil(["Call"]),e=f.top(),f.replaceTopAndPush({type:"Helper",method:"Root"===e.type?a.last(e.children):e}))}e=f.popUntil(["Helper","Call","Hashes"]),"Call"===e.type&&f.addToAndPush(["Call"],{type:"Hashes"}),f.addToAndPush(["Helper","Hashes"],{type:"Hash",prop:g}),d.index++}else if(q.test(g)){var j=f.topLastChild();j&&"Call"===j.type&&v(g)?f.replaceTopLastChildAndPush({type:"Lookup",root:j,key:g}):(A(f),f.addToAndPush(["Helper","Call","Hash","Arg"],{type:"Lookup",key:g}))}else if("~"===g)A(f),f.addToAndPush(["Helper","Call","Hash"],{type:"Arg",key:g});else if("("===g){if(e=f.top(),"Lookup"!==e.type)throw new Error("Unable to understand expression "+c.join(""));f.replaceTopAndPush({type:"Call",method:z(e)})}else")"===g?f.popTo(["Call"]):","===g&&f.popUntil(["Call"])}return f.root.children[0]}};return a.expression=B,B}),swifty.define("can/view/href",["can/util/library","can/view/expression","can/view/callbacks","can/view/scope"],function(a,b){var c=function(a){return"{"===a[0]&&"}"===a[a.length-1]?a.substr(1,a.length-2):a};a.view.attr("can-href",function(d,e){var f=b.parse("tmp("+c(d.getAttribute("can-href"))+")",{baseMethodType:"Call"}),g=f.argExprs[0].value(e.scope,null),h=a.compute(function(){return a.route.url(g())});d.setAttribute("href",h());var i=function(a,b){d.setAttribute("href",b)};h.bind("change",i),a.bind.call(d,"removed",function(){h.unbind("change",i)})})}),swifty.define("can/view/bindings",["can/util/library","can/view/expression","can/view/callbacks","can/view/live","can/view/scope","can/view/href"],function(a,b,c,d){var e={viewModel:function(b,c,d,e){e=e||{};var f,g={},h=[],i={},j={},l=a.extend({},e);a.each(a.makeArray(b.attributes),function(a){var d=k(a,b,{templateType:c.templateType,scope:c.scope,semaphore:g,getViewModel:function(){return f},attributeViewModelBindings:l,alreadyUpdatedChild:!0,nodeList:c.parentNodeList});d&&(d.onCompleteBinding&&(d.bindingInfo.parentToChild&&void 0!==d.value&&(e[r(d.bindingInfo.childName)]=d.value),h.push(d.onCompleteBinding)),i[a.name]=d.onTeardown)}),f=d(e);for(var m=0,n=h.length;n>m;m++)h[m]();return a.bind.call(b,"attributes",function(a){var d=a.attributeName,e=b.getAttribute(d);i[d]&&i[d]();var g=j[d]&&"attribute"===j[d].parent;if(null!==e||g){var h=k({name:d,value:e},b,{templateType:c.templateType,scope:c.scope,semaphore:{},getViewModel:function(){return f},attributeViewModelBindings:l,initializeValues:!0,nodeList:c.parentNodeList});h&&(h.onCompleteBinding&&h.onCompleteBinding(),j[d]=h.bindingInfo,i[d]=h.onTeardown)}}),function(){for(var a in i)i[a]()}},data:function(b,c){if(!a.data(a.$(b),"preventDataBindings")){var d,e=a.viewModel(b),f={},g=k({name:c.attributeName,value:b.getAttribute(c.attributeName),nodeList:c.nodeList},b,{templateType:c.templateType,scope:c.scope,semaphore:f,getViewModel:function(){return e}});g.onCompleteBinding&&g.onCompleteBinding(),d=g.onTeardown,a.one.call(b,"removed",function(){d()}),a.bind.call(b,"attributes",function(a){var g=a.attributeName,h=b.getAttribute(g);if(g===c.attributeName&&(d&&d(),null!==h)){var i=k({name:g,value:h},b,{templateType:c.templateType,scope:c.scope,semaphore:f,getViewModel:function(){return e},initializeValues:!0,nodeList:c.nodeList});i&&(i.onCompleteBinding&&i.onCompleteBinding(),d=i.onTeardown)}})}},reference:function(b,c){b.getAttribute(c.attributeName);var d=a.camelize(c.attributeName.substr(1).toLowerCase()),e=a.viewModel(b),f=c.scope.getRefs();f._context.attr("*"+d,e)},event:function(c,d){var e=d.attributeName,f=0===e.indexOf("can-"),g=0===e.indexOf("can-")?e.substr("can-".length):o(e,"(",")"),h=f;"$"===g.charAt(0)&&(g=g.substr(1),h=!0);var i=function(f){var g=c.getAttribute(e);if(g){var h=a.$(c),i=a.viewModel(h[0]),j=b.parse(o(g),{lookupRule:"method",methodRule:"call"});if(!(j instanceof b.Call||j instanceof b.Helper)){var k=a.map([d.scope._context,h].concat(a.makeArray(arguments)),function(a){return new b.Literal(a)});j=new b.Call(j,k,{})}var l=d.scope.read(j.methodExpr.key,{isArgument:!0});if(!l.value)return l=d.scope.read(j.methodExpr.key,{isArgument:!0}),null;var m=d.scope.add({"@element":h,"@event":f,"@viewModel":i,"@scope":d.scope,"@context":d.scope._context,"%element":this,$element:h,"%event":f,"%viewModel":i,"%scope":d.scope,"%context":d.scope._context},{notContext:!0}),n=j.args(m,null)();return l.value.apply(l.parent,n)}};if(s[g]){var j=s[g](d,c,i);i=j.handler,g=j.event}a.bind.call(h?c:a.viewModel(c),g,i);var k=function(b){b.attributeName!==e||this.getAttribute(e)||(a.unbind.call(h?c:a.viewModel(c),g,i),a.unbind.call(c,"attributes",k))};a.bind.call(c,"attributes",k)},value:function(b,c){var d,e="$value",g=a.trim(o(b.getAttribute("can-value")));if("input"!==b.nodeName.toLowerCase()||"checkbox"!==b.type&&"radio"!==b.type)n(b)&&(e="$innerHTML");else{var h=f.scope(b,c.scope,g,{},!0);if("checkbox"===b.type){var i=a.attr.has(b,"can-true-value")?b.getAttribute("can-true-value"):!0,j=a.attr.has(b,"can-false-value")?b.getAttribute("can-false-value"):!1;d=a.compute(function(a){return arguments.length?void h(a?i:j):h()==i
})}else"radio"===b.type&&(d=a.compute(function(a){return arguments.length?void(a&&h(b.value)):h()==b.value}));e="$checked",g="getterSetter",c.scope=new a.view.Scope({getterSetter:d})}var l=k({name:"{("+e+"})",value:g},b,{templateType:c.templateType,scope:c.scope,semaphore:{},initializeValues:!0,legacyBindings:!0,syncChildWithParent:!0});a.one.call(b,"removed",function(){l.onTeardown()})}};a.view.attr(/^\{[^\}]+\}$/,e.data),a.view.attr(/\*[\w\.\-_]+/,e.reference),a.view.attr(/^\([\$?\w\.]+\)$/,e.event),a.view.attr(/can-[\w\.]+/,e.event),a.view.attr("can-value",e.value);var f={scope:function(c,d,e,f,g){if(e){if(g){var h=b.parse(e,{baseMethodType:"Call"});return h.value(d,new a.view.Options({}))}return function(a){d.attr(r(e),a)}}return a.compute()},viewModel:function(b,c,d,e,f){var g=r(d);return f?a.compute(function(b){var c=e.getViewModel();return arguments.length?void c.attr(g,b):"."===d?c:a.compute.read(c,a.compute.read.reads(d),{}).value}):function(a){e.getViewModel().attr(g,a)}},attribute:function(b,c,d,e,f,g,h){var i,j,k,l,m,n="select"===b.nodeName.toLowerCase(),o="value"===d&&n&&b.multiple,p=!1;h||(h="innerHTML"===d?["blur","change"]:"change"),a.isArray(h)||(h=[h]);var q=function(c){if(n&&!p&&(clearTimeout(k),k=setTimeout(function(){q(c)},1)),j=c,o){c&&"string"==typeof c?(c=c.split(";"),i=!0):c=c?a.makeArray(c):[];var f={};a.each(c,function(a){f[a]=!0}),a.each(b.childNodes,function(a){a.value&&(a.selected=!!f[a.value])})}else!e.legacyBindings&&n&&"selectedIndex"in b&&"value"===d?a.attr.setSelectValue(b,c):a.attr.setAttrOrProp(b,d,null==c?"":c);return c},r=function(){if(o){var c=[],e=b.childNodes;return a.each(e,function(a){a.selected&&a.value&&c.push(a.value)}),i?c.join(";"):c}return n&&"selectedIndex"in b&&-1===b.selectedIndex?void 0:a.attr.get(b,d)};n&&setTimeout(function(){p=!0},1),b.tagName&&"input"===b.tagName.toLowerCase()&&b.form&&(l=[{el:b.form,eventName:"reset",handler:function(){q(m)}}]);var s;return m=r(),a.compute(m,{on:function(c){if(a.each(h,function(d){a.bind.call(b,d,c)}),a.each(l,function(b){a.bind.call(b.el,b.eventName,b.handler)}),n){var d=function(){g&&q(g()),c()};a.attr.MutationObserver?(s=new a.attr.MutationObserver(d),s.observe(b,{childList:!0,subtree:!0})):a.data(a.$(b),"canBindingCallback",{onMutation:d})}},off:function(c){a.each(h,function(d){a.unbind.call(b,d,c)}),a.each(l,function(b){a.unbind.call(b.el,b.eventName,b.handler)}),n&&(a.attr.MutationObserver?s.disconnect():a.data(a.$(b),"canBindingCallback",null))},get:r,set:q})}},g={childToParent:function(b,c,d,e,f,g){var h="function"==typeof c,i=function(b,i){e[f]||(h?(c(i),g&&c()!==d()&&(e[f]=(e[f]||0)+1,a.batch.start(),d(c()),a.batch.after(function(){--e[f]}),a.batch.stop())):c instanceof a.Map&&c.attr(i,!0))};return d&&d.isComputed&&d.bind("change",i),i},parentToChild:function(b,c,d,e,f){var g=function(b,c){e[f]=(e[f]||0)+1,a.batch.start(),d(c),a.batch.after(function(){--e[f]}),a.batch.stop()};return c&&c.isComputed&&c.bind("change",g),g}},h=function(b,d,e,f){var g=b.name,h=b.value||"",k=g.match(i);if(!k){var l=j.test(g),m=a.camelize(g);if(l||c.attr(g))return;var n="{"===h[0]&&"}"===a.last(h),o="legacy"===e?d[m]:!n,p=n?h.substr(1,h.length-2):h;return o?{bindingAttributeName:g,parent:"attribute",parentName:g,child:"viewModel",childName:m,parentToChild:!0,childToParent:!0}:{bindingAttributeName:g,parent:"scope",parentName:p,child:"viewModel",childName:m,parentToChild:!0,childToParent:!0}}var q=!!k[1],r=q||!!k[2],s=q||!r,t=k[3],u="$"===t.charAt(0);if(u){var v={parent:"scope",child:"attribute",childToParent:r,parentToChild:s,bindingAttributeName:g,childName:t.substr(1),parentName:h,initializeValues:!0};return"select"===f&&(v.stickyParentToChild=!0),v}return{parent:"scope",child:"viewModel",childToParent:r,parentToChild:s,bindingAttributeName:g,childName:a.camelize(t),parentName:h,initializeValues:!0}},i=/\{(\()?(\^)?([^\}\)]+)\)?\}/,j=/^(data-view-id|class|id|\[[\w\.-]+\]|#[\w\.-])$/i,k=function(b,c,d){var e=h(b,d.attributeViewModelBindings,d.templateType,c.nodeName.toLowerCase());if(e){e.alreadyUpdatedChild=d.alreadyUpdatedChild,d.initializeValues&&(e.initializeValues=!0);var i,j,k,m=f[e.parent](c,d.scope,e.parentName,d,e.parentToChild),n=f[e.child](c,d.scope,e.childName,d,e.childToParent,e.stickyParentToChild&&m);d.nodeList&&(m&&m.isComputed&&m.computeInstance.setPrimaryDepth(d.nodeList.nesting+1),n&&n.isComputed&&n.computeInstance.setPrimaryDepth(d.nodeList.nesting+1)),e.parentToChild&&(j=g.parentToChild(c,m,n,d.semaphore,e.bindingAttributeName));var o=function(){e.childToParent?i=g.childToParent(c,m,n,d.semaphore,e.bindingAttributeName,d.syncChildWithParent):e.stickyParentToChild&&n.bind("change",k=a.k),e.initializeValues&&l(e,n,m,j,i)},r=function(){q(m,j),q(n,i),q(n,k)};return"viewModel"===e.child?{value:p(m),onCompleteBinding:o,bindingInfo:e,onTeardown:r}:(o(),{bindingInfo:e,onTeardown:r})}},l=function(a,b,c,d,e){var f=!1;a.parentToChild&&!a.childToParent||(!a.parentToChild&&a.childToParent?f=!0:void 0===p(b)||void 0===p(c)&&(f=!0)),f?e({},p(b)):a.alreadyUpdatedChild||d({},p(c))};if(!a.attr.MutationObserver){var m=function(b){var c=a.data(a.$(b),"canBindingCallback");c&&c.onMutation(b)};d.registerChildMutationCallback("select",m),d.registerChildMutationCallback("optgroup",function(a){m(a.parentNode)})}var n=function(){var a={"":!0,"true":!0,"false":!1},b=function(b){if(b&&b.getAttribute){var c=b.getAttribute("contenteditable");return a[c]}};return function(a){var c=b(a);return"boolean"==typeof c?c:!!b(a.parentNode)}}(),o=function(a,b,c){return b=b||"{",c=c||"}",a[0]===b&&a[a.length-1]===c?a.substr(1,a.length-2):a},p=function(a){return a&&a.isComputed?a():a},q=function(a,b){a&&a.isComputed&&"function"==typeof b&&a.unbind("change",b)},r=function(a){return a.replace(/@/g,"")},s={enter:function(a,b,c){return{event:"keyup",handler:function(a){return 13===a.keyCode?c.call(this,a):void 0}}}};return a.bindings={behaviors:e,getBindingInfo:h,special:s},a.bindings}),swifty.define("can/view/mustache",["can/util/library","can/view/scope","can/view","can/scanner","can/compute","can/render","can/view/bindings"],function(a){a.view.ext=".mustache";var b="scope",c="___h4sh",d="{scope:"+b+",options:options}",e="{scope:"+b+",options:options, special: true}",f=b+",options",g=/((([^'"\s]+?=)?('.*?'|".*?"))|.*?)\s/g,h=/^(('.*?'|".*?"|[0-9]+\.?[0-9]*|true|false|null|undefined)|((.+?)=(('.*?'|".*?"|[0-9]+\.?[0-9]*|true|false)|(.+))))$/,i=function(a){return'{get:"'+a.replace(/"/g,'\\"')+'"}'},j=function(a){return a&&"string"==typeof a.get},k=function(b){return b instanceof a.Map||b&&!!b._get},l=function(a){return a&&a.splice&&"number"==typeof a.length},m=function(b,c,d){var e=function(a,d){return b(a||c,d)};return function(b,f){return void 0===b||b instanceof a.view.Scope||(b=c.add(b)),void 0===f||f instanceof a.view.Options||(f=d.add(f)),e(b,f||d)}},n=function(b){if(this.constructor!==n){var c=new n(b);return function(a,b){return c.render(a,b)}}return"function"==typeof b?void(this.template={fn:b}):(a.extend(this,b),void(this.template=this.scanner.scan(this.text,this.name)))};a.Mustache=a.global.Mustache=n,n.prototype.render=function(b,c){return b instanceof a.view.Scope||(b=new a.view.Scope(b||{})),c instanceof a.view.Options||(c=new a.view.Options(c||{})),c=c||{},this.template.fn.call(b,b,c)},a.extend(n.prototype,{scanner:new a.view.Scanner({text:{start:"",scope:b,options:",options: options",argNames:f},tokens:[["returnLeft","{{{","{{[{&]"],["commentFull","{{!}}","^[\\s\\t]*{{!.+?}}\\n"],["commentLeft","{{!","(\\n[\\s\\t]*{{!|{{!)"],["escapeFull","{{}}","(^[\\s\\t]*{{[#/^][^}]+?}}\\n|\\n[\\s\\t]*{{[#/^][^}]+?}}\\n|\\n[\\s\\t]*{{[#/^][^}]+?}}$)",function(a){return{before:/^\n.+?\n$/.test(a)?"\n":"",content:a.match(/\{\{(.+?)\}\}/)[1]||""}}],["escapeLeft","{{"],["returnRight","}}}"],["right","}}"]],helpers:[{name:/^>[\s]*\w*/,fn:function(b){var c=a.trim(b.replace(/^>\s?/,"")).replace(/["|']/g,"");return"can.Mustache.renderPartial('"+c+"',"+f+")"}},{name:/^\s*data\s/,fn:function(a){var c=a.match(/["|'](.*)["|']/)[1];return"can.proxy(function(__){can.data(can.$(__),'"+c+"', this.attr('.')); }, "+b+")"}},{name:/\s*\(([\$\w]+)\)\s*->([^\n]*)/,fn:function(a){var c=/\s*\(([\$\w]+)\)\s*->([^\n]*)/,d=a.match(c);return"can.proxy(function(__){var "+d[1]+"=can.$(__);with("+b+".attr('.')){"+d[2]+"}}, this);"}},{name:/^.*$/,fn:function(b,j){var k=!1,l={content:"",startTxt:!1,startOnlyTxt:!1,end:!1};if(b=a.trim(b),b.length&&(k=b.match(/^([#^\/]|else$)/))){switch(k=k[0]){case"#":case"^":j.specialAttribute?l.startOnlyTxt=!0:(l.startTxt=!0,l.escaped=0);break;case"/":return l.end=!0,l.content+='return ___v1ew.join("");}}])',l}b=b.substring(1)}if("else"!==k){var m,n=[],o=[],p=0;l.content+="can.Mustache.txt(\n"+(j.specialAttribute?e:d)+",\n"+(k?'"'+k+'"':"null")+",",(a.trim(b)+" ").replace(g,function(a,b){p&&(m=b.match(h))?m[2]?n.push(m[0]):o.push(m[4]+":"+(m[6]?m[6]:i(m[5]))):n.push(i(b)),p++}),l.content+=n.join(","),o.length&&(l.content+=",{"+c+":{"+o.join(",")+"}}")}switch(k&&"else"!==k&&(l.content+=",[\n\n"),k){case"^":case"#":l.content+="{fn:function("+f+"){var ___v1ew = [];";break;case"else":l.content+='return ___v1ew.join("");}},\n{inverse:function('+f+"){\nvar ___v1ew = [];";break;default:l.content+=")"}return k||(l.startTxt=!0,l.end=!0),l}}]})});for(var o=a.view.Scanner.prototype.helpers,p=0;p<o.length;p++)n.prototype.scanner.helpers.unshift(o[p]);return n.txt=function(b,d,e){for(var f,g,h=b.scope,i=b.options,o=[],p={fn:function(){},inverse:function(){}},q=h.attr("."),r=!0,s=3;s<arguments.length;s++){var t=arguments[s];if(d&&a.isArray(t))p=a.extend.apply(a,[p].concat(t));else if(t&&t[c]){f=t[c];for(var u in f)j(f[u])&&(f[u]=n.get(f[u].get,b,!1,!0))}else o.push(t&&j(t)?n.get(t.get,b,!1,!0,!0):t)}if(j(e)){var v=e.get;e=n.get(e.get,b,o.length,!1),r=v===e}if(p.fn=m(p.fn,h,i),p.inverse=m(p.inverse,h,i),"^"===d){var w=p.fn;p.fn=p.inverse,p.inverse=w}return(g=r&&"string"==typeof e&&n.getHelper(e,i)||a.isFunction(e)&&!e.isComputed&&{fn:e})?(a.extend(p,{context:q,scope:h,contexts:h,hash:f}),o.push(p),function(){var a=g.fn.apply(q,o);return null==a?"":a}):function(){var b;b=a.isFunction(e)&&e.isComputed?e():e;var c,f,g,h=o.length?o:[b],i=!0,j=[];if(d)for(c=0;c<h.length;c++)g=h[c],f="undefined"!=typeof g&&k(g),l(g)?"#"===d?i=i&&!!(f?g.attr("length"):g.length):"^"===d&&(i=i&&!(f?g.attr("length"):g.length)):i="#"===d?i&&!!g:"^"===d?i&&!g:i;if(i){if("#"===d){if(l(b)){var m=k(b);for(c=0;c<b.length;c++)j.push(p.fn(m?b.attr(""+c):b[c]));return j.join("")}return p.fn(b||{})||""}return"^"===d?p.inverse(b||{})||"":""+(null!=b?b:"")}return""}},n.get=function(b,c,d,e,f){var g=c.scope.attr("."),h=c.options||{};if(d){if(n.getHelper(b,h))return b;if(c.scope&&a.isFunction(g[b]))return g[b]}var i=c.scope.computeData(b,{isArgument:e,args:[g,c.scope]}),j=i.compute;a.compute.temporarilyBind(j);{var k=i.initialValue;n.getHelper(b,h)}return f||void 0!==k&&i.scope===c.scope||!n.getHelper(b,h)?j.computeInstance.hasDependencies?j:k:b},n.resolve=function(b){return k(b)&&l(b)&&b.attr("length")?b:a.isFunction(b)?b():b},n._helpers={},n.registerHelper=function(a,b){this._helpers[a]={name:a,fn:b}},n.registerSimpleHelper=function(b,c){n.registerHelper(b,a.view.simpleHelper(c))},n.getHelper=function(a,b){var c;return b&&(c=b.get("helpers."+a,{proxyMethods:!1})),c?{fn:c}:this._helpers[a]},n.render=function(b,c,d){return a.view.cached[b]||a.__notObserve(function(){var a=c.attr(b);a&&(b=a)})(),a.view.render(b,c,d)},n.safeString=function(a){return{toString:function(){return a}}},n.renderPartial=function(b,c,d){var e=d.get("partials."+b,{proxyMethods:!1});return e?e.render?e.render(c,d):e(c,d):a.Mustache.render(b,c,d)},a.each({"if":function(b,c){var d;return d=a.isFunction(b)?a.compute.truthy(b)():!!n.resolve(b),d?c.fn(c.contexts||this):c.inverse(c.contexts||this)},is:function(){var b,c,d=arguments[arguments.length-1];if(arguments.length-2<=0)return d.inverse();for(var e=0;e<arguments.length-1;e++){if(c=n.resolve(arguments[e]),c=a.isFunction(c)?c():c,e>0&&c!==b)return d.inverse();b=c}return d.fn()},eq:function(){return n._helpers.is.fn.apply(this,arguments)},unless:function(b,c){return n._helpers["if"].fn.apply(this,[b,a.extend({},c,{fn:c.inverse,inverse:c.fn})])},each:function(b,c){var d,e,f,g=n.resolve(b),h=[];if(a.view.lists&&(g instanceof a.List||b&&b.isComputed&&void 0===g))return a.view.lists(b,function(a,b){return c.fn(c.scope.add({"@index":b}).add(a))});if(b=g,b&&l(b)){for(f=0;f<b.length;f++)h.push(c.fn(c.scope.add({"@index":f}).add(b[f])));return h.join("")}if(k(b)){for(d=a.Map.keys(b),f=0;f<d.length;f++)e=d[f],h.push(c.fn(c.scope.add({"@key":e}).add(b[e])));return h.join("")}if(b instanceof Object){for(e in b)h.push(c.fn(c.scope.add({"@key":e}).add(b[e])));return h.join("")}},"with":function(a,b){var c=a;return a=n.resolve(a),a?b.fn(c):void 0},log:function(a,b){"undefined"!=typeof console&&console.log},"@index":function(b,c){c||(c=b,b=0);var d=c.scope.read("@index",{isArgument:!0}).value;return""+((a.isFunction(d)?d():d)+b)}},function(a,b){n.registerHelper(b,a)}),a.view.register({suffix:"mustache",contentType:"x-mustache-template",script:function(a,b){return"can.Mustache(function("+f+") { "+new n({text:b,name:a}).template.out+" })"},renderer:function(a,b){return n({text:b,name:a})}}),a.mustache.registerHelper=a.proxy(a.Mustache.registerHelper,a.Mustache),a.mustache.safeString=a.Mustache.safeString,a}),swifty.define("can/observe",["can/util/library","can/map","can/list","can/compute"],function(a){return a.Observe=a.Map,a.Observe.startBatch=a.batch.start,a.Observe.stopBatch=a.batch.stop,a.Observe.triggerBatch=a.batch.trigger,a}),swifty.define("can/util/view_model",["can/util/library"],function(a){var b=a.$;b.fn&&(b.fn.scope=b.fn.viewModel=function(){return a.viewModel.apply(a,[this].concat(a.makeArray(arguments)))})}),swifty.define("can/component",["can/util/library","can/view/callbacks","can/elements","can/view/bindings","can/control","can/observe","can/view/mustache","can/util/view_model"],function(a,b,c,d){var e=/\{([^\}]+)\}/g,f=a.Component=a.Construct.extend({setup:function(){if(a.Construct.setup.apply(this,arguments),a.Component){var b=this,c=this.prototype.scope||this.prototype.viewModel;if(this.Control=g.extend(this.prototype.events),c&&("object"!=typeof c||c instanceof a.Map)?c.prototype instanceof a.Map&&(this.Map=c):this.Map=a.Map.extend(c||{}),this.attributeScopeMappings={},a.each(this.Map?this.Map.defaults:{},function(a,c){"@"===a&&(b.attributeScopeMappings[c]=c)}),this.prototype.template)if("function"==typeof this.prototype.template){var d=this.prototype.template;this.renderer=function(){return a.view.frag(d.apply(null,arguments))}}else this.renderer=a.view.mustache(this.prototype.template);a.view.tag(this.prototype.tag,function(a,c){new b(a,c)})}}},{setup:function(b,e){var f,g,h={},i=this,j=("undefined"==typeof this.leakScope?!1:!this.leakScope)&&!!this.template,k=[],l=function(){for(var a=0,b=k.length;b>a;a++)k[a]()},m=a.$(b),n=!a.data(m,"preventDataBindings");a.each(this.constructor.attributeScopeMappings,function(c,d){h[d]=b.getAttribute(a.hyphenate(c))}),n&&k.push(d.behaviors.viewModel(b,e,function(c){c["%root"]=e.scope.attr("%root");var d=i.scope||i.viewModel;if(i.constructor.Map)f=new i.constructor.Map(c);else if(d instanceof a.Map)f=d;else if(a.isFunction(d)){var g=d.call(i,c,e.scope,b);f=g instanceof a.Map?g:g.prototype instanceof a.Map?new g(c):new(a.Map.extend(g))(c)}var h=f.serialize;return f.serialize=function(){var a=h.apply(this,arguments);return delete a["%root"],a},f},h)),this.scope=this.viewModel=f,a.data(m,"scope",this.viewModel),a.data(m,"viewModel",this.viewModel),a.data(m,"preventDataBindings",!0);var o;o=j?a.view.Scope.refsScope().add(this.viewModel,{viewModel:!0}):(this.constructor.renderer?e.scope.add(new a.view.Scope.Refs):e.scope).add(this.viewModel,{viewModel:!0});var p={helpers:{}},q=function(a,b){p.helpers[a]=function(){return b.apply(f,arguments)}};a.each(this.helpers||{},function(b,c){a.isFunction(b)&&q(c,b)}),a.each(this.simpleHelpers||{},function(b,c){q(c,a.view.simpleHelper(b))}),this._control=new this.constructor.Control(b,{scope:this.viewModel,viewModel:this.viewModel,destroy:l});var r=a.view.nodeLists.register([],void 0,e.parentNodeList||!0,!1);r.expression="<"+this.tag+">",k.push(function(){a.view.nodeLists.unregister(r)}),this.constructor.renderer?(p.tags||(p.tags={}),p.tags.content=function s(b,d){var f=e.subtemplate||d.subtemplate,g=f===e.subtemplate;if(f){delete p.tags.content;var h;if(h=g?j?e:{scope:d.scope.cloneFromRef(),options:d.options}:d,d.parentNodeList){var i=f(h.scope,h.options,d.parentNodeList);c.replace([b],i)}else a.view.live.replace([b],f(h.scope,h.options));p.tags.content=s}},g=this.constructor.renderer(o,e.options.add(p),r)):g="legacy"===e.templateType?a.view.frag(e.subtemplate?e.subtemplate(o,e.options.add(p)):""):e.subtemplate?e.subtemplate(o,e.options.add(p),r):document.createDocumentFragment(),a.appendChild(b,g,a.document),a.view.nodeLists.update(r,a.childNodes(b))}}),g=a.Control.extend({_lookup:function(a){return[a.scope,a,window]},_action:function(b,c,d){var f,g;if(e.lastIndex=0,f=e.test(b),d||!f){if(f){g=a.compute(function(){var d,f=b.replace(e,function(b,e){var f;return"scope"===e||"viewModel"===e?(d=c.viewModel,""):(e=e.replace(/^(scope|^viewModel)\./,""),f=a.compute.read(c.viewModel,a.compute.read.reads(e),{readCompute:!1}).value,void 0===f&&(f=a.getObject(e)),"string"==typeof f?f:(d=f,""))}),g=f.split(/\s+/g),h=g.pop();return{processor:this.processors[h]||this.processors.click,parts:[f,g.join(" "),h],delegate:d||void 0}},this);var h=function(a,c){d._bindings.control[b](d.element),d._bindings.control[b]=c.processor(c.delegate||d.element,c.parts[2],c.parts[1],b,d)};return g.bind("change",h),d._bindings.readyComputes[b]={compute:g,handler:h},g()}return a.Control._action.apply(this,arguments)}}},{setup:function(b,c){return this.scope=c.scope,this.viewModel=c.viewModel,a.Control.prototype.setup.call(this,b,c)},off:function(){this._bindings&&a.each(this._bindings.readyComputes||{},function(a){a.compute.unbind("change",a.handler)}),a.Control.prototype.off.apply(this,arguments),this._bindings.readyComputes={}},destroy:function(){a.Control.prototype.destroy.apply(this,arguments),"function"==typeof this.options.destroy&&this.options.destroy.apply(this,arguments)}}),h=a.$;return h.fn&&(h.fn.scope=h.fn.viewModel=function(){return a.viewModel.apply(a,[this].concat(a.makeArray(arguments)))}),f}),swifty.define("can",["can/util/library","can/control/route","can/model","can/map/define","can/view/mustache","can/component"],function(a){return a}),swifty.define("swiftylib/mustache",["can/../can","can/view","can/view/mustache"],function(a,b,c){return c.Mustache}),swifty.define("swiftylib/view",["can/../can","can/view","can/view/bindings","swiftylib/mustache"],function(a){return a.view}),function(a){function b(a,c){var d;if(a&&c&&(b.locale[a]=c),d=a=a||"en",c=c||b.locale[d=b.Utils.getFallbackLocale(a)],!c)throw new Error("Plural Function not found for locale: "+a);this.pluralFunc=c,this.locale=a,this.fallbackLocale=d}b.locale={en:function(a){return 1===a?"one":"other"}},b.SafeString=function(a){this.string=a},b.SafeString.prototype.toString=function(){return this.string.toString()},b.Utils={numSub:function(a,b,c){return a.replace(/^#|[^\\]#/g,function(a){var d=a&&2===a.length?a.charAt(0):"";return d+'" + (function(){ var x = '+b+';\nif( isNaN(x) ){\nthrow new Error("MessageFormat: `"+lastkey_'+c+'+"` isnt a number.");\n}\nreturn x;\n})() + "'})},escapeExpression:function(a){var c={"\n":"\\n",'"':'\\"'},d=/[\n"]/g,e=/[\n"]/,f=function(a){return c[a]||"&amp;"};return a instanceof b.SafeString?a.toString():null===a||a===!1?"":e.test(a)?a.replace(d,f):a},getFallbackLocale:function(a){for(var c=a.indexOf("-")>=0?"-":"_";!b.locale.hasOwnProperty(a);)if(a=a.substring(0,a.lastIndexOf(c)),0===a.length)return null;return a}};var c=function(){var a={parse:function(a,b){function c(a,b,c){for(var d=a,e=c-a.length,f=0;e>f;f++)d=b+d;return d}function d(a){var b=a.charCodeAt(0);if(255>=b)var d="x",e=2;else var d="u",e=4;return"\\"+d+c(b.toString(16).toUpperCase(),"0",e)}function e(a){return'"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/[\x80-\uFFFF]/g,d)+'"'}function f(a){F>D||(D>F&&(F=D,G=[]),G.push(a))}function g(){var a="start@"+D,b=H[a];if(b)return D=b.nextPos,b.result;var c=D,d=h(),e=null!==d?function(a){return{type:"program",program:a}}(d):null;if(null!==e)var f=e;else{var f=null;D=c}return H[a]={nextPos:D,result:f},f}function h(){var a="messageFormatPattern@"+D,b=H[a];if(b)return D=b.nextPos,b.result;var c=D,d=D,e=s();if(null!==e){for(var f=[],g=i();null!==g;){f.push(g);var g=i()}if(null!==f)var h=[e,f];else{var h=null;D=d}}else{var h=null;D=d}var j=null!==h?function(a,b){var c=[];a&&a.val&&c.push(a);for(var d in b)b.hasOwnProperty(d)&&c.push(b[d]);return{type:"messageFormatPattern",statements:c}}(h[0],h[1]):null;if(null!==j)var k=j;else{var k=null;D=c}return H[a]={nextPos:D,result:k},k}function i(){var b="messageFormatPatternRight@"+D,c=H[b];if(c)return D=c.nextPos,c.result;var d=D,e=D;if("{"===a.substr(D,1)){var g="{";D+=1}else{var g=null;E&&f('"{"')}if(null!==g){var h=y();if(null!==h){var i=j();if(null!==i){var k=y();if(null!==k){if("}"===a.substr(D,1)){var l="}";D+=1}else{var l=null;E&&f('"}"')}if(null!==l){var m=s();if(null!==m)var n=[g,h,i,k,l,m];else{var n=null;D=e}}else{var n=null;D=e}}else{var n=null;D=e}}else{var n=null;D=e}}else{var n=null;D=e}}else{var n=null;D=e}var o=null!==n?function(a,b){var c=[];return a&&c.push(a),b&&b.val&&c.push(b),{type:"messageFormatPatternRight",statements:c}}(n[2],n[5]):null;if(null!==o)var p=o;else{var p=null;D=d}return H[b]={nextPos:D,result:p},p}function j(){var b="messageFormatElement@"+D,c=H[b];if(c)return D=c.nextPos,c.result;var d=D,e=D,g=t();if(null!==g){var h=D;if(","===a.substr(D,1)){var i=",";D+=1}else{var i=null;E&&f('","')}if(null!==i){var j=k();if(null!==j)var l=[i,j];else{var l=null;D=h}}else{var l=null;D=h}var m=null!==l?l:"";if(null!==m)var n=[g,m];else{var n=null;D=e}}else{var n=null;D=e}var o=null!==n?function(a,b){var c={type:"messageFormatElement",argumentIndex:a};return b&&b.length?c.elementFormat=b[1]:c.output=!0,c}(n[0],n[1]):null;if(null!==o)var p=o;else{var p=null;D=d}return H[b]={nextPos:D,result:p},p}function k(){var b="elementFormat@"+D,c=H[b];if(c)return D=c.nextPos,c.result;var d=D,e=D,g=y();if(null!==g){if("plural"===a.substr(D,6)){var h="plural";D+=6}else{var h=null;E&&f('"plural"')}if(null!==h){var i=y();if(null!==i){if(","===a.substr(D,1)){var j=",";D+=1}else{var j=null;E&&f('","')}if(null!==j){var k=y();if(null!==k){var n=l();if(null!==n){var o=y();if(null!==o)var p=[g,h,i,j,k,n,o];else{var p=null;D=e}}else{var p=null;D=e}}else{var p=null;D=e}}else{var p=null;D=e}}else{var p=null;D=e}}else{var p=null;D=e}}else{var p=null;D=e}var q=null!==p?function(a,b){return{type:"elementFormat",key:a,val:b.val}}(p[1],p[5]):null;if(null!==q)var r=q;else{var r=null;D=d}if(null!==r)var s=r;else{var t=D,u=D,v=y();if(null!==v){if("select"===a.substr(D,6)){var w="select";D+=6}else{var w=null;E&&f('"select"')}if(null!==w){var x=y();if(null!==x){if(","===a.substr(D,1)){var z=",";D+=1}else{var z=null;E&&f('","')}if(null!==z){var A=y();if(null!==A){var B=m();if(null!==B){var C=y();if(null!==C)var F=[v,w,x,z,A,B,C];else{var F=null;D=u}}else{var F=null;D=u}}else{var F=null;D=u}}else{var F=null;D=u}}else{var F=null;D=u}}else{var F=null;D=u}}else{var F=null;D=u}var G=null!==F?function(a,b){return{type:"elementFormat",key:a,val:b.val}}(F[1],F[5]):null;if(null!==G)var I=G;else{var I=null;D=t}if(null!==I)var s=I;else var s=null}return H[b]={nextPos:D,result:s},s}function l(){var a="pluralStyle@"+D,b=H[a];if(b)return D=b.nextPos,b.result;var c=D,d=n(),e=null!==d?function(a){return{type:"pluralStyle",val:a}}(d):null;if(null!==e)var f=e;else{var f=null;D=c}return H[a]={nextPos:D,result:f},f}function m(){var a="selectStyle@"+D,b=H[a];if(b)return D=b.nextPos,b.result;var c=D,d=p(),e=null!==d?function(a){return{type:"selectStyle",val:a}}(d):null;if(null!==e)var f=e;else{var f=null;D=c}return H[a]={nextPos:D,result:f},f}function n(){var a="pluralFormatPattern@"+D,b=H[a];if(b)return D=b.nextPos,b.result;var c=D,d=D,e=o(),f=null!==e?e:"";if(null!==f){for(var g=[],h=q();null!==h;){g.push(h);var h=q()}if(null!==g)var i=[f,g];else{var i=null;D=d}}else{var i=null;D=d}var j=null!==i?function(a,b){var c={type:"pluralFormatPattern",pluralForms:b};return c.offset=a?a:0,c}(i[0],i[1]):null;if(null!==j)var k=j;else{var k=null;D=c}return H[a]={nextPos:D,result:k},k}function o(){var b="offsetPattern@"+D,c=H[b];if(c)return D=c.nextPos,c.result;var d=D,e=D,g=y();if(null!==g){if("offset"===a.substr(D,6)){var h="offset";D+=6}else{var h=null;E&&f('"offset"')}if(null!==h){var i=y();if(null!==i){if(":"===a.substr(D,1)){var j=":";D+=1}else{var j=null;E&&f('":"')}if(null!==j){var k=y();if(null!==k){var l=w();if(null!==l){var m=y();if(null!==m)var n=[g,h,i,j,k,l,m];else{var n=null;D=e}}else{var n=null;D=e}}else{var n=null;D=e}}else{var n=null;D=e}}else{var n=null;D=e}}else{var n=null;D=e}}else{var n=null;D=e}var o=null!==n?function(a){return a}(n[5]):null;if(null!==o)var p=o;else{var p=null;D=d}return H[b]={nextPos:D,result:p},p}function p(){var a="selectFormatPattern@"+D,b=H[a];if(b)return D=b.nextPos,b.result;for(var c=D,d=[],e=q();null!==e;){d.push(e);var e=q()}var f=null!==d?function(a){return{type:"selectFormatPattern",pluralForms:a}}(d):null;if(null!==f)var g=f;else{var g=null;D=c}return H[a]={nextPos:D,result:g},g}function q(){var b="pluralForms@"+D,c=H[b];if(c)return D=c.nextPos,c.result;var d=D,e=D,g=y();if(null!==g){var i=r();if(null!==i){var j=y();if(null!==j){if("{"===a.substr(D,1)){var k="{";D+=1}else{var k=null;E&&f('"{"')}if(null!==k){var l=y();if(null!==l){var m=h();if(null!==m){var n=y();if(null!==n){if("}"===a.substr(D,1)){var o="}";D+=1}else{var o=null;E&&f('"}"')}if(null!==o)var p=[g,i,j,k,l,m,n,o];else{var p=null;D=e}}else{var p=null;D=e}}else{var p=null;D=e}}else{var p=null;D=e}}else{var p=null;D=e}}else{var p=null;D=e}}else{var p=null;D=e}}else{var p=null;D=e}var q=null!==p?function(a,b){return{type:"pluralForms",key:a,val:b}}(p[1],p[5]):null;if(null!==q)var s=q;else{var s=null;D=d}return H[b]={nextPos:D,result:s},s}function r(){var b="stringKey@"+D,c=H[b];if(c)return D=c.nextPos,c.result;var d=D,e=t(),g=null!==e?function(a){return a}(e):null;if(null!==g)var h=g;else{var h=null;D=d}if(null!==h)var i=h;else{var j=D,k=D;if("="===a.substr(D,1)){var l="=";D+=1}else{var l=null;E&&f('"="')}if(null!==l){var m=w();if(null!==m)var n=[l,m];else{var n=null;D=k}}else{var n=null;D=k}var o=null!==n?function(a){return a}(n[1]):null;if(null!==o)var p=o;else{var p=null;D=j}if(null!==p)var i=p;else var i=null}return H[b]={nextPos:D,result:i},i}function s(){var a="string@"+D,b=H[a];if(b)return D=b.nextPos,b.result;var c=D,d=D,e=y();if(null!==e){var f=[],g=D,h=y();if(null!==h){var i=u();if(null!==i){var j=y();if(null!==j)var k=[h,i,j];else{var k=null;D=g}}else{var k=null;D=g}}else{var k=null;D=g}for(;null!==k;){f.push(k);var g=D,h=y();if(null!==h){var i=u();if(null!==i){var j=y();if(null!==j)var k=[h,i,j];else{var k=null;D=g}}else{var k=null;D=g}}else{var k=null;D=g}}if(null!==f)var l=[e,f];else{var l=null;D=d}}else{var l=null;D=d}var m=null!==l?function(a,b){for(var c=[],d=0;d<b.length;++d)for(var e=0;e<b[d].length;++e)c.push(b[d][e]);return{type:"string",val:a+c.join("")}}(l[0],l[1]):null;if(null!==m)var n=m;else{var n=null;D=c}return H[a]={nextPos:D,result:n},n}function t(){var b="id@"+D,c=H[b];if(c)return D=c.nextPos,c.result;var d=D,e=D,g=y();if(null!==g){if(null!==a.substr(D).match(/^[a-zA-Z$_]/)){var h=a.charAt(D);D++}else{var h=null;E&&f("[a-zA-Z$_]")}if(null!==h){var i=[];if(null!==a.substr(D).match(/^[^ 	\n\r,.+={}]/)){var j=a.charAt(D);D++}else{var j=null;E&&f("[^ 	\\n\\r,.+={}]")}for(;null!==j;)if(i.push(j),null!==a.substr(D).match(/^[^ 	\n\r,.+={}]/)){var j=a.charAt(D);D++}else{var j=null;E&&f("[^ 	\\n\\r,.+={}]")}if(null!==i){var k=y();if(null!==k)var l=[g,h,i,k];else{var l=null;D=e}}else{var l=null;D=e}}else{var l=null;D=e}}else{var l=null;D=e}var m=null!==l?function(a,b){return a+(b?b.join(""):"")}(l[1],l[2]):null;if(null!==m)var n=m;else{var n=null;D=d}return H[b]={nextPos:D,result:n},n}function u(){var a="chars@"+D,b=H[a];if(b)return D=b.nextPos,b.result;var c=D,d=v();if(null!==d)for(var e=[];null!==d;){e.push(d);var d=v()}else var e=null;var f=null!==e?function(a){return a.join("")}(e):null;if(null!==f)var g=f;else{var g=null;D=c}return H[a]={nextPos:D,result:g},g}function v(){var b="char@"+D,c=H[b];if(c)return D=c.nextPos,c.result;var d=D;if(null!==a.substr(D).match(/^[^{}\\\0- 	\n\r]/)){var e=a.charAt(D);D++}else{var e=null;E&&f("[^{}\\\\\\0- 	\\n\\r]")}var g=null!==e?function(a){return a}(e):null;if(null!==g)var h=g;else{var h=null;D=d}if(null!==h)var i=h;else{var j=D;if("\\#"===a.substr(D,2)){var k="\\#";D+=2}else{var k=null;E&&f('"\\\\#"')}var l=null!==k?function(){return"\\#"}():null;if(null!==l)var m=l;else{var m=null;D=j}if(null!==m)var i=m;else{var n=D;if("\\{"===a.substr(D,2)){var o="\\{";D+=2}else{var o=null;E&&f('"\\\\{"')}var p=null!==o?function(){return"{"}():null;if(null!==p)var q=p;else{var q=null;D=n}if(null!==q)var i=q;else{var r=D;if("\\}"===a.substr(D,2)){var s="\\}";D+=2}else{var s=null;E&&f('"\\\\}"')}var t=null!==s?function(){return"}"}():null;if(null!==t)var u=t;else{var u=null;D=r}if(null!==u)var i=u;else{var v=D,w=D;if("\\u"===a.substr(D,2)){var y="\\u";D+=2}else{var y=null;E&&f('"\\\\u"')}if(null!==y){var z=x();if(null!==z){var A=x();if(null!==A){var B=x();if(null!==B){var C=x();if(null!==C)var F=[y,z,A,B,C];else{var F=null;D=w}}else{var F=null;D=w}}else{var F=null;D=w}}else{var F=null;D=w}}else{var F=null;D=w}var G=null!==F?function(a,b,c,d){return String.fromCharCode(parseInt("0x"+a+b+c+d))}(F[1],F[2],F[3],F[4]):null;if(null!==G)var I=G;else{var I=null;D=v}if(null!==I)var i=I;else var i=null}}}}return H[b]={nextPos:D,result:i},i}function w(){var b="digits@"+D,c=H[b];if(c)return D=c.nextPos,c.result;var d=D;if(null!==a.substr(D).match(/^[0-9]/)){var e=a.charAt(D);D++}else{var e=null;E&&f("[0-9]")}if(null!==e)for(var g=[];null!==e;)if(g.push(e),null!==a.substr(D).match(/^[0-9]/)){var e=a.charAt(D);D++}else{var e=null;E&&f("[0-9]")}else var g=null;var h=null!==g?function(a){return parseInt(a.join(""),10)}(g):null;if(null!==h)var i=h;else{var i=null;D=d}return H[b]={nextPos:D,result:i},i}function x(){var b="hexDigit@"+D,c=H[b];if(c)return D=c.nextPos,c.result;if(null!==a.substr(D).match(/^[0-9a-fA-F]/)){var d=a.charAt(D);D++}else{var d=null;E&&f("[0-9a-fA-F]")}return H[b]={nextPos:D,result:d},d}function y(){var a="_@"+D,b=H[a];if(b)return D=b.nextPos,b.result;var c=E;E=!1;for(var d=D,e=[],g=z();null!==g;){e.push(g);var g=z()}var h=null!==e?function(a){return a.join("")}(e):null;if(null!==h)var i=h;else{var i=null;D=d}return E=c,E&&null===i&&f("whitespace"),H[a]={nextPos:D,result:i},i}function z(){var b="whitespace@"+D,c=H[b];if(c)return D=c.nextPos,c.result;if(null!==a.substr(D).match(/^[ 	\n\r]/)){var d=a.charAt(D);D++}else{var d=null;E&&f("[ 	\\n\\r]")}return H[b]={nextPos:D,result:d},d}function A(){function b(a){a.sort();for(var b=null,c=[],d=0;d<a.length;d++)a[d]!==b&&(c.push(a[d]),b=a[d]);switch(c.length){case 0:return"end of input";case 1:return c[0];default:return c.slice(0,c.length-1).join(", ")+" or "+c[c.length-1]}}var c=b(G),d=Math.max(D,F),f=d<a.length?e(a.charAt(d)):"end of input";return"Expected "+c+" but "+f+" found."}function B(){for(var b=1,c=1,d=!1,e=0;F>e;e++){var f=a.charAt(e);"\n"===f?(d||b++,c=1,d=!1):"\r"===f|"\u2028"===f||"\u2029"===f?(b++,c=1,d=!0):(c++,d=!1)}return{line:b,column:c}}var C={_:y,"char":v,chars:u,digits:w,elementFormat:k,hexDigit:x,id:t,messageFormatElement:j,messageFormatPattern:h,messageFormatPatternRight:i,offsetPattern:o,pluralFormatPattern:n,pluralForms:q,pluralStyle:l,selectFormatPattern:p,selectStyle:m,start:g,string:s,stringKey:r,whitespace:z};if(void 0!==b){if(void 0===C[b])throw new Error("Invalid rule name: "+e(b)+".")
}else b="start";var D=0,E=!0,F=0,G=[],H={},I=C[b]();if(null===I||D!==a.length){var J=B();throw new this.SyntaxError(A(),J.line,J.column)}return I},toSource:function(){return this._source}};return a.SyntaxError=function(a,b,c){this.name="SyntaxError",this.message=a,this.line=b,this.column=c},a.SyntaxError.prototype=Error.prototype,a}();b.prototype.parse=function(){return c.parse.apply(c,arguments)},b.prototype.precompile=function(a){function c(a,g){g=g||{};var h,i,j,k="";switch(a.type){case"program":return c(a.program);case"messageFormatPattern":for(h=0;h<a.statements.length;++h)k+=c(a.statements[h],g);return f.begin+k+f.end;case"messageFormatPatternRight":for(h=0;h<a.statements.length;++h)k+=c(a.statements[h],g);return k;case"messageFormatElement":return g.pf_count=g.pf_count||0,k+='if(!d){\nthrow new Error("MessageFormat: No data passed to function.");\n}\n',a.output?k+='r += d["'+a.argumentIndex+'"];\n':(j="lastkey_"+(g.pf_count+1),k+="var "+j+' = "'+a.argumentIndex+'";\n',k+="var k_"+(g.pf_count+1)+"=d["+j+"];\n",k+=c(a.elementFormat,g)),k;case"elementFormat":return"select"===a.key?(k+=c(a.val,g),k+="r += (pf_"+g.pf_count+"[ k_"+(g.pf_count+1)+" ] || pf_"+g.pf_count+'[ "other" ])( d );\n'):"plural"===a.key&&(k+=c(a.val,g),k+="if ( pf_"+g.pf_count+"[ k_"+(g.pf_count+1)+' + "" ] ) {\n',k+="r += pf_"+g.pf_count+"[ k_"+(g.pf_count+1)+' + "" ]( d ); \n',k+="}\nelse {\n",k+="r += (pf_"+g.pf_count+'[ MessageFormat.locale["'+d.fallbackLocale+'"]( k_'+(g.pf_count+1)+" - off_"+g.pf_count+" ) ] || pf_"+g.pf_count+'[ "other" ] )( d );\n',k+="}\n"),k;case"pluralFormatPattern":for(g.pf_count=g.pf_count||0,k+="var off_"+g.pf_count+" = "+a.offset+";\n",k+="var pf_"+g.pf_count+" = { \n",e=!0,h=0;h<a.pluralForms.length;++h)"other"===a.pluralForms[h].key&&(e=!1),i?k+=",\n":i=1,k+='"'+a.pluralForms[h].key+'" : '+c(a.pluralForms[h].val,function(){var a=JSON.parse(JSON.stringify(g));return a.pf_count++,a}());if(k+="\n};\n",e)throw new Error("No 'other' form found in pluralFormatPattern "+g.pf_count);return k;case"selectFormatPattern":for(g.pf_count=g.pf_count||0,k+="var off_"+g.pf_count+" = 0;\n",k+="var pf_"+g.pf_count+" = { \n",e=!0,h=0;h<a.pluralForms.length;++h)"other"===a.pluralForms[h].key&&(e=!1),i?k+=",\n":i=1,k+='"'+a.pluralForms[h].key+'" : '+c(a.pluralForms[h].val,function(){var a=JSON.parse(JSON.stringify(g));return a.pf_count++,a}());if(k+="\n};\n",e)throw new Error("No 'other' form found in selectFormatPattern "+g.pf_count);return k;case"string":return'r += "'+b.Utils.numSub(b.Utils.escapeExpression(a.val),"k_"+g.pf_count+" - off_"+(g.pf_count-1),g.pf_count)+'";\n';default:throw new Error("Bad AST type: "+a.type)}}var d=this,e=!1,f={begin:'function(d){\nvar r = "";\n',end:"return r;\n}"};return c(a)},b.prototype.compile=function(a){return new Function("MessageFormat","return "+this.precompile(this.parse(a)))(b)},"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=b),exports.MessageFormat=b):"function"==typeof swifty.define&&swifty.define.amd?swifty.define("swiftylib/i18n/messageformat",[],function(){return b}):a.MessageFormat=b}(this),swifty.define("swiftylib/i18n/i18n",["jquery","can/construct","can/compute","can/map","./messageformat"],function(a,b,c,d,e){var f=new c,g=new d,h=function(a,b,c){for(var d,f=new e,g=a.split("|");g[0]&&c;)c=c[g.shift()];return null==c&&(c=a),"string"==typeof b&&b.length>0?(d=f.compile(c))(b||{}):""};return new b({cache:g,locale:f,init:function(){this.locale("nl")},print:function(){var a=this;return new c(function(b,c){if(!b)return"";var d=a.locale()+"|"+b,e=swifty_data.i18n;return a.cache.attr(d,a.compileText(b,c,e)),a.cache.attr(d)})},printMus:function(){var b="";a.each(arguments,function(a,c){"function"==typeof c&&(b+=c()),"string"==typeof c&&(b+=c)});var c=f()+"|"+b,d=swifty_data.i18n,e=h(b,b,d),i=arguments[arguments.length-1];if("object"==typeof i&&i.context){var j=/\[(.+?)\]/gi;e=e.replace(j,function(a,b){function c(a,b){return a._context&&a._context[b]?a._context[b]:a._parent?c(a._parent,b):"["+b+"]"}return c(i.contexts,b)})}return g.attr(c.replace(/\./gi,"_dot_"),e),g.attr(c.replace(/\./gi,"_dot_"))},compileText:function(a,b,c){for(var d,f=new e,g=a.split("|");g[0]&&c;)c=c[g.shift()];return null==c&&(c=a),(d=f.compile(c))(b||{})}})}),swifty.define("swiftylib/i18n/i18n_instance",["./i18n"],function(a){return new a}),swifty.define("swiftylib/i18n/__",["./i18n_instance"],function(a){return a.printMus}),swifty.define("swiftylib/evt",["jquery","can"],function(a,b){function c(c,d,e){var f=new a.Deferred,g=b,h="undefined"!=typeof e?e:window;if(g.trigger(h,"evt_swc_"+c,[d,f]),window.parent&&window.parent!==window&&(g=window.parent.can,h="undefined"!=typeof e?e:window.parent,g&&g.trigger(h,"evt_swc_"+c,[d,f])),document.querySelectorAll("iframe.swifty_event_frame").length>0){var i=document.querySelectorAll("iframe.swifty_event_frame")[0].contentWindow;g=i.can,h="undefined"!=typeof e?e:i,g&&g.trigger(h,"evt_swc_"+c,[d,f])}return f}return c}),swifty.define("swiftylib/map",["can/map"],function(a){return a}),swifty.define("can/construct/super",["can/util/library","can/construct"],function(a){var b=a.isFunction,c=/xyz/.test(function(){return this.xyz})?/\b_super\b/:/.*/,d=["get","set"],e=function(a,b,c){return function(){var d,e=this._super;return this._super=a[b],d=c.apply(this,arguments),this._super=e,d}};return a.Construct._defineProperty=function(c,f,g,h){var i=Object.getOwnPropertyDescriptor(f,g);i&&a.each(d,function(a){b(i[a])&&b(h[a])?h[a]=e(i,a,h[a]):b(h[a])||(h[a]=i[a])}),Object.defineProperty(c,g,h)},a.Construct._overwrite=function(a,d,f,g){a[f]=b(g)&&b(d[f])&&c.test(g)?e(d,f,g):g},a}),swifty.define("can/construct/proxy",["can/util/library","can/construct"],function(a){var b=(a.isFunction,a.isArray),c=a.makeArray,d=function(a){var d,e=c(arguments);return a=e.shift(),b(a)||(a=[a]),d=this,function(){for(var f,g,h=e.concat(c(arguments)),i=a.length,j=0;i>j;j++)g=a[j],g&&(f="string"==typeof g,h=(f?d[g]:g).apply(d,h||[]),i-1>j&&(h=!b(h)||h._use_call?[h]:h));return h}};a.Construct.proxy=a.Construct.prototype.proxy=d;for(var e=[a.Map,a.Control,a.Model],f=0;f<e.length;f++)e[f]&&(e[f].proxy=d);return a}),swifty.define("swiftylib/construct",["can/construct","can/construct/super","can/construct/proxy"],function(a){return a}),swifty.define("swiftylib/control",["can","can/control","./construct"],function(a,b){function c(){var c=b.extend({init:function(){"SELECT"===this.element[0].nodeName.toUpperCase()?setTimeout(a.proxy(this.set,this),1):this.set()},"{value} change":"set",set:function(){if(this.element){var a=this.options.value();this.element[0].value!==(null==a?"":a)&&(this.element[0].value=null==a?"":a)}},change:function(){this.element&&this.element[0].value!==this.options.value()&&this.options.value(this.element[0].value)},keyup:function(){this.options.value(this.element[0].value)}}),d=b.extend({init:function(){this.set(),this.on("blur","setValue")},"{value} change":"set",set:function(){var a=this.options.value();this.element[0].innerHTML="undefined"==typeof a?"":a},setValue:function(){this.options.value(this.element[0].innerHTML)},keyup:function(){this.options.value(this.element[0].innerHTML)}}),e=b.extend({init:function(){this.isCheckbox="checkbox"===this.element[0].type.toLowerCase(),this.check()},"{value} change":"check",check:function(){if(this.isCheckbox){var b=this.options.value(),c=this.options.trueValue||!0;this.element[0].checked=b===c}else{var d=this.options.value()==this.element[0].value?"set":"remove";a.attr[d](this.element[0],"checked",!0)}},change:function(){this.isCheckbox?this.options.value(this.element[0].checked?this.options.trueValue:this.options.falseValue):this.element[0].checked&&this.options.value(this.element[0].value)}}),f=function(){var a={"":!0,"true":!0,"false":!1},b=function(b){if(b&&b.getAttribute){var c=b.getAttribute("contenteditable");return a[c]}};return function(a){var c=b(a);return"boolean"==typeof c?c:!!b(a.parentNode)}}(),g=function(a){return"{"===a[0]&&"}"===a[a.length-1]?a.substr(1,a.length-2):a};a.view.attr("can-value",function(b,h){var i,j,k=g(b.getAttribute("can-value")),l=h.scope.computeData(k,{args:[]}).compute;return"input"!==b.nodeName.toLowerCase()&&"textarea"!==b.nodeName.toLowerCase()||("checkbox"===b.type&&(i=a.attr.has(b,"can-true-value")?b.getAttribute("can-true-value"):!0,j=a.attr.has(b,"can-false-value")?b.getAttribute("can-false-value"):!1),"checkbox"!==b.type&&"radio"!==b.type)?"select"===b.nodeName.toLowerCase()&&b.multiple?void new Multiselect(b,{value:l}):f(b)?void new d(b,{value:l}):void new c(b,{value:l}):void new e(b,{value:l,trueValue:i,falseValue:j})})}return c(),b}),swifty.define("js/libs/yepnope",[],function(){return window.yepnope=function(a,b){function c(){}function d(a){return Object(a)===a}function e(a){return"string"==typeof a}function f(){return"yn_"+q++}function g(){o&&o.parentNode||(o=b.getElementsByTagName("script")[0])}function h(a){return!a||"loaded"==a||"complete"==a||"uninitialized"==a}function i(b,c){c.call(a)}function j(a,j){var k,l,m;e(a)?k=a:d(a)&&(k=a._url||a.src,l=a.attrs,m=a.timeout),j=j||c,l=l||{};var q,r,t=b.createElement("script");m=m||n.errorTimeout,t.src=k,s&&(t.event="onclick",t.id=t.htmlFor=l.id||f());for(r in l)t.setAttribute(r,l[r]);t.onreadystatechange=t.onload=function(){if(!q&&h(t.readyState)){if(q=1,s)try{t.onclick()}catch(a){}i(k,j)}t.onload=t.onreadystatechange=t.onerror=null},t.onerror=function(){q=1,j(new Error("Script Error: "+k))},p(function(){q||(q=1,j(new Error("Timeout: "+k)),t.parentNode.removeChild(t))},m),g(),o.parentNode.insertBefore(t,o)}function k(f,h){var i,j,k={};d(f)?(i=f._url||f.href,k=f.attrs||{}):e(f)&&(i=f);var l=b.createElement("link");h=h||c,l.href=i,l.rel="stylesheet",l.media="only x",l.type="text/css",p(function(){l.media=k.media||"all"});for(j in k)l.setAttribute(j,k[j]);g(),o.parentNode.appendChild(l),p(function(){h.call(a)})}function l(a){var b=a.split("?")[0];return b.substr(b.lastIndexOf(".")+1)}function m(a,b){var c=a,d=[],e=[];for(var f in b)b.hasOwnProperty(f)&&(b[f]?d.push(encodeURIComponent(f)):e.push(encodeURIComponent(f)));return(d.length||e.length)&&(c+="?"),d.length&&(c+="yep="+d.join(",")),e.length&&(c+=(d.length?"&":"")+"nope="+e.join(",")),c}function n(a,b,c){var e;d(a)&&(e=a,a=e.src||e.href),a=n.urlFormatter(a,b),e?e._url=a:e={_url:a};var f=l(a);if("js"===f)j(e,c);else{if("css"!==f)throw new Error("Unable to determine filetype.");k(e,c)}}var o,p=a.setTimeout,q=0,r={}.toString,s=!(!b.attachEvent||a.opera&&"[object Opera]"==r.call(a.opera));return n.errorTimeout=1e4,n.injectJs=j,n.injectCss=k,n.urlFormatter=m,n}(window,document),window.yepnope}),swifty.define("js/diverse/utils",["jquery","swiftylib/construct"],function(a,b){var c=b.extend({},{updateQueryString:function(a,b,c){c||(c=window.location.href);var d,e=new RegExp("([?&])"+a+"=.*?(&|#|$)(.*)","gi");if(e.test(c))return"undefined"!=typeof b&&null!==b?c.replace(e,"$1"+a+"="+b+"$2$3"):(d=c.split("#"),c=d[0].replace(e,"$1$3").replace(/(&|\?)$/,""),"undefined"!=typeof d[1]&&null!==d[1]&&(c+="#"+d[1]),c);if("undefined"!=typeof b&&null!==b){var f=-1!==c.indexOf("?")?"&":"?";return d=c.split("#"),c=d[0]+f+a+"="+b,"undefined"!=typeof d[1]&&null!==d[1]&&(c+="#"+d[1]),c}return c},getSWCreatorAjaxUrl:function(){return this.updateQueryString("swcreator_ajax",!0,scc_data.view_url)},utoa:function(a){return window.btoa(encodeURIComponent(a).replace(/%([0-9A-F]{2})/g,function(a,b){return String.fromCharCode("0x"+b)}))},atou:function(a){return decodeURIComponent(Array.prototype.map.call(window.atob(a),function(a){return"%"+("00"+a.charCodeAt(0).toString(16)).slice(-2)}).join(""))}});return new c}),swifty.define("js/libs/mout/src/function/debounce",[],function(){function a(a,b,c){function d(){function d(){c||(f=a.apply(h,g)),e=null}var g=arguments,h=this;return e?clearTimeout(e):c&&(f=a.apply(h,g)),e=setTimeout(d,b),f}var e,f;return d.cancel=function(){clearTimeout(e)},d}return a}),swifty.define("js/diverse/iframe_page",["jquery","swiftylib/evt","swiftylib/map","swiftylib/control","js/libs/yepnope","js/diverse/utils","swiftylib/i18n/__","js/libs/mout/src/function/debounce"],function(a,b,c,d,e,f,g,h){var i=new c({selector:".swc_main_content_pane.swc_page_cntnt"});return d.extend({defaults:{area_content_selector:".swc_main_content_pane.swc_page_cntnt",area_names:["topbar","header","navbar","sidebar","extrasidebar","footer","bottombar"]}},{init:function(){var b=this;b.isEditingMain()||(b.getMap().attr("selector",".swifty_area_inner_content_"+scc_data.area+" .swc_page_cntnt"),b.options.area_content_selector=b.getMap().attr("selector")),scc_data.pages=a.parseJSON(scc_data.pages),b._super(),b.addSCCModeToPageLinks(),b.addThemeAreaCogs();var c=scc_data.is_swifty_site_designer_active?"":"<span>BETA version "+scc_data.scc_version+"</span>";a('<div class="swc_iframe_gradient">'+c+"</div>").appendTo("body"),b.pafeMouseMovedThrottledObject=h(a.proxy(b.endPageMouseMoved,b),500),b.on()},getMap:function(){return i},isEditingMain:function(){return scc_data&&"main"===scc_data.area},addThemeAreaCogs:function(){a(".swifty_area_inner_content_main.swifty_area_inner_content").prepend('<div class="swc_theme_edit_overlay" ></div>');var c=a(".swifty_area_included");c.css("position","relative"),c.prepend('<div class="swc_theme_edit_overlay" ></div>'),"main"===scc_data.area&&c.each(function(b,c){var d=a(c).attr("class").split(/\s+/),e="";a.each(d,function(a,b){var c=b.match("swifty_areatemplate_(.*)");c&&c.length>1&&c[1].length>0&&(e='" area_template="'+c[1])}),a.each(d,function(b,d){var f=d.match("swifty_area_(.*)");if(f&&f.length>1&&f[1].length>0&&"included"!==f[1]&&"page_overrule_"!==f[1]){var h='<div class="swc_theme_edit_icon_wrapper" title="'+g("Click to edit")+'" area="'+f[1]+e+'"><i class="fa fa-cogs" contenteditable="false"></i></div>';if(a(c).prepend(h),"advanced"===scc_data.swifty_gui_mode){var i='<div class="swc_theme_area_visibility_icon_wrapper" title="'+g("Click to hide this area")+'" data-area="'+f[1]+e+'"><i class="fa fa-eye-slash" contenteditable="false"></i></div>';a(c).prepend(i)}return!1}})});var d=a(".swc_theme_edit_icon_wrapper");0===d.length?(a(".swc_theme_edit_overlay").css("display","inline"),a(".swifty_area_"+scc_data.area).find(".swc_theme_edit_overlay").css("display","none")):d.each(function(c,d){var e=a(d).parent(),f="advanced"===scc_data.swifty_gui_mode?".swc_theme_edit_icon_wrapper, .swc_theme_area_visibility_icon_wrapper":".swc_theme_edit_icon_wrapper";e.on("mouseenter",function(){a(this).find(f).addClass("swc_theme_edit_icon_wrapper_show"),"advanced"===scc_data.swifty_gui_mode&&a(this).find(".swc_theme_area_visibility_icon_wrapper").position({my:"right",at:"left-1",of:a(this).find(".swc_theme_edit_icon_wrapper"),collision:"none"})}),e.on("mouseleave",function(){a(this).find(f).removeClass("swc_theme_edit_icon_wrapper_show")}),a(d).on("click",function(c){c.preventDefault(),a(".swc_theme_edit_overlay").css("display","inline"),a(this).parent().find(".swc_theme_edit_overlay").css("display","none");var d=a(this).attr("area"),e=a(this).attr("area_template");b("swifty_area_select",{areaname:g(d),edit_area:d,edit_area_template:e})})})},".swc_theme_area_visibility_icon_wrapper click":function(b,c){var d=this,e=a(b).data("area");d.storeCurrentAreas(),d.changeCurrentArea(e,"hide",""),d.saveCurrentArea(e,"hide"),c.preventDefault()},addSCCModeToPageLinks:function(){var c=this,d=scc_data.domain;a("a").each(function(){var e=a(this),g=e.attr("href"),h=!1,i=a("#smadminbar");if(!(a.contains(a(".swc_page_cntnt")[0],e[0])||i.length&&a.contains(i[0],e[0])||/wp\-(admin|login)/i.test(g))){if(new RegExp(d,"i").test(g))h=c.isPage(g);else{if(/^(http[s]?|www|#)/i.test(g))return;h=c.isPage(g)}if(h)if(e.closest(c.options.area_content_selector).length>0)e.on("click",function(a){a.preventDefault();var c=e.attr("href");c=f.updateQueryString("swcreator_edit","main",c),c=f.updateQueryString("swcreator_area_template",null,c),b("swifty_editor_change_window_location",{url:c})});else{e.attr("target","_top");var j=g;j=f.updateQueryString("swcreator_edit","main",j),j=f.updateQueryString("swcreator_area_template",null,j),e.attr("href",j)}}})},isPage:function(b){var c=a.grep(scc_data.pages,function(a){return new RegExp(a,"i").test(b)});if(a.isArray(c)&&c.length)return!0;var d=scc_data.home_url;return d=d.replace(/^(https?:\/\/)?(www\.)?/,"").replace(/\/$/,""),new RegExp(d+"(/)?$","i").test(b)?!0:!1},processCssAndJsAdditions:function(b){var c=this;if(b.js_css_additions&&(a.isArray(b.js_css_additions.css)&&b.js_css_additions.css.length&&a.each(b.js_css_additions.css,function(b,c){var d=c.match(/href=["\'](.*?)["\']/i);if(d&&d.length>1){var e=d[1];0===a('link:contains("'+e+'")').length&&a("body").append(c)}}),a.isArray(b.js_css_additions.js_inline)&&b.js_css_additions.js_inline.length&&a.each(b.js_css_additions.js_inline,function(b,c){if(c.id&&c.inline){a("script#"+c.id).remove();var d=document.createElement("script"),e=document.getElementsByTagName("script")[0];d.setAttribute("id",c.id),d.innerHTML=c.inline,e.parentNode.insertBefore(d,e)}}),a.isArray(b.js_css_additions.js)&&b.js_css_additions.js.length)){var d=[];a.each(b.js_css_additions.js,function(a,b){if(0===b.indexOf("//")){var e=document.createElement("a");e.setAttribute("href",b),b=e.href}c.isMyScriptLoaded(b)||d.push(b)}),c.includeJsFile(0,d)}},replaceImageWithAsset:function(c,d,e,g,h){e=e?' caption="'+e+'"':"";var i=h?' viewer="go_to_url"':"";h=h?' href="'+h+'"':"",g=g?' alt="'+g+'"':"";var j="[swifty_image"+h+i+e+g+' url="'+d+'" swc_swifty_on="1"]';a.post(f.getSWCreatorAjaxUrl(),{action:"convert_html_with_shortcodes",id:scc_data.page_id,ajax_nonce:scc_data.ajax_nonce,data:j},function(d){d=a.parseJSON(d),d.html=d.html.replace(/\n$/,""),b("replace_asset",{html:d.html,widget_class:"swc_asset",$element:c})})},storeCurrentAreas:function(){var b=this;b.areainfo||(b.areainfo={},a.each(b.options.area_names,function(c,d){var e=a(".swifty_area_"+d+".swifty_area");if(1===e.length){var f=e.attr("class").split(/\s+/),g="";a.each(f,function(a,b){var c=b.match("swifty_area_page_overrule_(.*)");c&&c.length>1&&c[1].length>0&&(g=c[1])});var h=e.find("div.swc_page_cntnt");b.areainfo[d]={areaOverrule:g,areaContent:h.html()}}}))},changeCurrentArea:function(b,c,d){var e=this;if(e.areainfo){var f=a(".swifty_area_"+b+".swifty_area");if(1===f.length){var g=f.attr("class").split(/\s+/);if(a.each(g,function(a,b){var c=b.match("swifty_area_page_overrule_(.*)");c&&c.length>1&&c[1].length>=0&&f.removeClass(b)}),f.addClass("swifty_area_page_overrule_"+c),d){var h=f.find("div.swc_page_cntnt");h.html(d)}f.attr("style",function(a,b){var d=/min\-height:\s*20px;/,e=d.test(b);return"show"!==c&&e?b.replace(d,""):"show"!==c||e?b:b+=" min-height: 20px;"})}}},restoreCurrentAreas:function(){var b=this;b.areainfo&&(a.each(b.options.area_names,function(c,d){var e=a(".swifty_area_"+d+".swifty_area");if(1===e.length){var f=e.attr("class").split(/\s+/);a.each(f,function(a,b){var c=b.match("swifty_area_page_overrule_(.*)");c&&c.length>1&&c[1].length>=0&&e.removeClass(b)}),e.addClass("swifty_area_page_overrule_"+b.areainfo[d].areaOverrule);var g=e.find("div.swc_page_cntnt");g.html(b.areainfo[d].areaContent)}}),b.areainfo=null)},saveCurrentArea:function(b,c){var d=this,e=new a.Deferred;if(d.areainfo){var f=a(".swifty_area_"+b+".swifty_area");if(1===f.length){var g=f.find("div.swc_page_cntnt");d.areainfo[b]={areaOverrule:c,areaContent:g.html()},d.convertFromAreaHtml(b).done(function(f){g.html(d.areainfo[b].areaContent),a.post(scc_data.ajax_url,{action:"swcreator_save_area_for_page",id:scc_data.page_id,ajax_nonce:scc_data.ajax_nonce,area_name:b,area_visibility:c,area_content:"hide"!==c?f:null}).done(function(){e.resolve()})})}else e.resolve()}else e.resolve();return e},convertFromAreaHtml:function(c){var d=new a.Deferred,e=a(".swifty_area_"+c+".swifty_area");if(1===e.length){var f=e.find("div.swc_page_cntnt");b("create_editor",{$element:f}).done(function(a){setTimeout(function(){var c=a.editor.getData();b("swifty_html_to_content",{content:c}).done(function(b){a.editor.destroy(),d.resolve(b)})},1)})}else d.resolve("");return d},convertImageToAsset:function(b){var c=this;if(1===b.length){var d=b.find("figcaption").html(),e=b.find("a").attr("href"),f=b.find("img").attr("alt"),g=b.find("img").attr("src"),h=b.find("img").attr("class"),i=-1;if(h){var j=h.split(" ");a.each(j,function(a,b){var c=b.match(/wp-image-(\d+)/);c&&(i=c[1])})}i>0?a.post(scc_data.ajax_url,{action:"get-attachment",id:i},function(a){if(a.success&&a.data){var h=a.data.url;h&&(g=h)}c.replaceImageWithAsset(b,g,d,f,e)}):c.replaceImageWithAsset(b,g,d,f,e)}},convertFromElementHtml:function(c,d){d||(d=new a.Deferred),a("#swc_convert_html").remove(),a('<div id="swc_convert_html"></div>').appendTo("body");var e=c.clone();return a("#swc_convert_html").append(e),b("create_editor",{$element:a("#swc_convert_html")}).done(function(c){setTimeout(function(){var e=c.editor.getData();b("swifty_html_to_content",{content:e}).done(function(b){c.editor.destroy(),a("#swc_convert_html").remove(),d.resolve(b)})},1)}),d},isMyScriptLoaded:function(a){for(var b=document.getElementsByTagName("script"),c=b.length;c--;)if(b[c].src===a)return!0;return!1},includeJsFile:function(a,b){var c=this;a<b.length&&e.injectJs({_url:b[a]},function(){return c.includeJsFile(a+1,b),!1})},endPageMouseMoved:function(){a("body").addClass("swc_page_m_m_fadeout"),setTimeout(function(){a("body").removeClass("swc_page_m_m_fadeout"),a("body").removeClass("swc_page_mouse_moved")},1e3)},scrollTo:function(b){var c=new a.Deferred,d=a(parent.window).height(),e=(d-b.height())/2;a("body").animate({scrollTop:b.offset().top-e},500,"swing",function(){c.resolve()})},getPageStyleKY:function(a){var b="page_";return"main"!==scc_data.area&&(b=scc_data.area+"_"+(scc_data.area_template?scc_data.area_template:"")),swifty_ssd_page_styles||(swifty_ssd_page_styles={}),swifty_ssd_page_styles[b]||(swifty_ssd_page_styles[b]={}),swifty_ssd_page_styles[b][a]||(swifty_ssd_page_styles[b][a]=[]),b},applyFoundFonts:function(b){var c=this.getPageStyleKY("used_fonts");a.each(b,function(b,d){d=d.replace(/ /g,"+"),a.inArray(d,swifty_ssd_page_styles[c].used_fonts)<0&&swifty_ssd_page_styles[c].used_fonts.push(d)}),"function"==typeof swifty_addFonts&&swifty_addFonts(swifty_ssd_page_styles[c].used_fonts)},getPageStyleObject:function(a){return swifty_ssd_page_styles&&swifty_ssd_page_styles[a]?swifty_ssd_page_styles[a]:null},"{window} evt_swc_scroll_to_element":function(a,b,c){this.scrollTo(c.$el,!1)},"{window} evt_swc_store_current_areas":function(){this.storeCurrentAreas()},"{window} evt_swc_change_current_areas":function(a,b,c){var d=this;c&&c.preset_areas&&c.preset_areas.each(function(a,b){d.changeCurrentArea(b,a.attr("overrule"),a.attr("html"))})},"{window} evt_swc_restore_current_areas":function(){this.restoreCurrentAreas()},"{window} evt_swc_save_current_areas":function(b,c,d,e){var f=this;if(d&&d.preset_areas){var g=[];d.preset_areas.each(function(a,b){g.push(f.saveCurrentArea(b,a.attr("overrule")))}),a.when.apply(a,g).done(function(){e.resolve()})}return e},"{window} evt_swc_convert_from_element_html":function(a,b,c,d){var e=this;e.convertFromElementHtml(c.$element,d)},"{window} evt_swc_reset_theme_edit_overlay":function(){a(".swc_theme_edit_overlay").css("display","none")},"{window} evt_swc_process_css_and_js_additions":function(a,b,c){c&&c.data&&this.processCssAndJsAdditions(c.data)},"{window} evt_swc_add_exec":function(a,b,c){swifty_add_exec(c)},"{window} evt_swc_swifty_set_breakout":function(a,b,c){swifty_set_breakout(c.row,c.breakout,c.contentBreakout)},"{window} evt_swc_swifty_update_scrolleffect":function(){swifty_updateScrolleffect()},"{window} evt_swc_swifty_reset_scrolleffect":function(a,b,c){swifty_resetScrolleffect(c)},"{window} evt_swc_get_swifty_ssd_data":function(a,b,c,d){d.resolve("undefined"!=typeof swifty_ssd_data?swifty_ssd_data:null)},"{window} evt_swc_convert_image_to_asset":function(a,b,c){c&&c.$image_wrapper&&this.convertImageToAsset(c.$image_wrapper)},"{window} evt_swc_determine_image_sizes":function(){"function"==typeof window.swiftyDetermineImageSizes&&window.swiftyDetermineImageSizes(scc_data.page_id,document)},"{window} evt_swc_get_main_content_width":function(b,c,d,e){e.resolve(a(".swc_main_content_pane").innerWidth())},"{window} evt_swc_get_main_all_styles":function(b,c,d,e){for(var f=document.getElementsByTagName("style"),g="",h=0;h<f.length;h++){var i=f[h];g+=a(i).html()}e.resolve(g)},"{window} evt_swc_get_ssd_list_loadfont":function(a,b,c,d){d.resolve(ssd_list_loadFont)},"{window} evt_swc_video_fitvids":function(){e.injectJs({_url:scc_data.swcreator_url+"js/libs/jquery.fitvids.js"},function(){a(".swc_video_wrapper").fitVids();var b=a('<div class="frameOverlay"/>');a(".swc_video_wrapper iframe").after(b)})},"{window} mousemove":function(){a("body").addClass("swc_page_mouse_moved"),this.pafeMouseMovedThrottledObject()},"{window} evt_swc_change_style_tag":function(a,b,c){var d=c.id,e=c.css,f=c.area_data,g=document.getElementsByTagName("head")[0],h=document.getElementById(d);h||(h=document.createElement("style"),h.id=d,g.appendChild(h)),h.type="text/css",h.styleSheet?h.styleSheet.cssText=e:h.innerHTML=e;var i=this.getPageStyleKY("custom_css");swifty_ssd_page_styles[i].custom_css=e,swifty_ssd_page_styles[i].area_data=f},"{window} evt_swc_set_bg_img":function(b,c,d){var e=d.key;d=d.data,swifty_setBgImg(e,d.attr("bg_img")||"",d.attr("bg_type")||"",d.attr("def_bg_type")||"",d.attr("def_bg_img")||"",d.attr("bg_pattern")||"",d.attr("bg_color")||"#c4c4c4",d.attr("bg_colr2")||"#898989",a("body").hasClass("swifty_boxed")?"boxed":"wide","custom"===d.attr("set_bg_im_ssry")?d.attr("bg_im_ssry")||"50":"")},"{window} evt_swc_change_scc_data":function(a,b,c){scc_data[c.key]=c.val},"{window} evt_swc_apply_found_fonts":function(a,b,c){this.applyFoundFonts(c)},"{window} evt_swc_get_page_style_object":function(a,b,c,d){d.resolve(this.getPageStyleObject(c))}})}),swifty.define("swiftylib/component",["can/component"],function(a){return a}),swifty.define("text",{}),swifty.define("stache",{load:function(a){throw new Error("Dynamic load not allowed: "+a)}}),swifty.define("stache!js/components/editor_ckeditor/editor_ckeditor.stache",["can/../can"],function(a){var b="__stache_tmpl_"+"js/components/editor_ckeditor/editor_ckeditor.stache".split(".").join("_").split("/").join("_")+"_"+Date.now()+"_"+parseInt(1e6*Math.random())+"__";return a.view.mustache(b,'<div class="{{className}}"></div>'),b}),swifty.define("js/libs/jBox.min",["jquery"],function(a){function b(b,c){if(this.options={id:null,width:"auto",height:"auto",attach:null,trigger:"click",preventDefault:!1,title:null,content:null,getTitle:null,getContent:null,ajax:null,data:"",reload:!1,target:null,position:{x:"center",y:"center"},outside:null,offset:0,attributes:{x:"left",y:"top"},adjustPosition:!1,adjustTracker:!1,adjustDistance:5,fixed:!1,reposition:!1,pointer:!1,fade:180,animation:null,theme:"Default",addClass:"",overlay:!1,zIndex:1e4,delayOpen:0,delayClose:0,closeOnEsc:!1,closeOnClick:!1,closeOnMouseleave:!1,closeButton:!1,constructOnInit:!1,blockScroll:!1,appendTo:a("body"),draggable:null,onInit:function(){},onCreated:function(){},onOpen:function(){},onClose:function(){},onCloseComplete:function(){},onAjax:function(){},onAjaxComplete:function(){},autoClose:7e3,color:null,stack:!0,audio:!1,volume:100,src:"href",gallery:"data-jbox-image",imageLabel:"title",imageFade:600,imageSize:"cover"},this.defaultOptions={Tooltip:{getContent:"title",trigger:"mouseenter",position:{x:"center",y:"top"},outside:"y",pointer:!0,adjustPosition:!0,reposition:!0},Mouse:{target:"mouse",position:{x:"right",y:"bottom"},offset:15,trigger:"mouseenter",adjustPosition:"flip"},Modal:{target:a(window),fixed:!0,blockScroll:!0,closeOnEsc:!0,closeOnClick:"overlay",closeButton:"title",overlay:!0,animation:"zoomOut"},Notice:{target:a(window),fixed:!0,position:{x:20,y:20},attributes:{x:"right",y:"top"},animation:"zoomIn",closeOnClick:"box",_onInit:function(){this.open(),this.options.delayClose=this.options.autoClose,this.options.delayClose&&this.close()}.bind(this),_onCreated:function(){this.options.color&&this.wrapper.addClass("jBox-Notice-color jBox-Notice-"+this.options.color)},_onOpen:function(){a.each(a(".jBox-Notice"),function(b,c){return c=a(c),c.attr("id")!=this.id&&"auto"!=c.css(this.options.attributes.y)&&"auto"!=c.css(this.options.attributes.x)?this.options.stack?void c.css("margin-"+this.options.attributes.y,parseInt(c.css("margin-"+this.options.attributes.y))+this.dimensions.y+10):void c.data("jBox").close({ignoreDelay:!0}):void 0}.bind(this)),this.options.audio&&!this.IE8&&(this.audio=a("<audio/>"),a("<source/>",{src:this.options.audio+".mp3"}).appendTo(this.audio),a("<source/>",{src:this.options.audio+".ogg"}).appendTo(this.audio),this.audio[0].volume=Math.min(this.options.volume/100,1),this.audio[0].play())}.bind(this),_onCloseComplete:function(){this.destroy()}.bind(this)},Image:{target:a(window),fixed:!0,blockScroll:!0,closeOnEsc:!0,closeOnClick:"overlay",overlay:!0,animation:"zoomOut",width:800,height:533,attach:a("[data-jbox-image]"),preventDefault:!0,_onInit:function(){this.images=this.currentImage={},this.imageZIndex=1,a.each(this.attachedElements,function(b,c){if(c=a(c),!c.data("jBox-image-gallery")){var d=c.attr(this.options.gallery)||"default";!this.images[d]&&(this.images[d]=[]),this.images[d].push({src:c.attr(this.options.src),label:c.attr(this.options.imageLabel)||""}),"title"==this.options.imageLabel&&c.removeAttr("title"),c.data("jBox-image-gallery",d),c.data("jBox-image-id",this.images[d].length-1)}}.bind(this));var b=function(b,c,d,e){if(!a("#jBox-image-"+b+"-"+c).length){{var f=a("<div/>",{id:"jBox-image-"+b+"-"+c,"class":"jBox-image-container"}).css({backgroundImage:"url("+this.images[b][c].src+")",backgroundSize:this.options.imageSize,opacity:e?1:0,zIndex:d?0:this.imageZIndex++}).appendTo(this.content);a("<div/>",{id:"jBox-image-label-"+b+"-"+c,"class":"jBox-image-label"+(e?" active":"")}).html(this.images[b][c].label).appendTo(this.imageLabel)}!e&&!d&&f.animate({opacity:1},this.options.imageFade)}}.bind(this),c=function(b,c){a(".jBox-image-label.active").removeClass("active"),a("#jBox-image-label-"+b+"-"+c).addClass("active")};this.showImage=function(d){if("open"!=d){var e=this.currentImage.gallery,f=this.currentImage.id+(1*("prev"==d)?-1:1);f=f>this.images[e].length-1?0:0>f?this.images[e].length-1:f}else{var e=this.source.data("jBox-image-gallery"),f=this.source.data("jBox-image-id");a(".jBox-image-pointer-prev, .jBox-image-pointer-next").css({display:this.images[e].length>1?"block":"none"})}if(this.currentImage={gallery:e,id:f},a("#jBox-image-"+e+"-"+f).length)a("#jBox-image-"+e+"-"+f).css({zIndex:this.imageZIndex++,opacity:0}).animate({opacity:1},"open"==d?0:this.options.imageFade),c(e,f);else{this.wrapper.addClass("jBox-loading");{a('<img src="'+this.images[e][f].src+'">').load(function(){b(e,f,!1),c(e,f),this.wrapper.removeClass("jBox-loading")}.bind(this))}}var g=f+1;g=g>this.images[e].length-1?0:0>g?this.images[e].length-1:g,!a("#jBox-image-"+e+"-"+g).length&&a('<img src="'+this.images[e][g].src+'">').load(function(){b(e,g,!0)})}},_onCreated:function(){this.imageLabel=a("<div/>",{id:"jBox-image-label"}).appendTo(this.wrapper),this.wrapper.append(a("<div/>",{"class":"jBox-image-pointer-prev",click:function(){this.showImage("prev")}.bind(this)})).append(a("<div/>",{"class":"jBox-image-pointer-next",click:function(){this.showImage("next")}.bind(this)}))},_onOpen:function(){a("body").addClass("jBox-image-open"),a(document).on("keyup.jBox-"+this.id,function(a){37==a.keyCode&&this.showImage("prev"),39==a.keyCode&&this.showImage("next")}.bind(this)),this.showImage("open")},_onClose:function(){a("body").removeClass("jBox-image-open"),a(document).off("keyup.jBox-"+this.id)},_onCloseComplete:function(){this.wrapper.find(".jBox-image-container").css("opacity",0)}}},"string"==a.type(b)&&(this.type=b,b=this.defaultOptions[b]),this.options=a.extend(this.options,b,c),null===this.options.id){for(var d=1;0!=a("#jBox"+d).length;)d++;
this.options.id="jBox"+d}this.id=this.options.id,("center"==this.options.position.x&&"x"==this.options.outside||"center"==this.options.position.y&&"y"==this.options.outside)&&(this.options.outside=!1),(!this.options.outside||"xy"==this.options.outside)&&(this.options.pointer=!1),"object"!=a.type(this.options.offset)&&(this.options.offset={x:this.options.offset,y:this.options.offset}),this.options.offset.x||(this.options.offset.x=0),this.options.offset.y||(this.options.offset.y=0),"object"!=a.type(this.options.adjustDistance)&&(this.options.adjustDistance={top:this.options.adjustDistance,right:this.options.adjustDistance,bottom:this.options.adjustDistance,left:this.options.adjustDistance}),this.align=this.options.outside&&"xy"!=this.options.outside?this.options.position[this.options.outside]:"center"!=this.options.position.y&&"number"!=a.type(this.options.position.y)?this.options.position.x:"center"!=this.options.position.x&&"number"!=a.type(this.options.position.x)?this.options.position.y:this.options.attributes.x,this.options.outside&&"xy"!=this.options.outside&&(this.outside=this.options.position[this.options.outside]);var e=navigator.userAgent.toLowerCase();return this.IE8=-1!=e.indexOf("msie")&&8==parseInt(e.split("msie")[1]),this.prefix=-1!=e.indexOf("webkit")?"-webkit-":"",this._getOpp=function(a){return{left:"right",right:"left",top:"bottom",bottom:"top",x:"y",y:"x"}[a]},this._getXY=function(a){return{left:"x",right:"x",top:"y",bottom:"y",center:"x"}[a]},this._getTL=function(a){return{left:"left",right:"left",top:"top",bottom:"top",center:"left",x:"left",y:"top"}[a]},this._create=function(){if(!this.wrapper){if(this.wrapper=a("<div/>",{id:this.id,"class":"jBox-wrapper"+(this.type?" jBox-"+this.type:"")+(this.options.theme?" jBox-"+this.options.theme:"")+(this.options.addClass?" "+this.options.addClass:"")+(this.IE8?" jBox-IE8":"")}).css({position:this.options.fixed?"fixed":"absolute",display:"none",opacity:0,zIndex:this.options.zIndex}).data("jBox",this),this.options.closeOnMouseleave&&this.wrapper.mouseenter(function(){this.open()}.bind(this)).mouseleave(function(){this.close()}.bind(this)),this.container=a("<div/>",{"class":"jBox-container"}).appendTo(this.wrapper),this.content=a("<div/>",{"class":"jBox-content"}).css({width:this.options.width,height:this.options.height}).appendTo(this.container),this.options.closeButton&&(this.closeButton=a("<div/>",{"class":"jBox-closeButton jBox-noDrag"}).click(function(){this.close()}.bind(this)),"title"!=this.options.closeButton&&(this.wrapper.addClass("jBox-closeButton-box"),this.closeButton.appendTo(this.container))),this.wrapper.appendTo(this.options.appendTo),this.options.pointer){if(this.pointer={position:this._getOpp(this.outside),xy:this._getXY(this.outside),align:"center",offset:0},this.pointer.element=a("<div/>",{"class":"jBox-pointer jBox-pointer-"+this.pointer.position}).appendTo(this.wrapper),this.pointer.dimensions={x:this.pointer.element.outerWidth(),y:this.pointer.element.outerHeight()},"string"==a.type(this.options.pointer)){var b=this.options.pointer.split(":");b[0]&&(this.pointer.align=b[0]),b[1]&&(this.pointer.offset=parseInt(b[1]))}this.pointer.alignAttribute="x"==this.pointer.xy?"bottom"==this.pointer.align?"bottom":"top":"right"==this.pointer.align?"right":"left",this.wrapper.css("padding-"+this.pointer.position,this.pointer.dimensions[this.pointer.xy]),this.pointer.element.css(this.pointer.alignAttribute,"center"==this.pointer.align?"50%":0).css("margin-"+this.pointer.alignAttribute,this.pointer.offset),this.pointer.margin={margin:this.pointer.element.css("margin")},"center"==this.pointer.align&&this.pointer.element.css(this.prefix+"transform","translate("+("y"==this.pointer.xy?this.pointer.dimensions.x*-.5+"px":0)+", "+("x"==this.pointer.xy?this.pointer.dimensions.y*-.5+"px":0)+")"),this.pointer.element.css("x"==this.pointer.xy?"width":"height",parseInt(this.pointer.dimensions[this.pointer.xy])+parseInt(this.container.css("border-"+this.pointer.alignAttribute+"-width"))),this.wrapper.addClass("jBox-pointerPosition-"+this.pointer.position)}if(this.setContent(this.options.content),this.setTitle(this.options.title),this.options.draggable){var c="title"==this.options.draggable?this.titleContainer:this.options.draggable.length>0?this.options.draggable:this.wrapper;c.addClass("jBox-draggable").on("mousedown",function(b){if(2!=b.button&&!a(b.target).hasClass("jBox-noDrag")&&!a(b.target).parents(".jBox-noDrag").length){var c=this.wrapper.outerHeight(),d=this.wrapper.outerWidth(),e=this.wrapper.offset().top+c-b.pageY,f=this.wrapper.offset().left+d-b.pageX;a(document).on("mousemove.jBox-draggable-"+this.id,function(a){this.wrapper.offset({top:a.pageY+e-c,left:a.pageX+f-d})}.bind(this)),b.preventDefault()}}.bind(this)).on("mouseup",function(){a(document).off("mousemove.jBox-draggable-"+this.id)}.bind(this))}this.options.onCreated.bind(this)(),this.options._onCreated&&this.options._onCreated.bind(this)()}},this.options.constructOnInit&&this._create(),this.options.attach&&this.attach(),this._positionMouse=function(a){this.pos={left:a.pageX,top:a.pageY};var b=function(a,b){return"center"==this.options.position[b]?void(this.pos[a]-=Math.ceil(this.dimensions[b]/2)):(this.pos[a]+=a==this.options.position[b]?-1*this.dimensions[b]-this.options.offset[b]:this.options.offset[b],this.pos[a])}.bind(this);this.wrapper.css({left:b("left","x"),top:b("top","y")}),this.targetDimensions={x:0,y:0,left:a.pageX,top:a.pageY},this._adjustPosition()},this._attachEvents=function(){if(this.options.closeOnEsc&&a(document).on("keyup.jBox-"+this.id,function(a){27==a.keyCode&&this.close({ignoreDelay:!0})}.bind(this)),this.options.closeOnClick&&a(document).on("click.jBox-"+this.id,function(a){this.blockBodyClick||!("overlay"!=this.options.closeOnClick||this.overlay&&a.target==this.overlay[0])||"box"==this.options.closeOnClick&&a.target!=this.wrapper[0]&&!this.wrapper.has(a.target).length||"body"==this.options.closeOnClick&&(a.target==this.wrapper[0]||this.wrapper.has(a.target).length)||this.close({ignoreDelay:!0})}.bind(this)),(this.options.adjustPosition&&this.options.adjustTracker||this.options.reposition)&&!this.fixed&&this.outside){var b,c=0,d=150,e=function(){var a=(new Date).getTime();b||(a-c>d&&(this.options.reposition&&this.position(),this.options.adjustTracker&&this._adjustPosition(),c=a),b=setTimeout(function(){b=null,c=(new Date).getTime(),this.options.reposition&&this.position(),this.options.adjustTracker&&this._adjustPosition()}.bind(this),d))}.bind(this);this.options.adjustTracker&&"resize"!=this.options.adjustTracker&&a(window).on("scroll.jBox-"+this.id,function(){e()}.bind(this)),(this.options.adjustTracker&&"scroll"!=this.options.adjustTracker||this.options.reposition)&&a(window).on("resize.jBox-"+this.id,function(){e()}.bind(this))}"mouse"==this.options.target&&a("body").on("mousemove.jBox-"+this.id,function(a){this._positionMouse(a)}.bind(this))},this._detachEvents=function(){this.options.closeOnEsc&&a(document).off("keyup.jBox-"+this.id),this.options.closeOnClick&&a(document).off("click.jBox-"+this.id),(this.options.adjustPosition&&this.options.adjustTracker||this.options.reposition)&&(a(window).off("scroll.jBox-"+this.id),a(window).off("resize.jBox-"+this.id)),"mouse"==this.options.target&&a("body").off("mousemove.jBox-"+this.id)},this._addOverlay=function(){!this.overlay&&(this.overlay=a("#jBox-overlay").length?a("#jBox-overlay").css({zIndex:Math.min(a("#jBox-overlay").css("z-index"),this.options.zIndex-1)}):a("<div/>",{id:"jBox-overlay"}).css({display:"none",opacity:0,zIndex:this.options.zIndex-1}).appendTo(a("body")));var b=this.overlay.data("jBox")||{};b["jBox-"+this.id]=!0,this.overlay.data("jBox",b),"block"!=this.overlay.css("display")&&(this.options.fade?this.overlay.stop()&&this.overlay.animate({opacity:1},{queue:!1,duration:this.options.fade,start:function(){this.overlay.css({display:"block"})}.bind(this)}):this.overlay.css({display:"block",opacity:1}))},this._removeOverlay=function(){if(this.overlay){var b=this.overlay.data("jBox");delete b["jBox-"+this.id],this.overlay.data("jBox",b),a.isEmptyObject(b)&&(this.options.fade?this.overlay.stop()&&this.overlay.animate({opacity:0},{queue:!1,duration:this.options.fade,complete:function(){this.overlay.css({display:"none"})}.bind(this)}):this.overlay.css({display:"none",opacity:0}))}},this._generateCSS=function(){if(!this.IE8){"object"!=a.type(this.options.animation)&&(this.options.animation={pulse:{open:"pulse",close:"zoomOut"},zoomIn:{open:"zoomIn",close:"zoomIn"},zoomOut:{open:"zoomOut",close:"zoomOut"},move:{open:"move",close:"move"},slide:{open:"slide",close:"slide"},flip:{open:"flip",close:"flip"},tada:{open:"tada",close:"zoomOut"}}[this.options.animation]),this.options.animation.open&&(this.options.animation.open=this.options.animation.open.split(":")),this.options.animation.close&&(this.options.animation.close=this.options.animation.close.split(":")),this.options.animation.openDirection=this.options.animation.open?this.options.animation.open[1]:null,this.options.animation.closeDirection=this.options.animation.close?this.options.animation.close[1]:null,this.options.animation.open&&(this.options.animation.open=this.options.animation.open[0]),this.options.animation.close&&(this.options.animation.close=this.options.animation.close[0]),this.options.animation.open&&(this.options.animation.open+="Open"),this.options.animation.close&&(this.options.animation.close+="Close");var b={pulse:{duration:350,css:[["0%","scale(1)"],["50%","scale(1.1)"],["100%","scale(1)"]]},zoomInOpen:{duration:this.options.fade||180,css:[["0%","scale(0.9)"],["100%","scale(1)"]]},zoomInClose:{duration:this.options.fade||180,css:[["0%","scale(1)"],["100%","scale(0.9)"]]},zoomOutOpen:{duration:this.options.fade||180,css:[["0%","scale(1.1)"],["100%","scale(1)"]]},zoomOutClose:{duration:this.options.fade||180,css:[["0%","scale(1)"],["100%","scale(1.1)"]]},moveOpen:{duration:this.options.fade||180,positions:{top:{"0%":-12},right:{"0%":12},bottom:{"0%":12},left:{"0%":-12}},css:[["0%","translate%XY(%Vpx)"],["100%","translate%XY(0px)"]]},moveClose:{duration:this.options.fade||180,timing:"ease-in",positions:{top:{"100%":-12},right:{"100%":12},bottom:{"100%":12},left:{"100%":-12}},css:[["0%","translate%XY(0px)"],["100%","translate%XY(%Vpx)"]]},slideOpen:{duration:400,positions:{top:{"0%":-400},right:{"0%":400},bottom:{"0%":400},left:{"0%":-400}},css:[["0%","translate%XY(%Vpx)"],["100%","translate%XY(0px)"]]},slideClose:{duration:400,timing:"ease-in",positions:{top:{"100%":-400},right:{"100%":400},bottom:{"100%":400},left:{"100%":-400}},css:[["0%","translate%XY(0px)"],["100%","translate%XY(%Vpx)"]]},flipOpen:{duration:600,css:[["0%","perspective(400px) rotateX(90deg)"],["40%","perspective(400px) rotateX(-15deg)"],["70%","perspective(400px) rotateX(15deg)"],["100%","perspective(400px) rotateX(0deg)"]]},flipClose:{duration:this.options.fade||300,css:[["0%","perspective(400px) rotateX(0deg)"],["100%","perspective(400px) rotateX(90deg)"]]},tada:{duration:800,css:[["0%","scale(1)"],["10%, 20%","scale(0.9) rotate(-3deg)"],["30%, 50%, 70%, 90%","scale(1.1) rotate(3deg)"],["40%, 60%, 80%","scale(1.1) rotate(-3deg)"],["100%","scale(1) rotate(0)"]]}};a.each(["pulse","tada"],function(a,c){b[c+"Open"]=b[c+"Close"]=b[c]});var c=function(c,d){return keyframe_css="@"+this.prefix+"keyframes jBox-animation-"+this.options.animation[c]+"-"+c+(d?"-"+d:"")+" {",a.each(b[this.options.animation[c]].css,function(a,e){var f=d?e[1].replace("%XY",this._getXY(d).toUpperCase()):e[1];b[this.options.animation[c]].positions&&(f=f.replace("%V",b[this.options.animation[c]].positions[d][e[0]])),keyframe_css+=e[0]+" {"+this.prefix+"transform:"+f+";}"}.bind(this)),keyframe_css+="}",keyframe_css+=".jBox-animation-"+this.options.animation[c]+"-"+c+(d?"-"+d:"")+" {",keyframe_css+=this.prefix+"animation-duration: "+b[this.options.animation[c]].duration+"ms;",keyframe_css+=this.prefix+"animation-name: jBox-animation-"+this.options.animation[c]+"-"+c+(d?"-"+d:"")+";",keyframe_css+=b[this.options.animation[c]].timing?this.prefix+"animation-timing-function: "+b[this.options.animation[c]].timing+";":"",keyframe_css+="}",keyframe_css}.bind(this),d="";a.each(["open","close"],function(e,f){return this.options.animation[f]&&b[this.options.animation[f]]&&("close"!=f||this.options.fade)?void(b[this.options.animation[f]].positions?a.each(["top","right","bottom","left"],function(a,b){d+=c(f,b)}):d+=c(f)):""}.bind(this)),a("<style/>").append(d).appendTo(a("head"))}},this._blockBodyClick=function(){this.blockBodyClick=!0,setTimeout(function(){this.blockBodyClick=!1}.bind(this),10)},this.options.animation&&this._generateCSS(),this._animate=function(a){if(!this.IE8){if(a||(a=this.isOpen?"open":"close"),!this.options.fade&&"close"==a)return null;var b=this.options.animation[a+"Direction"]||("center"!=this.align?this.align:this.options.attributes.x);this.flipped&&this._getXY(b)==this._getXY(this.align)&&(b=this._getOpp(b));var c="jBox-animation-"+this.options.animation[a]+"-"+a+" jBox-animation-"+this.options.animation[a]+"-"+a+"-"+b;this.wrapper.addClass(c);var d=1e3*parseFloat(this.wrapper.css(this.prefix+"animation-duration"));"close"==a&&(d=Math.min(d,this.options.fade)),setTimeout(function(){this.wrapper.removeClass(c)}.bind(this),d)}},this._abortAnimation=function(){if(!this.IE8){var a="jBox-animation",b=this.wrapper.attr("class").split(" ").filter(function(b){return 0!==b.lastIndexOf(a,0)});this.wrapper.attr("class",b.join(" "))}},this._adjustPosition=function(){if(!this.options.adjustPosition)return null;this.positionAdjusted&&(this.wrapper.css(this.pos),this.pointer&&this.wrapper.css("padding",0).css("padding-"+this._getOpp(this.outside),this.pointer.dimensions[this._getXY(this.outside)]).removeClass("jBox-pointerPosition-"+this._getOpp(this.pointer.position)).addClass("jBox-pointerPosition-"+this.pointer.position),this.pointer&&this.pointer.element.attr("class","jBox-pointer jBox-pointer-"+this._getOpp(this.outside)).css(this.pointer.margin),this.positionAdjusted=!1,this.flipped=!1);var b=a(window),c={x:b.width(),y:b.height(),top:b.scrollTop(),left:b.scrollLeft()};c.bottom=c.top+c.y,c.right=c.left+c.x;var d=c.top>this.pos.top-(this.options.adjustDistance.top||0),e=c.right<this.pos.left+this.dimensions.x+(this.options.adjustDistance.right||0),f=c.bottom<this.pos.top+this.dimensions.y+(this.options.adjustDistance.bottom||0),g=c.left>this.pos.left-(this.options.adjustDistance.left||0),h=g?"left":e?"right":null,i=d?"top":f?"bottom":null,j=h||i;if(j){"move"==this.options.adjustPosition||h!=this.outside&&i!=this.outside||("mouse"==this.target&&(this.outside="right"),("top"==this.outside||"left"==this.outside?c[this._getXY(this.outside)]-(this.targetDimensions[this._getTL(this.outside)]-c[this._getTL(this.outside)])-this.targetDimensions[this._getXY(this.outside)]:this.targetDimensions[this._getTL(this.outside)]-c[this._getTL(this.outside)])>this.dimensions[this._getXY(this.outside)]+this.options.adjustDistance[this._getOpp(this.outside)]&&(this.wrapper.css(this._getTL(this.outside),this.pos[this._getTL(this.outside)]+(this.dimensions[this._getXY(this.outside)]+this.options.offset[this._getXY(this.outside)]+this.targetDimensions[this._getXY(this.outside)])*("top"==this.outside||"left"==this.outside?1:-1)).removeClass("jBox-pointerPosition-"+this.pointer.position).addClass("jBox-pointerPosition-"+this._getOpp(this.pointer.position)),this.pointer&&this.wrapper.css("padding",0).css("padding-"+this.outside,this.pointer.dimensions[this._getXY(this.outside)]),this.pointer&&this.pointer.element.attr("class","jBox-pointer jBox-pointer-"+this.outside),this.positionAdjusted=!0,this.flipped=!0));var k="x"==this._getXY(this.outside)?i:h;if(this.pointer&&"flip"!=this.options.adjustPosition&&this._getXY(k)==this._getOpp(this._getXY(this.outside))){if("center"==this.pointer.align)var l=this.dimensions[this._getXY(k)]/2-this.pointer.dimensions[this._getOpp(this.pointer.xy)]/2-parseInt(this.pointer.element.css("margin-"+this.pointer.alignAttribute))*(k!=this._getTL(k)?-1:1);else var l=k==this.pointer.alignAttribute?parseInt(this.pointer.element.css("margin-"+this.pointer.alignAttribute)):this.dimensions[this._getXY(k)]-parseInt(this.pointer.element.css("margin-"+this.pointer.alignAttribute))-this.pointer.dimensions[this._getXY(k)];spaceDiff=k==this._getTL(k)?c[this._getTL(k)]-this.pos[this._getTL(k)]+this.options.adjustDistance[k]:-1*(c[this._getOpp(this._getTL(k))]-this.pos[this._getTL(k)]-this.options.adjustDistance[k]-this.dimensions[this._getXY(k)]),k==this._getOpp(this._getTL(k))&&this.pos[this._getTL(k)]-spaceDiff<c[this._getTL(k)]+this.options.adjustDistance[this._getTL(k)]&&(spaceDiff-=c[this._getTL(k)]+this.options.adjustDistance[this._getTL(k)]-(this.pos[this._getTL(k)]-spaceDiff)),spaceDiff=Math.min(spaceDiff,l),spaceDiff<=l&&spaceDiff>0&&(this.pointer.element.css("margin-"+this.pointer.alignAttribute,parseInt(this.pointer.element.css("margin-"+this.pointer.alignAttribute))-spaceDiff*(k!=this.pointer.alignAttribute?-1:1)),this.wrapper.css(this._getTL(k),this.pos[this._getTL(k)]+spaceDiff*(k!=this._getTL(k)?-1:1)),this.positionAdjusted=!0)}}},this.options.onInit.bind(this)(),this.options._onInit&&this.options._onInit.bind(this)(),this}return b.prototype.attach=function(b,c){return b||(b=a(this.options.attach.selector)),c||(c=this.options.trigger),b&&b.length&&a.each(b,function(b,d){d=a(d),d.data("jBox-attached-"+this.id)||("title"==this.options.getContent&&void 0!=d.attr("title")&&d.data("jBox-getContent",d.attr("title")).removeAttr("title"),this.attachedElements||(this.attachedElements=[]),this.attachedElements.push(d[0]),d.on(c+".jBox-attach-"+this.id,function(a){if(this.isOpen&&this.source[0]!=d[0])var b=!0;this.source=d,!this.options.target&&(this.target=d),"click"==c&&this.options.preventDefault&&a.preventDefault(),this["click"!=c||b?"open":"toggle"]()}.bind(this)),"mouseenter"==this.options.trigger&&d.on("mouseleave",function(){this.close()}.bind(this)),d.data("jBox-attached-"+this.id,c))}.bind(this)),this},b.prototype.detach=function(b){return b||(b=this.attachedElements||[]),b&&b.length&&a.each(b,function(b,c){c=a(c),c.data("jBox-attached-"+this.id)&&(c.off(c.data("jBox-attached-"+this.id+".jBox-attach-"+this.id)),c.data("jBox-attached-"+this.id,null))}),this},b.prototype.setTitle=function(b){return null==b||void 0==b?this:(!this.wrapper&&this._create(),this.title||(this.titleContainer=a("<div/>",{"class":"jBox-title"}),this.title=a("<div/>").appendTo(this.titleContainer),this.wrapper.addClass("jBox-hasTitle"),"title"==this.options.closeButton&&(this.wrapper.addClass("jBox-closeButton-title"),this.closeButton.appendTo(this.titleContainer)),this.titleContainer.insertBefore(this.content)),this.title.html(b),this.position(),this)},b.prototype.setContent=function(b){if(null==b)return this;switch(!this.wrapper&&this._create(),a.type(b)){case"string":this.content.html(b);break;case"object":this.content.children().css({display:"none"}),this.options.content.appendTo(this.content).css({display:"block"})}return this.position(),this},b.prototype.position=function(b){if(b||(b={}),this.target=b.target||this.target||this.options.target||a(window),this.dimensions={x:this.wrapper.outerWidth(),y:this.wrapper.outerHeight()},"mouse"!=this.target){if("center"==this.options.position.x&&"center"==this.options.position.y)return this.wrapper.css({left:"50%",top:"50%",marginLeft:this.dimensions.x*-.5+this.options.offset.x,marginTop:this.dimensions.y*-.5+this.options.offset.y}),this;var c=this.target.offset();this.targetDimensions={x:this.target.outerWidth(),y:this.target.outerHeight(),top:c?c.top:0,left:c?c.left:0},this.pos={};var d=function(b){if(-1==a.inArray(this.options.position[b],["top","right","bottom","left","center"]))return void(this.pos[this.options.attributes[b]]=this.options.position[b]);var c=this.options.attributes[b]="x"==b?"left":"top";return this.pos[c]=this.targetDimensions[c],"center"==this.options.position[b]?void(this.pos[c]+=Math.ceil((this.targetDimensions[b]-this.dimensions[b])/2)):(c!=this.options.position[b]&&(this.pos[c]+=this.targetDimensions[b]-this.dimensions[b]),void((this.options.outside==b||"xy"==this.options.outside)&&(this.pos[c]+=this.dimensions[b]*(c!=this.options.position[b]?1:-1))))}.bind(this);if(d("x"),d("y"),this.options.pointer){var e=0;switch(this.pointer.align){case"center":"center"!=this.options.position[this._getOpp(this.options.outside)]&&(e+=this.dimensions[this._getOpp(this.options.outside)]/2);break;default:switch(this.options.position[this._getOpp(this.options.outside)]){case"center":e+=(this.dimensions[this._getOpp(this.options.outside)]/2-this.pointer.dimensions[this._getOpp(this.options.outside)]/2)*(this.pointer.align==this._getTL(this.pointer.align)?1:-1);break;default:e+=this.pointer.align!=this.options.position[this._getOpp(this.options.outside)]?this.dimensions[this._getOpp(this.options.outside)]-this.pointer.dimensions[this._getOpp(this.options.outside)]/2:this.pointer.dimensions[this._getOpp(this.options.outside)]/2}}e*=this.options.position[this._getOpp(this.options.outside)]==this.pointer.alignAttribute?-1:1,e+=this.pointer.offset*(this.pointer.align==this._getOpp(this._getTL(this.pointer.align))?1:-1),this.pos[this._getTL(this._getOpp(this.pointer.xy))]+=e}return this.pos[this.options.attributes.x]+=this.options.offset.x,this.pos[this.options.attributes.y]+=this.options.offset.y,this.wrapper.css(this.pos),this._adjustPosition(),this}},b.prototype.open=function(b){if(b||(b={}),!this.wrapper&&this._create(),this.timer&&clearTimeout(this.timer),this._blockBodyClick(),this.isDisabled)return this;var c=function(){this.source&&this.options.getTitle&&void 0!=this.source.attr(this.options.getTitle)&&this.setTitle(this.source.attr(this.options.getTitle)),this.source&&this.options.getContent&&(void 0!=this.source.data("jBox-getContent")?this.setContent(this.source.data("jBox-getContent")):void 0!=this.source.attr(this.options.getContent)?this.setContent(this.source.attr(this.options.getContent)):null),this.position({target:b.target}),this.options.onOpen.bind(this)(),this.options._onOpen&&this.options._onOpen.bind(this)(),this.options.ajax&&(!this.ajaxLoaded||this.options.reload)&&this.ajax(),this.isClosing&&this._abortAnimation(),this.isOpen||(this.isOpen=!0,this._attachEvents(),this.options.blockScroll&&a("body").addClass("jBox-blockScroll-"+this.id),this.options.overlay&&this._addOverlay(),this.options.animation&&!this.isClosing&&this._animate("open"),this.options.fade?this.wrapper.stop().animate({opacity:1},{queue:!1,duration:this.options.fade,start:function(){this.isOpening=!0,this.wrapper.css({display:"block"})}.bind(this),always:function(){this.isOpening=!1}.bind(this)}):this.wrapper.css({display:"block",opacity:1}))}.bind(this);return!this.options.delayOpen||this.isOpen||this.isClosing||b.ignoreDelay?c():this.timer=setTimeout(c,this.options.delayOpen),this},b.prototype.close=function(b){if(b||(b={}),this.timer&&clearTimeout(this.timer),this._blockBodyClick(),this.isDisabled)return this;var c=function(){this.options.onClose.bind(this)(),this.isOpen&&(this.isOpen=!1,this._detachEvents(),this.options.blockScroll&&a("body").removeClass("jBox-blockScroll-"+this.id),this.options.overlay&&this._removeOverlay(),this.options.animation&&!this.isOpening&&this._animate("close"),this.source=null,this.options.fade?this.wrapper.stop().animate({opacity:0},{queue:!1,duration:this.options.fade,start:function(){this.isClosing=!0}.bind(this),complete:function(){this.wrapper.css({display:"none"}),this.options.onCloseComplete&&this.options.onCloseComplete.bind(this)(),this.options._onCloseComplete&&this.options._onCloseComplete.bind(this)()}.bind(this),always:function(){this.isClosing=!1}.bind(this)}):(this.wrapper.css({display:"none",opacity:0}),this.options._onCloseComplete&&this.options._onCloseComplete.bind(this)()))}.bind(this);return b.ignoreDelay?c():this.timer=setTimeout(c,Math.max(this.options.delayClose,10)),this},b.prototype.toggle=function(a){return this[this.isOpen?"close":"open"](a),this},b.prototype.disable=function(){return this.isDisabled=!0,this},b.prototype.enable=function(){return this.isDisabled=!1,this},b.prototype.ajax=function(b){return b||(b={}),this.ajaxRequest&&this.ajaxRequest.abort(),this.ajaxRequest=a.ajax({url:b.url||this.options.ajax,data:b.data||this.options.data,beforeSend:function(){this.content.html(""),this.wrapper.addClass("jBox-loading"),this.position(),this.options.onAjax.bind(this)()}.bind(this),complete:function(a){this.wrapper.removeClass("jBox-loading"),this.content.html(a.responseText),this.position(),this.ajaxLoaded=!0,this.options.onAjaxComplete.bind(this)()}.bind(this)}),this},b.prototype.destroy=function(){return this.close({ignoreDelay:!0}),this.wrapper.remove(),this},a.fn.jBox=function(c,d){return c||(c={}),d||(d={}),new b(c,a.extend(d,{attach:this}))},Function.prototype.bind||(Function.prototype.bind=function(a){var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d&&a?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e}),b}),swifty.define("swiftylib/compute",["can/compute"],function(a){return a}),swifty.define("js/components/editor_ckeditor/ckeditor_helpers/ckeditor_helper_link_type",["jquery","swiftylib/construct","swiftylib/i18n/__"],function(a,b,c){var d=b.extend({insertNewLinkType:function(b,d){var e=this,f=new a.Deferred;b.items.unshift([c("Internal page"),"page"]),d.elements.push({type:"vbox",id:"pageOptions",children:[{type:"select",id:"page",label:"Select a page",items:[],onLoad:function(){e._addPagesToSelectElement(this,f)},setup:function(a){var b=this;f.done(function(){if(a&&a.type&&"page"===a.type&&a.url&&a.url.url){var c=a.url.url;c.indexOf(document.location.hostname)>-1&&b.setValue(a.url.protocol+c)}})}}]})},linkTypeSelectOnChange:function(a,b){a.onChange=CKEDITOR.tools.override(a.onChange,function(a){return function(){a.call(this);var c,d=this.getDialog(),e=d.getContentElement("info","pageOptions").getElement().getParent().getParent();"page"===this.getValue()?(e.show(),b.config.linkShowTargetTab&&d.showPage("target"),c=d.definition.getContents("upload"),c&&!c.hidden&&d.hidePage("upload")):e.hide()}})},linkTypeSelectSetup:function(a){a.setup=function(a){a&&(a.type?a.type&&"url"===a.type&&a.url&&a.url.url&&a.url.url.indexOf(document.location.hostname)>-1&&(a.type="page"):a.type="page"),this.setValue(a.type)}},linkTypeSelectCommit:function(a){a.commit=function(a){if(a.type=this.getValue(),"page"===a.type){a.type="url";var b=this.getDialog(),c=b.getValueOf("info","page"),d=[],e="http://",f="://";c.indexOf(f)>-1?(d=c.split(f),e=d[0]+f,b.setValueOf("info","url",d[1])):b.setValueOf("info","url",c),b.setValueOf("info","protocol",e)}}},_addPagesToSelectElement:function(b,c){a.post(scc_data.ajax_url,{action:"swcreator_get_page_list",ajax_nonce:scc_data.ajax_nonce,id:scc_data.page_id}).done(function(d){var e=[],f=function(b,c){a.each(b,function(a,b){b.menu?f(b.menu,c+"-"):(b.title=c+b.title,e.push(b))})};f(d,""),a.each(e,function(a,c){b.add(c.title,c.value)}),c.resolve()})}});return new d}),swifty.define("js/components/editor_ckeditor/ckeditor_helpers/ckeditor_helper_setup_event_handlers",["jquery","swiftylib/evt","swiftylib/compute","./ckeditor_helper_link_type"],function(a,b,c,d){return function(){var b=this,e=b.instance;b.lastCopyPaste=null,b.pasteOccured=new c(null),b.pasteOccured.bind("change",function(a,c,d){d&&c&&"paste"===d.name&&"paste"===c.name&&(c.stop(),setTimeout(function(){b.pasteOccured(null)},1e3))}),e.on("pasteDialog",function(){b.pasteOccured(null)}),e.on("pluginsLoaded",b.onPluginsLoadedHandler,b),e.on("contentDom",b.onContentDomHandler,b),e.on("instanceReady",b.onInstanceReadyHandler,b),e.on("setData",function(b){""===a.trim(b.data.dataValue)&&(b.data.dataValue="<p></p>")}),e.on("insertElement",function(a){var b,c,d,e,f,g,h,i=a.data.getName();if("table"===i.toLowerCase()){b=a.data.find("tbody").getItem(0).getChildren(),d=b.count(),g=b.getItem(0).getChildren().count(),h=Math.floor(100/g*1e4)/1e4;for(var j=0;d>j;j++){c=b.getItem(j),e=c.getChildren();for(var k=0;g>k;k++)f=e.getItem(k),f.setAttribute("width",h+"%")}}},null,null,1),e.on("selectionChange",function(){b.unlockSelection()}),e.on("paste",function(c){var d,e=c.data,f=document.implementation.createHTMLDocument(""),g=new CKEDITOR.dom.element(f.body);g.data("cke-editable",1),g.appendHtml(e.dataValue);var h=g.find("div.cke_widget_wrapper");h.count()>0&&(d=g.find("span.cke_widget_drag_handler_container"),a(d.$).remove(),"drop"!==e.method&&b.isCurrentInsertPositionInWidget()&&c.stop(),"cut"!==b.lastCopyPaste&&b.replaceIds(g),e.dataValue=g.getHtml()),b.pasteOccured(c)}),e.on("afterPaste",function(){a(".swc_grid_column").attr("contenteditable","false")}),CKEDITOR.on("dialogDefinition",function(a){if(a.editor.name===e.name){var b=a.data.definition,c=b.getContents("info");if("table"===a.data.name&&(c.get("txtWidth")["default"]="100%"),"link"===a.data.name){var f=c.get("linkType");d.insertNewLinkType(f,c),d.linkTypeSelectOnChange(f,a.editor),d.linkTypeSelectSetup(f),d.linkTypeSelectCommit(f)}}}),a(window).bind("keydown",function(a){if(a.ctrlKey||a.metaKey)switch(String.fromCharCode(a.which).toLowerCase()){case"a":a.preventDefault()}})}}),swifty.define("js/components/editor_ckeditor/ckeditor_helpers/ckeditor_helper_cogs",["jquery"],function(){return function(){}}),swifty.define("js/components/editor_ckeditor/ckeditor_helpers/ckeditor_helper_resizeicon",["jquery","swiftylib/i18n/__","js/diverse/utils","swiftylib/evt"],function(a,b,c,d){return function(e,f,g,h){var i=e.wrapper;a(i.$).on("mouseenter",function(f){if(!h.hasClass("swc_hide_asset_icon")){var g=a(f.currentTarget),i=g.children("div.swc_asset, div.swc_text");if(1===i.length&&!(i.closest(".swc_text").length<=0)){var j=i.css("float"),k=i.attr("data-asset_type"),l=g.find(".swc_asset_cntnt"),m=i,n=a.parseJSON(c.atou(l.attr("data-asset_data")));n&&n.swc_position&&("center"===n.swc_position?(m=l,j="none"):j=100===+n.swc_width?"none":n.swc_position);var o,p,q,r;i.find(".swc_asset_resizer_icon_wrapper").length?i.find("> div > .swc_asset_resizer_icon_wrapper").removeClass("swc_will_remove"):i.prepend('<span class="swc_asset_resizer_icon_wrapper cke_reset cke_widget_drag_handler_container" contenteditable="false" title="'+b("Click and drag to resize")+'" ><i class="fa fa-arrows-h" contenteditable="false"></i></span>'),o=i.find(".swc_asset_resizer_icon_wrapper"),p=o.find(".fa"),p.mousecapture({down:function(b){q=b.pageX,h.addClass("swc_hide_asset_icon"),a("body").addClass("swc_resize")},move:function(a){var b=q-a.pageX,c=2;"right"===j?c=1:"left"===j&&(c=-1);var e=Math.ceil(100*(r+b*c)/m.offsetParent().width());e=Math.max(e,10),e=Math.min(e,100),m.css("width",e+"%"),("swifty_slider"===k||"swifty_slideshow"===k)&&d("resize_slides",{},l)},up:function(){h.removeClass("swc_hide_asset_icon"),p.remove(),a("body").removeClass("swc_resize"),d("swifty_editor_asset_dialog",{el:l,mod:"icon_resized",inline:e.inline,init_css:!1})}});var s={},t=!0,u={my:"top",at:"bottom+4",of:i,collision:"none"};return j&&"none"!==j&&"right"!==j?"left"===j&&(s.right=0,i.outerHeight()<o.outerHeight()?(t=!1,o.position(u)):i.outerHeight()>o.outerHeight()&&i.outerHeight()<2*o.outerHeight()?s.bottom=0:(s.left="auto",s.right=0,s.bottom=0)):(s.left=0,i.outerHeight()<o.outerHeight()?(t=!1,o.position(u)):s.bottom=0),t&&o.css(s),r=m.width(),!1}}}),a(i.$).on("mouseleave",function(){a(i.$).find("> div > .swc_asset_resizer_icon_wrapper").addClass("swc_will_remove"),setTimeout(function(){a(i.$).find(".swc_will_remove").remove()},1e3)})}}),swifty.define("js/components/editor_ckeditor/ckeditor_helpers/ckeditor_helper_cogicon",["jquery","swiftylib/i18n/__","swiftylib/evt"],function(a,b,c){function d(i,j,k,l,m,n,o){var p=n.closest(".swc_text"),q=p.parent();if(q.length>0){var r=p.hasClass("swc_locked"),s=r&&!scc_data.swifty_edit_locked;
d(i,j,k,l,"text",q,s)}var t=n.closest(".swc_grid_row");if(q=t.parent(),q.length>0){var r=t.hasClass("swc_locked"),s=r&&!scc_data.swifty_edit_locked;d(i,j,k,l,"row",q,s)}if(!l.hasClass("swc_hide_asset_icon")){var u=n,v=u.find("div.swc_grid_row, div.swc_asset, div.swc_text").first(),w=v.parent(),r=v.hasClass("swc_locked");if(w.find(".swc_asset_cog_icon_wrapper").length)w.find("> .swc_asset_cog_icon_wrapper, > .swc_asset_any_icon_wrapper, > .swc_asset_adv_icons_wrapper").removeClass("swc_will_remove");else{var x={},y=a(f("swc_asset_cog_icon_wrapper"+("row"===m?" swc_asset_cog_icon_row_wrapper":""),o?"fa-lock":"fa-cog",o?"":b("Click for options or drag to move"),0)).prependTo(w),z=0,A=0;if("function"==typeof swifty_parseMatrix){var B=swifty_parseMatrix(getComputedStyle(v[0],null).transform);z=B.m41,A=B.m42}y.position({my:"row"===m?"right bottom-1":"right top",at:"right-"+z+" top-"+A,of:v,collision:"none"}),c("get_asset_name",{el:v.find("> .swc_asset_cntnt"),inline:!1}).then(function(c){"row"===m&&(c=b("Columns"));var d=a('<span class="swc_asset_title_icons_wrapper">'+c.toLowerCase()+"</span>").appendTo(y);d.position({my:"left",at:"right",of:y,collision:"none"})});var C=e(y);a(".swc_asset_cog_icon_wrapper").not(y).each(function(b,c){var d=a(c),f=e(d);C.x<f.x+f.w&&C.x+C.w>f.x&&C.y<f.y+f.h&&C.y+C.h>f.y&&y.position({my:"top",at:"bottom+1",of:d,collision:"none"})});var D=null;"advanced"!==scc_data.swifty_gui_mode||o||(D=a('<span class="swc_asset_adv_icons_wrapper swc_asset_any_icon_wrapper swc_nopluscollision">'+g(r)+"</span>").appendTo(w.find("> .swc_asset_cog_icon_wrapper")),D.attr("style","width: "+33*D.find(".swc_asset_any_icon_wrapper").length+"px !important;"),D.position({my:"right",at:"left",of:y,collision:"none"}),D.find(".swc_asset_edit_icon_wrapper").on("click",function(){h("edit",i,a(this),m)}),D.find(".swc_asset_move_icon_wrapper").on("click",function(){h("move",i,a(this),m)}),D.find(".swc_asset_delete_icon_wrapper").on("click",function(){h("delete",i,a(this),m)}),D.find(".swc_asset_lock_icon_wrapper").on("click",function(){h("lock",i,a(this),m)}),D.find(".swc_asset_unlock_icon_wrapper").on("click",function(){h("unlock",i,a(this),m)}),D.find(".swc_asset_copy_icon_wrapper").on("click",function(){h("copy",i,a(this),m)})),o?y.on("click",function(){h("locked",i,a(this),m)}):(y.on("click",function(){h("main",i,a(this),m)}),y.draggable({cursorAt:{right:0,top:0},cursor:"move",delay:100,distance:5,opacity:.6,zIndex:999999,appendTo:a(".swc_page_cntnt.cke_editable"),helper:function(){var c=e(v),d=v.clone();d.addClass("swc_drag_ori_placeholder"),d.find(".swc_video_wrapper").replaceWith('<span class="swc_video_drag_wrapper">'+b("Video")+"</span>");var f=200,g=100,h=c.h;h>f&&(h=f),d=a("<div></div>").append(d);var i='<div class="swc_drag_helper" style="width: '+c.w+"px; height: "+h+'px;"><svg style="width: '+c.w+"px; height: "+h+'px;">  <defs>    <mask id="swc_drag_mask123" maskUnits="userSpaceOnUse" maskContentUnits="userSpaceOnUse">      <linearGradient id="swc_drag_gradient123" gradientUnits="objectBoundingBox" x2="0" y2="1">        <stop stop-color="white" stop-opacity="1" offset="0" />        <stop stop-color="white" stop-opacity="0" offset="1" />      </linearGradient>';return i+=c.h>f?'      <rect x="0" y="0" width="'+c.w+'px" height="'+(h-g)+'px" fill="rgb(255,255,255)" />      <rect x="0" y="'+(h-g)+'" width="'+c.w+'px" height="'+g+'px" fill="url(#swc_drag_gradient123)" />':'      <rect x="0" y="0" width="'+c.w+'px" height="'+h+'px" fill="rgb(255,255,255)" />',i+='    </mask>  </defs>  <foreignObject width="100%" height="100%" style="mask: url(#swc_drag_mask123);">'+d.html(),d=a(i),x={},x.width=c.w,v.addClass("swc_drag_drag_hide"),d.addClass("swc_drag_drag_placeholder"),d},start:function(){a("body").addClass("swc_no_editor_hovers"),a("*").addClass("swc_fix_cursor_move")},stop:function(){a("body").removeClass("swc_no_editor_hovers"),a("*").removeClass("swc_fix_cursor_move"),v.removeClass("swc_drag_drag_hide"),a(".swc_drag_insert_placeholder").length>0&&(a(".swc_drag_helper").remove(),c("swifty_editor_change_asset_location",{$assetWrapper:v,$placeholder:a(".swc_drag_insert_placeholder")}))},drag:function(b,c){var d=c.offset.left,f=c.offset.top,g=d+x.width,h=f,i=null,j="prev";if("row"===m){var k=0;a(".swc_page_cntnt.cke_editable").find(".swc_grid_row").not(".swc_drag_ori_placeholder").not(".swc_drag_drag_hide").each(function(b,c){var d=a(c),f=e(d);h>=f.y+f.h/2&&(i=d.parent(),j="next",k++),0===k&&(i=a(".swc_page_cntnt.cke_editable"),j="prepend")})}else a(".swc_page_cntnt.cke_editable").find(".swc_grid_column, .swc_asset, .swc_text").not(".swc_drag_ori_placeholder").not(".swc_drag_drag_hide").each(function(b,c){var d=a(c),f=e(d);if(g>=f.x&&g<f.x+f.w&&h>=f.y&&h<f.y+f.h){if(d.hasClass("swc_text")){var k=0;d.find("> .swc_asset_cntnt > *").not(".swc_drag_ori_placeholder").not(".swc_drag_drag_hide").each(function(b,c){var d=a(c),f=e(d);h>=f.y+f.h/2&&(i=d,j="next",k++)}),0===k&&(i=d.find(".swc_asset_cntnt"),j="prepend"),h<f.y+5&&(i=d.closest(".swc_grid_column"),j="prepend"),h>f.y+f.h-5&&(i=d,j="next")}if(d.hasClass("swc_grid_column")){var k=0;d.find("> .cke_widget_wrapper > .swc_asset, > .cke_widget_wrapper > .swc_text").not(".swc_drag_ori_placeholder").not(".swc_drag_drag_hide").each(function(b,c){var d=a(c),f=e(d);h>=f.y+f.h/2&&(i=d.parent(),j="next",k++)}),0===k&&(i=d,j="prepend")}}});if(i){var l=a(".swc_drag_insert_placeholder"),n=a('<div class="swc_drag_insert_placeholder"></div>');"prepend"===j?i.children().first().hasClass("swc_drag_insert_placeholder")||(n.prependTo(i),l.remove()):"next"===j?i.next().hasClass("swc_drag_insert_placeholder")||(n.insertAfter(i),l.remove()):i.prev().hasClass("swc_drag_insert_placeholder")||(n.insertBefore(i),l.remove())}else a(".swc_drag_insert_placeholder").remove()}}))}}}function e(a){var b={},c=a.offset();return b.x=c.left,b.y=c.top,b.w=a.outerWidth(!1),b.h=a.outerHeight(!1),b}function f(a,b,c,d){var e='<span class="'+a+" swc_asset_any_icon_wrapper cke_reset cke_widget_drag_handler_container"+(1===d?" swc_nopluscollision":"")+("advanced"===scc_data.swifty_gui_mode?" swc_asset_adv_icon_wrapper":"")+'" contenteditable="false" title="'+c+'" >'+("fa-"!==b.substr(0,3)?'<div class="swc_icon" contenteditable="false"><span aria-hidden="true" contenteditable="false">'+b+"</span></div>":'<i class="fa '+b+'" contenteditable="false"></i>')+"</span>";return 1===d&&(e+='<span class="swc_icon_wr_divider"></span>'),e}function g(a){var b="";return scc_data.swifty_change_lock&&(b+=a?f("swc_asset_unlock_icon_wrapper","fa-lock","",1):f("swc_asset_lock_icon_wrapper","fa-unlock","",1)),b+=f("swc_asset_delete_icon_wrapper","&#xe00b;","",1),b+=f("swc_asset_copy_icon_wrapper","fa-copy","",1),b+=f("swc_asset_move_icon_wrapper","&#xe013;","",1)}function h(b,d,e,f){if(a(".swc_asset_resizer_icon_wrapper").remove(),"row"===f){var g=e.closest(".cke_widget_wrapper").find(".swc_grid_row");if(e.hasClass("swc_hide_asset_icon"))return;a(".swc_asset_cog_icon_wrapper, .swc_asset_any_icon_wrapper, .swc_asset_adv_icons_wrapper").remove(),"main"===b&&"advanced"!==scc_data.swifty_gui_mode?c("swifty_editor_row_dialog",{$row:g,mod:"icon_clicked",inline:d.inline}):"main"===b&&"advanced"===scc_data.swifty_gui_mode?c("swifty_editor_row_edit_dialog",{$row:g}):"edit"===b?c("swifty_editor_row_edit_dialog",{$row:g}):"move"===b?c("swifty_editor_row_move_dialog",{$row:g}):"delete"===b?c("swifty_editor_row_delete_dialog",{$row:g}):"lock"===b?c("swifty_editor_row_lock",{$row:g,locked:!0}):"unlock"===b?c("swifty_editor_row_lock",{$row:g,locked:!1}):"copy"===b?c("swifty_editor_row_copy",{$row:g}):"locked"===b&&c("swifty_editor_row_locked",{})}else{var g=e.closest(".cke_widget_wrapper").children(".swc_text, .swc_asset").children(".swc_asset_cntnt");if(e.hasClass("swc_hide_asset_icon"))return;a(".swc_asset_cog_icon_wrapper, .swc_asset_any_icon_wrapper, .swc_asset_adv_icons_wrapper").remove(),"main"===b&&"advanced"!==scc_data.swifty_gui_mode?c("swifty_editor_asset_dialog",{el:g,mod:"icon_clicked",inline:d.inline,init_css:!1}):"main"===b&&"advanced"===scc_data.swifty_gui_mode?c("swifty_editor_asset_edit_dialog",{el:g}):"edit"===b?c("swifty_editor_asset_edit_dialog",{el:g}):"move"===b?c("swifty_editor_asset_move_dialog",{el:g}):"delete"===b?c("swifty_editor_asset_delete_dialog",{el:g}):"lock"===b?c("swifty_editor_asset_lock",{el:g,locked:!0}):"unlock"===b?c("swifty_editor_asset_lock",{el:g,locked:!1}):"copy"===b?c("swifty_editor_asset_copy",{el:g}):"locked"===b&&c("swifty_editor_asset_locked",{})}}return function(b,c,e,f,g,h){var i=a(b.wrapper.$);i.on("mouseenter",function(){d(b,c,e,f,g,i,h)}),i.on("mouseleave",function(){i.find("> .swc_asset_cog_icon_wrapper, > .swc_asset_any_icon_wrapper, > .swc_asset_adv_icons_wrapper").addClass("swc_will_remove"),setTimeout(function(){i.find(".swc_will_remove").remove()},1e3)})}}),swifty.define("js/components/editor_ckeditor/ckeditor_helpers/ckeditor_helper_plusicon",["jquery","swiftylib/i18n/__","swiftylib/evt"],function(a,b,c){function d(a){var b={},c=a.offset();return b.x=c.left,b.y=c.top,b.w=a.outerWidth(!1),b.h=a.outerHeight(!1),b}function e(a){return'<span class="'+a+' swc_asset_any_icon_wrapper cke_reset cke_widget_drag_handler_container" contenteditable="false" title="'+b("Click to add content")+'" ><i class="fa fa-plus" contenteditable="false"></i></span>'}var f=0;return function(b,g){if(0===f){var h=".swc_text > .swc_asset_cntnt > p, .swc_text > .swc_asset_cntnt > * > p";a(".swc_page_cntnt.cke_editable").on("mouseenter",h,function(b){if(!a("body").hasClass("swc_no_editor_hovers")&&!g.hasClass("swc_hide_asset_icon")){var f=a(b.currentTarget),h=f.closest("div.swc_text"),i=f.closest("div.swc_grid_column"),j=i.closest(".swc_grid_row");if(i=j.parent(),"100%"===h[0].style.width&&!(j.find(".swc_grid_column").length>1||h.find("> .swc_asset_cntnt > p, > .swc_asset_cntnt > * > p").length<=1)){var k=h.hasClass("swc_locked");if(!k||scc_data.swifty_edit_locked)if(f.find("> .swc_asset_p_plus_icon_wrapper").length)f.find("> .swc_asset_p_plus_icon_wrapper").removeClass("swc_will_remove");else{f.append(e("swc_asset_p_plus_icon_wrapper"));var l=f.find(".swc_asset_p_plus_icon_wrapper"),m=l.find(".fa");m.on("click",function(){c("set_paragraph_range_for_insert",{$p:f}).done(function(){c("add_content_panel",{allowance:"insize_text_asset"})})});for(var n=0,o=0,p=0,q=1,r=1,s=f.closest(".swc_text").find(".swc_asset").add(".swc_asset_any_icon_wrapper").not(l).not(".swc_nopluscollision").not(".swc_asset_p_plus_icon_wrapper"),t=d(f.closest(".swc_text"));r>0||q>0;){r=0,l.position({my:"right center",at:"right-"+n+" center"+(o>=0?"+"+o:o),of:f,collision:"none"});var u=d(l);1===q?(q=0,u.y<t.y?(o=t.y-u.y,q=2):u.y+u.h>t.y+t.h&&(o=t.y+t.h-(u.y+u.h),q=2)):q=0,s.each(function(b,c){var e=a(c),g=d(e);u.x<g.x+g.w&&u.x+u.w>g.x&&u.y<g.y+g.h&&u.y+u.h>g.y&&(u.x+u.w-g.x-n>0&&(n+=u.x+u.w-g.x-n),n++,p=1,n<f.width()-32&&(r=1))}),0==r&&p>0&&(n+=2,p=0,r=1)}}}}}),a(".swc_page_cntnt.cke_editable").on("mouseleave",h,function(b){a(b.currentTarget).find(".swc_asset_p_plus_icon_wrapper").addClass("swc_will_remove"),setTimeout(function(){a(b.currentTarget).find(".swc_will_remove").remove()},200)}),f=1}var i=a(b.wrapper.$);i.on("mouseenter",function(b){if(!g.hasClass("swc_hide_asset_icon")){var d=a(b.currentTarget),f=d.find("div.swc_grid_column");f.length<=0&&(f=d.closest(".swc_grid_column"));var h=f;if(f=f.closest(".swc_grid_row").parent(),1===f.length){var j=0;f.find(".swc_asset_plus_icon_wrapper").length||(f.append(e("swc_asset_plus_icon_wrapper")),j=1);var k=f.find(".swc_asset_plus_icon_wrapper"),l=k.find(".fa"),m=h.closest(".swc_grid_row"),n=0;parseInt(m.css("padding-bottom"),10)>0&&(n-=parseInt(m.css("padding-bottom"),10));var o=h.width()/2;o+=h.offset().left-m.offset().left,k.position({my:"center center",at:"left+"+o+" bottom+"+n,of:m,collision:"none"}),l.data("column",h),1==j&&l.on("click",function(){var b=a(this).data("column"),d=b.closest("div.swc_grid_row").first(),e=d.hasClass("swc_locked");c("add_content_panel",{in_grid:!0,$column:b,locked:e})}),f.on("mouseleave",function(){i.find("> .swc_asset_plus_icon_wrapper").addClass("swc_will_remove"),setTimeout(function(){i.find(".swc_will_remove").remove()},1e3)})}}})}}),swifty.define("js/components/editor_ckeditor/ckeditor_helpers/ckeditor_helper_move_asset",["jquery"],function(){return function(a){if(a){var b,c,d,e,f,g,h=this.getWidget(this.getWidgetIdAssetBased(a.$asset)),i=h.wrapper,j=this.getTableOrRowOrCell(i,"table"),k=this.getGridRowOrColumn(i,"swc_grid_column"),l=this.getTableOrGrid(i),m=!1;if(i&&a.move){switch(a.move){case"up":case"down":if(j)i["up"===a.move?"insertBefore":"insertAfter"](j);else{var n=this.getAscendantTextAsset(i),o=null;o=this.getRootElements(n?n:k);var p=this.getGridRows(),q=this.getGridRowOrColumn(i,"swc_grid_row"),r=p.count(),s=this.getCurPos(q,p);if(b=this.getParagraphAndWidgetElements(),c=o.count(),c>0)if(d=this.getCurPos(i,o),"up"===a.move&&d>0||"down"===a.move&&c-1>d){e=this.getNewPos(a.move,d);var t=o.getItem(e);if(this.isTextAsset(t)&&!this.isTextAsset(i)){var u=this.getRootElements(t),v=u.count();"up"===a.move?i.insertAfter(u.getItem(v-1)):i.insertBefore(u.getItem(0))}else i["up"===a.move?"insertBefore":"insertAfter"](t)}else if("up"===a.move&&0===d||"down"===a.move&&d===c-1)if(n)i["up"===a.move?"insertBefore":"insertAfter"](n.getParent());else{var w=null;if("up"===a.move&&s>0&&(w=s-1),"down"===a.move&&r-1>s&&(w=s+1),null!==w){var x=p.getItem(w),y=this.getGridColumnsFromRow(x);g=y.count();var z=y.getItem("up"===a.move?g-1:0);if(z)if("up"===a.move)i.appendTo(z);else{var A=z.getFirst();A?i.insertBefore(A):i.appendTo(z)}}}}break;case"left":case"right":if(j&&j.equals(l))i["left"===a.move?"insertBefore":"insertAfter"](j),m=!0;else if(k&&k.equals(l)){var B=this.getGridRowOrColumn(i,"swc_grid_row"),C=B.find("div.swc_grid_column");g=C.count(),f=this.getGridRowOrColumn(i,"swc_grid_column"),d=this.getCurPos(f,C),g>1&&("left"===a.move&&d>0||"right"===a.move&&g-1>d)&&this.moveToNewColum(a.move,i,this.getNewPos(a.move,d),C),m=!0}if(!m){b=this.getParagraphAndWidgetElements(),c=b.count(),d=this.getCurPos(i,b);var D=i.getFirst().getComputedStyle("float");"left"===a.move&&(this.isWidgetElement(b.getItem(d-1))?"right"===D?this.triggerSetPositionEvent(i.getChild(0).$,a.move):i.insertBefore(b.getItem(d-1)):this.triggerSetPositionEvent(i.getChild(0).$,a.move)),"right"===a.move&&(this.isWidgetElement(b.getItem(d+1))?i.insertAfter(b.getItem(d+1)):this.triggerSetPositionEvent(i.getChild(0).$,a.move))}break;default:return}i.scrollIntoView(),this.contentModfied()}}}}),swifty.define("js/components/editor_ckeditor/ckeditor_helpers/ckeditor_helper_instance_ready_handler",["jquery","swiftylib/evt"],function(a,b){return function(c){var d=this,e=c.editor,f=e.commands;d.$toolbar=a("#cke_"+d.instance.name).children(".cke_inner"),d.$toolbar.find(".cke_toolbar").eq(1).css("width","100%").find("a:last").css("float","right"),d.sticky_editor?f.hideEditor&&f.hideEditor.enable():(f.hideEditor&&f.hideEditor.disable(),d.toggleToolbarVisibility(!1)),e.dataProcessor.writer.lineBreakChars="\n";var g={indent:!1,breakBeforeOpen:!1,breakAfterOpen:!1,breakBeforeClose:!1,breakAfterClose:!1};a.each(CKEDITOR.dtd,function(a){e.dataProcessor.writer.setRules(a,g)});var h=e.createRange();h.moveToElementEditEnd(h.root),e.getSelection().selectRanges([h]),e.on("blur",d.onBlurHandler,d);var i=e.getData();b("swifty_editor_before_init",{content:i});var j=a(".swc_asset_swifty_contact_form > .swc_asset_cntnt");a.each(j,function(b,c){a(c).find("div:not([id]):has(br) br").hide()}),e.editable().on("cut",function(){d.lastCopyPaste="cut"}),e.editable().on("copy",function(){d.lastCopyPaste="copy"}),e.contextMenu&&e.contextMenu.addListener(function(){e.contextMenu.items=a.grep(e.contextMenu.items,function(a){return"editdiv"!==a.name&&"removediv"!==a.name})});var k=e.editable().find(".swc_asset");0===k.$.length&&(""===a.trim(i)||""===a.trim(a(e.container.$).text())&&/swifty_text/.test(i))&&b("show_page_setup"),b("show_main_menu")}}),swifty.define("js/components/editor_ckeditor/ckeditor_helpers/ckeditor_helper_setup_insert",["jquery","can","swiftylib/evt"],function(a,b,c){return function(){var d=this;b.bind.call(window,"evt_swc_replace_asset",function(a,b,e){b&&b.html&&b.$element&&(d.instance.getSelection().selectElement(new CKEDITOR.dom.node(b.$element[0])),c("add_asset_to_content",{html:b.html,widget_class:b.widget_class,insert_class:null,inline:!1,takeSnapshot:!0,only_insert_at_root:!1,force_html_insert:!1}).then(function(){b.$element.remove(),c("add_exec",{fn:"swifty_check_inserts"}),setTimeout(function(){c("add_exec",{fn:"swifty_check_inserts"})},1e3),e.resolve()}))}),b.bind.call(window,"evt_swc_add_asset_to_content",function(b,e,f){var g;d.destroySingle("tooltip"),d.swifty_insert_content=!0;try{if(e.takeSnapshot&&(d.lastUndoImage=null,d.undoImageStack=null,d.instance.fire("saveSnapshot"),d.instance&&d.instance.undoManager&&(d.instance.undoManager.snapshots.length&&(d.lastUndoImage=d.instance.undoManager.snapshots[d.instance.undoManager.snapshots.length-1]),d.undoImageStack=a.extend(!0,[],d.instance.undoManager.snapshots)),d.instance.fire("lockSnapshot",{dontUpdate:!0})),e.$column)a(e.$column).children("p").each(function(){var b=a(this);0===b.html().replace(/\s|&nbsp;|<br>/g,"").length&&b.remove()}),d.appendHtmlToColumn(e.$column,e.html);else if(e.inline)d.instance.insertHtml(e.html);else if(e.is_preset){var h=d.appendHtmlToSelector(e.html);g=a(h.$),setTimeout(function(){g.find(".swc_grid_row").addClass("swc_glowing"),setTimeout(function(){g.find(".swc_grid_row").removeClass("swc_glowing")},3e3)},1)}else{var i=d.setAssetInsertPosition(e.only_insert_at_root,e.force_html_insert);if(i){var j=CKEDITOR.dom.element.createFromHtml(e.html);j.insertBefore(i),d.instance.widgets.initOn(j,e.widget_class)}else d.instance.insertHtml(e.html)}if(e.insert_class){var k=a("body").find("."+e.insert_class);if(setTimeout(function(){k.hasClass("swc_asset")&&(k.addClass("swc_glowing"),setTimeout(function(){k.removeClass("swc_glowing")},4e3))},1),!e.inline){var l=k.closest("td"),m=d.getContentElement();if(l&&l.length&&a(m.$).find(l).length){var n=k.parent(),o=l.children().not(n);o&&!o.length&&""===l.text()&&n.after("&#8203;")}}k.hasClass("swc_text")||c("swifty_editor_asset_inserted",{el:k}),k.removeClass("."+e.insert_class).addClass("swc_asset_state_ins_updating"),k.hasClass("swc_text")&&setTimeout(function(){d.openEditAfterInsert(k,e.inline,!0)},500),d.setCursor({$asset:k}),g=k}e.takeSnapshot&&(d.instance.fire("unlockSnapshot"),d.instance.fire("saveSnapshot")),setTimeout(function(){f.resolve(g)},100)}finally{d.swifty_insert_content=!1}}),b.bind.call(window,"evt_swc_add_row_to_content",function(b,c,e){d.destroySingle("tooltip");var f=null;d.swifty_insert_content=!0;try{d.appendHtmlToSelector(c.html),f=a("body").find("."+c.insert_class),setTimeout(function(){f.find(".swc_grid_colwrapper").addClass("swc_glowing"),setTimeout(function(){f.find(".swc_grid_colwrapper").removeClass("swc_glowing")},3e3)},1),f.removeClass("."+c.insert_class)}finally{d.swifty_insert_content=!1}e.resolve(f)}),b.bind.call(window,"evt_swc_add_columns_to_row",function(b,c,e){a.each(d.instance.widgets.instances,function(b,f){if(a(f.element.$).is(c.$row)){f.element.appendHtml(c.html),a(f.element.$).children("p").remove();for(var g=f.element.getChildCount(),h=0;g>h;h++){var i=f.element.getChild(h).findOne(".swc_grid_column");i&&d.instance.widgets.initOn(i,"swc_grid_column")}e.resolve()}})}),b.bind.call(window,"evt_swc_swifty_editor_check_widgets",function(a,b,c){d.instance.widgets.checkWidgets(),c.resolve()}),b.bind.call(window,"evt_swc_is_current_insert_position_in_table_or_grid",function(a,b,c){c.resolve(d.isCurrentInsertPositionInTableOrGrid())}),b.bind.call(window,"evt_swc_probe_simulate",function(b,c){a(".cke_editable:first").focus().simulate(c.cmd,c.data),d.instance.fire("change")}),b.bind.call(window,"evt_swc_probe_ck_bold",function(){d.instance.execCommand("bold"),d.instance.fire("change")}),b.bind.call(window,"evt_swc_probe_ck_select_first_el",function(){d.instance.focus(),d.instance.execCommand("selectAll");for(var b,c=d.instance.getSelection().getRanges()[0],e=new CKEDITOR.dom.walker(c),f=null;b=e.next();)if(!b.isReadOnly()){var g=a(b.$).prop("tagName");g&&(g=g.toLowerCase(),("p"===g||"h1"===g||"h2"===g||"h3"===g||"h4"===g||"h5"===g||"h6"===g)&&!f&&a(b.$).text().length>0&&(f=b))}c=d.instance.createRange(),c.moveToElementEditStart(f),c.selectNodeContents(f),d.instance.getSelection().selectRanges([c]),d.instance.fire("change")})}}),swifty.define("js/components/editor_ckeditor/ckeditor_helpers/ckeditor_helper_setup_asset_widget",["jquery","can","swiftylib/evt"],function(a,b){return function(){var c=this,d=c.instance;b.bind.call(window,"evt_swc_new_asset_content_received",function(b,e){a.each(d.widgets.instances,function(b,f){if(a(f.element.$).is(a(e.container))){f.element.setHtml(e.html),parseInt(e.refreshnr,10)<parseInt(a(e.container).attr("data-swc_refreshnr"),10)&&c.addRefreshSpinner(e),a(f.element.$).attr("style",e.style);var g=e.classes.split(" ");a.each(g,function(b,c){a(f.element.$).addClass(c)}),d.fire("saveSnapshot"),c.openEditAfterInsert(f.element.$,f.inline)}})}),b.bind.call(window,"evt_swc_asset_reload_from_server_queued",function(b,d){c.addRefreshSpinner(d),a(d.container).attr("data-swc_refreshnr",d.refreshnr)})}}),swifty.define("js/components/editor_ckeditor/ckeditor_helpers/ckeditor_helper_seperate",["jquery","./ckeditor_helper_setup_event_handlers","./ckeditor_helper_cogs","./ckeditor_helper_resizeicon","./ckeditor_helper_cogicon","./ckeditor_helper_plusicon","./ckeditor_helper_move_asset","./ckeditor_helper_instance_ready_handler","./ckeditor_helper_setup_insert","./ckeditor_helper_setup_asset_widget"],function(a,b,c,d,e,f,g,h,i,j){return function(a){a.setupEventHandlers=b,a.addCogsIconFunctionality=c,a.addResizeIconFunctionality=d,a.addCogIconFunctionality=e,a.addPlusIconFunctionality=f,a.moveAsset=g,a.onInstanceReadyHandler=h,a.setupInsert=i,a.setupAssetWidget=j}}),swifty.define("js/components/editor_ckeditor/ckeditor_helpers/ckeditor_helper_mouse",["jquery"],function(a){return function(){a.fn.mousecapture=function(b){var c=a(document);return this.each(function(){var d=a(this),e={};d.mousedown(function(a){var f;b.move&&(f=function(a){b.move.call(d,a,e)},c.mousemove(f));var g,h=function(){b.move&&c.unbind("mousemove",f),c.unbind("mouseup",g)};return g=b.up?function(a){return h(),b.up.call(d,a,e)}:h,c.mouseup(g),b.down.call(d,a,e)})}),this}}}),swifty.define("js/components/editor_ckeditor/ckeditor_helpers/ckeditor_helper_asset",["jquery","swiftylib/i18n/__","js/diverse/utils","swiftylib/evt","./ckeditor_helper_mouse"],function(a,b,c,d,e){return function(b){e(),CKEDITOR.plugins.registered.swc_asset||CKEDITOR.plugins.add("swc_asset",{requires:"widget",init:function(d){CKEDITOR.plugins.widget.prototype.updateDragHandlerPosition=CKEDITOR.tools.override(CKEDITOR.plugins.widget.prototype.updateDragHandlerPosition,function(){return function(){var b,c=this.editor,d=this.element.$,e="swc_grid_row"===a(d).attr("data-widget"),f=this._.dragHandlerOffset;if(d.parentElement&&"SPAN"===d.parentElement.nodeName?(d=d.parentElement,b={x:0+d.offsetWidth-32,y:0-(e?32:0)}):b={x:d.offsetLeft+d.offsetWidth-32,y:d.offsetTop-(e?32:0)},b.x=b.x-1,!f||b.x!==f.x||b.y!==f.y){var g=c.checkDirty();c.fire("lockSnapshot"),this.dragHandlerContainer.setStyles({top:b.y+"px",left:b.x+"px",display:"block"}),c.fire("unlockSnapshot"),!g&&c.resetDirty(),this._.dragHandlerOffset=b}}}),d.widgets.add("swc_asset",{upcast:function(a){return("div"===a.name||"span"===a.name)&&a.hasClass("swc_asset")},downcast:function(d){var e="div"===d.name.toLowerCase(),f=e?"swifty_block_replacer":"swifty_inline_replacer",g=new CKEDITOR.htmlParser.element(f),h=d.getFirst();if(h){var i="",j=h.attributes;if(j&&j["data-asset_data"]){j=a.parseJSON(c.atou(j["data-asset_data"])),a.each(j,function(a,b){"swc_shortcode"!==a&&"content"!==a&&"swc_shortcode_status"!==a&&(parseFloat(a)===a>>>0?i+=" "+b:("string"==typeof b&&(b=b.replace(/\n/g,"_=EnTEr=-")),i+=" "+a+"=_=QUoTe=-"+b+"_=QUoTe=-"))}),i="["+j.swc_shortcode+i+"]",j.content&&(j.content=j.content.replace(/\n/g,"_=EnTEr=-"),i+="<!--keep_swifty_content_start-->"+j.content+"<!--keep_swifty_content_end-->");var k=b.forceShortcodeCloseTags[j.swc_shortcode]?b.forceShortcodeCloseTags[j.swc_shortcode]:!1;(j.content||k)&&(i+="[/"+j.swc_shortcode+"]"),g.setHtml(i)}}return g},init:function(){var c=this,d=c.wrapper,e=a(d.$).find("> .cke_widget_drag_handler_container"),f=e.find("img"),g=d.find("> .cke_widget_drag_handler_container img").getItem(0);a(d.$).css("clear",a(d.$).find("> .swc_asset").css("clear"));var h=a(d.$).find("div.swc_asset").first(),i=h.hasClass("swc_locked");!i||scc_data.swifty_edit_locked?(b.addResizeIconFunctionality(c,g,f,e),b.addCogIconFunctionality(c,g,f,e,"asset",!1),b.addPlusIconFunctionality(c,e)):b.addCogIconFunctionality(c,g,f,e,"asset",!0),e.prepend('<i class="fa fa-cog" style="padding-left: 3px;"></i>'),e.addClass("cke_widget_drag_handler_container_swc_hidden"),b.setupWidgetKeyDeletion(c)}})}})}}),swifty.define("js/components/editor_ckeditor/ckeditor_helpers/ckeditor_helper_image",["jquery","swiftylib/i18n/__","swiftylib/evt"],function(a,b,c){return function(b){CKEDITOR.plugins.registered.swc_image||CKEDITOR.plugins.add("swc_image",{requires:"widget",beforeInit:function(a){var b=CKEDITOR.fileTools;a.on("paste__",function(c){if(c.data.dataValue.match(/<img/i)){var d,e,f,g=c.data,h=document.implementation.createHTMLDocument(""),i=new CKEDITOR.dom.element(h.body),j=function(a){var b=document.createElement("a");return b.href=a,""===b.host&&(b.href=b.href),b};for(i.data("cke-editable",1),i.appendHtml(g.dataValue),d=i.find("img"),f=0;f<d.count();f++){e=d.getItem(f);var k=e.getAttribute("src"),l=k&&"data:"===k.substring(0,5),m=null===e.data("cke-realelement");if(j(k).hostname!==scc_data.domain&&!l&&m&&!e.data("cke-upload-id")&&!e.isReadOnly(1)){var n=a.uploadRepository.create(null);n.loadAndUpload(k),b.markElement(e,"uploadimage",n.id),b.bindNotifications(a,n)}}g.dataValue=i.getHtml()}})},init:function(d){d.widgets.add("swc_image",{allowedContent:{img:{attributes:"!src,alt,width,height"},figure:!0,figcaption:!0},requiredContent:"img[src,alt]",parts:{image:"img",caption:"figcaption"},upcast:function(a){var b;if(!a.attributes["data-cke-realelement"]&&("figure"===a.name?b=a.getFirst("img")||a.getFirst("a").getFirst("img"):("img"===a.name||"a"===a.name&&1===a.children.length&&a.getFirst("img"))&&(b="a"===a.name?a.children[0]:a),b)){var c;if(!(c=b.attributes.src)||"data:"!==c.substring(0,5))return!0}},downcast:function(a){return a},init:function(){var d=this,e=d.wrapper,f=a(e.$).find("> .cke_widget_drag_handler_container"),g=e.find("> .cke_widget_drag_handler_container img").getItem(0),h=f.find("img");h.attr("title",""),f.prepend('<i class="fa fa-cog" style="padding-left: 3px;"></i>'),h.on("click",function(){var b=a(this).closest(".cke_widget_wrapper");return a(this).hasClass("swc_hide_asset_icon")?!1:void c("swifty_editor_image_dialog",{$image_wrapper:b})}),b.addCogsIconFunctionality(d,g,h,0)}})}})}}),swifty.define("js/components/editor_ckeditor/ckeditor_helpers/ckeditor_helper_row",["jquery","swiftylib/i18n/__","swiftylib/evt"],function(a,b,c){return function(b){CKEDITOR.plugins.registered.swc_grid_row||CKEDITOR.plugins.add("swc_grid_row",{requires:"widget",init:function(d){d.widgets.add("swc_grid_row",{editables:{content:{selector:".swc_grid_row"}},upcast:function(a){return"div"===a.name&&a.hasClass("swc_grid_row")},downcast:function(b){var c="",d=b.attributes;return d&&d["data-grid_data"]&&(d=a.parseJSON(d["data-grid_data"]),a.each(d,function(a,b){"content"!==a&&(b=b.replace(/\n/g,"_=EnTEr=-"),c+=" "+a+"=_=QUoTe=-"+b+"_=QUoTe=-")}),b.name="swifty_grid_row_replacer",b.attributes={"data-grid-row-shortcode_data":c}),b},init:function(){var d=this,e=d.wrapper,f=a(e.$).find("> .cke_widget_drag_handler_container"),g=e.find("> .cke_widget_drag_handler_container img").getItem(0),h=f.find("img");d.on("ready",function(){d.editables.content.$.setAttribute("contenteditable","false")}),h.attr("title","");var i=a(e.$).find("div.swc_grid_row").first(),j=i.hasClass("swc_locked"),k=j&&!scc_data.swifty_edit_locked;b.addCogIconFunctionality(d,g,h,f,"row",k),f.prepend('<i class="fa fa-cog" style="padding-left: 3px;"></i>'),f.addClass("cke_widget_drag_handler_container_swc_hidden"),h.on("click",function(){var b=a(this).closest(".cke_widget_wrapper").find(".swc_grid_row");return a(this).hasClass("swc_hide_asset_icon")?!1:void c("swifty_editor_row_dialog",{$row:b,mod:"icon_clicked",inline:d.inline})}),b.setupWidgetKeyDeletion(d)}})}})}}),swifty.define("js/components/editor_ckeditor/ckeditor_helpers/ckeditor_helper_column",["jquery","swiftylib/i18n/__","swiftylib/evt"],function(a){return function(b){CKEDITOR.plugins.registered.swc_grid_column||CKEDITOR.plugins.add("swc_grid_column",{requires:"widget",init:function(c){c.widgets.add("swc_grid_column",{editables:{content:{selector:".swc_grid_column"}},upcast:function(a){return"div"===a.name&&a.hasClass("swc_grid_column")},downcast:function(b){var c="",d=b.attributes;return d&&d["data-grid_data"]&&(d=a.parseJSON(d["data-grid_data"]),a.each(d,function(a,b){"content"!==a&&(b=b.replace(/\n/g,"_=EnTEr=-"),c+=" "+a+"=_=QUoTe=-"+b+"_=QUoTe=-")}),b.name="swifty_grid_column_replacer",b.attributes={"data-grid-column-shortcode_data":c}),b},init:function(){var c=this,d=c.wrapper,e=a(d.$).find("> .cke_widget_drag_handler_container"),f=d.find("> .cke_widget_drag_handler_container img").getItem(0),g=e.find("img");c.on("ready",function(){c.editables.content.$.setAttribute("contenteditable","false")});var h=a(d.$).closest("div.swc_grid_row").first(),i=h.hasClass("swc_locked");(!i||scc_data.swifty_edit_locked)&&b.addPlusIconFunctionality(c,e),e.addClass("swc_hide_icon"),b.addCogsIconFunctionality(c,f,g,0),b.setupWidgetKeyDeletion(c)}})}})}}),swifty.define("js/components/editor_ckeditor/ckeditor_helpers/ckeditor_helper_text",["jquery","swiftylib/i18n/__","js/diverse/utils","swiftylib/evt"],function(a,b,c){return function(b){CKEDITOR.plugins.registered.swc_text||CKEDITOR.plugins.add("swc_text",{requires:"widget",init:function(d){d.widgets.add("swc_text",{editables:{content:{selector:".swc_asset_cntnt"}},upcast:function(a){return"div"===a.name&&a.hasClass("swc_text")},downcast:function(b){var d="",e=b.getFirst();if(e){b=e;var f=b.attributes;if(f&&f["data-asset_data"]){f=a.parseJSON(c.atou(f["data-asset_data"])),a.each(f,function(a,b){"content"!==a&&(b=b.replace(/\n/g,"_=EnTEr=-"),d+=" "+a+"=_=QUoTe=-"+b+"_=QUoTe=-")}),b.name="swifty_text_replacer",b.attributes={"data-text_data":d};var g=this.editables.content.getData(),h=a(g);if(!h.hasClass("swc_asset_cntnt")){var i=h.find(".swc_asset_cntnt");i.length>0&&(h=i)}h.length>0&&(1!==h.length||h[0].nodeType!==CKEDITOR.NODE_COMMENT)&&b.setHtml(h.html())}}return b},init:function(){var c=this,d=c.wrapper,e=a(d.$).find("> .cke_widget_drag_handler_container"),f=d.find("> .cke_widget_drag_handler_container img").getItem(0),g=e.find("img");a(d.$).css("clear",a(d.$).find("> .swc_text").css("clear"));var h=a(d.$).find("div.swc_text").first(),i=h.hasClass("swc_locked");!i||scc_data.swifty_edit_locked?(b.addCogIconFunctionality(c,f,g,e,"text",!1),b.addPlusIconFunctionality(c,e)):(b.addCogIconFunctionality(c,f,g,e,"text",!0),c.on("ready",function(){c.editables.content.$.setAttribute("contenteditable","false")})),e.prepend('<i class="fa fa-cog" style="padding-left: 3px;"></i>'),e.addClass("cke_widget_drag_handler_container_swc_hidden")}})}})}}),swifty.define("js/components/editor_ckeditor/ckeditor_helpers/ckeditor_helper_widgets",["jquery","./ckeditor_helper_asset","./ckeditor_helper_image","./ckeditor_helper_row","./ckeditor_helper_column","./ckeditor_helper_text"],function(a,b,c,d,e,f){return function(a){b(a),c(a),d(a),e(a),f(a)}}),swifty.define("js/libs/mout/src/time/now",[],function(){function a(){return a.get()
}return a.get="function"==typeof Date.now?Date.now:function(){return+new Date},a}),swifty.define("js/libs/mout/src/function/throttle",["../time/now"],function(a){function b(b,c){function d(){k=a(),g=null,h=b.apply(f,i)}function e(){return f=this,i=arguments,j=c-(a()-k),0>=j?(clearTimeout(g),d()):g||(g=setTimeout(d,j)),h}var f,g,h,i,j,k=0;return e.cancel=function(){clearTimeout(g)},e}return b}),function(a){"function"==typeof swifty.define&&swifty.define.amd?swifty.define("js/libs/jquery-ui",["jquery"],a):a(jQuery)}(function(a){function b(b,d){var e,f,g,h=b.nodeName.toLowerCase();return"area"===h?(e=b.parentNode,f=e.name,b.href&&f&&"map"===e.nodeName.toLowerCase()?(g=a("img[usemap='#"+f+"']")[0],!!g&&c(g)):!1):(/^(input|select|textarea|button|object)$/.test(h)?!b.disabled:"a"===h?b.href||d:d)&&c(b)}function c(b){return a.expr.filters.visible(b)&&!a(b).parents().addBack().filter(function(){return"hidden"===a.css(this,"visibility")}).length}a.ui=a.ui||{},a.extend(a.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),a.fn.extend({scrollParent:function(b){var c=this.css("position"),d="absolute"===c,e=b?/(auto|scroll|hidden)/:/(auto|scroll)/,f=this.parents().filter(function(){var b=a(this);return d&&"static"===b.css("position")?!1:e.test(b.css("overflow")+b.css("overflow-y")+b.css("overflow-x"))}).eq(0);return"fixed"!==c&&f.length?f:a(this[0].ownerDocument||document)},uniqueId:function(){var a=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++a)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&a(this).removeAttr("id")})}}),a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])},focusable:function(c){return b(c,!isNaN(a.attr(c,"tabindex")))},tabbable:function(c){var d=a.attr(c,"tabindex"),e=isNaN(d);return(e||d>=0)&&b(c,!e)}}),a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(b,c){function d(b,c,d,f){return a.each(e,function(){c-=parseFloat(a.css(b,"padding"+this))||0,d&&(c-=parseFloat(a.css(b,"border"+this+"Width"))||0),f&&(c-=parseFloat(a.css(b,"margin"+this))||0)}),c}var e="Width"===c?["Left","Right"]:["Top","Bottom"],f=c.toLowerCase(),g={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+c]=function(b){return void 0===b?g["inner"+c].call(this):this.each(function(){a(this).css(f,d(this,b)+"px")})},a.fn["outer"+c]=function(b,e){return"number"!=typeof b?g["outer"+c].call(this,b):this.each(function(){a(this).css(f,d(this,b,!0,e)+"px")})}}),a.fn.addBack||(a.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}),a("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(a.fn.removeData=function(b){return function(c){return arguments.length?b.call(this,a.camelCase(c)):b.call(this)}}(a.fn.removeData)),a.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),a.fn.extend({focus:function(b){return function(c,d){return"number"==typeof c?this.each(function(){var b=this;setTimeout(function(){a(b).focus(),d&&d.call(b)},c)}):b.apply(this,arguments)}}(a.fn.focus),disableSelection:function(){var a="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(a+".ui-disableSelection",function(a){a.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(b){if(void 0!==b)return this.css("zIndex",b);if(this.length)for(var c,d,e=a(this[0]);e.length&&e[0]!==document;){if(c=e.css("position"),("absolute"===c||"relative"===c||"fixed"===c)&&(d=parseInt(e.css("zIndex"),10),!isNaN(d)&&0!==d))return d;e=e.parent()}return 0}}),a.ui.plugin={add:function(b,c,d){var e,f=a.ui[b].prototype;for(e in d)f.plugins[e]=f.plugins[e]||[],f.plugins[e].push([c,d[e]])},call:function(a,b,c,d){var e,f=a.plugins[b];if(f&&(d||a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType))for(e=0;e<f.length;e++)a.options[f[e][0]]&&f[e][1].apply(a.element,c)}};var d=0,e=Array.prototype.slice;a.cleanData=function(b){return function(c){var d,e,f;for(f=0;null!=(e=c[f]);f++)try{d=a._data(e,"events"),d&&d.remove&&a(e).triggerHandler("remove")}catch(g){}b(c)}}(a.cleanData),a.widget=function(b,c,d){var e,f,g,h,i={},j=b.split(".")[0];return b=b.split(".")[1],e=j+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][e.toLowerCase()]=function(b){return!!a.data(b,e)},a[j]=a[j]||{},f=a[j][b],g=a[j][b]=function(a,b){return this._createWidget?void(arguments.length&&this._createWidget(a,b)):new g(a,b)},a.extend(g,f,{version:d.version,_proto:a.extend({},d),_childConstructors:[]}),h=new c,h.options=a.widget.extend({},h.options),a.each(d,function(b,d){return a.isFunction(d)?void(i[b]=function(){var a=function(){return c.prototype[b].apply(this,arguments)},e=function(a){return c.prototype[b].apply(this,a)};return function(){var b,c=this._super,f=this._superApply;return this._super=a,this._superApply=e,b=d.apply(this,arguments),this._super=c,this._superApply=f,b}}()):void(i[b]=d)}),g.prototype=a.widget.extend(h,{widgetEventPrefix:f?h.widgetEventPrefix||b:b},i,{constructor:g,namespace:j,widgetName:b,widgetFullName:e}),f?(a.each(f._childConstructors,function(b,c){var d=c.prototype;a.widget(d.namespace+"."+d.widgetName,g,c._proto)}),delete f._childConstructors):c._childConstructors.push(g),a.widget.bridge(b,g),g},a.widget.extend=function(b){for(var c,d,f=e.call(arguments,1),g=0,h=f.length;h>g;g++)for(c in f[g])d=f[g][c],f[g].hasOwnProperty(c)&&void 0!==d&&(b[c]=a.isPlainObject(d)?a.isPlainObject(b[c])?a.widget.extend({},b[c],d):a.widget.extend({},d):d);return b},a.widget.bridge=function(b,c){var d=c.prototype.widgetFullName||b;a.fn[b]=function(f){var g="string"==typeof f,h=e.call(arguments,1),i=this;return g?this.each(function(){var c,e=a.data(this,d);return"instance"===f?(i=e,!1):e?a.isFunction(e[f])&&"_"!==f.charAt(0)?(c=e[f].apply(e,h),c!==e&&void 0!==c?(i=c&&c.jquery?i.pushStack(c.get()):c,!1):void 0):a.error("no such method '"+f+"' for "+b+" widget instance"):a.error("cannot call methods on "+b+" prior to initialization; attempted to call method '"+f+"'")}):(h.length&&(f=a.widget.extend.apply(null,[f].concat(h))),this.each(function(){var b=a.data(this,d);b?(b.option(f||{}),b._init&&b._init()):a.data(this,d,new c(f,this))})),i}},a.Widget=function(){},a.Widget._childConstructors=[],a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(b,c){c=a(c||this.defaultElement||this)[0],this.element=a(c),this.uuid=d++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=a(),this.hoverable=a(),this.focusable=a(),c!==this&&(a.data(c,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===c&&this.destroy()}}),this.document=a(c.style?c.ownerDocument:c.document||c),this.window=a(this.document[0].defaultView||this.document[0].parentWindow)),this.options=a.widget.extend({},this.options,this._getCreateOptions(),b),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:a.noop,widget:function(){return this.element},option:function(b,c){var d,e,f,g=b;if(0===arguments.length)return a.widget.extend({},this.options);if("string"==typeof b)if(g={},d=b.split("."),b=d.shift(),d.length){for(e=g[b]=a.widget.extend({},this.options[b]),f=0;f<d.length-1;f++)e[d[f]]=e[d[f]]||{},e=e[d[f]];if(b=d.pop(),1===arguments.length)return void 0===e[b]?null:e[b];e[b]=c}else{if(1===arguments.length)return void 0===this.options[b]?null:this.options[b];g[b]=c}return this._setOptions(g),this},_setOptions:function(a){var b;for(b in a)this._setOption(b,a[b]);return this},_setOption:function(a,b){return this.options[a]=b,"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!b),b&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(b,c,d){var e,f=this;"boolean"!=typeof b&&(d=c,c=b,b=!1),d?(c=e=a(c),this.bindings=this.bindings.add(c)):(d=c,c=this.element,e=this.widget()),a.each(d,function(d,g){function h(){return b||f.options.disabled!==!0&&!a(this).hasClass("ui-state-disabled")?("string"==typeof g?f[g]:g).apply(f,arguments):void 0}"string"!=typeof g&&(h.guid=g.guid=g.guid||h.guid||a.guid++);var i=d.match(/^([\w:-]*)\s*(.*)$/),j=i[1]+f.eventNamespace,k=i[2];k?e.delegate(k,j,h):c.bind(j,h)})},_off:function(b,c){c=(c||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,b.unbind(c).undelegate(c),this.bindings=a(this.bindings.not(b).get()),this.focusable=a(this.focusable.not(b).get()),this.hoverable=a(this.hoverable.not(b).get())},_delay:function(a,b){function c(){return("string"==typeof a?d[a]:a).apply(d,arguments)}var d=this;return setTimeout(c,b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b),this._on(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b),this._on(b,{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,c,d){var e,f,g=this.options[b];if(d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&g.apply(this.element[0],[c].concat(d))===!1||c.isDefaultPrevented())}},a.each({show:"fadeIn",hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(d,e,f){"string"==typeof e&&(e={effect:e});var g,h=e?e===!0||"number"==typeof e?c:e.effect||c:b;e=e||{},"number"==typeof e&&(e={duration:e}),g=!a.isEmptyObject(e),e.complete=f,e.delay&&d.delay(e.delay),g&&a.effects&&a.effects.effect[h]?d[b](e):h!==b&&d[h]?d[h](e.duration,e.easing,f):d.queue(function(c){a(this)[b](),f&&f.call(d[0]),c()})}});var f=(a.widget,!1);a(document).mouseup(function(){f=!1});a.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){return!0===a.data(c.target,b.widgetName+".preventClickEvent")?(a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(b){if(!f){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(b),this._mouseDownEvent=b;var c=this,d=1===b.which,e="string"==typeof this.options.cancel&&b.target.nodeName?a(b.target).closest(this.options.cancel).length:!1;return d&&!e&&this._mouseCapture(b)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){c.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(b)!==!1,!this._mouseStarted)?(b.preventDefault(),!0):(!0===a.data(b.target,this.widgetName+".preventClickEvent")&&a.removeData(b.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return c._mouseMove(a)},this._mouseUpDelegate=function(a){return c._mouseUp(a)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),b.preventDefault(),f=!0,!0)):!0}},_mouseMove:function(b){if(this._mouseMoved){if(a.ui.ie&&(!document.documentMode||document.documentMode<9)&&!b.button)return this._mouseUp(b);if(!b.which)return this._mouseUp(b)}return(b.which||b.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==!1,this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)),!this._mouseStarted)},_mouseUp:function(b){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target===this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),f=!1,!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}});!function(){function b(a,b,c){return[parseFloat(a[0])*(n.test(a[0])?b/100:1),parseFloat(a[1])*(n.test(a[1])?c/100:1)]}function c(b,c){return parseInt(a.css(b,c),10)||0}function d(b){var c=b[0];return 9===c.nodeType?{width:b.width(),height:b.height(),offset:{top:0,left:0}}:a.isWindow(c)?{width:b.width(),height:b.height(),offset:{top:b.scrollTop(),left:b.scrollLeft()}}:c.preventDefault?{width:0,height:0,offset:{top:c.pageY,left:c.pageX}}:{width:b.outerWidth(),height:b.outerHeight(),offset:b.offset()}}a.ui=a.ui||{};var e,f,g=Math.max,h=Math.abs,i=Math.round,j=/left|center|right/,k=/top|center|bottom/,l=/[\+\-]\d+(\.[\d]+)?%?/,m=/^\w+/,n=/%$/,o=a.fn.position;a.position={scrollbarWidth:function(){if(void 0!==e)return e;var b,c,d=a("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),f=d.children()[0];return a("body").append(d),b=f.offsetWidth,d.css("overflow","scroll"),c=f.offsetWidth,b===c&&(c=d[0].clientWidth),d.remove(),e=b-c},getScrollInfo:function(b){var c=b.isWindow||b.isDocument?"":b.element.css("overflow-x"),d=b.isWindow||b.isDocument?"":b.element.css("overflow-y"),e="scroll"===c||"auto"===c&&b.width<b.element[0].scrollWidth,f="scroll"===d||"auto"===d&&b.height<b.element[0].scrollHeight;return{width:f?a.position.scrollbarWidth():0,height:e?a.position.scrollbarWidth():0}},getWithinInfo:function(b){var c=a(b||window),d=a.isWindow(c[0]),e=!!c[0]&&9===c[0].nodeType;return{element:c,isWindow:d,isDocument:e,offset:c.offset()||{left:0,top:0},scrollLeft:c.scrollLeft(),scrollTop:c.scrollTop(),width:d||e?c.width():c.outerWidth(),height:d||e?c.height():c.outerHeight()}}},a.fn.position=function(e){if(!e||!e.of)return o.apply(this,arguments);e=a.extend({},e);var n,p,q,r,s,t,u=a(e.of),v=a.position.getWithinInfo(e.within),w=a.position.getScrollInfo(v),x=(e.collision||"flip").split(" "),y={};return t=d(u),u[0].preventDefault&&(e.at="left top"),p=t.width,q=t.height,r=t.offset,s=a.extend({},r),a.each(["my","at"],function(){var a,b,c=(e[this]||"").split(" ");1===c.length&&(c=j.test(c[0])?c.concat(["center"]):k.test(c[0])?["center"].concat(c):["center","center"]),c[0]=j.test(c[0])?c[0]:"center",c[1]=k.test(c[1])?c[1]:"center",a=l.exec(c[0]),b=l.exec(c[1]),y[this]=[a?a[0]:0,b?b[0]:0],e[this]=[m.exec(c[0])[0],m.exec(c[1])[0]]}),1===x.length&&(x[1]=x[0]),"right"===e.at[0]?s.left+=p:"center"===e.at[0]&&(s.left+=p/2),"bottom"===e.at[1]?s.top+=q:"center"===e.at[1]&&(s.top+=q/2),n=b(y.at,p,q),s.left+=n[0],s.top+=n[1],this.each(function(){var d,j,k=a(this),l=k.outerWidth(),m=k.outerHeight(),o=c(this,"marginLeft"),t=c(this,"marginTop"),z=l+o+c(this,"marginRight")+w.width,A=m+t+c(this,"marginBottom")+w.height,B=a.extend({},s),C=b(y.my,k.outerWidth(),k.outerHeight());"right"===e.my[0]?B.left-=l:"center"===e.my[0]&&(B.left-=l/2),"bottom"===e.my[1]?B.top-=m:"center"===e.my[1]&&(B.top-=m/2),B.left+=C[0],B.top+=C[1],f||(B.left=i(B.left),B.top=i(B.top)),d={marginLeft:o,marginTop:t},a.each(["left","top"],function(b,c){a.ui.position[x[b]]&&a.ui.position[x[b]][c](B,{targetWidth:p,targetHeight:q,elemWidth:l,elemHeight:m,collisionPosition:d,collisionWidth:z,collisionHeight:A,offset:[n[0]+C[0],n[1]+C[1]],my:e.my,at:e.at,within:v,elem:k})}),e.using&&(j=function(a){var b=r.left-B.left,c=b+p-l,d=r.top-B.top,f=d+q-m,i={target:{element:u,left:r.left,top:r.top,width:p,height:q},element:{element:k,left:B.left,top:B.top,width:l,height:m},horizontal:0>c?"left":b>0?"right":"center",vertical:0>f?"top":d>0?"bottom":"middle"};l>p&&h(b+c)<p&&(i.horizontal="center"),m>q&&h(d+f)<q&&(i.vertical="middle"),i.important=g(h(b),h(c))>g(h(d),h(f))?"horizontal":"vertical",e.using.call(this,a,i)}),k.offset(a.extend(B,{using:j}))})},a.ui.position={fit:{left:function(a,b){var c,d=b.within,e=d.isWindow?d.scrollLeft:d.offset.left,f=d.width,h=a.left-b.collisionPosition.marginLeft,i=e-h,j=h+b.collisionWidth-f-e;b.collisionWidth>f?i>0&&0>=j?(c=a.left+i+b.collisionWidth-f-e,a.left+=i-c):a.left=j>0&&0>=i?e:i>j?e+f-b.collisionWidth:e:i>0?a.left+=i:j>0?a.left-=j:a.left=g(a.left-h,a.left)},top:function(a,b){var c,d=b.within,e=d.isWindow?d.scrollTop:d.offset.top,f=b.within.height,h=a.top-b.collisionPosition.marginTop,i=e-h,j=h+b.collisionHeight-f-e;b.collisionHeight>f?i>0&&0>=j?(c=a.top+i+b.collisionHeight-f-e,a.top+=i-c):a.top=j>0&&0>=i?e:i>j?e+f-b.collisionHeight:e:i>0?a.top+=i:j>0?a.top-=j:a.top=g(a.top-h,a.top)}},flip:{left:function(a,b){var c,d,e=b.within,f=e.offset.left+e.scrollLeft,g=e.width,i=e.isWindow?e.scrollLeft:e.offset.left,j=a.left-b.collisionPosition.marginLeft,k=j-i,l=j+b.collisionWidth-g-i,m="left"===b.my[0]?-b.elemWidth:"right"===b.my[0]?b.elemWidth:0,n="left"===b.at[0]?b.targetWidth:"right"===b.at[0]?-b.targetWidth:0,o=-2*b.offset[0];0>k?(c=a.left+m+n+o+b.collisionWidth-g-f,(0>c||c<h(k))&&(a.left+=m+n+o)):l>0&&(d=a.left-b.collisionPosition.marginLeft+m+n+o-i,(d>0||h(d)<l)&&(a.left+=m+n+o))},top:function(a,b){var c,d,e=b.within,f=e.offset.top+e.scrollTop,g=e.height,i=e.isWindow?e.scrollTop:e.offset.top,j=a.top-b.collisionPosition.marginTop,k=j-i,l=j+b.collisionHeight-g-i,m="top"===b.my[1],n=m?-b.elemHeight:"bottom"===b.my[1]?b.elemHeight:0,o="top"===b.at[1]?b.targetHeight:"bottom"===b.at[1]?-b.targetHeight:0,p=-2*b.offset[1];0>k?(d=a.top+n+o+p+b.collisionHeight-g-f,(0>d||d<h(k))&&(a.top+=n+o+p)):l>0&&(c=a.top-b.collisionPosition.marginTop+n+o+p-i,(c>0||h(c)<l)&&(a.top+=n+o+p))}},flipfit:{left:function(){a.ui.position.flip.left.apply(this,arguments),a.ui.position.fit.left.apply(this,arguments)},top:function(){a.ui.position.flip.top.apply(this,arguments),a.ui.position.fit.top.apply(this,arguments)}}},function(){var b,c,d,e,g,h=document.getElementsByTagName("body")[0],i=document.createElement("div");b=document.createElement(h?"div":"body"),d={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},h&&a.extend(d,{position:"absolute",left:"-1000px",top:"-1000px"});for(g in d)b.style[g]=d[g];b.appendChild(i),c=h||document.documentElement,c.insertBefore(b,c.firstChild),i.style.cssText="position: absolute; left: 10.7432222px;",e=a(i).offset().left,f=e>10&&11>e,b.innerHTML="",c.removeChild(b)}()}();a.ui.position;a.widget("ui.draggable",a.ui.mouse,{version:"1.11.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(a,b){this._super(a,b),"handle"===a&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?void(this.destroyOnClear=!0):(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),void this._mouseDestroy())},_mouseCapture:function(b){var c=this.options;return this._blurActiveElement(b),this.helper||c.disabled||a(b.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(b),this.handle?(this._blockFrames(c.iframeFix===!0?"iframe":c.iframeFix),!0):!1)},_blockFrames:function(b){this.iframeBlocks=this.document.find(b).map(function(){var b=a(this);return a("<div>").css("position","absolute").appendTo(b.parent()).outerWidth(b.outerWidth()).outerHeight(b.outerHeight()).offset(b.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(b){var c=this.document[0];if(this.handleElement.is(b.target))try{c.activeElement&&"body"!==c.activeElement.nodeName.toLowerCase()&&a(c.activeElement).blur()}catch(d){}},_mouseStart:function(b){var c=this.options;return this.helper=this._createHelper(b),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),a.ui.ddmanager&&(a.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===a(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(b),this.originalPosition=this.position=this._generatePosition(b,!1),this.originalPageX=b.pageX,this.originalPageY=b.pageY,c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt),this._setContainment(),this._trigger("start",b)===!1?(this._clear(),!1):(this._cacheHelperProportions(),a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this._normalizeRightBottom(),this._mouseDrag(b,!0),a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,b),!0)},_refreshOffsets:function(a){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:a.pageX-this.offset.left,top:a.pageY-this.offset.top}},_mouseDrag:function(b,c){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(b,!0),this.positionAbs=this._convertPositionTo("absolute"),!c){var d=this._uiHash();if(this._trigger("drag",b,d)===!1)return this._mouseUp({}),!1;this.position=d.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),!1},_mouseStop:function(b){var c=this,d=!1;return a.ui.ddmanager&&!this.options.dropBehaviour&&(d=a.ui.ddmanager.drop(this,b)),this.dropped&&(d=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!d||"valid"===this.options.revert&&d||this.options.revert===!0||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,d)?a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){c._trigger("stop",b)!==!1&&c._clear()}):this._trigger("stop",b)!==!1&&this._clear(),!1},_mouseUp:function(b){return this._unblockFrames(),a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b),this.handleElement.is(b.target)&&this.element.focus(),a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(b){return this.options.handle?!!a(b.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper),e=d?a(c.helper.apply(this.element[0],[b])):"clone"===c.helper?this.element.clone().removeAttr("id"):this.element;return e.parents("body").length||e.appendTo("parent"===c.appendTo?this.element[0].parentNode:c.appendTo),d&&e[0]===this.element[0]&&this._setPositionRelative(),e[0]===this.element[0]||/(fixed|absolute)/.test(e.css("position"))||e.css("position","absolute"),e},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_isRootNode:function(a){return/(html|body)/i.test(a.tagName)||a===this.document[0]},_getParentOffset:function(){var b=this.offsetParent.offset(),c=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==c&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var a=this.element.position(),b=this._isRootNode(this.scrollParent[0]);return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+(b?0:this.scrollParent.scrollTop()),left:a.left-(parseInt(this.helper.css("left"),10)||0)+(b?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b,c,d,e=this.options,f=this.document[0];return this.relativeContainer=null,e.containment?"window"===e.containment?void(this.containment=[a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,a(window).scrollLeft()+a(window).width()-this.helperProportions.width-this.margins.left,a(window).scrollTop()+(a(window).height()||f.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===e.containment?void(this.containment=[0,0,a(f).width()-this.helperProportions.width-this.margins.left,(a(f).height()||f.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):e.containment.constructor===Array?void(this.containment=e.containment):("parent"===e.containment&&(e.containment=this.helper[0].parentNode),c=a(e.containment),d=c[0],void(d&&(b=/(scroll|auto)/.test(c.css("overflow")),this.containment=[(parseInt(c.css("borderLeftWidth"),10)||0)+(parseInt(c.css("paddingLeft"),10)||0),(parseInt(c.css("borderTopWidth"),10)||0)+(parseInt(c.css("paddingTop"),10)||0),(b?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(c.css("borderRightWidth"),10)||0)-(parseInt(c.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(b?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(c.css("borderBottomWidth"),10)||0)-(parseInt(c.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=c))):void(this.containment=null)},_convertPositionTo:function(a,b){b||(b=this.position);var c="absolute"===a?1:-1,d=this._isRootNode(this.scrollParent[0]);return{top:b.top+this.offset.relative.top*c+this.offset.parent.top*c-("fixed"===this.cssPosition?-this.offset.scroll.top:d?0:this.offset.scroll.top)*c,left:b.left+this.offset.relative.left*c+this.offset.parent.left*c-("fixed"===this.cssPosition?-this.offset.scroll.left:d?0:this.offset.scroll.left)*c}},_generatePosition:function(a,b){var c,d,e,f,g=this.options,h=this._isRootNode(this.scrollParent[0]),i=a.pageX,j=a.pageY;return h&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),b&&(this.containment&&(this.relativeContainer?(d=this.relativeContainer.offset(),c=[this.containment[0]+d.left,this.containment[1]+d.top,this.containment[2]+d.left,this.containment[3]+d.top]):c=this.containment,a.pageX-this.offset.click.left<c[0]&&(i=c[0]+this.offset.click.left),a.pageY-this.offset.click.top<c[1]&&(j=c[1]+this.offset.click.top),a.pageX-this.offset.click.left>c[2]&&(i=c[2]+this.offset.click.left),a.pageY-this.offset.click.top>c[3]&&(j=c[3]+this.offset.click.top)),g.grid&&(e=g.grid[1]?this.originalPageY+Math.round((j-this.originalPageY)/g.grid[1])*g.grid[1]:this.originalPageY,j=c?e-this.offset.click.top>=c[1]||e-this.offset.click.top>c[3]?e:e-this.offset.click.top>=c[1]?e-g.grid[1]:e+g.grid[1]:e,f=g.grid[0]?this.originalPageX+Math.round((i-this.originalPageX)/g.grid[0])*g.grid[0]:this.originalPageX,i=c?f-this.offset.click.left>=c[0]||f-this.offset.click.left>c[2]?f:f-this.offset.click.left>=c[0]?f-g.grid[0]:f+g.grid[0]:f),"y"===g.axis&&(i=this.originalPageX),"x"===g.axis&&(j=this.originalPageY)),{top:j-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:h?0:this.offset.scroll.top),left:i-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:h?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_normalizeRightBottom:function(){"y"!==this.options.axis&&"auto"!==this.helper.css("right")&&(this.helper.width(this.helper.width()),this.helper.css("right","auto")),"x"!==this.options.axis&&"auto"!==this.helper.css("bottom")&&(this.helper.height(this.helper.height()),this.helper.css("bottom","auto"))},_trigger:function(b,c,d){return d=d||this._uiHash(),a.ui.plugin.call(this,b,[c,d,this],!0),/^(drag|start|stop)/.test(b)&&(this.positionAbs=this._convertPositionTo("absolute"),d.offset=this.positionAbs),a.Widget.prototype._trigger.call(this,b,c,d)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),a.ui.plugin.add("draggable","connectToSortable",{start:function(b,c,d){var e=a.extend({},c,{item:d.element});d.sortables=[],a(d.options.connectToSortable).each(function(){var c=a(this).sortable("instance");c&&!c.options.disabled&&(d.sortables.push(c),c.refreshPositions(),c._trigger("activate",b,e))})},stop:function(b,c,d){var e=a.extend({},c,{item:d.element});d.cancelHelperRemoval=!1,a.each(d.sortables,function(){var a=this;a.isOver?(a.isOver=0,d.cancelHelperRemoval=!0,a.cancelHelperRemoval=!1,a._storedCSS={position:a.placeholder.css("position"),top:a.placeholder.css("top"),left:a.placeholder.css("left")},a._mouseStop(b),a.options.helper=a.options._helper):(a.cancelHelperRemoval=!0,a._trigger("deactivate",b,e))
})},drag:function(b,c,d){a.each(d.sortables,function(){var e=!1,f=this;f.positionAbs=d.positionAbs,f.helperProportions=d.helperProportions,f.offset.click=d.offset.click,f._intersectsWith(f.containerCache)&&(e=!0,a.each(d.sortables,function(){return this.positionAbs=d.positionAbs,this.helperProportions=d.helperProportions,this.offset.click=d.offset.click,this!==f&&this._intersectsWith(this.containerCache)&&a.contains(f.element[0],this.element[0])&&(e=!1),e})),e?(f.isOver||(f.isOver=1,d._parent=c.helper.parent(),f.currentItem=c.helper.appendTo(f.element).data("ui-sortable-item",!0),f.options._helper=f.options.helper,f.options.helper=function(){return c.helper[0]},b.target=f.currentItem[0],f._mouseCapture(b,!0),f._mouseStart(b,!0,!0),f.offset.click.top=d.offset.click.top,f.offset.click.left=d.offset.click.left,f.offset.parent.left-=d.offset.parent.left-f.offset.parent.left,f.offset.parent.top-=d.offset.parent.top-f.offset.parent.top,d._trigger("toSortable",b),d.dropped=f.element,a.each(d.sortables,function(){this.refreshPositions()}),d.currentItem=d.element,f.fromOutside=d),f.currentItem&&(f._mouseDrag(b),c.position=f.position)):f.isOver&&(f.isOver=0,f.cancelHelperRemoval=!0,f.options._revert=f.options.revert,f.options.revert=!1,f._trigger("out",b,f._uiHash(f)),f._mouseStop(b,!0),f.options.revert=f.options._revert,f.options.helper=f.options._helper,f.placeholder&&f.placeholder.remove(),c.helper.appendTo(d._parent),d._refreshOffsets(b),c.position=d._generatePosition(b,!0),d._trigger("fromSortable",b),d.dropped=!1,a.each(d.sortables,function(){this.refreshPositions()}))})}}),a.ui.plugin.add("draggable","cursor",{start:function(b,c,d){var e=a("body"),f=d.options;e.css("cursor")&&(f._cursor=e.css("cursor")),e.css("cursor",f.cursor)},stop:function(b,c,d){var e=d.options;e._cursor&&a("body").css("cursor",e._cursor)}}),a.ui.plugin.add("draggable","opacity",{start:function(b,c,d){var e=a(c.helper),f=d.options;e.css("opacity")&&(f._opacity=e.css("opacity")),e.css("opacity",f.opacity)},stop:function(b,c,d){var e=d.options;e._opacity&&a(c.helper).css("opacity",e._opacity)}}),a.ui.plugin.add("draggable","scroll",{start:function(a,b,c){c.scrollParentNotHidden||(c.scrollParentNotHidden=c.helper.scrollParent(!1)),c.scrollParentNotHidden[0]!==c.document[0]&&"HTML"!==c.scrollParentNotHidden[0].tagName&&(c.overflowOffset=c.scrollParentNotHidden.offset())},drag:function(b,c,d){var e=d.options,f=!1,g=d.scrollParentNotHidden[0],h=d.document[0];g!==h&&"HTML"!==g.tagName?(e.axis&&"x"===e.axis||(d.overflowOffset.top+g.offsetHeight-b.pageY<e.scrollSensitivity?g.scrollTop=f=g.scrollTop+e.scrollSpeed:b.pageY-d.overflowOffset.top<e.scrollSensitivity&&(g.scrollTop=f=g.scrollTop-e.scrollSpeed)),e.axis&&"y"===e.axis||(d.overflowOffset.left+g.offsetWidth-b.pageX<e.scrollSensitivity?g.scrollLeft=f=g.scrollLeft+e.scrollSpeed:b.pageX-d.overflowOffset.left<e.scrollSensitivity&&(g.scrollLeft=f=g.scrollLeft-e.scrollSpeed))):(e.axis&&"x"===e.axis||(b.pageY-a(h).scrollTop()<e.scrollSensitivity?f=a(h).scrollTop(a(h).scrollTop()-e.scrollSpeed):a(window).height()-(b.pageY-a(h).scrollTop())<e.scrollSensitivity&&(f=a(h).scrollTop(a(h).scrollTop()+e.scrollSpeed))),e.axis&&"y"===e.axis||(b.pageX-a(h).scrollLeft()<e.scrollSensitivity?f=a(h).scrollLeft(a(h).scrollLeft()-e.scrollSpeed):a(window).width()-(b.pageX-a(h).scrollLeft())<e.scrollSensitivity&&(f=a(h).scrollLeft(a(h).scrollLeft()+e.scrollSpeed)))),f!==!1&&a.ui.ddmanager&&!e.dropBehaviour&&a.ui.ddmanager.prepareOffsets(d,b)}}),a.ui.plugin.add("draggable","snap",{start:function(b,c,d){var e=d.options;d.snapElements=[],a(e.snap.constructor!==String?e.snap.items||":data(ui-draggable)":e.snap).each(function(){var b=a(this),c=b.offset();this!==d.element[0]&&d.snapElements.push({item:this,width:b.outerWidth(),height:b.outerHeight(),top:c.top,left:c.left})})},drag:function(b,c,d){var e,f,g,h,i,j,k,l,m,n,o=d.options,p=o.snapTolerance,q=c.offset.left,r=q+d.helperProportions.width,s=c.offset.top,t=s+d.helperProportions.height;for(m=d.snapElements.length-1;m>=0;m--)i=d.snapElements[m].left-d.margins.left,j=i+d.snapElements[m].width,k=d.snapElements[m].top-d.margins.top,l=k+d.snapElements[m].height,i-p>r||q>j+p||k-p>t||s>l+p||!a.contains(d.snapElements[m].item.ownerDocument,d.snapElements[m].item)?(d.snapElements[m].snapping&&d.options.snap.release&&d.options.snap.release.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[m].item})),d.snapElements[m].snapping=!1):("inner"!==o.snapMode&&(e=Math.abs(k-t)<=p,f=Math.abs(l-s)<=p,g=Math.abs(i-r)<=p,h=Math.abs(j-q)<=p,e&&(c.position.top=d._convertPositionTo("relative",{top:k-d.helperProportions.height,left:0}).top),f&&(c.position.top=d._convertPositionTo("relative",{top:l,left:0}).top),g&&(c.position.left=d._convertPositionTo("relative",{top:0,left:i-d.helperProportions.width}).left),h&&(c.position.left=d._convertPositionTo("relative",{top:0,left:j}).left)),n=e||f||g||h,"outer"!==o.snapMode&&(e=Math.abs(k-s)<=p,f=Math.abs(l-t)<=p,g=Math.abs(i-q)<=p,h=Math.abs(j-r)<=p,e&&(c.position.top=d._convertPositionTo("relative",{top:k,left:0}).top),f&&(c.position.top=d._convertPositionTo("relative",{top:l-d.helperProportions.height,left:0}).top),g&&(c.position.left=d._convertPositionTo("relative",{top:0,left:i}).left),h&&(c.position.left=d._convertPositionTo("relative",{top:0,left:j-d.helperProportions.width}).left)),!d.snapElements[m].snapping&&(e||f||g||h||n)&&d.options.snap.snap&&d.options.snap.snap.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[m].item})),d.snapElements[m].snapping=e||f||g||h||n)}}),a.ui.plugin.add("draggable","stack",{start:function(b,c,d){var e,f=d.options,g=a.makeArray(a(f.stack)).sort(function(b,c){return(parseInt(a(b).css("zIndex"),10)||0)-(parseInt(a(c).css("zIndex"),10)||0)});g.length&&(e=parseInt(a(g[0]).css("zIndex"),10)||0,a(g).each(function(b){a(this).css("zIndex",e+b)}),this.css("zIndex",e+g.length))}}),a.ui.plugin.add("draggable","zIndex",{start:function(b,c,d){var e=a(c.helper),f=d.options;e.css("zIndex")&&(f._zIndex=e.css("zIndex")),e.css("zIndex",f.zIndex)},stop:function(b,c,d){var e=d.options;e._zIndex&&a(c.helper).css("zIndex",e._zIndex)}});a.ui.draggable;a.widget("ui.droppable",{version:"1.11.4",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var b,c=this.options,d=c.accept;this.isover=!1,this.isout=!0,this.accept=a.isFunction(d)?d:function(a){return a.is(d)},this.proportions=function(){return arguments.length?void(b=arguments[0]):b?b:b={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}},this._addToManager(c.scope),c.addClasses&&this.element.addClass("ui-droppable")},_addToManager:function(b){a.ui.ddmanager.droppables[b]=a.ui.ddmanager.droppables[b]||[],a.ui.ddmanager.droppables[b].push(this)},_splice:function(a){for(var b=0;b<a.length;b++)a[b]===this&&a.splice(b,1)},_destroy:function(){var b=a.ui.ddmanager.droppables[this.options.scope];this._splice(b),this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(b,c){if("accept"===b)this.accept=a.isFunction(c)?c:function(a){return a.is(c)};else if("scope"===b){var d=a.ui.ddmanager.droppables[this.options.scope];this._splice(d),this._addToManager(c)}this._super(b,c)},_activate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),c&&this._trigger("activate",b,this.ui(c))},_deactivate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),c&&this._trigger("deactivate",b,this.ui(c))},_over:function(b){var c=a.ui.ddmanager.current;c&&(c.currentItem||c.element)[0]!==this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",b,this.ui(c)))},_out:function(b){var c=a.ui.ddmanager.current;c&&(c.currentItem||c.element)[0]!==this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",b,this.ui(c)))},_drop:function(b,c){var d=c||a.ui.ddmanager.current,e=!1;return d&&(d.currentItem||d.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var c=a(this).droppable("instance");return c.options.greedy&&!c.options.disabled&&c.options.scope===d.options.scope&&c.accept.call(c.element[0],d.currentItem||d.element)&&a.ui.intersect(d,a.extend(c,{offset:c.element.offset()}),c.options.tolerance,b)?(e=!0,!1):void 0}),e?!1:this.accept.call(this.element[0],d.currentItem||d.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",b,this.ui(d)),this.element):!1):!1},ui:function(a){return{draggable:a.currentItem||a.element,helper:a.helper,position:a.position,offset:a.positionAbs}}}),a.ui.intersect=function(){function a(a,b,c){return a>=b&&b+c>a}return function(b,c,d,e){if(!c.offset)return!1;var f=(b.positionAbs||b.position.absolute).left+b.margins.left,g=(b.positionAbs||b.position.absolute).top+b.margins.top,h=f+b.helperProportions.width,i=g+b.helperProportions.height,j=c.offset.left,k=c.offset.top,l=j+c.proportions().width,m=k+c.proportions().height;switch(d){case"fit":return f>=j&&l>=h&&g>=k&&m>=i;case"intersect":return j<f+b.helperProportions.width/2&&h-b.helperProportions.width/2<l&&k<g+b.helperProportions.height/2&&i-b.helperProportions.height/2<m;case"pointer":return a(e.pageY,k,c.proportions().height)&&a(e.pageX,j,c.proportions().width);case"touch":return(g>=k&&m>=g||i>=k&&m>=i||k>g&&i>m)&&(f>=j&&l>=f||h>=j&&l>=h||j>f&&h>l);default:return!1}}}(),a.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(b,c){var d,e,f=a.ui.ddmanager.droppables[b.options.scope]||[],g=c?c.type:null,h=(b.currentItem||b.element).find(":data(ui-droppable)").addBack();a:for(d=0;d<f.length;d++)if(!(f[d].options.disabled||b&&!f[d].accept.call(f[d].element[0],b.currentItem||b.element))){for(e=0;e<h.length;e++)if(h[e]===f[d].element[0]){f[d].proportions().height=0;continue a}f[d].visible="none"!==f[d].element.css("display"),f[d].visible&&("mousedown"===g&&f[d]._activate.call(f[d],c),f[d].offset=f[d].element.offset(),f[d].proportions({width:f[d].element[0].offsetWidth,height:f[d].element[0].offsetHeight}))}},drop:function(b,c){var d=!1;return a.each((a.ui.ddmanager.droppables[b.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&a.ui.intersect(b,this,this.options.tolerance,c)&&(d=this._drop.call(this,c)||d),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],b.currentItem||b.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,c)))}),d},dragStart:function(b,c){b.element.parentsUntil("body").bind("scroll.droppable",function(){b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)})},drag:function(b,c){b.options.refreshPositions&&a.ui.ddmanager.prepareOffsets(b,c),a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var d,e,f,g=a.ui.intersect(b,this,this.options.tolerance,c),h=!g&&this.isover?"isout":g&&!this.isover?"isover":null;h&&(this.options.greedy&&(e=this.options.scope,f=this.element.parents(":data(ui-droppable)").filter(function(){return a(this).droppable("instance").options.scope===e}),f.length&&(d=a(f[0]).droppable("instance"),d.greedyChild="isover"===h)),d&&"isover"===h&&(d.isover=!1,d.isout=!0,d._out.call(d,c)),this[h]=!0,this["isout"===h?"isover":"isout"]=!1,this["isover"===h?"_over":"_out"].call(this,c),d&&"isout"===h&&(d.isout=!1,d.isover=!0,d._over.call(d,c)))}})},dragStop:function(b,c){b.element.parentsUntil("body").unbind("scroll.droppable"),b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)}};a.ui.droppable}),swifty.define("css",[],function(){if("undefined"==typeof window)return{load:function(a,b,c){c()}};var a=document.getElementsByTagName("head")[0],b=window.navigator.userAgent.match(/Trident\/([^ ;]*)|AppleWebKit\/([^ ;]*)|Opera\/([^ ;]*)|rv\:([^ ;]*)(.*?)Gecko\/([^ ;]*)|MSIE\s([^ ;]*)/)||0,c=!1,d=!0;b[1]||b[7]?c=parseInt(b[1])<6||parseInt(b[7])<=9:b[2]?d=!1:b[4]&&(c=parseInt(b[4])<18);var e={};e.pluginBuilder="./js/libs/css-builder";var f,g,h,i=function(){f=document.createElement("style"),a.appendChild(f),g=f.styleSheet||f.sheet},j=0,k=[],l=function(a){j++,32==j&&(i(),j=0),g.addImport(a),f.onload=function(){m()}},m=function(){h();var a=k.shift();return a?(h=a[1],void l(a[0])):void(h=null)},n=function(a,b){if(g&&g.addImport||i(),g&&g.addImport)h?k.push([a,b]):(l(a),h=b);else{f.textContent='@import "'+a+'";';var c=setInterval(function(){try{f.sheet.cssRules,clearInterval(c),b()}catch(a){}},10)}},o=function(b,c){var e=document.createElement("link");if(e.type="text/css",e.rel="stylesheet",d)e.onload=function(){e.onload=function(){},setTimeout(c,7)};else var f=setInterval(function(){for(var a=0;a<document.styleSheets.length;a++){var b=document.styleSheets[a];if(b.href==e.href)return clearInterval(f),c()}},10);e.href=b,a.appendChild(e)};return e.normalize=function(a,b){return".css"==a.substr(a.length-4,4)&&(a=a.substr(0,a.length-4)),b(a)},e.load=function(a,b,d){(c?n:o)(b.toUrl(a+".css"),d)},e}),swifty.define("css!js/components/editor_ckeditor/editor_ckeditor",[],function(){}),swifty.define("css!js/components/tooltip/tooltip",[],function(){}),window.CKEDITOR_GETURL=function(a){return 0===a.indexOf("plugins/")?scc_data.swcreator_url+"js/libs/ckeditor/"+a:void 0},swifty.define("js/components/editor_ckeditor/editor_ckeditor",["jquery","can","swiftylib/component","swiftylib/view","swiftylib/evt","stache!js/components/editor_ckeditor/editor_ckeditor.stache","js/libs/jBox.min","swiftylib/i18n/__","js/diverse/utils","./ckeditor_helpers/ckeditor_helper_seperate","./ckeditor_helpers/ckeditor_helper_widgets","js/libs/yepnope","js/libs/mout/src/function/throttle","js/libs/jquery-ui","css!./editor_ckeditor.css","css!../tooltip/tooltip.css"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){return c.extend({tag:"swifty_editor_ckeditor",template:new d(f),lastUndoImage:null,undoImageStack:null,scope:{className:"swifty_editor",selector:"@",googleFonts:{sans:["Lato","Montserrat","Open Sans","Roboto","Muli","Ubuntu","Oswald","Nunito"],serif:["Lora","Playfair Display","Noto Serif","Josefin Slab","Roboto Slab","Arvo"],special:["Sacramento","Cabin Sketch","Capriola","Amatic SC","Londrina Solid","Pacifico","Delius Swash Caps","Bubblegum Sans","Special Elite"]},ini:function(){var b=this,c=this;j(this),l.injectJs({_url:scc_data.swcreator_url+"js/libs/ckeditor/ckeditor.js?swcv=scc_"+scc_data.scc_version},function(){l.injectJs({_url:scc_data.swcreator_url+"js/libs/ckeditor/adapters/jquery.js?swcv=scc_"+scc_data.scc_version},function(){k(c),CKEDITOR.dtd.$removeEmpty.p=0,CKEDITOR.dtd.$removeEmpty.i=0,CKEDITOR.dtd.$removeEmpty.div=0,CKEDITOR.dtd.$removeEmpty.span=1,CKEDITOR.basePath=scc_data.swcreator_url+"js/libs/ckeditor/",CKEDITOR.plugins.basePath=scc_data.swcreator_url+"js/libs/ckeditor/plugins/",CKEDITOR.on("instanceReady",function(){"function"==typeof swifty_add_exec&&swifty_add_exec({status:"release","for":"ck_inited"}),e("swifty_update_scrolleffect")});var d=a(b.attr("selector")).attr("contenteditable","true");b.createEditor(d),b.instance=d.editor,d.focus(),b.tooltip=null,b.$toolbar=null,b.set_focus=1,b.$asset_in_edit_mode=null,b.swifty_insert_content=!1,b.sticky_editor=+scc_data.editor_visibility,b.forceShortcodeCloseTags={},b.triggerChangeThrottledObject=m(a.proxy(b.triggerChangeEvent,b),300),b.instance&&(b.setupEventHandlers(),b.setupSave(),b.setupCursorGuard(),b.setupSelectionQuard(),b.setupAssetWidget(),b.setupInsert(),b.registerSwiftyEditorAssets(),b.fillForceShortcodeCloseTags())})})},createEditor:function(b){var c=this,d={toolbar:[["Cut","Copy","Paste","PasteText","PasteFromWord","Bold","Italic","Underline","Strike","RemoveFormat","NumberedList","BulletedList","Outdent","Indent","JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock"],"/",["Format","Font","FontSize","TextColor","BGColor","Link","Unlink","Undo","Redo","Table","Smiley","SpecialChar","HideEditor"]],format_tags:"p;h1;h2;h3;h4;h5;h6",language:scc_data.locale,title:!1,extraPlugins:"swc_asset,swc_text,swc_grid_row,swc_grid_column,swc_image,uploadimage",imageUploadUrl:scc_data.swifty_upload_url,removePlugins:"tab,liststyle,magicline,forms,scayt,wsc,image",undoStackSize:50,baseFloatZIndex:1e4,allowedContent:!0,enterMode:CKEDITOR.ENTER_P,font_names:"Arial/Arial, Helvetica, sans-serif;Courier New/Courier New, Courier, monospace;Georgia/Georgia, serif;Lucida Sans Unicode/Lucida Sans Unicode, Lucida Grande, sans-serif;Times New Roman/Times New Roman, Times, serif;Trebuchet MS/Trebuchet MS, Helvetica, sans-serif;Verdana/Verdana, Geneva, sans-serif",resize_enabled:!1,entities_latin:!1,entities_greek:!1,entities:!1,basicEntities:!1};return d.font_names+=";",c.googleFonts.each(function(b,c){var e=c,f="";"sans"===c&&(e="Google sans serif",f="sans-serif"),"serif"===c&&(e="Google serif",f="serif"),"special"===c&&(e="Google special",f="monospace"),a.each(b,function(a,b){d.font_names+=e+": "+b+"/"+b+", "+f+";"})}),b.ckeditor(d)},showStartUpTooltip:function(){this.tooltip&&this.destroySingle("tooltip"),this.tooltip=this.setupTooltip(),this.tooltip.open()},setupTooltip:function(){return new g("Tooltip",{content:h("Start typing here or add content<br> by using the button at the bottom."),target:a(".swc_page_cntnt.cke_editable p br"),reposition:!0,position:{x:"right",y:"left"},closeOnClick:!0,outside:"x",offset:{x:16,y:10}})},onPluginsLoadedHandler:function(a){var b=this;a.editor.addCommand&&a.editor.addCommand("hideEditor",{exec:function(){b.setEditorVisibilityByAjax(0)}}),a.editor.ui.addButton&&a.editor.ui.addButton("HideEditor",{label:h("Show editor on text selection"),command:"hideEditor",icon:scc_data.ckeditor_path+"images/x.png"}),a.editor.commands.hideEditor.disable()},onBlurHandler:function(b){var c=this;c.sticky_editor?c.set_focus&&b.editor.focus():c.set_focus?(b.editor.focus(),c.toggleToolbarVisibility(c.isTextSelection()),setTimeout(function(){var b=a(".cke_widget_selected");1===b.length&&c.setWidgetFocus({$asset:b.find(".swc_asset,.swc_text,.swc_grid_row")},!0)},1)):c.isTextSelection()&&(c.resetSelection(),c.toggleToolbarVisibility(!1))},onContentDomHandler:function(b){var c=this,d=b.editor.commands;d.hideEditor&&d.hideEditor[c.sticky_editor?"enable":"disable"](),a.each(["mousedown","mouseup","keyup","touchend"],function(a,d){var e=b.editor.editable();e.attachListener(e,d,c.onMouseKeyTouchHandler,c)})},onMouseKeyTouchHandler:function(a){var b=this,c=a.name.toLowerCase();b.sticky_editor||("mousedown"===c?b.mouse_down_state=!0:("mouseup"===c&&(b.mouse_down_state=!1),b.setEditorVisibility())),"keyup"===c&&(b.destroySingle("tooltip"),1114198===a.data.getKeystroke()&&b.pasteOccured(null))},setEditorVisibilityByAjax:function(b){var c=this,d=new a.Deferred;if(!b){var f=a("#cke_editor1");if(1===f.length){var g=f.offset(),h=g.left,i=0;"absolute"===f.css("position")&&(i=g.top-a(window).scrollTop());var j={top:i+"px",left:h+"px",width:f.css("width"),height:f.css("height"),opacity:0,background:"#f0f0f0",position:"fixed","z-index":10001};e("editor_toolbar_minimize",{position_start:j})}}return c.sticky_editor=b,c.toggleToolbarVisibility(b),e("set_editor_visibility_state",{show_it:b}),c.instance.fire("contentDom"),a.post(scc_data.ajax_url,{action:"set_editor_visibility",show_it:b,id:scc_data.page_id,ajax_nonce:scc_data.ajax_nonce}),d.resolve(b),d},setEditorVisibility:function(){var a=this;this.toggleToolbarVisibility(this.isTextSelection()),setTimeout(function(){a.resetPanelStack()},1)},toggleToolbarVisibility:function(a){var b=this;a?setTimeout(function(){b.$toolbar.parent().show(),b.$toolbar.show(),b.repositionToolbar()},1):(b.$toolbar.parent().hide(),b.$toolbar.hide())},resetSelection:function(){this.instance.getSelection().removeAllRanges()},resetPanelStack:function(){var b,c,d=this.instance.getSelection(),f=!1,g=a(".cke_widget_focused");d&&this.$asset_in_edit_mode&&(b=d.getSelectedElement(),c=this.isWidgetElement(b),c?c&&+c!==+this.getWidgetIdAssetBased(this.$asset_in_edit_mode)&&(g&&g.length>1&&g.not(a(b.$)).each(function(){a(this).removeClass("cke_widget_focused")}),f=!0):(g.removeClass("cke_widget_focused"),f=!0),f&&(this.$asset_in_edit_mode=null,this.set_focus=1,this.setAssetEditIconVisibility(!0),e("reset_panel_stack")))},isTextSelection:function(){var b,c,d=this.instance.getSelection();return d?(b=d.getRanges()[0],c=a.trim(d.getSelectedText()),this.unlockSelection(),b||(d=this.instance.getSelection(),b=d.getRanges()[0],c=a.trim(d.getSelectedText())),b&&c&&c.length>0?!0:!1):!1},unlockSelection:function(a){var b=this;b.instance.unlockSelection(),setTimeout(function(){a&&a.$asset&&b.setWidgetFocus(a,!0)},1)},repositionToolbar:function(){var b=a("#cke_"+this.instance.name),c=a(this.instance.element.$);this.$toolbar.offset().top===c.offset().top&&b.css("top",b.position().top-b.height()),this.$toolbar.offset().top<a(window).scrollTop()&&b.css("top",b.position().top+b.height()+c.outerHeight(!0))},isContentElement:function(a){return a&&a.equals(this.getContentElement())},getContentElement:function(){return this.instance&&this.instance.element},isParagraphElement:function(a){return a&&1===a.type&&(a.is("p")||a.is("div"))&&!this.isWidgetElement(a)},getParagraphElement:function(a){var b=this;return b.isContentElement(a)?void 0:a.getAscendant(function(a){return b.isParagraphElement(a)?a:void 0},!0)},getParagraphAndWidgetElements:function(){var b=a(this.getContentElement().$).find('div.cke_widget_wrapper, p:not("div.swc_asset p,div.swc_text p")');return b=b.filter("p, div:has( > .swc_asset), div:has( > .swc_text)"),new CKEDITOR.dom.nodeList(b.get())},getParagraphAndRowElements:function(){var b=a(this.getContentElement().$).children("div.cke_widget_wrapper, p");return new CKEDITOR.dom.nodeList(b.get())},getRootElements:function(b){var c;return c=b&&this.isTextAsset(b)?a(b.$).find(".swc_asset_cntnt > p, .swc_asset_cntnt > div.cke_widget_wrapper"):b&&this.isGridColumn(b)?a(b.$).children("div.cke_widget_wrapper"):a(this.getContentElement().$).children(),new CKEDITOR.dom.nodeList(c.get())},isTextAsset:function(a){if(a&&1===a.type){if(a.hasClass("swc_text"))return!0;if(a.hasClass("cke_widget_wrapper")){var b=a.getChild(0);return b.hasClass("swc_text")}}return!1},isGridColumn:function(a){return a&&1===a.type&&a.hasClass("swc_grid_column")},getGridRows:function(){var b=a(this.getContentElement().$).children().children(".swc_grid_row");return new CKEDITOR.dom.nodeList(b.get())},getGridColumnsFromRow:function(b){var c=a(b.$).find(".swc_grid_column");return new CKEDITOR.dom.nodeList(c.get())},isCurrentInsertPositionInTableOrGrid:function(){var a=this,b=a.instance.getSelection().getRanges()[0];if(b){if(a.getAscendantTextAsset(b.startContainer))return!1;if(a.getTableOrGrid(b.startContainer))return!0}return!1},isCurrentInsertPositionInWidget:function(){var a=this,b=a.instance.getSelection().getRanges()[0];return b&&a.getClosestWidget(b.startContainer)?!0:!1},isCurrentInsertPositionInAsset:function(){var a=this,b=a.instance.getSelection().getRanges()[0];return b&&b.startContainer&&b.startContainer.getAscendant(function(a){return 1===a.type&&"div"===a.getName()&&a.hasClass("swc_asset")?a:void 0},!0)?!0:!1},appendHtmlToList:function(a,b){var c,d=this;if(d.instance.fire("beforeSetMode"),a&&(c=a.count())){var e=a.getItem(c-1),f=d.instance.createRange();f.setStartAfter(e),f.collapse(!0),f.select(),d.instance.fire("beforeSetMode");try{d.instance.insertHtml(b,f)}catch(g){if(0!==d.instance.getSelection().getRanges().length)throw g;d.instance.fire("afterInsertHtml",{})}}else try{d.instance.insertHtml(b)}catch(g){if(0!==d.instance.getSelection().getRanges().length)throw g;d.instance.fire("afterInsertHtml",{})}},appendHtmlToSelector:function(b){var c=this;a(c.attr("selector")).attr("contenteditable","true");var d=c.getRootElements();return c.appendHtmlToList(d,b),d=c.getRootElements(),d.getItem(d.count()-1)},appendHtmlToColumn:function(b,c){var d=this;a(d.attr("selector")).attr("contenteditable","false"),b.attr("contenteditable","true");var e=d.getRootElements(new CKEDITOR.dom.node(b[0]));if(0===e.count()){var f=d.instance.createRange();f.setStartAt(new CKEDITOR.dom.node(b[0]),CKEDITOR.POSITION_AFTER_START),f.collapse(!0),f.select()}d.appendHtmlToList(e,c),b.attr("contenteditable","false"),a(d.attr("selector")).attr("contenteditable","true")},setColumnRangeForInsert:function(a){var b=this;b.instance.focus();var c=b.instance.createRange();c.moveToElementEditablePosition(new CKEDITOR.dom.node(a[0].firstChild),1),c.select()},setParagraphRangeForInsert:function(a){var b=this;b.instance.focus();var c=b.instance.createRange();c.moveToElementEditablePosition(new CKEDITOR.dom.node(a[0]),1),c.select()},setAssetInsertPosition:function(a,b){var c=this,d=c.instance.getSelection(),e=d.getSelectedElement(),f=d.getRanges()[0],g=null;if(f||(f=c.instance.createRange(),f.moveToElementEditablePosition(c.getContentElement().find("p").getItem(0),!1),c.instance.getSelection().selectRanges([f])),a||c.isCurrentInsertPositionInAsset()){g=f.startContainer;var h=c.getTableOrGrid(g);if(h){for(;h;)g=h,h=c.getTableOrGrid(g.getParent());g.hasClass("swc_grid_row")&&(g=g.getParent());var i=c.getRootElements(),j=i.count();if(j>1){var k=c.getCurPos(g,i);return g=i.getItem(Math.max(0,k-1)),b||!c.isWidgetElement(g)?(f.moveToPosition(g,CKEDITOR.POSITION_BEFORE_START),f.select(),null):g}}}if(c.isWidgetElement(e)){if(!b)return e;f.moveToPosition(m,CKEDITOR.POSITION_BEFORE_START)}else{g=f.startContainer;var l=c.getTableOrRowOrCell(g,"table");if(l)c.moveToPositionInTable(f,l);else{var m=c.getParagraphElement(g);if(m){if(!b)return m;f.moveToPosition(m,CKEDITOR.POSITION_BEFORE_START)}else f.moveToPosition(c.getContentElement(),CKEDITOR.POSITION_AFTER_START)}}return f.select(),null},moveToPositionInTable:function(a,b){var c=this.getTableOrRowOrCell(a.startContainer,"td");"td"===c.getName()?a.moveToPosition(c,CKEDITOR.POSITION_AFTER_START):a.moveToPosition(b,CKEDITOR.POSITION_BEFORE_START)},registerSwiftyEditorAssets:function(){e("register_swifty_editor_assets",{assets:[]})},fillForceShortcodeCloseTags:function(){var a=this;e("get_asset_force_close_tags").then(function(b){a.forceShortcodeCloseTags=b})},setupSelectionQuard:function(){var a=this;this.instance.on("selectionCheck",function(b){if(b.data&&b.data&&b.data.isFake)return!0;var c=b.data.getRanges();if(c&&1===c.length){var d=c[0];if(!d.collapsed&&0===d.endOffset&&d.endContainer instanceof CKEDITOR.dom.element){for(var e,f=new CKEDITOR.dom.walker(d),g=[];e=f.next();)g.push(e);var h,i;a:for(var j=0;j<g.length;j++){var k=g[j].getParents(!0);k.shift();for(var l=0;l<k.length;l++)if("true"===k[l].getAttribute("contenteditable")){if(!h){h=k[l];break}if(!k[l].equals(h)){i=!0,e=g[j-1];break a}}}i&&(d.setEndAfter(d.startContainer),a.instance.getSelection().selectRanges([d]))}return!0}})},setupCursorGuard:function(){var a=this;a.instance.on("selectionChange",function(b){if(b.data&&b.data.selection&&b.data.selection.isFake)return!0;if(a.swifty_insert_content)return!0;for(var c=[],d=!0,e=a.instance.elementPath().elements,f=e.length;f--;){var g=e[f],h=0;d=g.hasAttribute("contenteditable")?"true"===g.getAttribute("contenteditable"):d,h||c.unshift(g)}for(var i=!1,j=0;j<c.length;j++){var k=c[j];if(0===j){if("tbody"===k.getName()){i=!1;break}if("tr"===k.getName()){i=!1;break}if(k.hasAttribute("data-cke-hidden-sel"))return!0}if(k.hasClass("swc_locked")){i=!1;break}k.hasClass("swc_asset_cntnt")&&k.getParent().hasClass("swc_text")&&(i=!0)}if(!i){var l=a.getContentElement().find(".swc_text > .swc_asset_cntnt p");if(l.length>0){a.instance.getSelection().removeAllRanges();var m=a.instance.createRange();return m.moveToElementEditablePosition(l.getItem(0),!1),a.instance.getSelection().selectRanges([m]),!1}}})},setupSave:function(){var c=this;c.instance.on("change",function(b){a(".swc_asset_plus_icon_wrapper").remove(),a(".swc_asset_resizer_icon_wrapper").remove(),a(".swc_asset_cog_icon_wrapper, .swc_asset_any_icon_wrapper, .swc_asset_adv_icons_wrapper").remove(),c.removeRefreshSpinner();var d=b.editor.getData();e("swifty_editor_content_changed",{content:d}),e("check_can_undo_redo")}),b.bind.call(window,"evt_swc_swifty_editor_set_new_content",function(a,b){c.instance.setData(b.content),e("add_exec",{fn:"swifty_check_inserts"}),b.dfd&&b.dfd.resolve()}),b.bind.call(window,"evt_swc_swifty_editor_trigger_save",function(){c.triggerChangeThrottledObject()})},triggerChangeEvent:function(){this.instance.fire("change")},addRefreshSpinner:function(b){a(b.container).prepend('<span class="swc_asset_refreshing"><i class="fa fa-refresh fa-spin"></i></span>')},removeRefreshSpinner:function(){a(".swc_asset_refreshing").remove()},contentModfied:function(){this.instance.fire("change")},setupWidgetKeyDeletion:function(a){a.on("key",function(a){switch(a.data.keyCode){case 8:case 46:a.cancel(),a.stop()}})},setFocus:function(a){a&&(this.set_focus=a.focus)},openEditAfterInsert:function(b,c,d){a(b).hasClass("swc_asset_state_ins_updating")&&(a(b).removeClass("swc_asset_state_ins_updating"),e("swifty_editor_asset_dialog",{el:a(b),mod:"added_new",inline:c,init_css:d}))},setAssetEditIconVisibility:function(b){a(".cke_widget_drag_handler_container")[b?"removeClass":"addClass"]("swc_hide_asset_icon"),a(".cke_widget_wrapper .cke_widget_element")[b?"removeClass":"addClass"]("swc_hide_outline")},getTableOrGrid:function(a){return a.getAscendant(function(a){return 1===a.type&&("table"===a.getName()||"div"===a.getName()&&a.hasClass("swc_grid_row")||"div"===a.getName()&&a.hasClass("swc_grid_column"))?a:void 0},!0)},getAscendantTextAsset:function(a){return a.getAscendant(function(a){return 1===a.type&&"div"===a.getName()&&a.hasClass("swc_text")?a:void 0},!0)},getTableOrRowOrCell:function(a,b){return a.getAscendant(function(a){return 1===a.type&&a.getName()===b?a:void 0},!0)},getGridRowOrColumn:function(a,b){return a.getAscendant(function(a){return 1===a.type&&"div"===a.getName()&&a.hasClass(b)?a:void 0},!0)},getCurPos:function(a,b){for(var c=0,d=b.count();d>c;c++)if(a.equals(b.getItem(c)))return c},getNewPos:function(a,b){return"up"===a||"left"===a?b-1:b+1},getClosestWidget:function(a){return a.getAscendant(function(a){return 1===a.type&&"div"===a.getName()&&a.hasClass("cke_widget_element")?a:void 0},!0)},moveRow:function(a){if(a){var b=this.getWidget(this.getWidgetIdAssetBased(a.$row)),c=b.wrapper;if(c&&a.move){switch(a.move){case"up":case"down":var d=this.getParagraphAndRowElements(),e=d.count();if(e>1){var f=this.getCurPos(c,d);if("up"===a.move&&f>0||"down"===a.move&&e-1>f){var g=this.getNewPos(a.move,f);c["up"===a.move?"insertBefore":"insertAfter"](d.getItem(g))}else"up"===a.move&&0===f?c.move(this.getContentElement(),!0):"down"===a.move&&f===e-1&&c.move(this.getContentElement(),!1)}break;default:return}c.scrollIntoView(),this.contentModfied()}}},insertPAsset:function(a){if(a){var b=this.getWidget(this.getWidgetIdAssetBased(a.$asset)),c=b.wrapper;if(c&&a.action){var d=CKEDITOR.dom.element.createFromHtml("<p>&nbsp;</p>");d["above"===a.action?"insertBefore":"insertAfter"](c),this.contentModfied()}}},triggerSetPositionEvent:function(a,b){e("swifty_editor_set_position",{position:b,el:a})},moveInsideItemWithWidgets:function(a,b,c,d){b["left"===a?"insertBefore":"insertAfter"](d.getItem(c))},moveToNewColum:function(a,b,c,d){var e=d.getItem(c);b.move(e,!1)},moveToItemWithWidgets:function(a,b,c,d){var e=d.getItem(c),f=e.find(".cke_widget_wrapper"),g=f.count();g?(c="left"===a?g-1:0,b["left"===a?"insertAfter":"insertBefore"](f.getItem(c))):b.move(e,!0)},setCursor:function(b){var c,d,e,f;b&&b.$asset?d=b.$asset:(c=a(".cke_widget_selected").find(".swc_asset,.swc_text,.swc_grid_row"),c.length&&(d=c)),d&&d.length&&(e=this.getWidgetIdAssetBased(d),f=this.getWidget(e),f&&(this.setWidgetFocus({$asset:d},!1),this.moveCursorToClosestEditableElement(f.wrapper,f.inline)))
},moveCursorToClosestEditableElement:function(a,b){var c=this.getTableOrRowOrCell(a,"table"),d=this.instance.createRange(),e=null;if(b)e=a;else if(c){for(var f=c.find("td"),g=0,h=f.count();h>g;g++){for(var i=f.getItem(g),j=i.getChildren(),k=0,l=j.count();l>k;k++){var m=j.getItem(k);if(3===m.type||1===m.type&&m.is("br")){e=m;break}}if(e)break}e||(e=this.getEditableElement(c))}else e=this.getEditableElement(a);d.moveToElementEditablePosition(e||this.getContentElement(),b),this.instance.getSelection().selectRanges([d])},getEditableElement:function(a){var b,c=this.getParagraphAndWidgetElements(),d=this.getCurPos(a,c),e=null;if(d>=0){for(var f=d,g=c.count();g>f;f++)if(b=c.getItem(f),this.isParagraphElement(b)){e=b;break}if(!e)for(var h=d;h>=0;h--)if(b=c.getItem(h),this.isParagraphElement(b)){e=b;break}}return e},isWidgetElement:function(a){return a&&1===a.type&&a.hasAttribute("data-cke-widget-id")?a.getAttribute("data-cke-widget-id"):null},getWidget:function(b){var c=this.instance.widgets,d=a.map(c.instances,function(a){return a.id===+b?a:void 0});return d&&1===d.length?d[0]:null},getWidgetIdAssetBased:function(a){return a?a.closest(".cke_widget_wrapper").data("cke-widget-id"):null},setWidgetFocus:function(a,b){var c=this.getWidgetIdAssetBased(a.$asset),d=this.getWidget(c);if(d){var e=d.wrapper;e&&e[b?"addClass":"removeClass"]("cke_widget_focused")}},setAssetInEditMode:function(a){this.$asset_in_edit_mode=a&&a.$asset,this.setAssetEditIconVisibility(this.$asset_in_edit_mode?!1:!0),this.$asset_in_edit_mode&&this.$asset_in_edit_mode.removeClass("swc_hide_outline")},documentMouseUp:function(){!this.sticky_editor&&this.mouse_down_state&&this.instance.fire("blur")},destroySingle:function(a){this[a]&&(this[a].destroy(!0),this[a]=null)},destroyAll:function(){this.destroySingle("instance"),this.destroySingle("tooltip"),a(this.attr("selector")).removeAttr("contenteditable")},setWrappersHeight:function(){a(".cke_widget_wrapper").each(function(b,c){var d=a(c).find(".swc_asset,.swc_text,.swc_grid_row,.swc_grid_column");"100%"===d[0].style.width?a(c).css("height",d.css("height")):a(c).css("height","")})},changeAssetLoaction:function(b,c){var d,f=this,g=f.instance,h=g.widgets,i=this.getWidgetIdAssetBased(b),j=new CKEDITOR.dom.element(c[0]);a(".swc_grid_column").attr("contenteditable","true"),d=h.instances[i],d&&(f.instance.undoManager.save(!0),f.instance.undoManager.lock(!1,!0),d.wrapper.insertBefore(j),j.remove(),f.resetSelection(),f.instance.undoManager.unlock(),f.instance.undoManager.update(),a(".swc_grid_column").attr("contenteditable","false"),e("add_exec",{fn:"swifty_check_inserts"}),setTimeout(function(){e("add_exec",{fn:"swifty_check_inserts"})},1e3),f.contentModfied())},replaceIds:function(b){var c=function(a){return a.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")},d=[],e=function(a){return d[a]||(d[a]=Date.now()+"_"+parseInt(99999*Math.random(),10)),d[a]},f=b.find(".cke_widget_element");a.each(f.$,function(a,b){if(b.hasAttribute("id")){var c=b.getAttribute("id");c=c.slice(1),b.setAttribute("id","c"+e(c))}}),f=b.find(".swc_custom_cssclose"),a.each(f.$,function(a,b){if(b.hasAttribute("id")){var c=b.getAttribute("id");c=c.slice(9),b.setAttribute("id","cssclose_"+e(c))}});var g=b.find(".swc_asset_cntnt");a.each(g.$,function(b,c){if(c.hasAttribute("data-asset_data")){var d=c.getAttribute("data-asset_data");if(d){var f=a.parseJSON(i.atou(d));f&&f.swc_cssid&&(f.swc_cssid=e(f.swc_cssid),c.setAttribute("data-asset_data",i.utoa(JSON.stringify(f))))}}});var h=b.find(".swc_grid_row");a.each(h.$,function(b,c){if(c.hasAttribute("data-grid_data")){var d=c.getAttribute("data-grid_data");if(d){var f=a.parseJSON(d);f&&f.cssid&&(f.cssid=e(f.cssid),c.setAttribute("data-grid_data",JSON.stringify(f)))}}});var j=b.find("style.swc_custom_css");a.each(j.$,function(a,b){if(b.hasAttribute("id")){var d=b.getAttribute("id");d=d.slice(4);var f=e(d);b.setAttribute("id","css_"+f);var g=b.textContent;g=g.replace(new RegExp(c(d),"g"),f),b.textContent=g}})}},events:{inserted:function(){this.scope.ini(this.element)},removed:function(){this.scope.destroyAll()},"{window} evt_swc_replace_ids":function(a,b,c,d){var e=this;if(c&&c.html){var f=document.implementation.createHTMLDocument(""),g=new CKEDITOR.dom.element(f.body);g.data("cke-editable",1),g.appendHtml(c.html),e.scope.replaceIds(g),d.resolve(g.getHtml())}},"{window} evt_swc_create_editor":function(a,b,c,d){c&&c.$element&&d.resolve(this.scope.createEditor(c.$element))},"{window} evt_swc_ckeditor_command":function(a,b,c){var d=c&&c.command?c.command:null;d&&this.scope.instance.execCommand(d)},"{window} evt_swc_swifty_editor_content_modified":function(){this.scope.contentModfied()},"{window} evt_swc_check_can_undo_redo":function(){this.scope.instance&&this.scope.instance.undoManager&&e("can_undo_redo",{can_undo:this.scope.instance.undoManager.undoable(),can_redo:this.scope.instance.undoManager.redoable()})},"{window} evt_swc_ckeditor_undo_last_image":function(){this.scope.instance&&this.scope.instance.undoManager&&(this.scope.instance.undoManager.restoreImage(this.scope.lastUndoImage),this.scope.undoImageStack&&(this.scope.instance.undoManager.snapshots=this.scope.undoImageStack))},"{window} evt_swc_swifty_editor_remove_refresh_spinner":function(){this.scope.removeRefreshSpinner()},"{window} evt_swc_swifty_editor_set_focus":function(a,b,c){this.scope.setFocus(c)},"{window} evt_swc_swifty_editor_unlock_selection":function(a,b,c){this.scope.unlockSelection(c)},"{window} evt_swc_swifty_editor_set_cursor":function(a,b,c){this.scope.setCursor(c)},"{window} evt_swc_swifty_editor_move_asset":function(a,b,c){this.scope.moveAsset(c)},"{window} evt_swc_swifty_editor_move_row":function(a,b,c){this.scope.moveRow(c)},"{window} evt_swc_swifty_editor_insert_p_asset":function(a,b,c){this.scope.insertPAsset(c)},"{window} evt_swc_swifty_editor_set_asset_in_edit_mode":function(a,b,c){this.scope.setAssetInEditMode(c)},"{document} mouseup":function(){this.scope.documentMouseUp()},"{window} evt_swc_editor_visibility":function(a,b,c,d){this.scope.setEditorVisibilityByAjax(c.show_it).then(function(a){d.resolve(a)})},"{window} evt_swc_set_column_range_for_insert":function(a,b,c,d){this.scope.setColumnRangeForInsert(c.$column),d.resolve()},"{window} evt_swc_set_paragraph_range_for_insert":function(a,b,c,d){this.scope.setParagraphRangeForInsert(c.$p),d.resolve()},"{window} evt_swc_editor_drag_handlers_hide":function(){a(".cke_widget_drag_handler_container").hide()},"{window} evt_swc_swifty_editor_set_wrappers_height":function(){this.scope.setWrappersHeight()},"{window} evt_swc_swifty_editor_change_asset_location":function(a,b,c){this.scope.changeAssetLoaction(c.$assetWrapper,c.$placeholder)},"{window} evt_swc_swifty_editor_show_tooltip":function(){this.scope.showStartUpTooltip()},"{window} evt_swc_get_list_google_fonts":function(a,b,c,d){d.resolve(this.scope.googleFonts)}}})}),swifty.define("css!cssDir/swcreator_ui",[],function(){}),swifty.define("css!js/panels/panel_stack/panel_stack",[],function(){}),swifty.define("js/panels/panel_stack/panel_stack",["jquery","swiftylib/control","swiftylib/evt","js/libs/mout/src/function/throttle","css!js/panels/panel_stack/panel_stack.css"],function(a,b,c,d){return b.extend({defaults:{}},{init:function(){var b=this;b.element.append('<div class="swc_panel_stack"></div>'),b.element.append('<div id="swc-spinner" class="swc-spinner"><i class="fa fa-refresh fa-spin"></i></div>'),b.element.append('<div id="swc-screen-cover" class="swc-screen-cover"></div>'),b.resizeThrottledObject=d(a.proxy(b.resize,b),100),b._super()},addPanel:function(b,c){var d,e=this,f=a(".swc_panel_stack");f.children("div").removeClass("swc_panel_visible");var g=f.children("div:last");d=new b(a("<div></div>").appendTo(".swc_panel_stack"),c);var h=f.children("div:last");return e.slidePanels(h,g),d},slidePanels:function(a,b){var c=this;a.css({left:"0",top:"0"}),setTimeout(function(){b.removeClass("swc_panel_animate swc_panel_transition_fast").addClass("swc_panel_animate_out swc_panel_visible"),a.removeClass("swc_panel_animate_out swc_panel_transition_fast").addClass("swc_panel_animate swc_panel_visible"),b.length>0&&a.length>0||(b.addClass("swc_panel_transition_fast"),a.addClass("swc_panel_transition_fast")),c._fixPanelsPositions(a,b,1)},1)},closePanel:function(b){var d=this,e=a(".swc_panel_stack"),f=a(b);f.children().first().hasClass("swc_panel")||(f=f.closest(".swc_panel").parent());for(var g=f,h=f.prev();h.hasClass("swc_panel_marked_close");)h=h.prev();d.slidePanels(h,g),e.children("div").filter(".swc_panel_marked_close").remove(),1===e.children("div").length&&c("swifty_editor_set_asset_in_edit_mode");var i=d._getDuration(g,h);setTimeout(function(){d._fixPanelsPositions(h,g,1).then(function(){setTimeout(function(){f.remove(),d._fixPanelsPositions(h,g,1),1===e.children("div").length&&c("swifty_editor_set_asset_in_edit_mode")},i)})},1)},_fixPanelsPositions:function(b,d,e){var f=this,g=new a.Deferred;g.resolve();var h=parseInt(a(window).height(),10);b&&b.length>=1&&(h-=b.outerHeight());var i=f._getDuration(b,d);return a("#swc_iframe").height(1===e?parseInt(a(window).height(),10):h),a("#swc_iframe").animate({height:h},i),c("swifty_update_scrolleffect"),setTimeout(function(){c("swifty_update_scrolleffect")},i),g},_getDuration:function(a,b){return b&&b.length>0&&a&&a.length>0?400:1},resize:function(){var b=a(".swc_panel_stack");b.find("div.swc_panel_visible").addClass("swc_panel_transition_fast"),this._fixPanelsPositions(a(".swc_panel_stack .swc_panel:last"),null,1).then(function(){setTimeout(function(){b.find("div.swc_panel_visible").removeClass("swc_panel_transition_fast")},100)})},resetPanelStack:function(b){var c=this,d=a(".swc_panel_stack"),e=d.children("div:first"),f=d.children("div:last");b&&b.left?d.children("div").not(":first").not(":last").remove():(d.children("div").not(":first").not(":last").remove(),c.slidePanels(e,f),setTimeout(function(){f.remove(),c._fixPanelsPositions(null,null,1)},400))},"{window} resize":function(){this.resizeThrottledObject()},"{window} evt_swc_reset_panel_stack":function(a,b,c){this.resetPanelStack(c)},"{window} evt_swc_fix_panel_heights":function(b,c,d){var e=this;d&&d.redraw_element&&a(d.redraw_element).each(function(b,c){var d=a(c)[0];if(d){{var f=document.createTextNode(" ");d.style.display}d.appendChild(f),setTimeout(function(){f.parentNode.removeChild(f),e._fixPanelsPositions(a(".swc_panel_stack .swc_panel:last"),null,0)},1)}}),e._fixPanelsPositions(a(".swc_panel_stack .swc_panel:last"),null,0),setTimeout(function(){e._fixPanelsPositions(a(".swc_panel_stack .swc_panel:last"),null,0)},1),setTimeout(function(){e._fixPanelsPositions(a(".swc_panel_stack .swc_panel:last"),null,0)},1e3)}})}),swifty.define("js/panels/panel_stack/panel_stack_instance",["js/panels/panel_stack/panel_stack"],function(a){return new a("body",{})}),swifty.define("swiftylib/list",["can/list"],function(a){return a}),swifty.define("can/list/sort",["can/util/library","can/list"],function(a){var b=a.List._bubbleRule;a.List._bubbleRule=function(c,d){var e=b.apply(this,arguments);return d.comparator&&-1===a.inArray("change",e)&&e.push("change"),e};var c=a.List.prototype,d=c._changes||function(){},e=c.setup,f=c.unbind;return a.extend(c,{setup:function(){e.apply(this,arguments),this.bind("change",a.proxy(this._changes,this)),this._comparatorBound=!1,this.bind("comparator",a.proxy(this._comparatorUpdated,this)),delete this._init,this.comparator&&this.sort()},_comparatorUpdated:function(a,b){b||0===b?(this.sort(),this._bindings>0&&!this._comparatorBound&&this.bind("change",this._comparatorBound=function(){})):this._comparatorBound&&(f.call(this,"change",this._comparatorBound),this._comparatorBound=!1)},unbind:function(){var a=f.apply(this,arguments);return this._comparatorBound&&1===this._bindings&&(f.call(this,"change",this._comparatorBound),this._comparatorBound=!1),a},_comparator:function(a,b){var c=this.comparator;return c&&"function"==typeof c?c(a,b):"string"==typeof a&&"string"==typeof b&&"".localeCompare?a.localeCompare(b):a===b?0:b>a?-1:1},_changes:function(b,c){var e=(""+c).indexOf(".");if(this.comparator&&-1!==e){if(b.batchNum)return b.batchNum===this._lastProcessedBatchNum?void 0:(this.sort(),void(this._lastProcessedBatchNum=b.batchNum));var f=+c.substr(0,e),g=this[f],h=c.substr(e+1);if("undefined"!=typeof g&&("string"!=typeof this.comparator||0===this.comparator.indexOf(h))){var i=this._getRelativeInsertIndex(g,f);i!==f&&(this._swapItems(f,i),a.batch.trigger(this,"length",[this.length]))}}d.apply(this,arguments)},_getInsertIndex:function(a,b,c){var d,e,f,g,h=0,i=this._getComparatorValue(a);for(b="number"==typeof b?b:0,c="number"==typeof c?c:this.length-1;c>=b;)g=(b+c)/2|0,f=this[g],d=this._getComparatorValue(f),e=this._comparator(i,d),0>e?c=g-1:e>=0&&(b=g+1,h=b);return h},_getRelativeInsertIndex:function(a,b){var c,d=this._getInsertIndex(a),e=b+1,f=this._getComparatorValue(a);return d>=b&&(d-=1),d>b&&e<this.length&&(c=this._getComparatorValue(this[e]),0===this._comparator(f,c))?b:d},_getComparatorValue:function(a){var b=this.comparator;return a&&b&&"string"==typeof b&&(a="function"==typeof a[b]?a[b]():a.attr(b)),a},_getComparatorValues:function(){var a=this,b=[];return this.each(function(c){b.push(a._getComparatorValue(c))}),b},sort:function(a){return arguments.length?this.attr("comparator",a):this._sort(),this},_sort:function(){for(var b,c,d,e,f,g,h=0,i=this.length;i-1>h;h++){for(g=h,e=!0,d=void 0,f=h+1;i>f;f++)b=this._getComparatorValue(this.attr(f)),c=this._getComparatorValue(this.attr(g)),this._comparator.call(this,b,c)<0&&(e=!1,g=f),d&&this._comparator.call(this,b,d)<0&&(e=!1),d=b;if(e)break;g!==h&&this._swapItems(g,h)}return a.batch.trigger(this,"length",[this.length]),this},_swapItems:function(b,c){var d=this[b];[].splice.call(this,b,1),[].splice.call(this,c,0,d),a.batch.trigger(this,"move",[d,c,b])}}),a.each({push:"length",unshift:0},function(b,c){var d=a.List.prototype,e=d[c];d[c]=function(){if(this.comparator&&arguments.length){for(var b,c,d=a.makeArray(arguments),f=d.length,g=0;f>g;)c=a.bubble.set(this,g,this.__type(d[g],g)),b=this._getInsertIndex(c),Array.prototype.splice.apply(this,[b,0,c]),this._triggerChange(""+b,"add",[c],void 0),g++;return a.batch.trigger(this,"reset",[d]),this}return e.apply(this,arguments)}}),function(){var b=a.List.prototype,c=b.splice;b.splice=function(d,e){var f=a.makeArray(arguments);return this.comparator?(c.call(this,d,e),f.splice(0,2),void b.push.apply(this,f)):c.apply(this,f)}}(),a.Map}),swifty.define("swiftylib/sort",["can/list/sort"],function(a){return a}),swifty.define("stache!js/panels/panel/panel.stache",["can/../can"],function(a){var b="__stache_tmpl_"+"js/panels/panel/panel.stache".split(".").join("_").split("/").join("_")+"_"+Date.now()+"_"+parseInt(1e6*Math.random())+"__";return a.view.mustache(b,'<div class="swc_panel {{panel_css_class}}">\n    <div class="swc_panel_inner_wrapper">\n        <div class="swc_panel_title_container">\n            <div class="swc_panel_title_icon">&#xe03d</div>\n            <div class="swc_panel_title_pos">\n                <div class="swc_title">\n                    {{__ title}}\n                    {{#if title_tooltip}}\n                        <i class="fa fa-question"></i>\n                        <swc_tooltip for_sel=".swc_title" {{#if title_tooltip_title}}title="{{__ title_tooltip_title}}"{{/if}} text="{{__ title_tooltip}}" />\n                    {{/if}}\n                </div>\n            </div>\n        </div>\n        <div class="swc_panel_container">\n            {{#eq back_action \'exit\'}}\n            {{else}}\n                <div class="swc_panel_back_container {{#eq back_action \'exit\'}}swc_back_exit{{/eq}}">\n                    <div class="swc_back_button swc_button">\n                        {{#eq panel_css_class \'swc_small_panel\'}}\n                            &#xe900;\n                        {{else}}\n                            <i class="fa fa-chevron-left"></i>\n                        {{/eq}}\n                    </div>\n                </div>\n            {{/eq}}\n            <div class="swc_panel_content">\n                {{#if tmpl_content}}\n                    {{&renderStache tmpl_content}}\n                {{/if}}\n            </div>\n            {{#if map.show_main_menu}}\n                {{#if show_panel_extra}}\n                    <div class="swc_panel_extra">\n                        <div class="swc_panel_extra_inner">\n                            {{#if tmpl_extra}}\n                                <div class="swc_panel_extra_container">\n                                    {{&renderStache tmpl_extra}}\n                                </div>\n                            {{/if}}\n                            {{#with map}}\n                            {{#if map.show_undo_redo}}\n                                <div class="swc_panel_extra_inner_row">\n                                    <div class="swc_button swc_main_scrsize swc_main_editor swc_enabled"><span aria-hidden="true">&#xe601;</span></div>\n                                    <swc_tooltip for_sel=".swc_main_editor" title="{{__ \'Toolbar switch\' }}" text="{{__ \'Switch between always showing the toolbar or only when you select text.\' }}" />\n                                </div>\n                            {{/if}}\n                            {{/with}}\n                            {{#if show_screen_size}}\n                            <div class="swc_panel_extra_inner_row">\n                                <div class="swc_button swc_main_scrsize swc_main_desk_mob swc_enabled">&#xe928</div>\n                                <swc_tooltip for_sel=".swc_main_desk_mob" content_sel=".swc_main_desk_mob_content" content_width="null" />\n                            </div>\n                            {{/if}}\n                            {{#if page_model_map.show_button_manage_versions}}\n                            <div class="swc_button swc_main_scrsize swc_manage_versions swc_enabled">&#xe912;</div>\n                            {{/if}}\n                            {{#if page_model_map.show_button_notifications}}\n                            <div class="swc_button swc_main_scrsize swc_notifications swc_enabled"><i class="fa fa-inbox"></i>\n                                {{#is message_data.items.total_nr_unread 0}}\n                                {{else}}\n                                    <div class="swc_button_msg_count">{{message_data.items.total_nr_unread}}</div>\n                                {{/is}}\n                            </div>\n                            {{/if}}\n                            {{#if is_easy_mode}}\n                            <div class="swc_button swc_main_scrsize swc_help_button swc_enabled"><i class="fa fa-question"></i></div>\n                            {{/if}}\n                            {{#if show_save_panel}}\n                            <div class="swc_panel_btn_divider"></div>\n                            <div class="swc_panel_extra_inner_row">\n                                <div class="swc_button swc_main_scrsize swc_main_save swc_main_save_size_2 {{map.save_panel_state}}">{{map.text_save_state}}</div>\n                                <swc_tooltip for_sel=".swc_main_save" title="{{__ \'Autosave\' }}"  content_sel=".swc_save_panel_tooltip" />\n                            </div>\n                            {{/if}}\n                            {{#if page_model_map.show_button_publish}}\n                            <swc_panel_button icon="&#xe040;" action="publish" name="{{page_model_map.publish_title}}" is_disabled="{{page_model_map.is_published_same}}"/>\n                            {{/if}}\n                        </div>\n                    </div>\n                    <div class="swc_main_desk_mob_content" style="display: none;">\n                        <div class="swc_button swc_main_scrsize swc_main_desktop swc_enabled"><i class="fa fa-desktop"></i></div>\n                        <div class="swc_button swc_main_scrsize swc_main_tablet swc_enabled"><i class="fa fa-tablet"></i></div>\n                        <div class="swc_button swc_main_scrsize swc_main_mobile swc_enabled"><i class="fa fa-mobile"></i></div>\n                    </div>\n                    <div class="swc_save_panel_tooltip" style="display: none;">\n                    <p>{{map.save_panel_tooltip}}</p>\n                    </div>\n                {{/if}}\n                {{#eq back_action \'exit\'}}\n                    <div class="swc_panel_back_container {{#eq back_action \'exit\'}}swc_back_exit{{/eq}}">\n                        <div class="swc_back_button swc_button">\n                            {{#eq panel_css_class \'swc_small_panel\'}}\n                                &#xe900;\n                            {{else}}\n                                <i class="fa fa-chevron-left"></i>\n                            {{/eq}}\n                        </div>\n                    </div>\n                {{/eq}}\n            {{/if}}\n            <div class="clearfix"></div>\n        </div>\n    </div>\n    {{#if tmpl_tabs}}\n        {{&renderStache tmpl_tabs}}\n    {{/if}}\n</div>'),b}),swifty.define("stache!js/components/panel_button/panel_button.stache",["can/../can"],function(a){var b="__stache_tmpl_"+"js/components/panel_button/panel_button.stache".split(".").join("_").split("/").join("_")+"_"+Date.now()+"_"+parseInt(1e6*Math.random())+"__";return a.view.mustache(b,'{{convertFAIcons}}\n<div class="swc_panel_button_wrapper">\n    <div class="swc_panel_button swc_panel_button_{{action}} {{^active}}swc_inactive{{/active}} {{#if is_disabled}}swc_disabled{{/if}} {{#is_hidden}}swc_hidden{{/is_hidden}} {{#is_selected}}swc_selected{{/is_selected}}">\n        <div class="swc_icon" style="{{#if bg_img}}background-image: url({{bg_img}});{{/if}}">\n            {{#if icon}}\n                <span aria-hidden="true">{{&icon}}</span>\n            {{/if}}\n            {{#if fa_icon}}\n                <i class="fa {{fa_icon}}"></i>\n            {{/if}}\n            {{#if row_type}}\n                <swc_column_icon cols="{{row_type}}" />\n            {{/if}}\n            {{#if ribbon_coming}}\n                <!--<div class="swc_ribbon_label">-->\n                    <!--{{__ \'Coming soon\' }}-->\n                <!--</div>-->\n            {{/if}}\n        </div>\n        <div class="swc_text_outer">\n            <div class="swc_text">\n            {{#if name}}\n                {{&__ name}}\n            {{else}}\n                {{__ action}}\n            {{/if}}\n            </div>\n        </div>\n    </div>\n    {{#if ribbon_paid}}\n        <div class="swc_ribbon">\n            <i class="fa fa-check"></i>\n        </div>\n    {{/if}}\n    {{#if ribbon_expired}}\n        <div class="swc_ribbon">\n            <i class="fa fa-dollar"></i>\n        </div>\n    {{/if}}\n    {{#if ribbon_coming}}\n        <div class="swc_ribbon">\n            <i class="fa fa-dollar"></i>\n        </div>\n    {{/if}}\n</div>'),b}),swifty.define("css!js/components/panel_button/panel_button",[],function(){}),swifty.define("js/components/panel_button/panel_button",["jquery","swiftylib/component","swiftylib/view","stache!js/components/panel_button/panel_button.stache","css!js/components/panel_button/panel_button.css","can/map/define"],function(a,b,c,d){return b.extend({tag:"swc_panel_button",template:new c(d),scope:{define:{is_disabled:{type:"boolean"},is_selected:{type:"boolean"}},active:"@",icon:"@",row_type:"@",action:"@",name:"@",is_disabled:"@",is_hidden:"@",is_selected:"@",ribbon_paid:"@",ribbon_expired:"@",ribbon_coming:"@",bg_img:"@"},events:{}})}),swifty.define("js/components/tooltip/jBox.min",["jquery"],function(a){function b(b,c){if(this.options={id:null,width:"auto",height:"auto",attach:null,trigger:"click",preventDefault:!1,title:null,content:null,getTitle:null,getContent:null,ajax:null,data:"",reload:!1,target:null,position:{x:"center",y:"center"},outside:null,offset:0,attributes:{x:"left",y:"top"},adjustPosition:!1,adjustTracker:!1,adjustDistance:5,fixed:!1,reposition:!1,pointer:!1,fade:180,animation:null,theme:"Default",addClass:"",overlay:!1,zIndex:1e4,delayOpen:0,delayClose:0,closeOnEsc:!1,closeOnClick:!1,closeOnMouseleave:!1,closeButton:!1,constructOnInit:!1,blockScroll:!1,appendTo:a("body"),draggable:null,onInit:function(){},onCreated:function(){},onOpen:function(){},onClose:function(){},onCloseComplete:function(){},onAjax:function(){},onAjaxComplete:function(){},autoClose:7e3,color:null,stack:!0,audio:!1,volume:100,src:"href",gallery:"data-jbox-image",imageLabel:"title",imageFade:600,imageSize:"cover"},this.defaultOptions={Tooltip:{getContent:"title",trigger:"mouseenter",position:{x:"center",y:"top"},outside:"y",pointer:!0,adjustPosition:!0,reposition:!0},Mouse:{target:"mouse",position:{x:"right",y:"bottom"},offset:15,trigger:"mouseenter",adjustPosition:"flip"},Modal:{target:a(window),fixed:!0,blockScroll:!0,closeOnEsc:!0,closeOnClick:"overlay",closeButton:"title",overlay:!0,animation:"zoomOut"},Notice:{target:a(window),fixed:!0,position:{x:20,y:20},attributes:{x:"right",y:"top"},animation:"zoomIn",closeOnClick:"box",_onInit:function(){this.open(),this.options.delayClose=this.options.autoClose,this.options.delayClose&&this.close()}.bind(this),_onCreated:function(){this.options.color&&this.wrapper.addClass("jBox-Notice-color jBox-Notice-"+this.options.color)},_onOpen:function(){a.each(a(".jBox-Notice"),function(b,c){return c=a(c),c.attr("id")!=this.id&&"auto"!=c.css(this.options.attributes.y)&&"auto"!=c.css(this.options.attributes.x)?this.options.stack?void c.css("margin-"+this.options.attributes.y,parseInt(c.css("margin-"+this.options.attributes.y))+this.dimensions.y+10):void c.data("jBox").close({ignoreDelay:!0}):void 0}.bind(this)),this.options.audio&&!this.IE8&&(this.audio=a("<audio/>"),a("<source/>",{src:this.options.audio+".mp3"}).appendTo(this.audio),a("<source/>",{src:this.options.audio+".ogg"}).appendTo(this.audio),this.audio[0].volume=Math.min(this.options.volume/100,1),this.audio[0].play())}.bind(this),_onCloseComplete:function(){this.destroy()}.bind(this)},Image:{target:a(window),fixed:!0,blockScroll:!0,closeOnEsc:!0,closeOnClick:"overlay",overlay:!0,animation:"zoomOut",width:800,height:533,attach:a("[data-jbox-image]"),preventDefault:!0,_onInit:function(){this.images=this.currentImage={},this.imageZIndex=1,a.each(this.attachedElements,function(b,c){if(c=a(c),!c.data("jBox-image-gallery")){var d=c.attr(this.options.gallery)||"default";!this.images[d]&&(this.images[d]=[]),this.images[d].push({src:c.attr(this.options.src),label:c.attr(this.options.imageLabel)||""}),"title"==this.options.imageLabel&&c.removeAttr("title"),c.data("jBox-image-gallery",d),c.data("jBox-image-id",this.images[d].length-1)}}.bind(this));var b=function(b,c,d,e){if(!a("#jBox-image-"+b+"-"+c).length){{var f=a("<div/>",{id:"jBox-image-"+b+"-"+c,"class":"jBox-image-container"}).css({backgroundImage:"url("+this.images[b][c].src+")",backgroundSize:this.options.imageSize,opacity:e?1:0,zIndex:d?0:this.imageZIndex++}).appendTo(this.content);a("<div/>",{id:"jBox-image-label-"+b+"-"+c,"class":"jBox-image-label"+(e?" active":"")}).html(this.images[b][c].label).appendTo(this.imageLabel)}!e&&!d&&f.animate({opacity:1},this.options.imageFade)}}.bind(this),c=function(b,c){a(".jBox-image-label.active").removeClass("active"),a("#jBox-image-label-"+b+"-"+c).addClass("active")};this.showImage=function(d){if("open"!=d){var e=this.currentImage.gallery,f=this.currentImage.id+(1*("prev"==d)?-1:1);f=f>this.images[e].length-1?0:0>f?this.images[e].length-1:f}else{var e=this.source.data("jBox-image-gallery"),f=this.source.data("jBox-image-id");a(".jBox-image-pointer-prev, .jBox-image-pointer-next").css({display:this.images[e].length>1?"block":"none"})}if(this.currentImage={gallery:e,id:f},a("#jBox-image-"+e+"-"+f).length)a("#jBox-image-"+e+"-"+f).css({zIndex:this.imageZIndex++,opacity:0}).animate({opacity:1},"open"==d?0:this.options.imageFade),c(e,f);else{this.wrapper.addClass("jBox-loading");{a('<img src="'+this.images[e][f].src+'">').load(function(){b(e,f,!1),c(e,f),this.wrapper.removeClass("jBox-loading")}.bind(this))}}var g=f+1;g=g>this.images[e].length-1?0:0>g?this.images[e].length-1:g,!a("#jBox-image-"+e+"-"+g).length&&a('<img src="'+this.images[e][g].src+'">').load(function(){b(e,g,!0)})}},_onCreated:function(){this.imageLabel=a("<div/>",{id:"jBox-image-label"}).appendTo(this.wrapper),this.wrapper.append(a("<div/>",{"class":"jBox-image-pointer-prev",click:function(){this.showImage("prev")}.bind(this)})).append(a("<div/>",{"class":"jBox-image-pointer-next",click:function(){this.showImage("next")}.bind(this)}))},_onOpen:function(){a("body").addClass("jBox-image-open"),a(document).on("keyup.jBox-"+this.id,function(a){37==a.keyCode&&this.showImage("prev"),39==a.keyCode&&this.showImage("next")}.bind(this)),this.showImage("open")},_onClose:function(){a("body").removeClass("jBox-image-open"),a(document).off("keyup.jBox-"+this.id)},_onCloseComplete:function(){this.wrapper.find(".jBox-image-container").css("opacity",0)}}},"string"==a.type(b)&&(this.type=b,b=this.defaultOptions[b]),this.options=a.extend(this.options,b,c),null===this.options.id){for(var d=1;0!=a("#jBox"+d).length;)d++;this.options.id="jBox"+d}this.id=this.options.id,("center"==this.options.position.x&&"x"==this.options.outside||"center"==this.options.position.y&&"y"==this.options.outside)&&(this.options.outside=!1),(!this.options.outside||"xy"==this.options.outside)&&(this.options.pointer=!1),"object"!=a.type(this.options.offset)&&(this.options.offset={x:this.options.offset,y:this.options.offset}),this.options.offset.x||(this.options.offset.x=0),this.options.offset.y||(this.options.offset.y=0),"object"!=a.type(this.options.adjustDistance)&&(this.options.adjustDistance={top:this.options.adjustDistance,right:this.options.adjustDistance,bottom:this.options.adjustDistance,left:this.options.adjustDistance}),this.align=this.options.outside&&"xy"!=this.options.outside?this.options.position[this.options.outside]:"center"!=this.options.position.y&&"number"!=a.type(this.options.position.y)?this.options.position.x:"center"!=this.options.position.x&&"number"!=a.type(this.options.position.x)?this.options.position.y:this.options.attributes.x,this.options.outside&&"xy"!=this.options.outside&&(this.outside=this.options.position[this.options.outside]);var e=navigator.userAgent.toLowerCase();return this.IE8=-1!=e.indexOf("msie")&&8==parseInt(e.split("msie")[1]),this.prefix=-1!=e.indexOf("webkit")?"-webkit-":"",this._getOpp=function(a){return{left:"right",right:"left",top:"bottom",bottom:"top",x:"y",y:"x"}[a]},this._getXY=function(a){return{left:"x",right:"x",top:"y",bottom:"y",center:"x"}[a]},this._getTL=function(a){return{left:"left",right:"left",top:"top",bottom:"top",center:"left",x:"left",y:"top"}[a]},this._create=function(){if(!this.wrapper){if(this.wrapper=a("<div/>",{id:this.id,"class":"jBox-wrapper"+(this.type?" jBox-"+this.type:"")+(this.options.theme?" jBox-"+this.options.theme:"")+(this.options.addClass?" "+this.options.addClass:"")+(this.IE8?" jBox-IE8":"")}).css({position:this.options.fixed?"fixed":"absolute",display:"none",opacity:0,zIndex:this.options.zIndex}).data("jBox",this),this.options.closeOnMouseleave&&this.wrapper.mouseenter(function(){this.open()}.bind(this)).mouseleave(function(){this.close()}.bind(this)),this.container=a("<div/>",{"class":"jBox-container"}).appendTo(this.wrapper),this.content=a("<div/>",{"class":"jBox-content"}).css({width:this.options.width,height:this.options.height}).appendTo(this.container),this.options.closeButton&&(this.closeButton=a("<div/>",{"class":"jBox-closeButton jBox-noDrag"}).click(function(){this.close()}.bind(this)),"title"!=this.options.closeButton&&(this.wrapper.addClass("jBox-closeButton-box"),this.closeButton.appendTo(this.container))),this.wrapper.appendTo(this.options.appendTo),this.options.pointer){if(this.pointer={position:this._getOpp(this.outside),xy:this._getXY(this.outside),align:"center",offset:0},this.pointer.element=a("<div/>",{"class":"jBox-pointer jBox-pointer-"+this.pointer.position}).appendTo(this.wrapper),this.pointer.dimensions={x:this.pointer.element.outerWidth(),y:this.pointer.element.outerHeight()},"string"==a.type(this.options.pointer)){var b=this.options.pointer.split(":");
b[0]&&(this.pointer.align=b[0]),b[1]&&(this.pointer.offset=parseInt(b[1]))}this.pointer.alignAttribute="x"==this.pointer.xy?"bottom"==this.pointer.align?"bottom":"top":"right"==this.pointer.align?"right":"left",this.wrapper.css("padding-"+this.pointer.position,this.pointer.dimensions[this.pointer.xy]),this.pointer.element.css(this.pointer.alignAttribute,"center"==this.pointer.align?"50%":0).css("margin-"+this.pointer.alignAttribute,this.pointer.offset),this.pointer.margin={margin:this.pointer.element.css("margin")},"center"==this.pointer.align&&this.pointer.element.css(this.prefix+"transform","translate("+("y"==this.pointer.xy?this.pointer.dimensions.x*-.5+"px":0)+", "+("x"==this.pointer.xy?this.pointer.dimensions.y*-.5+"px":0)+")"),this.pointer.element.css("x"==this.pointer.xy?"width":"height",parseInt(this.pointer.dimensions[this.pointer.xy])+parseInt(this.container.css("border-"+this.pointer.alignAttribute+"-width"))),this.wrapper.addClass("jBox-pointerPosition-"+this.pointer.position)}if(this.setContent(this.options.content),this.setTitle(this.options.title),this.options.draggable){var c="title"==this.options.draggable?this.titleContainer:this.options.draggable.length>0?this.options.draggable:this.wrapper;c.addClass("jBox-draggable").on("mousedown",function(b){if(2!=b.button&&!a(b.target).hasClass("jBox-noDrag")&&!a(b.target).parents(".jBox-noDrag").length){var c=this.wrapper.outerHeight(),d=this.wrapper.outerWidth(),e=this.wrapper.offset().top+c-b.pageY,f=this.wrapper.offset().left+d-b.pageX;a(document).on("mousemove.jBox-draggable-"+this.id,function(a){this.wrapper.offset({top:a.pageY+e-c,left:a.pageX+f-d})}.bind(this)),b.preventDefault()}}.bind(this)).on("mouseup",function(){a(document).off("mousemove.jBox-draggable-"+this.id)}.bind(this))}this.options.onCreated.bind(this)(),this.options._onCreated&&this.options._onCreated.bind(this)()}},this.options.constructOnInit&&this._create(),this.options.attach&&this.attach(),this._positionMouse=function(a){this.pos={left:a.pageX,top:a.pageY};var b=function(a,b){return"center"==this.options.position[b]?void(this.pos[a]-=Math.ceil(this.dimensions[b]/2)):(this.pos[a]+=a==this.options.position[b]?-1*this.dimensions[b]-this.options.offset[b]:this.options.offset[b],this.pos[a])}.bind(this);this.wrapper.css({left:b("left","x"),top:b("top","y")}),this.targetDimensions={x:0,y:0,left:a.pageX,top:a.pageY},this._adjustPosition()},this._attachEvents=function(){if(this.options.closeOnEsc&&a(document).on("keyup.jBox-"+this.id,function(a){27==a.keyCode&&this.close({ignoreDelay:!0})}.bind(this)),this.options.closeOnClick&&a(document).on("click.jBox-"+this.id,function(a){this.blockBodyClick||!("overlay"!=this.options.closeOnClick||this.overlay&&a.target==this.overlay[0])||"box"==this.options.closeOnClick&&a.target!=this.wrapper[0]&&!this.wrapper.has(a.target).length||"body"==this.options.closeOnClick&&(a.target==this.wrapper[0]||this.wrapper.has(a.target).length)||this.close({ignoreDelay:!0})}.bind(this)),(this.options.adjustPosition&&this.options.adjustTracker||this.options.reposition)&&!this.fixed&&this.outside){var b,c=0,d=150,e=function(){var a=(new Date).getTime();b||(a-c>d&&(this.options.reposition&&this.position(),this.options.adjustTracker&&this._adjustPosition(),c=a),b=setTimeout(function(){b=null,c=(new Date).getTime(),this.options.reposition&&this.position(),this.options.adjustTracker&&this._adjustPosition()}.bind(this),d))}.bind(this);this.options.adjustTracker&&"resize"!=this.options.adjustTracker&&a(window).on("scroll.jBox-"+this.id,function(){e()}.bind(this)),(this.options.adjustTracker&&"scroll"!=this.options.adjustTracker||this.options.reposition)&&a(window).on("resize.jBox-"+this.id,function(){e()}.bind(this))}"mouse"==this.options.target&&a("body").on("mousemove.jBox-"+this.id,function(a){this._positionMouse(a)}.bind(this))},this._detachEvents=function(){this.options.closeOnEsc&&a(document).off("keyup.jBox-"+this.id),this.options.closeOnClick&&a(document).off("click.jBox-"+this.id),(this.options.adjustPosition&&this.options.adjustTracker||this.options.reposition)&&(a(window).off("scroll.jBox-"+this.id),a(window).off("resize.jBox-"+this.id)),"mouse"==this.options.target&&a("body").off("mousemove.jBox-"+this.id)},this._addOverlay=function(){!this.overlay&&(this.overlay=a("#jBox-overlay").length?a("#jBox-overlay").css({zIndex:Math.min(a("#jBox-overlay").css("z-index"),this.options.zIndex-1)}):a("<div/>",{id:"jBox-overlay"}).css({display:"none",opacity:0,zIndex:this.options.zIndex-1}).appendTo(a("body")));var b=this.overlay.data("jBox")||{};b["jBox-"+this.id]=!0,this.overlay.data("jBox",b),"block"!=this.overlay.css("display")&&(this.options.fade?this.overlay.stop()&&this.overlay.animate({opacity:1},{queue:!1,duration:this.options.fade,start:function(){this.overlay.css({display:"block"})}.bind(this)}):this.overlay.css({display:"block",opacity:1}))},this._removeOverlay=function(){if(this.overlay){var b=this.overlay.data("jBox");delete b["jBox-"+this.id],this.overlay.data("jBox",b),a.isEmptyObject(b)&&(this.options.fade?this.overlay.stop()&&this.overlay.animate({opacity:0},{queue:!1,duration:this.options.fade,complete:function(){this.overlay.css({display:"none"})}.bind(this)}):this.overlay.css({display:"none",opacity:0}))}},this._generateCSS=function(){if(!this.IE8){"object"!=a.type(this.options.animation)&&(this.options.animation={pulse:{open:"pulse",close:"zoomOut"},zoomIn:{open:"zoomIn",close:"zoomIn"},zoomOut:{open:"zoomOut",close:"zoomOut"},move:{open:"move",close:"move"},slide:{open:"slide",close:"slide"},flip:{open:"flip",close:"flip"},tada:{open:"tada",close:"zoomOut"}}[this.options.animation]),this.options.animation.open&&(this.options.animation.open=this.options.animation.open.split(":")),this.options.animation.close&&(this.options.animation.close=this.options.animation.close.split(":")),this.options.animation.openDirection=this.options.animation.open?this.options.animation.open[1]:null,this.options.animation.closeDirection=this.options.animation.close?this.options.animation.close[1]:null,this.options.animation.open&&(this.options.animation.open=this.options.animation.open[0]),this.options.animation.close&&(this.options.animation.close=this.options.animation.close[0]),this.options.animation.open&&(this.options.animation.open+="Open"),this.options.animation.close&&(this.options.animation.close+="Close");var b={pulse:{duration:350,css:[["0%","scale(1)"],["50%","scale(1.1)"],["100%","scale(1)"]]},zoomInOpen:{duration:this.options.fade||180,css:[["0%","scale(0.9)"],["100%","scale(1)"]]},zoomInClose:{duration:this.options.fade||180,css:[["0%","scale(1)"],["100%","scale(0.9)"]]},zoomOutOpen:{duration:this.options.fade||180,css:[["0%","scale(1.1)"],["100%","scale(1)"]]},zoomOutClose:{duration:this.options.fade||180,css:[["0%","scale(1)"],["100%","scale(1.1)"]]},moveOpen:{duration:this.options.fade||180,positions:{top:{"0%":-12},right:{"0%":12},bottom:{"0%":12},left:{"0%":-12}},css:[["0%","translate%XY(%Vpx)"],["100%","translate%XY(0px)"]]},moveClose:{duration:this.options.fade||180,timing:"ease-in",positions:{top:{"100%":-12},right:{"100%":12},bottom:{"100%":12},left:{"100%":-12}},css:[["0%","translate%XY(0px)"],["100%","translate%XY(%Vpx)"]]},slideOpen:{duration:400,positions:{top:{"0%":-400},right:{"0%":400},bottom:{"0%":400},left:{"0%":-400}},css:[["0%","translate%XY(%Vpx)"],["100%","translate%XY(0px)"]]},slideClose:{duration:400,timing:"ease-in",positions:{top:{"100%":-400},right:{"100%":400},bottom:{"100%":400},left:{"100%":-400}},css:[["0%","translate%XY(0px)"],["100%","translate%XY(%Vpx)"]]},flipOpen:{duration:600,css:[["0%","perspective(400px) rotateX(90deg)"],["40%","perspective(400px) rotateX(-15deg)"],["70%","perspective(400px) rotateX(15deg)"],["100%","perspective(400px) rotateX(0deg)"]]},flipClose:{duration:this.options.fade||300,css:[["0%","perspective(400px) rotateX(0deg)"],["100%","perspective(400px) rotateX(90deg)"]]},tada:{duration:800,css:[["0%","scale(1)"],["10%, 20%","scale(0.9) rotate(-3deg)"],["30%, 50%, 70%, 90%","scale(1.1) rotate(3deg)"],["40%, 60%, 80%","scale(1.1) rotate(-3deg)"],["100%","scale(1) rotate(0)"]]}};a.each(["pulse","tada"],function(a,c){b[c+"Open"]=b[c+"Close"]=b[c]});var c=function(c,d){return keyframe_css="@"+this.prefix+"keyframes jBox-animation-"+this.options.animation[c]+"-"+c+(d?"-"+d:"")+" {",a.each(b[this.options.animation[c]].css,function(a,e){var f=d?e[1].replace("%XY",this._getXY(d).toUpperCase()):e[1];b[this.options.animation[c]].positions&&(f=f.replace("%V",b[this.options.animation[c]].positions[d][e[0]])),keyframe_css+=e[0]+" {"+this.prefix+"transform:"+f+";}"}.bind(this)),keyframe_css+="}",keyframe_css+=".jBox-animation-"+this.options.animation[c]+"-"+c+(d?"-"+d:"")+" {",keyframe_css+=this.prefix+"animation-duration: "+b[this.options.animation[c]].duration+"ms;",keyframe_css+=this.prefix+"animation-name: jBox-animation-"+this.options.animation[c]+"-"+c+(d?"-"+d:"")+";",keyframe_css+=b[this.options.animation[c]].timing?this.prefix+"animation-timing-function: "+b[this.options.animation[c]].timing+";":"",keyframe_css+="}",keyframe_css}.bind(this),d="";a.each(["open","close"],function(e,f){return this.options.animation[f]&&b[this.options.animation[f]]&&("close"!=f||this.options.fade)?void(b[this.options.animation[f]].positions?a.each(["top","right","bottom","left"],function(a,b){d+=c(f,b)}):d+=c(f)):""}.bind(this)),a("<style/>").append(d).appendTo(a("head"))}},this._blockBodyClick=function(){this.blockBodyClick=!0,setTimeout(function(){this.blockBodyClick=!1}.bind(this),10)},this.options.animation&&this._generateCSS(),this._animate=function(a){if(!this.IE8){if(a||(a=this.isOpen?"open":"close"),!this.options.fade&&"close"==a)return null;var b=this.options.animation[a+"Direction"]||("center"!=this.align?this.align:this.options.attributes.x);this.flipped&&this._getXY(b)==this._getXY(this.align)&&(b=this._getOpp(b));var c="jBox-animation-"+this.options.animation[a]+"-"+a+" jBox-animation-"+this.options.animation[a]+"-"+a+"-"+b;this.wrapper.addClass(c);var d=1e3*parseFloat(this.wrapper.css(this.prefix+"animation-duration"));"close"==a&&(d=Math.min(d,this.options.fade)),setTimeout(function(){this.wrapper.removeClass(c)}.bind(this),d)}},this._abortAnimation=function(){if(!this.IE8){var a="jBox-animation",b=this.wrapper.attr("class").split(" ").filter(function(b){return 0!==b.lastIndexOf(a,0)});this.wrapper.attr("class",b.join(" "))}},this._adjustPosition=function(){if(!this.options.adjustPosition)return null;this.positionAdjusted&&(this.wrapper.css(this.pos),this.pointer&&this.wrapper.css("padding",0).css("padding-"+this._getOpp(this.outside),this.pointer.dimensions[this._getXY(this.outside)]).removeClass("jBox-pointerPosition-"+this._getOpp(this.pointer.position)).addClass("jBox-pointerPosition-"+this.pointer.position),this.pointer&&this.pointer.element.attr("class","jBox-pointer jBox-pointer-"+this._getOpp(this.outside)).css(this.pointer.margin),this.positionAdjusted=!1,this.flipped=!1);var b=a(window),c={x:b.width(),y:b.height(),top:b.scrollTop(),left:b.scrollLeft()};c.bottom=c.top+c.y,c.right=c.left+c.x;var d=c.top>this.pos.top-(this.options.adjustDistance.top||0),e=c.right<this.pos.left+this.dimensions.x+(this.options.adjustDistance.right||0),f=c.bottom<this.pos.top+this.dimensions.y+(this.options.adjustDistance.bottom||0),g=c.left>this.pos.left-(this.options.adjustDistance.left||0),h=g?"left":e?"right":null,i=d?"top":f?"bottom":null,j=h||i;if(j){"move"==this.options.adjustPosition||h!=this.outside&&i!=this.outside||("mouse"==this.target&&(this.outside="right"),("top"==this.outside||"left"==this.outside?c[this._getXY(this.outside)]-(this.targetDimensions[this._getTL(this.outside)]-c[this._getTL(this.outside)])-this.targetDimensions[this._getXY(this.outside)]:this.targetDimensions[this._getTL(this.outside)]-c[this._getTL(this.outside)])>this.dimensions[this._getXY(this.outside)]+this.options.adjustDistance[this._getOpp(this.outside)]&&(this.wrapper.css(this._getTL(this.outside),this.pos[this._getTL(this.outside)]+(this.dimensions[this._getXY(this.outside)]+this.options.offset[this._getXY(this.outside)]+this.targetDimensions[this._getXY(this.outside)])*("top"==this.outside||"left"==this.outside?1:-1)).removeClass("jBox-pointerPosition-"+this.pointer.position).addClass("jBox-pointerPosition-"+this._getOpp(this.pointer.position)),this.pointer&&this.wrapper.css("padding",0).css("padding-"+this.outside,this.pointer.dimensions[this._getXY(this.outside)]),this.pointer&&this.pointer.element.attr("class","jBox-pointer jBox-pointer-"+this.outside),this.positionAdjusted=!0,this.flipped=!0));var k="x"==this._getXY(this.outside)?i:h;if(this.pointer&&"flip"!=this.options.adjustPosition&&this._getXY(k)==this._getOpp(this._getXY(this.outside))){if("center"==this.pointer.align)var l=this.dimensions[this._getXY(k)]/2-this.pointer.dimensions[this._getOpp(this.pointer.xy)]/2-parseInt(this.pointer.element.css("margin-"+this.pointer.alignAttribute))*(k!=this._getTL(k)?-1:1);else var l=k==this.pointer.alignAttribute?parseInt(this.pointer.element.css("margin-"+this.pointer.alignAttribute)):this.dimensions[this._getXY(k)]-parseInt(this.pointer.element.css("margin-"+this.pointer.alignAttribute))-this.pointer.dimensions[this._getXY(k)];spaceDiff=k==this._getTL(k)?c[this._getTL(k)]-this.pos[this._getTL(k)]+this.options.adjustDistance[k]:-1*(c[this._getOpp(this._getTL(k))]-this.pos[this._getTL(k)]-this.options.adjustDistance[k]-this.dimensions[this._getXY(k)]),k==this._getOpp(this._getTL(k))&&this.pos[this._getTL(k)]-spaceDiff<c[this._getTL(k)]+this.options.adjustDistance[this._getTL(k)]&&(spaceDiff-=c[this._getTL(k)]+this.options.adjustDistance[this._getTL(k)]-(this.pos[this._getTL(k)]-spaceDiff)),spaceDiff=Math.min(spaceDiff,l),spaceDiff<=l&&spaceDiff>0&&(this.pointer.element.css("margin-"+this.pointer.alignAttribute,parseInt(this.pointer.element.css("margin-"+this.pointer.alignAttribute))-spaceDiff*(k!=this.pointer.alignAttribute?-1:1)),this.wrapper.css(this._getTL(k),this.pos[this._getTL(k)]+spaceDiff*(k!=this._getTL(k)?-1:1)),this.positionAdjusted=!0)}}},this.options.onInit.bind(this)(),this.options._onInit&&this.options._onInit.bind(this)(),this}return b.prototype.attach=function(b,c){return b||(b=a(this.options.attach.selector)),c||(c=this.options.trigger),b&&b.length&&a.each(b,function(b,d){d=a(d),d.data("jBox-attached-"+this.id)||("title"==this.options.getContent&&void 0!=d.attr("title")&&d.data("jBox-getContent",d.attr("title")).removeAttr("title"),this.attachedElements||(this.attachedElements=[]),this.attachedElements.push(d[0]),d.on(c+".jBox-attach-"+this.id,function(a){if(this.isOpen&&this.source[0]!=d[0])var b=!0;this.source=d,!this.options.target&&(this.target=d),"click"==c&&this.options.preventDefault&&a.preventDefault(),this["click"!=c||b?"open":"toggle"]()}.bind(this)),"mouseenter"==this.options.trigger&&d.on("mouseleave",function(){this.close()}.bind(this)),d.data("jBox-attached-"+this.id,c))}.bind(this)),this},b.prototype.detach=function(b){return b||(b=this.attachedElements||[]),b&&b.length&&a.each(b,function(b,c){c=a(c),c.data("jBox-attached-"+this.id)&&(c.off(c.data("jBox-attached-"+this.id+".jBox-attach-"+this.id)),c.data("jBox-attached-"+this.id,null))}),this},b.prototype.setTitle=function(b){return null==b||void 0==b?this:(!this.wrapper&&this._create(),this.title||(this.titleContainer=a("<div/>",{"class":"jBox-title"}),this.title=a("<div/>").appendTo(this.titleContainer),this.wrapper.addClass("jBox-hasTitle"),"title"==this.options.closeButton&&(this.wrapper.addClass("jBox-closeButton-title"),this.closeButton.appendTo(this.titleContainer)),this.titleContainer.insertBefore(this.content)),this.title.html(b),this.position(),this)},b.prototype.setContent=function(b){if(null==b)return this;switch(!this.wrapper&&this._create(),a.type(b)){case"string":this.content.html(b);break;case"object":this.content.children().css({display:"none"}),this.options.content.appendTo(this.content).css({display:"block"})}return this.position(),this},b.prototype.position=function(b){if(b||(b={}),this.target=b.target||this.target||this.options.target||a(window),this.dimensions={x:this.wrapper.outerWidth(),y:this.wrapper.outerHeight()},"mouse"!=this.target){if("center"==this.options.position.x&&"center"==this.options.position.y)return this.wrapper.css({left:"50%",top:"50%",marginLeft:this.dimensions.x*-.5+this.options.offset.x,marginTop:this.dimensions.y*-.5+this.options.offset.y}),this;var c=this.target.offset();this.targetDimensions={x:this.target.outerWidth(),y:this.target.outerHeight(),top:c?c.top:0,left:c?c.left:0},this.pos={};var d=function(b){if(-1==a.inArray(this.options.position[b],["top","right","bottom","left","center"]))return void(this.pos[this.options.attributes[b]]=this.options.position[b]);var c=this.options.attributes[b]="x"==b?"left":"top";return this.pos[c]=this.targetDimensions[c],"center"==this.options.position[b]?void(this.pos[c]+=Math.ceil((this.targetDimensions[b]-this.dimensions[b])/2)):(c!=this.options.position[b]&&(this.pos[c]+=this.targetDimensions[b]-this.dimensions[b]),void((this.options.outside==b||"xy"==this.options.outside)&&(this.pos[c]+=this.dimensions[b]*(c!=this.options.position[b]?1:-1))))}.bind(this);if(d("x"),d("y"),this.options.pointer){var e=0;switch(this.pointer.align){case"center":"center"!=this.options.position[this._getOpp(this.options.outside)]&&(e+=this.dimensions[this._getOpp(this.options.outside)]/2);break;default:switch(this.options.position[this._getOpp(this.options.outside)]){case"center":e+=(this.dimensions[this._getOpp(this.options.outside)]/2-this.pointer.dimensions[this._getOpp(this.options.outside)]/2)*(this.pointer.align==this._getTL(this.pointer.align)?1:-1);break;default:e+=this.pointer.align!=this.options.position[this._getOpp(this.options.outside)]?this.dimensions[this._getOpp(this.options.outside)]-this.pointer.dimensions[this._getOpp(this.options.outside)]/2:this.pointer.dimensions[this._getOpp(this.options.outside)]/2}}e*=this.options.position[this._getOpp(this.options.outside)]==this.pointer.alignAttribute?-1:1,e+=this.pointer.offset*(this.pointer.align==this._getOpp(this._getTL(this.pointer.align))?1:-1),this.pos[this._getTL(this._getOpp(this.pointer.xy))]+=e}return this.pos[this.options.attributes.x]+=this.options.offset.x,this.pos[this.options.attributes.y]+=this.options.offset.y,this.wrapper.css(this.pos),this._adjustPosition(),this}},b.prototype.open=function(b){if(b||(b={}),!this.wrapper&&this._create(),this.timer&&clearTimeout(this.timer),this._blockBodyClick(),this.isDisabled)return this;var c=function(){this.source&&this.options.getTitle&&void 0!=this.source.attr(this.options.getTitle)&&this.setTitle(this.source.attr(this.options.getTitle)),this.source&&this.options.getContent&&(void 0!=this.source.data("jBox-getContent")?this.setContent(this.source.data("jBox-getContent")):void 0!=this.source.attr(this.options.getContent)?this.setContent(this.source.attr(this.options.getContent)):null),this.position({target:b.target}),this.options.onOpen.bind(this)(),this.options._onOpen&&this.options._onOpen.bind(this)(),this.options.ajax&&(!this.ajaxLoaded||this.options.reload)&&this.ajax(),this.isClosing&&this._abortAnimation(),this.isOpen||(this.isOpen=!0,this._attachEvents(),this.options.blockScroll&&a("body").addClass("jBox-blockScroll-"+this.id),this.options.overlay&&this._addOverlay(),this.options.animation&&!this.isClosing&&this._animate("open"),this.options.fade?this.wrapper.stop().animate({opacity:1},{queue:!1,duration:this.options.fade,start:function(){this.isOpening=!0,this.wrapper.css({display:"block"})}.bind(this),always:function(){this.isOpening=!1}.bind(this)}):this.wrapper.css({display:"block",opacity:1}))}.bind(this);return!this.options.delayOpen||this.isOpen||this.isClosing||b.ignoreDelay?c():this.timer=setTimeout(c,this.options.delayOpen),this},b.prototype.close=function(b){if(b||(b={}),this.timer&&clearTimeout(this.timer),this._blockBodyClick(),this.isDisabled)return this;var c=function(){this.options.onClose.bind(this)(),this.isOpen&&(this.isOpen=!1,this._detachEvents(),this.options.blockScroll&&a("body").removeClass("jBox-blockScroll-"+this.id),this.options.overlay&&this._removeOverlay(),this.options.animation&&!this.isOpening&&this._animate("close"),this.source=null,this.options.fade?this.wrapper.stop().animate({opacity:0},{queue:!1,duration:this.options.fade,start:function(){this.isClosing=!0}.bind(this),complete:function(){this.wrapper.css({display:"none"}),this.options.onCloseComplete&&this.options.onCloseComplete.bind(this)(),this.options._onCloseComplete&&this.options._onCloseComplete.bind(this)()}.bind(this),always:function(){this.isClosing=!1}.bind(this)}):(this.wrapper.css({display:"none",opacity:0}),this.options._onCloseComplete&&this.options._onCloseComplete.bind(this)()))}.bind(this);return b.ignoreDelay?c():this.timer=setTimeout(c,Math.max(this.options.delayClose,10)),this},b.prototype.toggle=function(a){return this[this.isOpen?"close":"open"](a),this},b.prototype.disable=function(){return this.isDisabled=!0,this},b.prototype.enable=function(){return this.isDisabled=!1,this},b.prototype.ajax=function(b){return b||(b={}),this.ajaxRequest&&this.ajaxRequest.abort(),this.ajaxRequest=a.ajax({url:b.url||this.options.ajax,data:b.data||this.options.data,beforeSend:function(){this.content.html(""),this.wrapper.addClass("jBox-loading"),this.position(),this.options.onAjax.bind(this)()}.bind(this),complete:function(a){this.wrapper.removeClass("jBox-loading"),this.content.html(a.responseText),this.position(),this.ajaxLoaded=!0,this.options.onAjaxComplete.bind(this)()}.bind(this)}),this},b.prototype.destroy=function(){return this.close({ignoreDelay:!0}),this.wrapper.remove(),this},a.fn.jBox=function(c,d){return c||(c={}),d||(d={}),new b(c,a.extend(d,{attach:this}))},Function.prototype.bind||(Function.prototype.bind=function(a){var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d&&a?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e}),b}),swifty.define("js/components/tooltip/tooltip",["jquery","swiftylib/component","swiftylib/view","./jBox.min","css!./tooltip.css"],function(a,b,c,d){return b.extend({tag:"swc_tooltip",template:"",scope:{for_sel:"@",title:"@",text:"@",content_sel:"@",content_width:"@",ini:function(b){var c=this,e=b.parent().find(c.attr("for_sel"));"__parent"===c.attr("for_sel")&&(e=b.parent());var f=c.attr("text");c.attr("content_sel")&&(f=a(c.attr("content_sel")));var g={attach:e,title:c.attr("title"),content:f,width:200,reposition:!0,adjustTracker:!0,closeOnClick:!0};c.attr("content_sel")&&(g.closeOnMouseleave=!0),c.attr("content_width")&&(g.width=c.attr("content_width")),new d("Tooltip",g)}},events:{inserted:function(){this.scope.ini(this.element)}}})}),swifty.define("stache!js/components/form_input/form_input.stache",["can/../can"],function(a){var b="__stache_tmpl_"+"js/components/form_input/form_input.stache".split(".").join("_").split("/").join("_")+"_"+Date.now()+"_"+parseInt(1e6*Math.random())+"__";return a.view.mustache(b,'{{convertValues}}\n<div class="swifty_form_input_wrapper">\n    <label>\n        {{#if label}}\n        <div class="swifty_form_label">\n            {{__ label}}\n            {{#if tooltip}}\n                <div class="swifty_form_label_question_button">\n                    <i class="fa fa-question"></i>\n                    <swc_tooltip for_sel=".swifty_form_label_question_button" {{#if tooltip_title}}title="{{__ tooltip_title}}"{{/if}} text="{{__ tooltip}}" />\n                </div>\n            {{/if}}\n        </div>\n        {{/if}}\n        <div class="swifty_form_input swifty_form_input_{{typ}}">\n            {{#if hasMultipleValues}}\n                {{#if isSelect}}\n                    <select class="span{{cols}}" name="{{name}}" can-value="{{_value}}" style="width:100%;">\n                    {{#each vals}}\n                        <option value="{{v_val}}">{{v_text}}</option>\n                    {{/each}}\n                    </select>\n                {{else}}\n                    {{#each vals}}\n                        <div class="swifty_form_input_multiple {{#eq direction \'vertical\'}}swifty_form_direction_vertical{{/eq}} {{#if v_icon}}swifty_form_input_multi_compact{{/if}}">\n                            <label>\n                                <{{tag}} class="span{{cols}}" name="{{name}}" can-value="{{_value}}" value="{{v_val}}"/>\n                                <div class="swifty_form_input_replacement">\n                                    {{#eq typ \'radio\'}}\n                                        {{#if v_icon}}\n                                            <i class="fa {{v_icon}}"></i>\n                                        {{else}}\n                                            <div>\n                                                <div></div>\n                                            </div>\n                                        {{/if}}\n                                    {{/eq}}\n                                </div>\n                                {{#if v_text}}\n                                    <div class="swifty_form_input_text">\n                                        {{__ v_text}}\n                                    </div>\n                                {{/if}}\n                            </label>\n                        </div>\n                    {{/each}}\n                {{/if}}\n            {{else}}\n                <label>\n                    <{{tag}} class="span{{cols}}" name="{{name}}" can-value="{{_value}}"{{#eq typ \'checkbox\'}} can-true-value="1" can-false-value="0"{{/eq}} style="{{#eq preferred_width \'\'}}{{else}} width: {{preferred_width}}px;{{/eq}}"/>\n                    <div class="swifty_form_input_replacement">\n                        {{#eq typ \'checkbox\'}}\n                            <div>\n                                <i class="fa fa-check"></i>\n                            </div>\n                        {{/eq}}\n                    </div>\n                    {{#if text}}\n                        <div class="swifty_form_input_text">\n                            {{__ text}}\n                        </div>\n                    {{/if}}\n                {{/if}}\n            </label>\n        </div>\n    </label>\n</div>\n'),b}),swifty.define("css!js/components/form_input/form_input",[],function(){}),swifty.define("js/components/form_input/form_input",["jquery","swiftylib/component","swiftylib/view","stache!./form_input.stache","css!./form_input.css"],function(a,b,c,d){return b.extend({tag:"swifty_form_input",template:new c(d),scope:{tag:'input type="text"',typ:"text",label:"@",name:"@",text:"@",tooltip:"@",tooltip_title:"@",_value:"@",direction:"@",preferred_width:"@"},events:{},helpers:{convertValues:function(){var b=this,c=b.attr("values")+"";if(b.attr("values")&&/|/.test(c)){var d=c.split("|");b.attr("vals",[]),a.each(d,function(a,c){var d,e,f=c,g=c.split("^");g.length>1&&(f=g[0],d=g[1],e=g[2]),b.attr("vals").push({v_val:f,v_text:d,v_icon:e})}),b.attr("hasMultipleValues",!0)}else b.attr("hasMultipleValues",!1);b.attr("isSelect","select"===b.attr("typ"))}}})}),swifty.define("js/components/form_checkbox/form_checkbox",["../form_input/form_input"],function(a){return a.extend({tag:"swifty_form_checkbox",scope:{tag:'input type="checkbox"',typ:"checkbox",label:"@",values:"",name:"@",text:"@",tooltip:"@",tooltip_title:"@",_value:"@"}})}),swifty.define("js/components/form_radiobutton/form_radiobutton",["../form_input/form_input"],function(a){return a.extend({tag:"swifty_form_radiobutton",scope:{tag:'input type="radio"',typ:"radio",label:"@",values:"@",name:"@",text:"@",tooltip:"@",tooltip_title:"@",_value:"@",direction:"@"}})}),swifty.define("js/components/form_textarea/form_textarea",["../form_input/form_input"],function(a){return a.extend({tag:"swifty_form_textarea",scope:{tag:"textarea",typ:"textarea",label:"@",values:"",name:"@",text:"@",tooltip:"@",tooltip_title:"@",_value:"@"}})}),swifty.define("stache!js/components/colorpicker/colorpicker.stache",["can/../can"],function(a){var b="__stache_tmpl_"+"js/components/colorpicker/colorpicker.stache".split(".").join("_").split("/").join("_")+"_"+Date.now()+"_"+parseInt(1e6*Math.random())+"__";return a.view.mustache(b,'<input class="swifty_colorpicker_input" can-value="{color}" />\n<div class="swifty_colorpicker_none"><i class="fa fa-trash"></i></div>\n<div class="swifty_colorpicker_iris"></div>\n'),b}),swifty.define("css!js/components/colorpicker/colorpicker",[],function(){}),swifty.define("js/components/colorpicker/colorpicker",["jquery","../form_input/form_input","./../tooltip/jBox.min","swiftylib/view","swiftylib/map","stache!./colorpicker.stache","css!./colorpicker.css"],function(a,b,c,d,e,f){var g=0,h=void 0;return b.extend({tag:"swifty_colorpicker",scope:{tag:'input type="text"',typ:"text",label:"@",values:"@",name:"@",text:"@",tooltip:"@",tooltip_title:"@",_value:"@",colorpicker_id:"",colorpicker:void 0,ini:function(b){var i,j=this,k=b.find("input:first");j.attr("colorpicker_id","swifty_colorpicker_"+g++),k.css("display","none").after('<div id="'+j.colorpicker_id+'" class="swifty_colorpicker_preview"></div>'),i=b.find(".swifty_colorpicker_preview"),i.css("background-color",k.val()),new c("Confirm",{attach:a("#"+j.colorpicker_id),content:a('<div class="swifty_colorpicker_popup"></div>'),position:{x:"center",y:"top"},outside:"y",reposition:!0,adjustTracker:!0,adjustPosition:"move",pointer:"center",closeOnClick:"body",addClass:"swifty_colorpicker_popup_wrapper",onOpen:function(){h&&(h.close({ignoreDelay:!0}),h=null),h=this;var a=new e({color:k.val()});a.bind("change",function(a,b,c,d){i.css("background-color",d),k.val(d),k.trigger("keyup")});var b=new d(f,a);this.content.html(b),this.content.find(".swifty_colorpicker_none").on("click",function(){a.attr("color","")}),this.content.find(".swifty_colorpicker_input").iris({change:function(b,c){i.css("background-color",c.color.toString()),k.val(c.color.toString()),k.trigger("keyup"),a.attr("color",k.val())},width:200,hide:!1,border:!1,target:this.content.find(".swifty_colorpicker_iris")[0]}),j.attr("colorpicker",this),this.position()},onClose:function(){h=null,this.content&&this.content.find(".swifty_colorpicker_none").off("click")}})}},events:{inserted:function(){this.scope.ini(this.element)},removed:function(){if(void 0!==this.scope.attr("colorpicker")){var a=this.scope.attr("colorpicker");this.scope.attr("colorpicker",null),a.destroy()}}}})}),swifty.define("stache!js/components/form_link/form_link.stache",["can/../can"],function(a){var b="__stache_tmpl_"+"js/components/form_link/form_link.stache".split(".").join("_").split("/").join("_")+"_"+Date.now()+"_"+parseInt(1e6*Math.random())+"__";return a.view.mustache(b,'{{#if url_selectable}}\n   <swifty_form_radiobutton name="link_type" _value=\'{link_type}\' values="P^{{__ \'Page\'}}^|U^{{__ \'URL\'}}" label="{{__ \'Link to page or URL\'}}" class="swifty_form_line_below" />\n   {{#if is_url}}\n       <swifty_form_input name="url" _value=\'{url}\' label="{{__ \'URL\'}}" />\n   {{/if}}\n{{/if}}\n{{#if is_page}}\n    <swifty_form_select name="page_id" _value=\'{page_id}\' values="{{pages}}" label="{{__ \'Page\'}}" />\n{{/if}}'),b}),swifty.define("js/components/form_link/form_link",["jquery","../form_input/form_input","swiftylib/view","swiftylib/i18n/__","stache!./form_link.stache","swiftylib/map"],function(a,b,c,d,e,f){return b.extend({tag:"swifty_form_link",scope:{tag:'input type="text"',typ:"text",label:"@",values:"",name:"@",text:"@",tooltip:"@",tooltip_title:"@",_value:"@",url_selectable:"@",ini:function(b){var g=this,h=b.find("input:first"),i=b.find(".swifty_form_label:first");i.css("display","none"),h.css("display","none"),a.post(scc_data.ajax_url,{action:"swcreator_get_page_list",ajax_nonce:scc_data.ajax_nonce,id:scc_data.page_id},function(a){var b="",i=function o(a,b){var c,d,e="";
for(d=0;d<a.length;++d)c=a[d],c.menu?e=e+"|"+o(c.menu,b+"-"):(""!==e&&(e+="|"),e=e+c.id+"^"+b+c.title);return e},j="0"===g.attr("url_selectable")?d("All pages"):"";b="-1^"+j+"|"+i(a,"");var k=new f({is_page:!1,is_url:!1,link_type:"P",page_id:-1,url:h.val(),pages:b,url_selectable:"1"===g.attr("url_selectable"),label:g.attr("label")?g.attr("label"):_("Page")}),l=h.val(),m=l.split("^^^");m.length>2&&(k.attr("link_type",m[0]),k.attr("page_id",1*m[1]),k.attr("url",m[2])),k.attr("is_page","P"===k.attr("link_type")),k.attr("is_url","U"===k.attr("link_type")),k.bind("change",function(){var a=this.attr("url"),b=this.attr("link_type");k.attr("is_page","P"===b),k.attr("is_url","U"===b);var c=this.attr("page_id");h.val([b,c,a].join("^^^")),h.trigger("keyup")});var n=new c(e,k);h.after(n)})}},events:{inserted:function(){this.scope.ini(this.element)}}})}),swifty.define("js/components/form_select/form_select",["../form_input/form_input"],function(a){return a.extend({tag:"swifty_form_select",scope:{tag:"select",typ:"select",label:"@",values:"@",name:"@",text:"@",tooltip:"@",tooltip_title:"@",_value:"@"}})}),swifty.define("stache!js/components/icon_button/icon_button.stache",["can/../can"],function(a){var b="__stache_tmpl_"+"js/components/icon_button/icon_button.stache".split(".").join("_").split("/").join("_")+"_"+Date.now()+"_"+parseInt(1e6*Math.random())+"__";return a.view.mustache(b,'{{convertFAIcons}}\n<div class="swifty_form_input_wrapper">\n    <div class="swc_button swc_icon_button{{#if type}} swc_{{type}}{{/if}}{{#if action}} swc_{{action}}{{/if}}">\n        {{#if icon}}\n        <div class="swc_icon">\n            <span aria-hidden="true">{{icon}}</span>\n        </div>\n        {{/if}}\n        {{#if fa_icon}}\n        <div class="swc_icon">\n            <i class="fa {{fa_icon}}"></i>\n        </div>\n        {{/if}}\n        {{#if text}}\n        <div class="swc_text">\n            {{__ text}}\n        </div>\n        {{/if}}\n    </div>\n</div>'),b}),swifty.define("js/components/icon_button/icon_button",["jquery","swiftylib/component","swiftylib/view","stache!./icon_button.stache"],function(a,b,c,d){return b.extend({tag:"swc_icon_button",template:new c(d),scope:{icon:"@",text:"@",action:"@",type:"@"},events:{}})}),swifty.define("stache!js/components/column_icon/column_icon.stache",["can/../can"],function(a){var b="__stache_tmpl_"+"js/components/column_icon/column_icon.stache".split(".").join("_").split("/").join("_")+"_"+Date.now()+"_"+parseInt(1e6*Math.random())+"__";return a.view.mustache(b,'<div class="swc_column_icon">\n    <table>\n        <tr>\n        {{#each columns}}\n            <td width="{{width}}"></td>\n        {{/each}}\n        </tr>\n    </table>\n</div>'),b}),swifty.define("js/components/column_icon/column_icon",["jquery","swiftylib/component","swiftylib/view","stache!./column_icon.stache"],function(a,b,c,d){return b.extend({tag:"swc_column_icon",template:new c(d),viewModel:{cols:"@",define:{columns:{get:function(){var b=[];return a.each(this.attr("cols").split("-"),function(a,c){b.push({width:c+"%"})}),b}}}},events:{}})}),swifty.define("css!js/components/iconpicker/iconpicker",[],function(){}),swifty.define("js/components/iconpicker/iconpicker",["jquery","../form_input/form_input","./../tooltip/jBox.min","css!./iconpicker.css"],function(a,b,c){var d=0;return b.extend({tag:"swifty_iconpicker",scope:{tag:'input type="text"',typ:"text",label:"@",values:"@",name:"@",text:"@",tooltip:"@",tooltip_title:"@",_value:"@",iconpicker_id:"",iconpicker_dialog:void 0,ini:function(b){var e=this;e.iconpicker_id="swifty_iconpicker_"+d++;var f=b.find("input:first");f.css("display","none").after('<div id="'+e.iconpicker_id+'" class="swifty_iconpicker_preview"></div>');var g=b.find(".swifty_iconpicker_preview");g.html('<i class="fa '+f.val()+'"></i>'),g.css("background-color","#ffffff"),g.css("text-align","center"),a.post(scc_data.ajax_url,{action:"swcreator_get_fa_icon_list",ajax_nonce:scc_data.ajax_nonce,id:scc_data.page_id},function(b){var d='<div class="swifty_iconpicker_popup" id_picker="'+e.iconpicker_id+'" >'+b.content+"</div>";e.iconpicker_dialog=new c("Confirm",{attach:a("#"+e.iconpicker_id),content:d,position:{x:"center",y:"top"},width:420,height:300,adjustPosition:!0,outside:"y",closeOnClick:"body",closeOnMouseleave:!0,pointer:"center",addClass:"swifty_iconpicker_popup_wrapper",onCreated:function(){var b=this.content.find(".swifty_iconpicker_popup"),c=b.children("i");c.click(function(){var b=a(this),c=a("#"+b.parent().attr("id_picker")),d=c.parent().find("input:first");d.val(b.attr("class").substring(3)),c.html('<i class="fa '+d.val()+'"></i>'),d.trigger("keyup")}),this.position()}})})}},events:{inserted:function(){this.scope.ini(this.element)},removed:function(){if(this.scope.iconpicker_dialog)try{this.scope.iconpicker_dialog.detach(),this.scope.iconpicker_dialog.destroy()}catch(a){}}}})}),swifty.define("stache!js/components/dialog/dialog.stache",["can/../can"],function(a){var b="__stache_tmpl_"+"js/components/dialog/dialog.stache".split(".").join("_").split("/").join("_")+"_"+Date.now()+"_"+parseInt(1e6*Math.random())+"__";return a.view.mustache(b,'<div class="swc_dialog_wrapper">\n    <div class="swc_dialog_window swc_panel">\n        <div class="swc_dialog_header_pane">\n            <div class="swc_panel_title_icon">&#xe03d</div>\n            <div class="swc_title">\n                {{__ map.title}}\n            </div>\n            <div class="swc_back_button swc_button" ($click)=\'closeDialog(.)\'>\n                &#xe900;\n            </div>\n        </div>\n        <div class="swc_dialog_content_pane">\n            <div class="swc_dialog_content_pane_inner">\n                <div class="swc_dialog_content_pane_html">\n                    <content/>\n                    {{&map.html}}\n                </div>\n                {{#if map.show_iframe}}\n                    <iframe src="{{map.url}}" onload="jQuery( \'.swc_ifr_loading\' ).addClass( \'swc_ifr_l_hide\' );"></iframe>\n                    <div class="swc_ifr_loading"><i class="fa fa-spinner fa-spin fa-fw"></i></div>\n                {{/if}}\n            </div>\n            <div class="swc_content_gradient"></div>\n        </div>\n        <div class="swc_dialog_footer_pane {{#if map.small_header}}swc_dialog_ftr_small{{/if}}">\n            <div class="swc_dialog_footer_t">\n                {{#if map.show_checkbox_delete}}\n                    <swifty_form_checkbox name="swc_position" _value="map.checkbox_delete" text="{{__ \'Hide this message\'}}{{map.test}}" />\n                {{/if}}\n            </div>\n            {{#is map.total_nr 0}}\n            {{else}}\n                <div class="swc_panel_presets_choose_container">\n                    <div class="swc_button swc_dialog_previous" ($click)=\'previous(.)\'>\n                        <i class="fa fa-chevron-left"></i>\n                    </div>\n                    <div class="swc_title swc_preset_nr_tot">\n                        {{map.active_nr}}/{{map.total_nr}}\n                    </div>\n                    <div class="swc_button swc_dialog_next" ($click)=\'next(.)\'>\n                        <i class="fa fa-chevron-right"></i>\n                    </div>\n                </div>\n            {{/is}}\n        </div>\n    </div>\n</div>'),b}),swifty.define("css!js/components/dialog/dialog",[],function(){}),swifty.define("js/components/dialog/dialog",["jquery","swiftylib/evt","swiftylib/component","swiftylib/view","stache!js/components/dialog/dialog.stache","css!js/components/dialog/dialog.css","can/map/define"],function(a,b,c,d,e){return c.extend({tag:"swc_dialog",template:new d(e),viewModel:{map:"@",ini:function(c){c.on("click",".swc_dialog_click",function(c){b("dialog_action",{action:a(c.currentTarget).attr("data-swc_dialog_action"),data:a(c.currentTarget).attr("data-swc_dialog_data"),$el:a(c.currentTarget)})})},closeDialog:function(){b("dialog_close")},next:function(){b("dialog_next")},previous:function(){b("dialog_previous")}},events:{inserted:function(){this.scope.ini(this.element)}}})}),swifty.define("stache!js/components/form_color_default/form_color_default.stache",["can/../can"],function(a){var b="__stache_tmpl_"+"js/components/form_color_default/form_color_default.stache".split(".").join("_").split("/").join("_")+"_"+Date.now()+"_"+parseInt(1e6*Math.random())+"__";return a.view.mustache(b,'<swifty_form_radiobutton name="color_{{original_name}}" _value=\'{color_default}\' values="default^{{__ \'Default\'}}^|custom^{{__ \'Custom\'}}" label="{{original_label}}" class="swifty_form_line_below" />\n{{#if is_custom_color}}\n    <swifty_colorpicker movetoid="color_{{original_name}}_custom" name="custom_{{original_name}}" _value="{custom_color}" label="{{__ \'Custom color\'}}"/>\n{{/if}}\n'),b}),swifty.define("js/components/form_color_default/form_color_default",["jquery","../form_input/form_input","swiftylib/view","stache!./form_color_default.stache","swiftylib/map"],function(a,b,c,d,e){return b.extend({tag:"swifty_form_color_default",scope:{tag:'input type="text"',typ:"text",label:"@",values:"",name:"@",text:"@",tooltip:"@",tooltip_title:"@",_value:"@","default":"@",ini:function(a){var b=this,f=a.find("input:first"),g=a.find(".swifty_form_label:first");g.css("display","none"),f.css("display","none");var h=f.val(),i=new e({is_custom_color:!1,color_default:"default",custom_color:h,original_label:b.label,original_name:b.name});""===h?(i.attr("color_default","default"),i.attr("custom_color",b["default"]),i.attr("is_custom_color",!1)):(i.attr("color_default","custom"),i.attr("custom_color",h),i.attr("is_custom_color",!0)),i.bind("change",function(){"default"===i.attr("color_default")?(i.attr("is_custom_color",!1),f.val("")):(i.attr("is_custom_color",!0),f.val(i.attr("custom_color"))),f.trigger("keyup")});var j=new c(d,i);f.after(j)}},events:{inserted:function(){this.scope.ini(this.element)}}})}),swifty.define("css!js/panels/panel/panel",[],function(){}),swifty.define("js/panels/panel/panel",["jquery","swiftylib/evt","swiftylib/control","swiftylib/view","swiftylib/map","js/panels/panel_stack/panel_stack_instance","swiftylib/i18n/__","stache!js/panels/panel/panel.stache","js/components/panel_button/panel_button","js/components/tooltip/tooltip","js/components/form_input/form_input","js/components/form_checkbox/form_checkbox","js/components/form_radiobutton/form_radiobutton","js/components/form_textarea/form_textarea","js/components/colorpicker/colorpicker","js/components/form_link/form_link","js/components/form_select/form_select","js/components/icon_button/icon_button","js/components/column_icon/column_icon","js/components/iconpicker/iconpicker","js/components/dialog/dialog","js/components/form_color_default/form_color_default","css!js/panels/panel/panel.css"],function(a,b,c,d,e,f,g,h){return c.extend({defaults:{title:"???",panel_css_class:"",back_action:"",show_screen_size:!0,show_panel_extra:!1,show_save_panel:!1,is_easy_mode:!1,state_saving:0,save_leave_msg:g("Please do not leave the page while we are still saving the changes."),tmpl:h}},{init:function(){var c=this;c.options.show_save_panel="main"===scc_data.area,c.options.is_easy_mode="easy"===scc_data.swifty_gui_mode,c.options.map=new e({text_save_state:g("Saved"),save_panel_state:"swc_enabled",save_panel_tooltip:"",editor_visibility:+scc_data.editor_visibility?!1:!0,show_undo_redo:!0,show_main_menu:!1}),c.element.html(new d(c.options.tmpl)(c.options,{})),c.setStateSaving(0),c._super(),c.on(),b("check_can_undo_redo"),setTimeout(function(){b("fix_panel_heights",{redraw_element:a(c.element).find(".swc_panel_content_nowrap")})},1)},closePanel:function(){f.closePanel(this.element)},markCloseOnFocus:function(){this.element.addClass("swc_panel_marked_close")},setIFrameWidth:function(b){a("#swc_iframe").css("width",b)},".swc_back_button click":function(){this.closePanel()},"{window} click":function(b,c){if(b=a(c.target).closest(".swc_main_scrsize"),b.length>0){var d="";b.hasClass("swc_main_desktop")&&(d="100%",this.options.options_map.attr("mobile_view","desktop")),b.hasClass("swc_main_tablet")&&(d="768px",this.options.options_map.attr("mobile_view","tablet")),b.hasClass("swc_main_mobile")&&(d="320px",this.options.options_map.attr("mobile_view","mobile")),""!==d&&this.setIFrameWidth(d)}},".swc_main_undo click":function(){b("ckeditor_command",{command:"undo"})},".swc_main_redo click":function(){b("ckeditor_command",{command:"redo"})},".swc_main_editor click":function(){var a=this,c=this.options.map.attr("editor_visibility")?1:0;b("editor_visibility",{show_it:c}).then(function(b){a.setEditorVisibilityState(b)})},setEditorVisibilityState:function(a){var b=+a?!1:!0;this.options.map.attr("editor_visibility")!==b&&this.options.map.attr("editor_visibility",b)},"{window} evt_swc_reset_mobile_view":function(){this.setIFrameWidth("100%")},"{window} evt_swc_set_editor_visibility_state":function(a,b,c){this.setEditorVisibilityState(c.show_it)},"{window} evt_swc_editor_toolbar_minimize":function(a,b,c){this.animateCKEditorToggle(c.position_start)},animateCKEditorToggle:function(b){var c=a(".swc_panel_visible").find(".swc_main_editor");if(1===c.length){var d=c.offset(),e=d.left,f=d.top-a(window).scrollTop(),g={top:f+"px",left:e+"px",width:c.css("width"),height:c.css("height"),background:"#f0f0f0"},h=a('<div id="ckedit_toggler"></div>').appendTo("body");h.css(b),h.animate({opacity:.8},25,function(){h.animate(g,700,function(){h.animate({opacity:0},50,function(){h.remove()})})})}},"{window} evt_swc_animate_clipboard_copy":function(a,b,c){this.animateClipboardCopy(c.$element)},animateClipboardCopy:function(b){if(1===b.length){var c=b.offset(),d=c.left,e=c.top-a("#swc_iframe").contents().scrollTop(),f={top:e+"px",left:d+"px",width:b.css("width"),height:b.css("height"),opacity:0,background:"#f0f0f0",position:"fixed","z-index":10001},g=a(".swc_panel_visible").find(".swc_panel_button_add_content");if(1===g.length){c=g.offset(),d=c.left,e=c.top-a(window).scrollTop();var h={top:e+"px",left:d+"px",width:g.css("width"),height:g.css("height"),background:"#f0f0f0"},i=a('<div id="copy_content_toggler"></div>').appendTo("body");i.css(f),i.animate({opacity:.8},25,function(){i.animate(h,700,function(){i.animate({opacity:0},50,function(){i.remove()})})})}}},"{window} evt_swc_can_undo_redo":function(b,c,d){a(".swc_main_scrsize.swc_main_undo").toggleClass("swc_enabled",d.can_undo),a(".swc_main_scrsize.swc_main_redo").toggleClass("swc_enabled",d.can_redo)},setStateSaving:function(a){var b=this;if(this.options.state_saving!==a&&(this.options.state_saving=a,this.options.map))switch(2!==a?(b.options.map.attr("save_panel_state","swc_enabled"),b.options.map.attr("save_panel_tooltip",g("Manually saving is not necessary because all changes are automatically saved (but not yet published)."))):(b.options.map.attr("save_panel_state","swc_error"),b.options.map.attr("save_panel_tooltip",g("ATTENTION!!! There is a problem with saving this page. Try to click this button every 30 seconds until the button is no longer red. Also check if you still have a decent Internet connection. If you do not do this, you might lose your latest changes."))),a){case 0:this.options.map.attr("text_save_state",g("Saved"));break;case 1:this.options.map.attr("text_save_state",g("Saving..."));break;case 2:this.options.map.attr("text_save_state",g("Save failed"))}},setStateSavingStarted:function(){var a=this;a.setStateSaving(1),window.onbeforeunload=function(b){b=b||window.event;var c=a.options.save_leave_msg;return b&&(b.returnValue=c),c}},"{window} evt_swc_saving_throttled_started":function(){this.setStateSavingStarted()},"{window} evt_swc_saving_started":function(){this.setStateSavingStarted()},"{window} evt_swc_saving_done":function(a,b,c,d){var e=this;e.setStateSaving(0),window.onbeforeunload=null,d.resolve()},"{window} evt_swc_saving_failed":function(){var a=this;a.setStateSaving(2)}})}),swifty.define("js/panels/asset_base/asset_base",["jquery","swiftylib/evt","js/panels/panel/panel"],function(a,b,c){return c.extend({defaults:{asset_instance:void 0,mode:void 0}},{init:function(){var a=this,b=a.options.asset_instance;a.options.asset_data=b?b.getAssetData():{},a.options.ucname=b?b.getAssetNameTranslated():"",a.options.lcname=a.options.ucname?a.options.ucname.toLowerCase():"",a.options.is_block=b&&b.options&&b.options.is_block,a.options.show_add_p_tags=b&&b.options&&!b.options.in_grid,a._super()}})}),swifty.define("stache!js/panels/yes_no/yes_no.stache",["can/../can"],function(a){var b="__stache_tmpl_"+"js/panels/yes_no/yes_no.stache".split(".").join("_").split("/").join("_")+"_"+Date.now()+"_"+parseInt(1e6*Math.random())+"__";return a.view.mustache(b,'<div class="swc_panel_content_nowrap">\n    <swc_panel_button icon="{{no_icon}}" action="no" name="{{no_name}}"/>\n    <swc_panel_button icon="{{yes_icon}}" action="yes" name="{{yes_name}}"/>\n</div>\n'),b}),swifty.define("js/panels/yes_no/yes_no",["jquery","swiftylib/evt","js/panels/panel/panel","stache!./yes_no.stache"],function(a,b,c,d){return c.extend({defaults:{tmpl_content:d,title:"???",yes_name:"yes",no_name:"no",yes_icon:"&#xe033;",no_icon:"&#xe02f;"}},{".swc_panel_button_yes click":function(){b("yes",{evt_el:this.options.evt_el},this.options.evt_el)},".swc_panel_button_no click":function(){b("no",{},this.options.evt_el)},".swc_back_button click":function(){b("swifty_editor_set_cursor"),b("swifty_editor_set_asset_in_edit_mode"),this._super()}})}),swifty.define("stache!js/panels/move_asset/move_asset.stache",["can/../can"],function(a){var b="__stache_tmpl_"+"js/panels/move_asset/move_asset.stache".split(".").join("_").split("/").join("_")+"_"+Date.now()+"_"+parseInt(1e6*Math.random())+"__";return a.view.mustache(b,'<div class="swc_panel_content_nowrap">\n    <swc_panel_button icon="&#xe02d;" action="up" name="{{__ \'Up\'}}"/>\n    <swc_panel_button icon="&#xe02e;" action="down" name="{{__ \'Down\'}}"/>\n    <swc_panel_button icon="&#xe02f;" action="left" name="{{__ \'Left\'}}"/>\n    <swc_panel_button icon="&#xe030;" action="right" name="{{_ \'Right\'}}"/>\n</div>\n'),b}),swifty.define("js/panels/move_asset/move_asset",["jquery","swiftylib/evt","js/panels/panel/panel","swiftylib/i18n/__","stache!./move_asset.stache"],function(a,b,c,d,e){return c.extend({defaults:{tmpl_content:e,title:d("Move [lcname]"),title_tooltip:d("You can also move [t_type], by dragging the symbol at it's top right (when this panel is closed.)"),t_type:d("content")}},{"swc_panel_button click":function(a){b("swifty_editor_move_asset",{move:a.attr("action"),$asset:this.options.asset_instance.getAssetContainer()})},".swc_back_button click":function(){b("swifty_editor_set_cursor",{$asset:this.options.asset_instance.getAssetContainer()}),b("swifty_editor_set_asset_in_edit_mode"),this._super()},"{window} evt_swc_swifty_editor_set_position":function(b,c,d){var e=this.options.asset_instance.getAssetData(),f=this.options.asset_instance.getAssetContainer();e.attr("swc_swifty_on")&&a(d.el).is(f)&&(e.attr("swc_position",d.position),c.stopImmediatePropagation())}})}),swifty.define("stache!js/panels/asset_main/asset_main.stache",["can/../can"],function(a){var b="__stache_tmpl_"+"js/panels/asset_main/asset_main.stache".split(".").join("_").split("/").join("_")+"_"+Date.now()+"_"+parseInt(1e6*Math.random())+"__";return a.view.mustache(b,'<div class="swc_panel_content_nowrap">\n    <swc_panel_button icon="&#xe03f;" action="edit_asset" name="{{__ \'Edit [lcname]\'}}"/>\n    <swc_panel_button icon="fa-exchange" action="change_layout" name="{{__ \'Change layout\'}}"/>\n    <swc_panel_button icon="fa-paint-brush" action="change_style" name="{{__ \'Change style\'}}"/>\n    {{#if is_block}}\n    <swc_panel_button icon="&#xe013;" action="move_asset" name="{{__ \'Move [lcname]\'}}"/>\n    <swc_panel_button icon="fa-copy" action="copy_asset" name="{{__ \'Copy [lcname]\'}}"/>\n    {{/if}}\n    <swc_panel_button icon="&#xe00b;" action="delete_asset" name="{{__ \'Delete [lcname]\'}}"/>\n    {{#if show_lock_ui}}\n    {{#if map.swc_locked}}\n    <swc_panel_button icon="fa-lock" action="unlock_asset" name="{{__ \'[ucname] is now locked\'}}"/>\n    {{/if}}\n    {{#if map.swc_unlocked}}\n    <swc_panel_button icon="fa-unlock" action="lock_asset" name="{{__ \'[ucname] is now unlocked\'}}"/>\n    {{/if}}\n    {{/if}}\n    {{#if is_block}}\n    {{#if show_add_p_tags}}\n    <!--<swc_panel_button icon="&#xe902" action="insert_p_above_asset" name="{{__ \'Insert text above\'}}"/>-->\n    <!--<swc_panel_button icon="&#xe901" action="insert_p_below_asset" name="{{__ \'Insert text below\'}}"/>-->\n    {{/if}}\n    {{/if}}\n</div>\n'),b}),swifty.define("js/panels/asset_main/asset_main",["jquery","swiftylib/evt","js/diverse/page","js/panels/asset_base/asset_base","js/panels/panel_stack/panel_stack_instance","js/panels/yes_no/yes_no","js/panels/move_asset/move_asset","swiftylib/i18n/__","stache!js/panels/asset_main/asset_main.stache"],function(a,b,c,d,e,f,g,h,i){return d.extend({defaults:{tmpl_content:i,title:"[ucname]"}},{init:function(){this.options.show_lock_ui=scc_data.swifty_change_lock,this._super(),this.options.map.attr("swc_locked","1"===this.options.asset_data.attr("swc_locked")?!0:!1),this.options.map.attr("swc_unlocked","1"===this.options.asset_data.attr("swc_locked")?!1:!0),b("swifty_editor_set_asset_in_edit_mode",{$asset:this.options.asset_instance.getAssetContainer()}),this.options.mode&&"directedit"===this.options.mode&&(this.markCloseOnFocus(),a(".swc_panel_button_edit_asset").click()),this.options.mode&&"delete"===this.options.mode&&(this.markCloseOnFocus(),a(".swc_panel_button_delete_asset").click()),this.options.mode&&"move"===this.options.mode&&(this.markCloseOnFocus(),a(".swc_panel_button_move_asset").click())},".swc_panel_button_edit_asset click":function(){this.options.asset_instance.openEditPanel("edit")},".swc_panel_button_change_layout click":function(){this.options.asset_instance.openEditPanel("position")},".swc_panel_button_change_style click":function(){this.options.asset_instance.openEditPanel("style")},".swc_panel_button_delete_asset click":function(){this.yesNoPanel=e.addPanel(f,{title:h("Delete [lcname]?"),yes_name:h("Delete [lcname] permanently"),no_name:h("Cancel. Do not delete"),evt_el:a(this.element),lcname:this.options.lcname})},".swc_panel_button_lock_asset click":function(){this.options.asset_instance.setLocked(1),this.options.map.attr("swc_locked",!0),this.options.map.attr("swc_unlocked",!1)},".swc_panel_button_unlock_asset click":function(){this.options.asset_instance.setLocked(null),this.options.map.attr("swc_locked",!1),this.options.map.attr("swc_unlocked",!0)},".swc_panel_button_copy_asset click":function(){this.options.asset_instance.copyToDB()},".swc_panel_button_move_asset click":function(){e.addPanel(g,{asset_instance:this.options.asset_instance,lcname:this.options.lcname})}," evt_swc_yes":function(){b("swifty_editor_set_cursor",{$asset:this.options.asset_instance.getAssetContainer()}),b("swifty_editor_set_asset_in_edit_mode"),this.options.asset_instance.deleteAsset(),this.markCloseOnFocus(),this.yesNoPanel.closePanel()}," evt_swc_no":function(){this.yesNoPanel.closePanel()},".swc_back_button click":function(){b("swifty_editor_set_cursor",{$asset:this.options.asset_instance.getAssetContainer()}),b("swifty_editor_set_asset_in_edit_mode"),this._super()},".swc_panel_button_insert_p_above_asset click":function(){b("swifty_editor_insert_p_asset",{action:"above",$asset:this.options.asset_instance.getAssetContainer()})},".swc_panel_button_insert_p_below_asset click":function(){b("swifty_editor_insert_p_asset",{action:"below",$asset:this.options.asset_instance.getAssetContainer()})}})}),swifty.define("stache!js/panels/edit_asset/edit_asset.stache",["can/../can"],function(a){var b="__stache_tmpl_"+"js/panels/edit_asset/edit_asset.stache".split(".").join("_").split("/").join("_")+"_"+Date.now()+"_"+parseInt(1e6*Math.random())+"__";return a.view.mustache(b,'<div class="swc_panel_form_tabs_wrapper">\n    <div class="swc_panel_form_wrapper">\n        <div class="swc_panel_form_wrapper_inner">\n            <form class="swc_content_form swc_panel_content_nowrap" autocomplete="off">\n                <div class="swc_panel_form_tab_pane swc_panel_form_content swc_selected">\n                    {{#if editmap.tmpl_edit}}\n                        {{&renderStache editmap.tmpl_edit}}\n                    {{else}}\n                        <div class="swc_form_column">\n                            {{__ "One moment please..." }}\n                        </div>\n                    {{/if}}\n                </div>\n                {{#if is_block}}\n                <div class="swc_panel_form_tab_pane swc_panel_form_position">\n                {{#if asset_data.swc_swifty_on}}\n                    <div class="swc_form_column swc_form_inputs_w_100">\n                        <swifty_form_input name="swc_width" _value="asset_data.swc_width" label="{{__ \'Width (%)\'}}" />\n                        <swifty_form_radiobutton name="swc_position" _value="asset_data.swc_position" values="left^^fa-align-left|center^^fa-align-center|right^^fa-align-right" label="{{__ \'Align\'}}" />\n                    </div>\n                    <div class="swc_form_column swc_form_inputs_w_100">\n                        <swifty_form_input name="swc_margin_left" _value="asset_data.swc_margin_left" label="{{__ \'Margin left\'}}" />\n                        <swifty_form_input name="swc_margin_right" _value="asset_data.swc_margin_right" label="{{__ \'Margin right\'}}" />\n                    </div>\n                    <div class="swc_form_column swc_form_inputs_w_100">\n                        <swifty_form_input name="swc_margin_top" _value="asset_data.swc_margin_top" label="{{__ \'Margin top\'}}" />\n                        <swifty_form_input name="swc_margin_bottom" _value="asset_data.swc_margin_bottom" label="{{__ \'Margin bottom\'}}" />\n                    </div>\n                    <div class="swc_form_column swc_form_inputs_w_100">\n                        <swifty_form_input name="swc_padding_left" _value="asset_data.swc_padding_left" label="{{__ \'Padding left\'}}" />\n                        <swifty_form_input name="swc_padding_right" _value="asset_data.swc_padding_right" label="{{__ \'Padding right\'}}" />\n                    </div>\n                    <div class="swc_form_column swc_form_inputs_w_100">\n                        <swifty_form_input name="swc_padding_top" _value="asset_data.swc_padding_top" label="{{__ \'Padding top\'}}" />\n                        <swifty_form_input name="swc_padding_bottom" _value="asset_data.swc_padding_bottom" label="{{__ \'Padding bottom\'}}" />\n                    </div>\n                {{else}}\n                    <div class="swc_form_column" style="width: 300px;">\n                        <swc_icon_button icon="&#xe031;" action="enable_layout" text="{{__ \'Enable layout\'}}" />\n                        <div class="swifty_form_label">\n                            {{__ \'Adds the possibility to add layout (like padding, margin and alignment) to this item.\'}}\n                        </div>\n                    </div>\n                {{/if}}\n                </div>\n\n                <div class="swc_panel_form_tab_pane swc_panel_form_style">\n                {{#if asset_data.swc_swifty_on}}\n                    <div class="swc_form_column swc_form_inputs_w_100">\n                        <swifty_colorpicker name="swc_bg_color" _value="asset_data.swc_bg_color" label="{{__ \'Background color\'}}"/>\n                    </div>\n                    <div class="swc_form_column swc_form_inputs_w_100">\n                        <swifty_colorpicker name="swc_border_color" _value="asset_data.swc_border_color" label="{{__ \'Border color\'}}"/>\n                        <swifty_form_input name="swc_border_width" _value="asset_data.swc_border_width" label="{{__ \'Border width\'}}" />\n                    </div>\n                    <div class="swc_form_column swc_form_inputs_w_100">\n                        <swifty_colorpicker name="swc_shadow_color" _value="asset_data.swc_shadow_color" label="{{__ \'Shadow color\'}}"/>\n                        <swifty_form_input name="swc_shadow_blur" _value="asset_data.swc_shadow_blur" label="{{__ \'Shadow blur\'}}" />\n                    </div>\n                    <div class="swc_form_column swc_form_inputs_w_100">\n                        <swifty_form_input name="swc_shadow_offset_x" _value="asset_data.swc_shadow_offset_x" label="{{__ \'Shadow distance horizontal\'}}"/>\n                        <swifty_form_input name="swc_shadow_offset_y" _value="asset_data.swc_shadow_offset_y" label="{{__ \'Shadow distance vertical\'}}" />\n                    </div>\n                    <div class="swc_form_column">\n                        <swifty_form_radiobutton name="swc_scrolleffect" _value=\'asset_data.swc_scrolleffect\' values="none^{{__ \'None\'}}^|move^{{__ \'Move\'}}|fade^{{__ \'Fade\'}}|movefade^{{__ \'Move and fade\'}}" label="{{__ \'Scroll effect\'}}" direction="vertical"/>\n                    </div>\n                    {{#eq asset_data.swc_scrolleffect \'none\'}}\n                    {{else}}\n                        {{#eq asset_data.swc_scrolleffect \'move\'}}\n                            <div class="swc_form_column">\n                                <swifty_form_radiobutton name="swc_se_move_dir" _value=\'asset_data.swc_se_move_dir\' values="up^{{__ \'Up\'}}^|down^{{__ \'Down\'}}|left^{{__ \'Left\'}}|right^{{__ \'Right\'}}" label="{{__ \'Move direction\'}}" direction="vertical"/>\n                            </div>\n                        {{/eq}}\n                        {{#eq asset_data.swc_scrolleffect \'movefade\'}}\n                            <div class="swc_form_column">\n                                <swifty_form_radiobutton name="swc_se_move_dir" _value=\'asset_data.swc_se_move_dir\' values="up^{{__ \'Up\'}}^|down^{{__ \'Down\'}}|left^{{__ \'Left\'}}|right^{{__ \'Right\'}}" label="{{__ \'Move direction\'}}" direction="vertical"/>\n                            </div>\n                        {{/eq}}\n                        <div class="swc_form_column">\n                            <swifty_form_radiobutton name="swc_se_move_mot" _value=\'asset_data.swc_se_move_mot\' values="in^{{__ \'In\'}}^|out^{{__ \'Out\'}}|both^{{__ \'In and out\'}}" label="{{__ \'Action\'}}" direction="vertical"/>\n                        </div>\n                        {{#eq asset_data.swc_scrolleffect \'fade\'}}\n                            <div class="swc_form_column">\n                                <swifty_form_radiobutton name="swc_se_move_rev" _value=\'asset_data.swc_se_move_rev\' values="normal^{{__ \'Normal\'}}^|reverse^{{__ \'Reverse\'}}" label="{{__ \'Reverse\'}}" direction="vertical"/>\n                            </div>\n                        {{/eq}}\n                        {{#eq asset_data.swc_scrolleffect \'movefade\'}}\n                            <div class="swc_form_column">\n                                <swifty_form_radiobutton name="swc_se_move_rev" _value=\'asset_data.swc_se_move_rev\' values="normal^{{__ \'Normal\'}}^|reverse^{{__ \'Reverse\'}}" label="{{__ \'Reverse\'}}" direction="vertical"/>\n                            </div>\n                        {{/eq}}\n                        <div class="swc_form_column swc_form_inputs_w_100">\n                            <swifty_form_input name="swc_se_factor" _value="asset_data.swc_se_factor" label="{{__ \'Effect factor\'}}" />\n                            <swifty_form_input name="swc_se_offset" _value="asset_data.swc_se_offset" label="{{__ \'Effect offset\'}}" />\n                        </div>\n                    {{/eq}}\n                {{else}}\n                    <div class="swc_form_column" style="width: 300px;">\n                        <swc_icon_button icon="&#xe031;" action="enable_style" text="{{__ \'Enable style\'}}" />\n                        <div class="swifty_form_label">\n                            {{__ \'Adds the possibility to style this item.\'}}\n                        </div>\n                    </div>\n                {{/if}}\n                </div>\n                {{/if}}\n            </form>\n        </div>\n    </div>\n</div>\n'),b
}),swifty.define("stache!js/panels/edit_asset/edit_asset_tabs.stache",["can/../can"],function(a){var b="__stache_tmpl_"+"js/panels/edit_asset/edit_asset_tabs.stache".split(".").join("_").split("/").join("_")+"_"+Date.now()+"_"+parseInt(1e6*Math.random())+"__";return a.view.mustache(b,'{{#if is_block}}\n    <div class="swc_panel_form_tabs {{#is swifty_gui_mode \'advanced\'}}{{else}}swc_panel_frm_tabs_hidden{{/is}}">\n    <div class="swc_panel_form_tabs_inner">\n        <div class="swc_panel_form_tab swc_selected" data-swc_for=".swc_panel_form_content">{{__ "Content" }}</div>\n        <div class="swc_panel_form_tab" data-swc_for=".swc_panel_form_position">{{__ "Layout" }}</div>\n        <div class="swc_panel_form_tab" data-swc_for=".swc_panel_form_style">{{__ "Style" }}</div>\n    </div>\n</div>\n{{else}}\n    <div class="swc_panel_form_tabs" {{#is swifty_gui_mode \'advanced\'}}swc_panel_frm_tabs_hidden{{/is}} style="-webkit-flex-align:flex-start;-ms-flex-align:flex-start;-webkit-align-items:flex-start; align-items:flex-start;">\n        <div class="swc_panel_form_tabs_inner">\n            <div class="swc_panel_form_tab swc_selected" data-swc_for=".swc_panel_form_content" style="margin-top: 0;">{{__ "Content" }}</div>\n        </div>\n    </div>\n{{/if}}\n'),b}),swifty.define("css!js/panels/edit_asset/edit_asset",[],function(){}),swifty.define("js/panels/edit_asset/edit_asset",["jquery","swiftylib/evt","swiftylib/view","swiftylib/map","js/panels/asset_base/asset_base","swiftylib/i18n/__","stache!js/panels/edit_asset/edit_asset.stache","stache!js/panels/edit_asset/edit_asset_tabs.stache","js/diverse/utils","css!js/panels/edit_asset/edit_asset.css"],function(a,b,c,d,e,f,g,h,i){function j(){return i.updateQueryString("swcreator_ajax",!0,scc_data.view_url)}return e.extend({defaults:{tmpl_content:g,tmpl_tabs:h,title:f("Edit [lcname]"),swifty_gui_mode:scc_data.swifty_gui_mode}},{init:function(){var e=this;e.options.editmap=new d({tmpl_edit:void 0});var f=e.options.asset_instance.getShortcode();a.post(j(),{action:"get_asset_edit_stache",shortcode_name:f,id:scc_data.page_id,ajax_nonce:scc_data.ajax_nonce},function(d){d=a.parseJSON(d),e.options.asset_instance&&e.options.asset_instance.setDefaultAssetData(d.default_attributes);var g={},h=!1;if(a.each(d.default_attributes,function(a,b){e.options.asset_data.attr(a)||(g[a]=b,h=!0)}),e.options.asset_instance&&"swifty_text"===e.options.asset_instance.options.shortcode&&(g.swc_swifty_on=1,h=!0),e.options.asset_instance&&"1"===d.content_removep&&window.wp.editor&&window.wp.editor.removep){var i=e.options.asset_data.attr("content"),j=window.wp.editor.removep(i);i!==j&&(g.content=j,h=!0)}h&&e.options.asset_data.attr(g);var k="__stache_asset_"+f+"__";c.mustache(k,d.stache),e.options.editmap.attr("tmpl_edit",k),setTimeout(function(){b("fix_panel_heights",{redraw_element:a(e.element).find(".swc_panel_form_content")})},1),e.on_load_edit_stache()}),e._super(),e.options.map.attr("show_undo_redo",!1),a(".swc_panel_form_tab:first").click(),a('.swc_panel_form_tab[data-swc_for=".swc_panel_form_'+this.options.mode+'"]').click(),b("swifty_editor_set_focus",{focus:0}),b("swifty_editor_unlock_selection",{$asset:this.options.asset_instance.getAssetContainer()}),b("swifty_editor_set_asset_in_edit_mode",{$asset:this.options.asset_instance.getAssetContainer()})},".swc_back_button click":function(){b("swifty_editor_set_focus",{focus:1}),b("swifty_editor_set_cursor",{$asset:this.options.asset_instance.getAssetContainer()}),this._super()},".swc_panel_form_tab click":function(c){a(this.element).find(".swc_panel_form_tab").removeClass("swc_selected"),a(c).addClass("swc_selected"),a(this.element).find(".swc_panel_form_tab_pane").removeClass("swc_selected"),a(this.element).find(a(c).attr("data-swc_for")).addClass("swc_selected"),b("fix_panel_heights",{redraw_element:a(this.element).find(a(c).attr("data-swc_for"))})},".swc_enable_layout click":function(){this.enableSwiftyOn()},".swc_enable_style click":function(){this.enableSwiftyOn()},enableSwiftyOn:function(){var a=this.options.asset_instance.getAssetData();a.attr("swc_swifty_on",1)},on_load_edit_stache:function(){}})}),swifty.define("js/diverse/asset",["jquery","swiftylib/evt","swiftylib/control","swiftylib/map","js/panels/panel_stack/panel_stack_instance","js/panels/asset_main/asset_main","swiftylib/i18n/__","js/diverse/utils","js/panels/edit_asset/edit_asset","js/libs/mout/src/function/throttle"],function(a,b,c,d,e,f,g,h,i,j){return c.extend({defaults:{tmpl_content:void 0,asset_name:"_ unknown _",shortcode:void 0,asset_data:void 0,class_edit:i,onchange:void 0,force_close_tag:0,swc_shortcode_status:""}},{init:function(){var b=this;b.$myContainer=a(b.element).closest(".swc_asset,.swc_text"),b.previousAttributes=null;var c=b.getAssetDataFromElement();if(b.options.asset_data=new d(c),"_ unknown _"===b.options.asset_name)if(b.options.shortcode){b.options.asset_name=b.options.shortcode;var e=b.createShortcodeText(c);b.options.asset_data.swc_shortcode_text=e,b.previousAttributes=b.parseShortCode(e),b.previousAttributes?b.parsed_shortcode_valid():b.parsed_shortcode_invalid()}else b.options.asset_name="unknown";b._super(),"swifty_text"!==b.options.shortcode&&(b.reloadFromServerNowThrottledObject=j(a.proxy(b.reloadFromServerNow,b),3e3)),b.on()},parsed_shortcode_valid:function(){this.options.asset_data.attr("swc_shortcode_status",g("Valid shortcode"))},parsed_shortcode_invalid:function(){this.options.asset_data.attr("swc_shortcode_status",g("Invalid shortcode"))},openMainPanel:function(a){e.resetPanelStack({left:!0}),e.addPanel(f,{asset_instance:this,mode:a})},openEditPanel:function(a){var b=this;e.addPanel(b.options.class_edit,{asset_instance:b,mode:a})},resizeToCurrentWidth:function(){var c,d=this;if(c="center"===d.options.asset_data.attr("swc_position")?d.getAssetContainerContent():d.getAssetContainer(),c.length){var e=Math.ceil(100*c.width()/c.offsetParent().width());d.changePositionAndWidth("",e);var f=c.find("img[swifty_src_org]").filter(":not([swifty_src])");f.length&&(a.each(f,function(a,b){b.setAttribute("swifty_src",b.getAttribute("swifty_src_org"))}),b("add_exec",{fn:"swifty_checkImages"})),b("swifty_editor_trigger_save",{})}},setLocked:function(a){var c=this;c.setAssetDataElement("swc_locked",a?"1":""),a?c.getAssetContainer().addClass("swc_locked"):c.getAssetContainer().removeClass("swc_locked"),b("swifty_editor_trigger_save",{})},copyToDB:function(){var a=this;b("animate_clipboard_copy",{$element:a.$myContainer}),b("convert_from_element_html",{$element:a.$myContainer}).done(function(c){b("swifty_copy_content_to_db",{content:c,source:a.options.shortcode})})},getAssetData:function(){return"swifty_text"===this.options.shortcode&&this.options.asset_data.attr("swc_swifty_on",1),this.options.asset_data},resetDefaultAssetData:function(){this.defAssetData={swc_margin_top:5,swc_margin_bottom:5,swc_margin_left:10,swc_margin_right:0,swc_padding_top:0,swc_padding_bottom:0,swc_padding_left:0,swc_padding_right:0,swc_position:"right",swc_width:50,swc_bg_color:"",swc_border_color:"",swc_border_width:0,swc_shadow_color:"",swc_shadow_offset_x:0,swc_shadow_offset_y:0,swc_shadow_blur:0,swc_temporary:"",swc_locked:"",swc_scrolleffect:"none",swc_se_factor:1,swc_se_offset:0,swc_se_move_dir:"up",swc_se_move_mot:"in",swc_se_move_rev:"normal"}},getDefaultAssetData:function(a){var b=this;return b.defAssetData||b.resetDefaultAssetData(),a?b.defAssetData[a]:b.defAssetData},setDefaultAssetData:function(b){var c=this;c.defAssetData||c.resetDefaultAssetData(),a.each(b,function(a,b){c.defAssetData[a]=b})},htmlDecode:function(b){return a("<textarea/>").html(b).text()},createShortcodeText:function(b){var c=this,d=c.getDefaultAssetData(),e={};a.each(b,function(a,b){"undefined"==typeof d[a]&&"swc_swifty_on"!==a&&"swc_cssid"!==a&&"swc_shortcode_status"!==a&&(e[a]=b)});var f="",g="";a.each(e,function(a,b){"content"===a?g=b:parseFloat(a)===a>>>0?f+=" "+b:"swc_shortcode"!==a&&(f+=" "+a+'="'+b+'"')});var h="["+e.swc_shortcode+f+"]";return(g||c.options.force_close_tag)&&(h+=g+"[/"+e.swc_shortcode+"]"),h},getAssetDataFromElement:function(){var b,c=this,d=c.getAssetContainerContent();return d.length>0&&(b=a.parseJSON(h.atou(d.attr("data-asset_data")))),b||(b={}),b},getAssetName:function(){return this.options.asset_name?this.options.asset_name:this.shortcode},getShortcode:function(){return this.options.shortcode},getAssetNameTranslated:function(){var a=this.getAssetName();return a=a.replace(/_/g," "),a=a.charAt(0).toUpperCase()+a.slice(1),g(a)},getAssetContainer:function(){return this.$myContainer},getAssetContainerContent:function(){var a=this.getAssetContainer();return a.children(".swc_asset_cntnt")},assignCss:function(){var b=this,c=b.getAssetDataFromElement(),d=b.getDefaultAssetData();a.each(d,function(a,d){b.handleAttributeAssignment(a,c[a]?c[a]:d)})},handleAttributeAssignment:function(b,c){var d=!0,e=this;switch(b){case"swc_position":e.changePositionAndWidth(c,-1);break;case"swc_width":e.changePositionAndWidth("",c);break;case"swc_margin_left":e.changeAttrPx("margin-left",b,c,!1);break;case"swc_margin_right":e.changeAttrPx("margin-right",b,c,!1);break;case"swc_margin_top":e.changeAttrPx("margin-top",b,c,!1);break;case"swc_margin_bottom":e.changeAttrPx("margin-bottom",b,c,!1);break;case"swc_padding_top":e.changeAttrPx("padding-top",b,c,!0);break;case"swc_padding_bottom":e.changeAttrPx("padding-bottom",b,c,!0);break;case"swc_padding_left":e.changeAttrPx("padding-left",b,c,!0);break;case"swc_padding_right":e.changeAttrPx("padding-right",b,c,!0);break;case"swc_bg_color":e.changeAttrColor("background-color",b,c,!0);break;case"swc_border_color":case"swc_border_width":e.changeBorder(b,c);break;case"swc_shadow_color":case"swc_shadow_blur":case"swc_shadow_offset_x":case"swc_shadow_offset_y":e.changeShadow(b,c);break;case"swc_scrolleffect":case"swc_se_factor":case"swc_se_offset":case"swc_se_move_dir":case"swc_se_move_mot":case"swc_se_move_rev":e.changeScrolleffect(b,c);break;case"swc_shortcode_text":try{var f=e.parseShortCode(c);if(f){var g=e.options.asset_data;g.attr({swc_shortcode:f.name,content:f.content}),g.attr(f.attributes),e.previousAttributes&&e.previousAttributes.attributes&&a.each(e.previousAttributes.attributes,function(a){f.attributes[a]||g.removeAttr(a)}),e.previousAttributes=f.attributes,e.parsed_shortcode_valid()}else e.parsed_shortcode_invalid()}catch(h){e.parsed_shortcode_invalid()}d=!1;break;default:d=!1}return d&&e.setAssetDataElement("swc_temporary",""),d},"{asset_data} change":function(a,b,c,d,e,f){var g,h=this;"swc_position"===c&&("right"===e&&("left"===f||"center"===f)||"left"===e&&("right"===f||"center"===f))&&(g=h.options.asset_data,g.attr({swc_margin_left:g.attr("swc_margin_right"),swc_margin_right:g.attr("swc_margin_left")})),"swc_shortcode_status"!==c&&(h.handleAttributeAssignment(c,e)||"undefined"!=typeof h.reloadFromServerNowThrottledObject&&this.reloadFromServer())},reloadFromServer:function(){var a=this,c=new Date,d=c.getTime();b("asset_reload_from_server_queued",{container:a.getAssetContainer(),refreshnr:d}),this.reloadFromServerNowThrottledObject()},reloadFromServerNow:function(){var a=this,c=new Date,d=c.getTime();b("asset_data_changed",{container:a.getAssetContainer(),asset_data:a.options.asset_data,refreshnr:d}).then(function(b){a.processServerInfo(b.info)})},processServerInfo:function(){this.options.onchange&&a.each(this.options.onchange,function(a,c){"checkimages"===c&&b("add_exec",{fn:"swifty_checkImages"})})},changeBorder:function(a,b){var c,d=this;"swc_border_color"===a?(c=b,d.changeAttrColor("",a,b,!0)):c=d.options.asset_data.attr("swc_border_color"),""===c&&(c="transparent");var e;"swc_border_width"===a?(e=b,d.changeAttrPx("",a,b,!0)):e=d.options.asset_data.attr("swc_border_width"),d.changeAttrColor("border-color","",c,!0),d.changeAttrPx("border-width","",e,!0),d.changeAttr("solid","border-style","","solid",!0)},changeShadow:function(a,b){var c,d=this;"swc_shadow_color"===a?(c=b,d.changeAttrColor("",a,b,!0)):c=d.options.asset_data.attr("swc_shadow_color"),""===c&&(c="transparent");var e;"swc_shadow_blur"===a?(b=b||0,e=b,d.changeAttrPx("",a,b,!0)):e=d.options.asset_data.attr("swc_shadow_blur")||0;var f;"swc_shadow_offset_x"===a?(b=b||0,f=b,d.changeAttrPx("",a,b,!0)):f=d.options.asset_data.attr("swc_shadow_offset_x")||0;var g;"swc_shadow_offset_y"===a?(b=b||0,g=b,d.changeAttrPx("",a,b,!0)):g=d.options.asset_data.attr("swc_shadow_offset_y")||0,(0!==parseInt(f,10)||0!==parseInt(g,10))&&d.changeAttr(f+"px "+g+"px "+e+"px "+c,"box-shadow","","",!0),0===parseInt(f,10)&&0===parseInt(g,10)&&d.changeAttr("","box-shadow","","",!0)},changeScrolleffect:function(a,c){var d=this,e=d.getAssetContainer(),f=d.options.asset_data;d.changeAttr("","",a,c,!1),b("swifty_reset_scrolleffect",2);var g=f.attr("swc_scrolleffect");if("none"===g)e.removeAttr("data-swc_scrolleffect");else{var h={effect:g,factor:f.attr("swc_se_factor"),offset:f.attr("swc_se_offset"),direction:f.attr("swc_se_move_dir"),motion:f.attr("swc_se_move_mot"),reverse:f.attr("swc_se_move_rev")};e.attr("data-swc_scrolleffect",JSON.stringify(h))}b("swifty_update_scrolleffect")},changeAttr:function(a,c,d,e,f){var g=this,h=g.getAssetContainer();""!==d&&g.setAssetDataElement(d,e),f&&(h=g.getAssetContainerContent());var i=!0;("swc_margin_left"===d||"swc_margin_right"===d)&&("center"===g.options.asset_data.attr("swc_position")||100===parseInt(g.options.asset_data.attr("swc_width"),10))&&(i=!1),i&&h.css(c,a),b("swifty_editor_trigger_save",{})},changeAttrPx:function(a,b,c,d){var e=parseInt(c,10);!e>0&&(e=0),e+="px",this.changeAttr(e,a,b,c,d)},changeAttrPercent:function(a,b,c,d){var e=parseInt(c,10);!e>0&&(e=0),e+="%",this.changeAttr(e,a,b,c,d)},changeAttrColor:function(a,b,c,d){var e=c;""===c&&(e="transparent"),this.changeAttr(e,a,b,c,d)},changePositionAndWidth:function(c,d){var e,f=this,g=f.getAssetContainer(),h=f.getAssetContainerContent(),i=a(g[0].parentNode);""===c&&(c=f.options.asset_data.attr("swc_position"),c||(c=f.getDefaultAssetData("swc_position"))),d=parseInt(d,10),-1===d&&(d=parseInt(f.options.asset_data.attr("swc_width"),10),d||(d=f.getDefaultAssetData("swc_width"))),"center"===c||100===d?(e={clear:"both"},i.css(e),e={width:"100%",clear:"both","margin-left":0,"margin-right":0,"float":"none"},g.css(e),e={"margin-left":"auto","margin-right":"auto",width:d+"%"},h.css(e)):(e={width:"100%","margin-left":0,"margin-right":0},h.css(e),e={width:d+"%",clear:"none","margin-left":f.options.asset_data.attr("swc_margin_left")+"px","margin-right":f.options.asset_data.attr("swc_margin_right")+"px","float":c},g.css(e),e={clear:"none"},i.css(e)),f.setAssetDataElement("swc_position",c),f.setAssetDataElement("swc_width",d),b("asset_was_resized"),b("swifty_editor_trigger_save",{})},setAssetDataElement:function(b,c){var d=this,e=d.getAssetContainerContent(),f=a.parseJSON(h.atou(e.attr("data-asset_data")));f||(f={});var g=d.getDefaultAssetData(b);"swc_width"===b||""+g!=""+c?f[b]=""+c:f[b]&&delete f[b],e.attr("data-asset_data",h.utoa(JSON.stringify(f)))},deleteAsset:function(){var a=this,c=a.getAssetContainer(),d=c.closest(".cke_widget_wrapper");d.remove(),b("swifty_editor_content_modified")},parseShortCode:function(a){for(var b,c,d,e,f=/(\s+|\W)|(\w+)/g,g="",h="NOT STARTED",i=0,j={name:"",attributes:{},content:""};null!=(b=f.exec(a))&&!e;)switch(c=b[0],h){case"NOT STARTED":"["===c&&(h="GETNAME");break;case"GETNAME":/\s/.test(c)?j.name&&(h="PARSING"):"]"===c?(h="CLOSED",e=b.index):j.name+=c;break;case"PARSING":if("]"===c)h="CLOSED",g&&(j.attributes[i++]=g,g=""),e=b.index;else if("="===c){if(!g)throw'invalid token: "'+c+'" encountered at '+b.index;h="GET ATTRIBUTE VALUE"}else/\s/.test(c)?g&&(h="SET ATTRIBUTE"):g+=c;break;case"CLOSED":break;case"SET ATTRIBUTE":/\s/.test(c)?j.attributes[g]=null:"="===c?h="GET ATTRIBUTE VALUE":(j.attributes[i++]=g,g=c,h="PARSING");break;case"GET ATTRIBUTE VALUE":/\s/.test(c)||(/["']/.test(c)?(d=c,j.attributes[g]="",h="GET QUOTED ATTRIBUTE VALUE"):(j.attributes[g]=c,g="",h="PARSING"));break;case"GET QUOTED ATTRIBUTE VALUE":/\\/.test(c)?h="ESCAPE VALUE":c===d?(h="PARSING",g=""):j.attributes[g]+=c;break;case"ESCAPE VALUE":j.attributes[g]+=/\\'"/.test(c)?c:"\\"+c,h="GET QUOTED ATTRIBUTE VALUE"}if(g&&!j.attributes[g]&&(j.attributes[g]=""),"CLOSED"===h){var k=a.substr(e+1);if(k){var l="[/"+j.name+"]",m=k.toLowerCase().indexOf(l.toLowerCase());if(-1===m)return!1;j.content=k.substr(0,m)}return j}return!1}})}),swifty.define("stache!js/panels/overlay_panel/overlay_panel.stache",["can/../can"],function(a){var b="__stache_tmpl_"+"js/panels/overlay_panel/overlay_panel.stache".split(".").join("_").split("/").join("_")+"_"+Date.now()+"_"+parseInt(1e6*Math.random())+"__";return a.view.mustache(b,'<div class="swc_panel swc_overlay_panel {{panel_css_class}}">\n    <div class="swc_panel_container">\n        <div class="swc_panel_content">\n            {{#if tmpl_content}}\n                {{&renderStache tmpl_content}}\n            {{/if}}\n        </div>\n        <div class="clearfix"></div>\n        <div class="swc_iframe_gradient"></div>\n    </div>\n\n    <div class="swc_panel_bottom_container">\n        <div class="swc_panel_back_container {{#eq back_action \'exit\'}}swc_back_exit{{/eq}}">\n            <div class="swc_back_button swc_button">\n                {{#eq panel_css_class \'swc_small_panel\'}}\n                    &#xe900;\n                {{else}}\n                    <i class="fa fa-chevron-left"></i>\n                {{/eq}}\n            </div>\n        </div>\n\n        <div class="swc_panel_title_container">\n            <div class="swc_panel_title_pos">\n                <div class="swc_title">\n                    {{__ title}}\n                    {{#if title_tooltip}}\n                        <i class="fa fa-question"></i>\n                        <swc_tooltip for_sel=".swc_title" {{#if title_tooltip_title}}title="{{__ title_tooltip_title}}"{{/if}} text="{{__ title_tooltip}}" />\n                    {{/if}}\n                </div>\n            </div>\n        </div>\n    </div>\n</div>'),b}),swifty.define("css!js/panels/overlay_panel/overlay_panel",[],function(){}),swifty.define("js/panels/overlay_panel/overlay_panel",["js/panels/panel/panel","stache!js/panels/overlay_panel/overlay_panel.stache","css!js/panels/overlay_panel/overlay_panel.css"],function(a,b){return a.extend({defaults:{tmpl:b}},{})}),swifty.define("stache!js/panels/add_content/add_content.stache",["can/../can"],function(a){var b="__stache_tmpl_"+"js/panels/add_content/add_content.stache".split(".").join("_").split("/").join("_")+"_"+Date.now()+"_"+parseInt(1e6*Math.random())+"__";return a.view.mustache(b,'<div class="swc_panel_content_wrap">\n    {{#each category_defs}}\n        <div class="swc_panel_category_title">{{name}}</div>\n        {{#eq action \'content_tmpl\'}}\n            <swc_panel_button icon="{{icon}}" action="{{action}}" name="{{name}}" />\n        {{else}}\n        <div class="swc_panel_category_wrapper swc_panel_category_wrapper_{{action}}"></div>\n        {{/eq}}\n    {{/each}}\n</div>\n'),b}),swifty.define("stache!js/panels/simple_panel/simple_panel.stache",["can/../can"],function(a){var b="__stache_tmpl_"+"js/panels/simple_panel/simple_panel.stache".split(".").join("_").split("/").join("_")+"_"+Date.now()+"_"+parseInt(1e6*Math.random())+"__";return a.view.mustache(b,"{{#if tmpl_content}}\n    {{&renderStache tmpl_content}}\n{{/if}}\n"),b}),swifty.define("css!js/panels/simple_panel/simple_panel",[],function(){}),swifty.define("js/panels/simple_panel/simple_panel",["js/panels/panel/panel","stache!js/panels/simple_panel/simple_panel.stache","css!js/panels/simple_panel/simple_panel.css"],function(a,b){return a.extend({defaults:{tmpl:b}},{})}),swifty.define("stache!js/panels/add_shortcode/add_shortcode.stache",["can/../can"],function(a){var b="__stache_tmpl_"+"js/panels/add_shortcode/add_shortcode.stache".split(".").join("_").split("/").join("_")+"_"+Date.now()+"_"+parseInt(1e6*Math.random())+"__";return a.view.mustache(b,'<div class="swc_panel_form_wrapper">\n    <div class="swc_panel_form_wrapper_inner">\n        <form class="swc_content_form swc_panel_content_nowrap" autocomplete="off">\n            <div class="swc_form_column">\n                <swifty_form_textarea name="shortcode_text" _value="map.shortcode_text" preferred_width="500" label="{{__ \'Shortcode text\'}}"/>\n            </div>\n            <div class="swc_form_column">\n                <swc_icon_button action="insert" text="{{__ \'Insert Shortcode\'}}"/>\n            </div>\n        </div>\n    </div>\n</div>\n'),b}),swifty.define("js/panels/add_shortcode/add_shortcode",["jquery","swiftylib/evt","js/panels/panel/panel","swiftylib/i18n/__","stache!./add_shortcode.stache"],function(a,b,c,d,e){return c.extend({defaults:{tmpl_content:e,title:d("Shortcode"),wrap_at_bottom:!1,$column:null}},{init:function(){var a=this;a._super(),a.options.map.attr("shortcode_text",""),b("swifty_editor_set_focus",{focus:0})},".swc_icon_button.swc_insert click":function(){var c=this;c.closePanel();var d=new a.Deferred,e=c.options.wrap_at_bottom,f=c.options.$column?!0:!1;d.done(function(){var a=c.options.map.attr("shortcode_text");e&&(a="[swifty_grid_row][swifty_grid_column]"+a+"[/swifty_grid_column][/swifty_grid_row]"),b("convert_preset_html",{html:a}).then(function(a){b("add_asset_to_content",{html:a,widget_class:null,inline:!(e||f),takeSnapshot:!0,only_insert_at_root:!1,force_html_insert:!0,$column:f?c.options.$column:null,is_preset:e}).then(function(a){a&&1===a.length&&b("scroll_to_element",{$el:a})})})}),f?b("set_column_range_for_insert",{$column:c.options.$column}).done(function(){d.resolve()}):d.resolve()}})}),swifty.define("stache!js/panels/add_asset/add_asset.stache",["can/../can"],function(a){var b="__stache_tmpl_"+"js/panels/add_asset/add_asset.stache".split(".").join("_").split("/").join("_")+"_"+Date.now()+"_"+parseInt(1e6*Math.random())+"__";return a.view.mustache(b,'<div class="swc_panel_add_asset">\n    {{#each asset_defs}}\n        {{#eq hide \'_HIDE_\'}}\n        {{else}}\n            {{#if is_shortcode}}\n                <swc_panel_button icon="{{icon}}" action="add_asset_{{shortcode}}" name="{{name}}" shortcode="{{shortcode}}" data-asset_type="{{shortcode}}" width="{{width}}" data-inline="{{inline}}" ribbon_paid="{{paid}}" ribbon_coming="{{coming}}" ribbon_expired="{{expired}}" />\n            {{else}}\n                <swc_panel_button icon="{{icon}}" action="{{action}}" name="{{name}}" />\n            {{/if}}\n        {{/eq}}\n    {{/each}}\n</div>\n'),b}),swifty.define("stache!js/panels/buy/buy.stache",["can/../can"],function(a){var b="__stache_tmpl_"+"js/panels/buy/buy.stache".split(".").join("_").split("/").join("_")+"_"+Date.now()+"_"+parseInt(1e6*Math.random())+"__";return a.view.mustache(b,'<swc_dialog {(map)}="map"></swc_dialog>'),b}),swifty.define("js/panels/buy/buy",["jquery","swiftylib/evt","swiftylib/control","swiftylib/view","swiftylib/map","swiftylib/i18n/__","stache!js/panels/buy/buy.stache"],function(a,b,c,d,e,f,g){return c.extend({defaults:{tmpl:g,map:new e({title:f("Unlock more Super Powers"),show_iframe:!0,total_nr:0,url:"",small_header:!0})}},{init:function(){var a=this;a.options.map.attr("url",a.options.dialog_data.attr("url")),a.element.html(new d(a.options.tmpl)(a.options,{})),a._super(),b("swifty_editor_set_focus",{focus:0})},"{window} evt_swc_dialog_close":function(){b("swifty_editor_set_focus",{focus:1}),a(this.element).remove()}})}),swifty.define("js/panels/add_asset/add_asset",["jquery","swiftylib/evt","swiftylib/map","js/panels/simple_panel/simple_panel","js/panels/add_shortcode/add_shortcode","swiftylib/i18n/__","js/diverse/utils","stache!js/panels/add_asset/add_asset.stache","js/panels/panel_stack/panel_stack_instance","js/panels/buy/buy"],function(a,b,c,d,e,f,g,h,i,j){return d.extend({defaults:{tmpl_content:h,title:f("Add content"),$column:null,locked:!1,allowance:"",wrap_at_bottom:!1}},{init:function(){var a=this;b("get_assets").then(function(b){a.options.asset_defs={},b.each(function(b){var c=a.options.category;c&&""!==c&&b.attr("name").toLowerCase()!==c.toLowerCase()||(b.attr("assets").each(function(b){b.attr(b.attr("shortcode")?a._getAssetDef(b.attr("shortcode"),b):a._getAssetDef("",b));var c=0;"paste_content"===b.attr("shortcode")&&(scc_data.is_content_clipboard_available||(c=1)),"insize_text_asset"===a.options.allowance?"swifty_text"===b.attr("shortcode")&&(c=1):(b.attr("shortcode")||(c=1),"swifty_bloglist"===b.attr("shortcode")&&"page"!==scc_data.post_type&&(c=1)),b.attr("hide",1===c?"_HIDE_":"")}),a.options.asset_defs=b.attr("assets"))}),a._super()})},".swc_panel_button click":function(d){var h=this;d=d.closest("swc_panel_button");var k=d.attr("data-asset_type"),l=d.attr("shortcode"),m="true"===d.attr("data-inline"),n=m?"span":"div",o=d.attr("ribbon_expired")&&""!==d.attr("ribbon_expired"),p="";if("scvp"===d.attr("ribbon_coming")&&(p="https://www.swifty.online/plugins_inbox/scc/visuals-pack-upsell/?rss3=asst1&swifty_mode=view&swifty_site="+scc_data.home_url),"scgp"===d.attr("ribbon_coming")&&(p="https://www.swifty.online/plugins_inbox/scc/goodies-pack-upsell/?rss3=asst2&swifty_mode=view&swifty_site="+scc_data.home_url),o)alert("Content element is not available without valid license: "+d.attr("ribbon_expired"));else if(""!==p)new j(a("<div></div>").appendTo("body"),{dialog_data:new c({url:p})});else if(l&&"add_shortcode"===l)h.closePanel(),i.addPanel(e,{wrap_at_bottom:h.options.wrap_at_bottom,$column:h.options.$column});else if(l&&"paste_content"===l)h.closePanel(),b("swifty_copy_content_from_db").done(function(a){if(a){var c=h.options.wrap_at_bottom||"row"===a.source||!h.options.$column&&"swifty_text"===a.source;c&&"row"!==a.source&&(a.content="[swifty_grid_row][swifty_grid_column]"+a.content+"[/swifty_grid_column][/swifty_grid_row]"),b("convert_preset_html",{html:a.content}).then(function(d){b("add_asset_to_content",{html:d,widget_class:"row"===a.source||"swifty_text"===a.source?null:"swc_asset",inline:!1,takeSnapshot:!0,only_insert_at_root:!1,force_html_insert:!0,$column:"row"!==a.source?h.options.$column:null,is_preset:c}).then(function(a){a&&1===a.length&&b("scroll_to_element",{$el:a}),b("add_exec",{fn:"swifty_check_inserts"}),setTimeout(function(){b("add_exec",{fn:"swifty_check_inserts"})},1e3),b("add_exec",{evt:"update_slideshows"}),b("add_exec",{evt:"update_sliders"}),b("add_exec",{evt:"update_gallery_grid"}),b("add_exec",{evt:"update_gallery_flex"}),setTimeout(function(){b("video_fitvids")},1)})})}});else if(l){var q,r=d.attr("width"),s="",t="",u=new Date,v=u.getTime(),w="swc_asset_state_inserting"+v,x=v+"_"+Math.floor(99999*Math.random()+1),y=' id="c'+x+'"',z=h.options.locked?" swc_locked":"",A=h.options.locked?'"swc_locked":"1",':"";b("is_current_insert_position_in_table_or_grid",{}).then(function(a){(a||h.options.$column||h.options.wrap_at_bottom)&&(r=100,s='"swc_margin_top":"0","swc_margin_bottom":"0","swc_margin_left":"0","swc_margin_right":"0",',"swifty_divider"===l&&(t='"swc_padding_top":"20","swc_padding_bottom":"20","swc_padding_left":"0","swc_padding_right":"0",'));var c;"swifty_text"===l?(s='"swc_margin_top":"0","swc_margin_bottom":"0",',c='<div class="swc_text '+w+z+'" data-asset_type="'+l+'"'+y+'><div class="swc_asset_cntnt"  data-asset_data="'+g.utoa("{"+A+s+'"swc_cssid":"'+x+'","swc_width":"'+r+'"}')+'"><p>'+f("Type your text here")+"</p></div></div>",q="swc_text"):(c="<"+n+' class="swc_asset '+w+z+'" data-asset_type="'+k+'"'+y+"><"+n+' class="swc_asset_cntnt" data-asset_data="'+g.utoa('{"swc_shortcode":"'+l+'",'+A+'"swc_cssid":"'+x+'","swc_width":"'+r+'",'+s+t+'"swc_swifty_on":"1"}')+'"></'+n+"></"+n+">",q="swc_asset"),h.options.wrap_at_bottom&&(c='<div class="swc_grid_row " style="margin-bottom: 20px; overflow-y: visible;" data-grid_data="{}" ><div class="swc_grid_colwrapper " style="margin-right: 20px;"><div class="swc_grid_column" style="" data-grid_data="{}">'+c+'</div><div class="swc_grid_colclose"></div></div></div>'),b("add_asset_to_content",{html:c,widget_class:q,insert_class:w,inline:m,only_insert_at_root:!1,force_html_insert:!1,$column:h.options.$column,is_preset:h.options.wrap_at_bottom}).then(function(a){a&&1===a.length&&b("scroll_to_element",{$el:a}),setTimeout(function(){a.parent().css("clear",a.css("clear"))},3e3)}),h.closePanel()})}else{h.closePanel();var B=new a.Deferred;B.done(function(){b("ckeditor_command",{command:d.attr("action")})}),h.options.$column?b("set_column_range_for_insert",{$column:h.options.$column}).done(function(){B.resolve()}):B.resolve()}},"{window} evt_swc_asset_added":function(){this.markCloseOnFocus()},_getAssetDef:function(a,b){return{name:b.attr("name"),shortcode:a,icon:b.attr("icon"),action:b.attr("action"),is_shortcode:b.attr("shortcode")?!0:!1,width:b.attr("width"),inline:"inline"===b.attr("type")?!0:!1,paid:b.attr("paid"),expired:b.attr("expired"),coming:b.attr("coming")}}})}),swifty.define("js/libs/mout/src/lang/kindOf",[],function(){function a(a){return null===a?"Null":a===b?"Undefined":c.exec(d.call(a))[1]}var b,c=/^\[object (.*)\]$/,d=Object.prototype.toString;return a}),swifty.define("js/libs/mout/src/lang/isKind",["./kindOf"],function(a){function b(b,c){return a(b)===c}return b}),swifty.define("js/libs/mout/src/lang/isString",["./isKind"],function(a){function b(b){return a(b,"String")}return b}),swifty.define("js/libs/mout/src/object/hasOwn",[],function(){function a(a,b){return Object.prototype.hasOwnProperty.call(a,b)}return a}),swifty.define("js/libs/mout/src/object/forIn",["./hasOwn"],function(a){function b(){f=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],e=!0;for(var a in{toString:null})e=!1}function c(c,g,h){var i,j=0;null==e&&b();for(i in c)if(d(g,c,i,h)===!1)break;if(e)for(var k=c.constructor,l=!!k&&c===k.prototype;(i=f[j++])&&("constructor"===i&&(l||!a(c,i))||c[i]===Object.prototype[i]||d(g,c,i,h)!==!1););}function d(a,b,c,d){return a.call(d,b[c],c,b)}var e,f;return c}),swifty.define("js/libs/mout/src/object/forOwn",["./hasOwn","./forIn"],function(a,b){function c(c,d,e){b(c,function(b,f){return a(c,f)?d.call(e,c[f],f,c):void 0})}return c}),swifty.define("js/libs/mout/src/lang/isArray",["./isKind"],function(a){var b=Array.isArray||function(b){return a(b,"Array")};return b}),swifty.define("js/libs/mout/src/lang/isEmpty",["../object/forOwn","./isArray"],function(a,b){function c(c){if(null==c)return!0;if("string"==typeof c||b(c))return!c.length;if("object"==typeof c){var d=!0;return a(c,function(){return d=!1,!1}),d}return!0}return c}),swifty.define("stache!js/panels/add_preset/add_preset.stache",["can/../can"],function(a){var b="__stache_tmpl_"+"js/panels/add_preset/add_preset.stache".split(".").join("_").split("/").join("_")+"_"+Date.now()+"_"+parseInt(1e6*Math.random())+"__";return a.view.mustache(b,'<div class="swc_panel_add_preset swc_panel_content_wrap">\n    {{#if data.is_loading}}\n        <div class="swc_panel_preview_preset_loading"><div><i class="fa fa-refresh fa-spin"></i></div></div>\n    {{else}}\n        {{#if data.is_categories}}\n            {{#if is_page_setup}}\n                <div class="swc_panel_category_title swc_panel_category_title_main">{{__ \'Start with a blank page\'}}</div>\n                <div class="swc_panel_category_title swc_panel_category_title_sub">{{__ \'I will fill it with content myself ;-)\'}}</div>\n                <div class="swc_panel_add_asset">\n                    <swc_panel_button icon="fa-file-o" action="blank_page" name="{{__ \'Blank Page\'}}" data-preset_type="blank_page" />\n                </div>\n                <div class="swc_panel_category_title swc_panel_category_title_main">{{__ \'Start with a preset page\'}}</div>\n                <div class="swc_panel_category_title swc_panel_category_title_sub">{{__ \'Inspire me with a set of content that I can edit and change\'}}</div>\n            {{else}}\n                <div class="swc_panel_category_title">{{__ \'Presets\'}}</div>\n                <div class="swc_panel_add_asset">\n                    {{#each preset_defs}}\n                        {{#if is_page_preset}}\n                        {{else}}\n                            {{#if is_category}}\n                                <swc_panel_button icon="{{icon}}" action="{{preset_type}}" name="{{name}}"\n                                                  data-preset_type="{{preset_type}}"/>\n                            {{/if}}\n                        {{/if}}\n                    {{/each}}\n                </div>\n                {{#if data.has_page_presets}}\n                    <div class="swc_panel_category_title">{{__ \'Page presets\'}}</div>\n                {{/if}}\n            {{/if}}\n            <div class="swc_panel_add_asset">\n                {{#each preset_defs}}\n                    {{#if is_page_preset}}\n                        {{#if is_category}}\n                            <swc_panel_button icon="{{icon}}" action="{{preset_type}}" name="{{name}}"\n                                              data-preset_type="{{preset_type}}"/>\n                        {{/if}}\n                    {{/if}}\n                {{/each}}\n            </div>\n        {{else}}\n            <div class="swc_panel_add_preset_previews">\n                <div class="swc_panel_add_preset_previews_content" style="width: {{data.content_width}}px;">\n                    {{#if data.allow_ext}}\n                        {{#each preset_defs}}\n                            {{#if data.is_page_preset}}\n                                {{#if is_active}}\n                                    <div class="swc_panel_preview_preset swc_panel_preview_preset_active swc_panel_preview_preset_code_{{preset_type}}">\n                                        <div class="swc_panel_preview_preset_html">\n                                            <div class="swc_panel_preview_preset_top"></div>\n                                            {{#if is_loading}}\n                                                <div class="swc_panel_preview_preset_loading"><div><i class="fa fa-refresh fa-spin"></i></div></div>\n                                            {{else}}\n                                                {{&html}}\n                                            {{/if}}\n                                            <div class="swc_panel_preview_preset_bottom"></div>\n                                        </div>\n                                        <div class="swc_panel_preview_preset_overlay"></div>\n                                    </div>\n                                {{/if}}\n                            {{else}}\n                            <div class="swc_panel_preview_preset {{#if is_active}}swc_panel_preview_preset_active{{/if}} swc_panel_preview_preset_code_{{preset_type}}">\n                                <div class="swc_panel_preview_preset_html">\n                                    <div class="swc_panel_preview_preset_top"></div>\n                                    {{#if is_loading}}\n                                        <div class="swc_panel_preview_preset_loading"><div><i class="fa fa-refresh fa-spin"></i></div></div>\n                                    {{else}}\n                                        {{&html}}\n                                    {{/if}}\n                                    <div class="swc_panel_preview_preset_bottom"></div>\n                                </div>\n                                <div class="swc_panel_preview_preset_overlay"></div>\n                            </div>\n                            {{/if}}\n                        {{/each}}\n                    {{else}}\n                        <div class="swc_preset_permission_ext">\n                            We would like your permission to check our servers for the latest versions of the Presets. These are regularly updated as our designers create new and creative sets of content for you to use. We also need your permission to gather anonymous stats of the way users use our software (helps us make it even better). You only have to click this button once.<br>\n                            <br><br>\n                            <div class="swc_msg_buttons">\n                                <div class="swc_button swc_btn_allow_ext">Yes, show me the good stuff!</div>\n                            </div>\n                        </div>\n                    {{/if}}\n                </div>\n            </div>\n        {{/if}}\n    {{/if}}\n</div>\n'),b
}),swifty.define("js/libs/mout/src/object/keys",["./forOwn"],function(a){var b=Object.keys||function(b){var c=[];return a(b,function(a,b){c.push(b)}),c};return b}),swifty.define("swiftylib/deferreds",["jquery"],function(a){return function(){var b=function(){for(var a=[],b=arguments,c=0;c<b.length;c++)a.push(b[c]);for(c in this)a[c]=this[c];return a};return b.prototype=[],b.prototype.add=function(a){this.push(a)},b.prototype.done=function(b){a.when.apply(a,this).done(b)},new b}}),swifty.define("stache!js/panels/apply_preset/apply_preset.stache",["can/../can"],function(a){var b="__stache_tmpl_"+"js/panels/apply_preset/apply_preset.stache".split(".").join("_").split("/").join("_")+"_"+Date.now()+"_"+parseInt(1e6*Math.random())+"__";return a.view.mustache(b,'<div class="swc_panel_add_preset swc_panel_add_preset_approve swc_panel_content_nowrap">\n    {{#if preset_data.loading}}\n        {{__ "One moment please..." }}<br>\n        {{__ "We\'re getting the preset ready for your page. This can take a while, depending on complexity and the number of images." }}\n    {{else}}\n        <swc_panel_button icon="&#xe02f;" action="no" name="{{__ "Undo. Remove the preset." }}"/>\n        <swc_panel_button icon="&#xe033;" action="yes" name="{{__ "Great. Let\'s keep this." }}"/>\n        {{#if area_visibility_changed}}\n        <div class="swc_notice_msg">\n            <div>{{__ "This preset changes some of the areas on this page. You can change that later in the page options." }}</div>\n        </div>\n        {{/if}}\n        <div class="swc_notice_msg">\n            <div>{{__ "Keeping this preset implies you agree to the terms and conditions stated in the preset- and image licence." }}</div>\n            <div><a href="https://www.swifty.online/license/proprietary-license/?rss3=prst1" target="_blank">{{__ "Read more..." }}</a></div>\n        </div>\n    {{/if}}\n</div>\n'),b}),swifty.define("css!js/panels/apply_preset/apply_preset",[],function(){}),swifty.define("js/panels/apply_preset/apply_preset",["jquery","swiftylib/evt","swiftylib/map","swiftylib/list","js/libs/mout/src/object/keys","js/panels/panel/panel","swiftylib/i18n/__","js/diverse/utils","swiftylib/deferreds","js/panels/panel_stack/panel_stack_instance","stache!js/panels/apply_preset/apply_preset.stache","css!js/panels/apply_preset/apply_preset.css"],function(a,b,c,d,e,f,g,h,i,j,k){return f.extend({defaults:{tmpl_content:k,title:g("Preset"),preset_path:"",preset_data:new c({loading:!0}),preset_areas:null,areas:["topbar","header","navbar","sidebar","extrasidebar","footer","bottombar"]}},{init:function(){var a=this;a.options.preset_data.attr("loading",!0),a.options.preset_areas=new c,a.options.area_visibility_changed=!1,a.options.ssd_settings=null,a.removeLicenseFromPreset(),a.getSSDSettingsFromPreset(),a.applyPreset(),a._super()},applyPreset:function(){var c=this;b("convert_preset_html",{html:c.options.html}).then(function(d){c.getAreasHTMLFromPreset(d);var f=c.options.preset_areas.attr(),g="";if(scc_data.is_swifty_site_designer_active?(g=c.options.main_html,a.isEmptyObject(f)||b("change_current_areas",{preset_areas:c.options.preset_areas})):c.options.preset_areas.each(function(a,b){g+=a.attr("html"),"sidebar"===b&&c.options.main_html&&(g+=c.options.main_html)}),g)b("add_asset_to_content",{html:g,insert_class:null,inline:!1,takeSnapshot:!0,only_insert_at_root:!0,force_html_insert:!0,is_preset:!0}).then(function(a){c.checkInsertedPreset(a)});else if(!a.isEmptyObject(f)){var h=e(f);if(a.isArray(h)&&1===h.length){var i=a("#swc_iframe").contents();c.checkInsertedPreset(i.find(".swifty_area_"+h[0]))}}})},checkInsertedPreset:function(a){var c=this;b("scroll_to_element",{$el:a}),b("add_exec",{fn:"swifty_check_inserts"}),setTimeout(function(){b("add_exec",{fn:"swifty_check_inserts"})},1e3),setTimeout(function(){b("video_fitvids")},1),c.options.preset_data.attr("loading",!1)},removeLicenseFromPreset:function(){var a=this;a.options.html=a.options.html.replace(/<!--\nBy using [^>]*>/gim,"")},getSSDSettingsFromPreset:function(){var b=this,c=new RegExp("<!--\\s*SSD.SETTINGS\\s*({.*?})\\s*-->","gmi"),d=c.exec(b.options.html);a.isArray(d)&&2===d.length&&d[1]&&(b.options.html=a.trim(b.options.html.replace(d[0],"")),b.options.ssd_settings=a.parseJSON(d[1]))},getAreasHTML:function(a,b){var c=new RegExp("(<p>)?<!--\\s*AREA."+a+".BEGIN\\s*-->(</p>)?([\\s\\S]*?)(<p>)?<!--\\s*AREA."+a+".END\\s*-->(</p>)?","gmi");return c.exec(b)},getAreasHTMLFromPreset:function(b){var d=this,e=a("#swc_iframe").contents();a.each(d.options.areas,function(f,g){var h=e.find(".swifty_area_"+g),i=d.getAreasHTML(g,b);if(a.isArray(i)&&6===i.length&&i[3])g===scc_data.area?b=i[3]:(b=a.trim(b.replace(i[0],"")),d.options.preset_areas.attr(g)||d.options.preset_areas.attr(g,new c),d.options.preset_areas.attr(g).attr({html:a.trim(i[3]),overrule:"show"}),h.is(":hidden")&&(d.options.area_visibility_changed=!0));else{var j=d.options.ssd_settings;if(j&&j.areas&&j.areas[g]&&j.areas[g].hasOwnProperty("visibility")){var k=j.areas[g].visibility,l=!1;(h.is(":visible")&&!k||h.is(":hidden")&&k)&&(l=!0),l&&(d.options.area_visibility_changed=!0,d.options.preset_areas.attr(g)||d.options.preset_areas.attr(g,new c),d.options.preset_areas.attr(g).attr({html:null,overrule:k?"show":"hide"}))}}}),d.options.main_html=a.trim(b)||""},".swc_back_button click":function(){b("restore_current_areas"),this.options.main_html&&b("ckeditor_undo_last_image"),this.closePanel()},".swc_panel_button_yes click":function(){var a=this;b("save_current_areas",{preset_areas:a.options.preset_areas}).done(function(){j.resetPanelStack(),a.closePanel()})},".swc_panel_button_no click":function(){b("restore_current_areas"),this.options.main_html&&b("ckeditor_undo_last_image"),this.closePanel()}})}),swifty.define("stache!js/panels/add_preset/add_preset_panel.stache",["can/../can"],function(a){var b="__stache_tmpl_"+"js/panels/add_preset/add_preset_panel.stache".split(".").join("_").split("/").join("_")+"_"+Date.now()+"_"+parseInt(1e6*Math.random())+"__";return a.view.mustache(b,'<div class="swc_panel swc_overlay_panel {{panel_css_class}}">\n    <div class="swc_panel_container">\n        <div class="swc_panel_content">\n            {{#if tmpl_content}}\n                {{&renderStache tmpl_content}}\n            {{/if}}\n        </div>\n        <div class="clearfix"></div>\n        <div class="swc_iframe_gradient"></div>\n    </div>\n\n    <div class="swc_panel_bottom_container">\n        <div class="swc_panel_back_container {{#eq back_action \'exit\'}}swc_back_exit{{/eq}}">\n            <div class="swc_back_button swc_button">\n                {{#eq panel_css_class \'swc_small_panel\'}}\n                    &#xe900;\n                {{else}}\n                    <i class="fa fa-chevron-left"></i>\n                {{/eq}}\n            </div>\n        </div>\n\n        {{#if data.is_categories}}\n            <div class="swc_panel_title_container">\n                <div class="swc_panel_title_pos">\n                    <div class="swc_title">\n                        {{__ title}}\n                    </div>\n                </div>\n            </div>\n        {{else}}\n            <div class="swc_panel_title_container">\n                <div class="swc_panel_title_pos">\n                    <div class="swc_title">\n                        {{__ title}}\n                    </div>\n                    <div class="swc_title swc_preset_code">\n                        {{__ data.active_code}}\n                    </div>\n                </div>\n            </div>\n\n            {{#if data.allow_ext}}\n                <div class="swc_panel_presets_choose_container">\n                    <div class="swc_button swc_preset_previous">\n                        <i class="fa fa-chevron-left"></i>\n                    </div>\n                    <div class="swc_title swc_preset_nr_tot">\n                        {{data.active_nr}}/{{data.total_nr}}\n                    </div>\n                    <div class="swc_button swc_preset_next">\n                        <i class="fa fa-chevron-right"></i>\n                    </div>\n                    <div class="swc_button swc_preset_try_this_one">\n                        {{__ \'Try this one\'}}\n                    </div>\n                </div>\n            {{/if}}\n        {{/if}}\n    </div>\n</div>'),b}),swifty.define("css!js/panels/add_preset/add_preset",[],function(){}),swifty.define("js/panels/add_preset/add_preset",["jquery","swiftylib/evt","swiftylib/map","swiftylib/list","swiftylib/sort","js/libs/mout/src/lang/isString","js/libs/mout/src/lang/isEmpty","js/panels/overlay_panel/overlay_panel","swiftylib/i18n/__","js/diverse/utils","stache!js/panels/add_preset/add_preset.stache","js/panels/panel_stack/panel_stack_instance","js/panels/apply_preset/apply_preset","stache!js/panels/add_preset/add_preset_panel.stache","js/libs/yepnope","css!js/panels/add_preset/add_preset.css"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p=h.extend({defaults:{tmpl:n,tmpl_content:k,title:i("Add preset"),panel_css_class:"swc_overlay_preset_panel",preset_defs:null,preset_path:"",icons:[{key:"icons",name:i("Icons"),icon:"&#xe926;"},{key:"products",name:i("Products"),icon:"&#xe90e;"},{key:"services",name:i("Services"),icon:"&#xe90f;"},{key:"break_out",name:i("Break out"),icon:"&#xe913;"},{key:"social",name:i("Social"),icon:"&#xe922;"},{key:"meet_the_team",name:i("Meet the team"),icon:"&#xe923;"},{key:"images",name:i("Images"),icon:"&#xe919;"},{key:"video",name:i("Video"),icon:"&#xe925;"},{key:"text",name:i("Text"),icon:"&#xe927;"},{key:"header",name:i("Header"),icon:"&#xe918;"},{key:"footer",name:i("Footer"),icon:"&#xe917;"},{key:"page_homepage",name:i("Homepage"),icon:"&#xe90b;"},{key:"page_products",name:i("Products"),icon:"&#xe90e;"},{key:"page_services",name:i("Services"),icon:"&#xe90f;"},{key:"page_about_us",name:i("About us"),icon:"&#xe908;"},{key:"page_contact",name:i("Contact"),icon:"&#xe90a;"},{key:"page_our_team",name:i("Our team"),icon:"&#xe923;"},{key:"page_photos",name:i("Photos"),icon:"&#xe919;"}]}},{init:function(){var e=this;if(a.each(e.options.icons,function(a){e.options.icons[a].order=a}),e.options.data=new c({is_categories:!0,is_page_preset:e.options.preset_path&&/^\/page_/.test(e.options.preset_path),has_page_presets:!1,content_width:800,is_loading:!0,active_code:"",active_nr:1,total_nr:1,allow_ext:!1}),e.options.data.bind("active_code",a.proxy(e.activeCodeChanged,e)),e.options.preset_defs=new d,e.options.preset_defs.attr("comparator","order"),b("get_main_content_width").then(function(a){a>0&&e.options.data.attr("content_width",a)}),""===e.options.preset_path&&"undefined"!=typeof swiftyProbe&&e.options.preset_defs.push({name:"Probe",preset_type:"probe",is_category:!0,icon:"?",preset_defs:new c}),"undefined"!=typeof swiftyProbe&&"/probe"===e.options.preset_path){var f=["preset_test1","preset_test2","preset_test3"];a.each(f,function(b,c){a.get(scc_data.swcreator_url+"js/probe/test_data/"+c+".txt",function(a){e.options.preset_defs.push({name:c,preset_type:c,is_category:!1,icon:"?"}),e.convertAndAddPreset(c,a)})})}e.options.dfdWaitSlide=new a.Deferred,setTimeout(function(){e.options.dfdWaitSlide.resolve()},500),e.updatePresets(),e._super(),b("reset_mobile_view");var g=document.head||document.getElementsByTagName("head")[0];0===a(g).find("#main_all_styles").length&&(b("get_main_all_styles").then(function(a){var b=document.createElement("style");b.id="main_all_styles",b.type="text/css",b.styleSheet?b.styleSheet.cssText=a:b.appendChild(document.createTextNode(a)),g.appendChild(b)}),b("get_ssd_list_loadfont").then(function(a){o.injectJs({_url:"//ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js"},function(){try{var b={google:{families:a}};WebFont.load(b)}catch(c){}})}))},updatePresets:function(){var c=this;c.options.data.attr("has_page_presets",!1),b("check_swifty_allow_external").then(function(b){if("allow"===b)c.options.data.attr("allow_ext",!0),a.ajax({url:"https://stuff.swifty.online/stuff/data/get.php",type:"POST",data:{"do":"preset_list",path:c.options.preset_path},dataType:"json",xhrFields:{withCredentials:!0}}).then(function(b){c.options.dfdWaitSlide.then(function(){var d=0,e=c.options.preset_defs.length;a.each(b.result,function(a,b){var f=c.getPresetObj(b.name,b._id,b.tp,a);f&&(e++,"dir"===b.tp&&d++,f.is_page_preset&&c.options.data.attr("has_page_presets",!0),c.options.preset_defs.push(f))}),d||(c.updateActive(),c.getPresetFromServer(0)),c.updateTotals(0!==d,e)})});else{var d=c.options.preset_defs.length;""===c.options.preset_path?(a.each(c.options.icons,function(a,b){var e=c.getPresetObj(b.name,b.key,"dir",a);e&&(d++,e.is_page_preset&&c.options.data.attr("has_page_presets",!0),c.options.preset_defs.push(e))}),c.updateTotals(!0,d)):c.updateTotals(!1,d)}})},getPresetObj:function(b,c,d,e){var f=this,g={name:b,is_loading:!0,is_active:!1,preset_type:c};if(0===e&&(g.is_active=!0,f.options.data.attr("active_code",b)),"dir"===d){g.is_category=!0;var h=null;a.each(f.options.icons,function(a,b){b.key===c&&(h=b)}),h?(g.icon=h.icon,g.name=h.name,h.order>=0&&(g.order=h.order)):g.icon="?","page_"===c.substr(0,5)&&(g.is_page_preset=!0)}if(g.is_category)if(g.is_page_preset){if("main"!==scc_data.area)return null}else if("main"!==scc_data.area&&("footer"===c||"header"===c)&&scc_data.area!==c)return null;return g},updateTotals:function(a,b){var c=this;c.options.data.attr({is_categories:a,is_loading:!1}),c.options.data.attr("total_nr",b)},convertAndAddPreset:function(c,d){var e=this;if(d&&f(d)&&!g(d)){var h={replaceImages:!1,html:d};b("convert_preset_html",{htmlSettings:h}).done(function(b){var f=e.getPresetFromList(c),g="";a(b).filter(".swc_grid_row").each(function(){g+=a.trim(a(this).prop("outerHTML"))}),f&&(f.attr({html:g,html_code:d,is_loading:!1}),e.checkPresetPreview())})}},getPresetFromServer:function(b){var c=this;if(b<c.options.preset_defs.length){var d=c.options.preset_defs.attr(b),e=d.attr("preset_type");a.ajax({url:"https://stuff.swifty.online/stuff/data/get.php",type:"POST",data:{"do":"preset_file",path:c.options.preset_path+"/"+e+".html"},xhrFields:{withCredentials:!0}}).always(function(a){c.convertAndAddPreset(e,a),b++,c.getPresetFromServer(b)})}},checkPresetPreview:function(){setTimeout(function(){o.injectJs({_url:scc_data.view_js_url},function(){window.ssd_status_onload=1,swifty_check_inserts(),setTimeout(function(){swifty_check_inserts()},1e3)}),o.injectJs({_url:scc_data.swcreator_url+"js/libs/jquery.fitvids.js"},function(){a(".swc_video_wrapper").fitVids();var b=a('<div class="frameOverlay"/>');a(".swc_video_wrapper iframe").after(b)})},1)},getPresetFromList:function(a){var b=this.options.preset_defs.filter(function(b){return b.attr("preset_type")===a});return 1===b.length?b.attr(0):null},activeCodeChanged:function(a,b){var c=this;c.options.data.attr("is_page_preset")&&b&&c.checkPresetPreview()},".swc_btn_allow_ext click":function(){var a=this;b("set_swifty_allow_external",{allow:"allow"}).then(function(){a.options.data.attr("allow_ext",!0),b("update_presets_in_panels")})},".swc_panel_button click":function(a){var b=this;a=a.closest("swc_panel_button");var c=a.attr("data-preset_type"),d=b.getPresetFromList(c);d.is_category&&l.addPanel(p,{preset_path:b.options.preset_path+"/"+c,title:d.attr("name")})},".swc_preset_try_this_one click":function(){var a=this;b("store_current_areas"),a.options.preset_defs.each(function(b){b.attr("is_active")&&l.addPanel(m,{preset_path:a.options.preset_path+"/"+b.attr("preset_type"),html:b.attr("html_code")})})},".swc_preset_previous click":function(){var a=this,b=a.options.data.attr("active_nr");b>1&&(a.options.data.attr("active_nr",b-1),a.updateActive())},".swc_preset_next click":function(){var a=this,b=a.options.data.attr("active_nr");b<a.options.data.attr("total_nr")&&(a.options.data.attr("active_nr",b+1),a.updateActive())},updateActive:function(){var a=this,b=0;a.options.preset_defs.each(function(c){b++,b===a.options.data.attr("active_nr")?(c.attr("is_active",!0),a.options.data.attr("active_code",c.attr("name")),a.scrollActive(c.attr("preset_type"))):c.attr("is_active",!1)})},scrollActive:function(b){var c=a(".swc_panel_preview_preset_code_"+b);if(c.length>0){var d=c.offset().top,e=c.height(),f=a(".swc_panel_preview_preset:first"),g=f.offset().top,h=a(".swc_panel_add_preset"),i=h.innerHeight();i>e&&(d-=(i-e)/2),a(h).animate({scrollTop:d-g},300,"swing",function(){})}},"{window} evt_swc_update_presets_in_panels":function(){this.options.preset_defs.replace([]),this.updatePresets()}});return p}),swifty.define("js/libs/mout/src/function/identity",[],function(){function a(a){return a}return a}),swifty.define("js/libs/mout/src/function/prop",[],function(){function a(a){return function(b){return b[a]}}return a}),swifty.define("js/libs/mout/src/object/deepMatches",["./forOwn","../lang/isArray"],function(a,b){function c(a,b){for(var c=-1,d=a.length;++c<d;)if(f(a[c],b))return!0;return!1}function d(a,b){for(var d=-1,e=b.length;++d<e;)if(!c(a,b[d]))return!1;return!0}function e(b,c){var d=!0;return a(c,function(a,c){return f(b[c],a)?void 0:d=!1}),d}function f(a,c){return a&&"object"==typeof a&&c&&"object"==typeof c?b(a)&&b(c)?d(a,c):e(a,c):a===c}return f}),swifty.define("js/libs/mout/src/function/makeIterator_",["./identity","./prop","../object/deepMatches"],function(a,b,c){function d(d,e){if(null==d)return a;switch(typeof d){case"function":return"undefined"!=typeof e?function(a,b,c){return d.call(e,a,b,c)}:d;case"object":return function(a){return c(a,d)};case"string":case"number":return b(d)}}return d}),swifty.define("js/libs/mout/src/array/findIndex",["../function/makeIterator_"],function(a){function b(b,c,d){if(c=a(c,d),null==b)return-1;for(var e=-1,f=b.length;++e<f;)if(c(b[e],e,b))return e;return-1}return b}),swifty.define("js/diverse/categories",["jquery","can","swiftylib/construct","swiftylib/i18n/__","js/libs/mout/src/array/findIndex"],function(a,b,c,d,e){var f=c.extend({categories:[{icon:"&#xe057;",name:d("Clipboard"),action:"clipboard"},{icon:"&#xe058;",name:d("Interactive"),action:"interactive"},{icon:"&#xe05b;",name:d("Text"),action:"textual"},{icon:"&#xe059;",name:d("Layout"),action:"layout"},{icon:"&#xe05a;",name:d("Other stuff"),action:"others"},{icon:"&#xe052;",name:d("Layout"),action:"presets"},{icon:"&#xe05c;",name:d("Visuals"),action:"visuals"},{icon:"&#xe05a;",name:d("Third Party"),action:"thirdparty"}]},{getCategory:function(a){var c=this.constructor.categories,f=a.toLowerCase(),g=e(c,{action:f});return g>=0?c[g]:{icon:"&#xe015;",name:d(b.capitalize(f)),action:f}}});return new f}),swifty.define("stache!js/panels/pick_columns/pick_columns.stache",["can/../can"],function(a){var b="__stache_tmpl_"+"js/panels/pick_columns/pick_columns.stache".split(".").join("_").split("/").join("_")+"_"+Date.now()+"_"+parseInt(1e6*Math.random())+"__";return a.view.mustache(b,'<div class="swc_panel_content_wrap">\n    {{#each columns_defs}}\n        <div class="swc_panel_category_title {{#eq title \'\'}}swc_panel_category_t_empty{{/eq}}">{{title}}</div>\n        <div class="swc_panel_add_asset">\n            {{#each layouts}}\n                <swc_panel_button row_type="{{tp}}" action="columns" data-columns="{{tp}}" name="{{&replace tp \'-\' \'-<wbr>\'}}" />\n            {{/each}}\n        </div>\n    {{/each}}\n</div>\n'),b}),swifty.define("js/panels/pick_columns/pick_columns",["jquery","swiftylib/evt","js/panels/overlay_panel/overlay_panel","js/panels/panel_stack/panel_stack_instance","swiftylib/i18n/__","stache!./pick_columns.stache","stache!js/panels/simple_panel/simple_panel.stache"],function(a,b,c,d,e,f){var g=c.extend({defaults:{tmpl_content:f,title:e("Pick number of columns"),columns:0,columns_defs:{}}},{init:function(){for(var a=this,b=0;8>=b;b++){a.options.columns=b;var c=b;a.options.columns+""=="0"&&(a.options.columns_defs[c]={title:"Popular column layouts",layouts:[{icon:"?",tp:"100"},{icon:"?",tp:"20-60-20"},{icon:"?",tp:"50-25-25"},{icon:"?",tp:"33-66"},{icon:"?",tp:"66-33"},{icon:"?",tp:"33-33-33"},{icon:"?",tp:"25-25-25-25"}]}),a.options.columns+""=="1"&&(a.options.columns_defs[c]={title:"All column layouts",layouts:[{icon:"?",tp:"100"}]}),a.options.columns+""=="2"&&(a.options.columns_defs[c]={title:"",layouts:[{icon:"?",tp:"50-50"},{icon:"?",tp:"33-66"},{icon:"?",tp:"66-33"},{icon:"?",tp:"25-75"},{icon:"?",tp:"75-25"}]}),a.options.columns+""=="3"&&(a.options.columns_defs[c]={title:"",layouts:[{icon:"?",tp:"33-33-33"},{icon:"?",tp:"25-25-50"},{icon:"?",tp:"25-50-25"},{icon:"?",tp:"50-25-25"},{icon:"?",tp:"20-20-60"},{icon:"?",tp:"20-60-20"},{icon:"?",tp:"60-20-20"},{icon:"?",tp:"17-17-67"},{icon:"?",tp:"17-67-17"},{icon:"?",tp:"67-17-17"}]}),a.options.columns+""=="4"&&(a.options.columns_defs[c]={title:"",layouts:[{icon:"?",tp:"25-25-25-25"},{icon:"?",tp:"17-17-17-50"},{icon:"?",tp:"50-17-17-17"},{icon:"?",tp:"15-15-35-35"},{icon:"?",tp:"35-35-15-15"}]}),a.options.columns+""=="5"&&(a.options.columns_defs[c]={title:"",layouts:[{icon:"?",tp:"20-20-20-20-20"},{icon:"?",tp:"17-17-17-17-34"},{icon:"?",tp:"17-17-34-17-17"},{icon:"?",tp:"34-17-17-17-17"}]}),a.options.columns+""=="6"&&(a.options.columns_defs[c]={title:"",layouts:[{icon:"?",tp:"17-17-17-17-17-17"}]}),a.options.columns+""=="7"&&(a.options.columns_defs[c]={title:"",layouts:[{icon:"?",tp:"14-14-14-14-14-14-14"}]}),a.options.columns+""=="8"&&(a.options.columns_defs[c]={title:"",layouts:[{icon:"?",tp:"12-12-12-12-12-12-12-12"}]})}a._super()},".swc_panel_button_columns click":function(a){var c=this,e=c.options.$row,f=a.closest("swc_panel_button").attr("data-columns");if(f.indexOf("-")<0&&f+""!="100"&&parseInt(f,10)>1)this.markCloseOnFocus(),d.addPanel(g,{columns:f,$row:e,swc_between_cols:c.options.swc_between_cols});else if(null===e){var h=new Date,i=h.getTime(),j="swc_asset_state_inserting"+i,k=20;c.options.swc_between_cols&&(k=c.options.swc_between_cols);var l='<div class="swc_grid_row '+j+'" style="margin-bottom: '+k+'px;" data-grid_data="{}"></div>';b("add_row_to_content",{html:l,insert_class:j}).then(function(a){b("scroll_to_element",{$el:a}),c.changeColumns(a,f,!0)})}else c.changeColumns(e,f,!1)},changeColumns:function(c,d,e){var f=this,g=d.split("-"),h=g.length,i=c.find("> .swc_grid_colwrapper").length,j=null,k="",l=function(d){var h=null,i=null;c.find("> .swc_grid_colwrapper").each(function(b,c){for(var e=a(c),f=1;100>f;f++)e.removeClass("swc_flex_"+f);e.addClass("swc_flex_"+g[b]);var j=a(c).find(".swc_grid_column"),k=a.parseJSON(j.attr("data-grid_data"));k.flex=""+g[b],1===d&&j.hasClass("swc_grid_column_new")&&h&&(k=a.extend(!0,{},h,k),e.attr("style",i.attr("style"))),j.attr("data-grid_data",JSON.stringify(k)),h=a.extend(!0,{},k),i=e}),b("do_change_col_margin",{$row:c,value:f.options.swc_between_cols}),e?b("reset_panel_stack"):f.closePanel()};if(i>h&&(c.find("> .swc_grid_colwrapper").each(function(b,c){var d=a(c);h>b?j=d:(d.find(".swc_grid_column").children().appendTo(j.find(".swc_grid_column")),d.remove())}),b("swifty_editor_check_widgets",{}).then(function(){l(2)})),h>i){k="";for(var m=i;h>m;m++){var n='\'{"flex":"'+g[m]+"\"}'",o="";h-1>m&&(o+=" margin-right: "+f.options.swc_between_cols+"px;"),k+='<div class="swc_grid_colwrapper" style="'+o+'"><div class="swc_grid_column swc_grid_column_new" data-grid_data='+n+'></div><div class="swc_grid_colclose"></div></div>'}b("add_columns_to_row",{html:k,$row:c}).then(function(){l(1)})}h===i&&l(0)}});return g}),swifty.define("js/panels/add_content/add_content",["jquery","swiftylib/evt","js/panels/overlay_panel/overlay_panel","js/panels/panel_stack/panel_stack_instance","stache!js/panels/add_content/add_content.stache","js/panels/add_asset/add_asset","js/panels/add_preset/add_preset","js/diverse/categories","swiftylib/i18n/__","js/libs/mout/src/array/findIndex","js/panels/pick_columns/pick_columns"],function(a,b,c,d,e,f,g,h,i,j,k){return c.extend({defaults:{tmpl_content:e,title:i("Add content"),in_grid:!1,$column:null,locked:!1,allowance:"",wrap_at_bottom:!1}},{init:function(){var c=this;b("get_assets").then(function(b){c.options.category_defs=[],b.each(function(a){var b=h.getCategory(a.attr("name").toLowerCase());("clipboard"!==a.attr("name")||scc_data.is_content_clipboard_available)&&j(c.options.category_defs,b)<0&&c.options.category_defs.push(b)}),c._super(),a.each(c.options.category_defs,function(b,d){"grid"===d.action?new k(a("<div></div>").appendTo(".swc_panel_category_wrapper_"+d.action),{$row:null,swc_between_cols:20}):new f(a("<div></div>").appendTo(".swc_panel_category_wrapper_"+d.action),{category:d.action,$column:c.options.$column,locked:c.options.locked,allowance:c.options.allowance,wrap_at_bottom:c.options.wrap_at_bottom})})})}})}),swifty.define("js/panels/page_setup/page_setup",["jquery","swiftylib/evt","js/panels/add_preset/add_preset","swiftylib/i18n/__"],function(a,b,c,d){return c.extend({defaults:{title:d("New page content"),is_page_setup:!0}},{init:function(){var a=this;a._super()},".swc_panel_button click":function(a){var b=this;a=a.closest("swc_panel_button");var c=a.attr("data-preset_type");"blank_page"===c?(b.closePanel(),b.fill_empty_page(!1)):b._super(a)},".swc_back_button click":function(){var a=this;a.closePanel(),a.fill_empty_page(!0)},fill_empty_page:function(c){var d=c?' swc_temporary="1" swc_margin_top="0" swc_margin_bottom="0" swc_margin_left="0"':"",e=c?' swc_temporary="1"':"";b("convert_preset_html",{html:"[swifty_grid_row"+d+'][swifty_grid_column flex="100"'+d+'][swifty_text swc_width="100"'+e+' swc_margin_top="0" swc_margin_bottom="0" swc_margin_left="0"]&nbsp;[/swifty_text][/swifty_grid_column][/swifty_grid_row]'}).then(function(c){var d=new a.Deferred;b("swifty_editor_set_new_content",{content:c,dfd:d}),d.then(function(){b("swifty_editor_show_tooltip")})})}})}),swifty.define("stache!js/panels/info/info.stache",["can/../can"],function(a){var b="__stache_tmpl_"+"js/panels/info/info.stache".split(".").join("_").split("/").join("_")+"_"+Date.now()+"_"+parseInt(1e6*Math.random())+"__";return a.view.mustache(b,"<div>\n    {{__ info_text}}<br>\n    {{__ info_text2}}\n</div>\n"),b}),swifty.define("js/panels/info/info",["jquery","js/panels/panel/panel","swiftylib/i18n/__","stache!./info.stache"],function(a,b,c,d){return b.extend({defaults:{tmpl_content:d,title:c("Info"),info_text:"",info_text2:""}},{})}),swifty.define("swiftylib/media_manager",["jquery","can/../can","can/control","./i18n/__"],function(a,b,c,d){return c.extend({defaults:{selected_ids:"",swifty_mode:0,show_caption:0,show_alt:1,ssd_id:null,media_image_prefix:null},_idReplacingSwiftyPatternImg:0},{init:function(){var a=this;a._customizeMediaManager(),wp.media.view.Modal.prototype.on("close",function(){setTimeout(function(){a.options.dfd.resolve({act:"close"})},5e3)}),a.media_manager=wp.media({title:d(a.options.multiple?"Choose images":"Choose image"),multiple:a.options.multiple,button:{text:d("Insert")},library:{type:"image"}}),a.media_manager.on("open",function(){a._startReplacingSwiftyPatternImg(),a._mediaOpened()}).on("escape",function(){a._stopReplacingSwiftyPatternImg(),a._mediaEscaped()}).on("select",function(){a._stopReplacingSwiftyPatternImg(),a._mediaSelected()}).open()},getMediaImages:function(a,b){var c=[{file:b+"0001_432_typewriter-801921_1920_Pixabay_license_2016-05-03.jpg",thumb:b+"110x110_0000_432_typewriter-801921_1920_Pixabay_license_2016-05-03.jpg"},{file:b+"0002_431_tractor-862923_1920_Pixabay_license_2016-05-03.jpg",thumb:b+"110x110_0011_431_tractor-862923_1920_Pixabay_license_2016-05-03.jpg"},{file:b+"0003_430_the-ball-488714_1920_Pixabay_license_2016-05-03.jpg",thumb:b+"110x110_0012_430_the-ball-488714_1920_Pixabay_license_2016-05-03.jpg"},{file:b+"0004_429_startup-594091_1920_Pixabay_license_2016-05-03.jpg",thumb:b+"110x110_0013_429_startup-594091_1920_Pixabay_license_2016-05-03.jpg"},{file:b+"0005_428_photographer-407068_1920_Pixabay_license_2016-05-03.jpg",thumb:b+"110x110_0014_428_photographer-407068_1920_Pixabay_license_2016-05-03.jpg"},{file:b+"0006_427_holding-hands-918990_1920_Pixabay_license_2016-05-03.jpg",thumb:b+"110x110_0015_427_holding-hands-918990_1920_Pixabay_license_2016-05-03.jpg"},{file:b+"0007_426_happy-children-876541_1280_Pixabay_license_2016-05-03.jpg",thumb:b+"110x110_0016_426_happy-children-876541_1280_Pixabay_license_2016-05-03.jpg"},{file:b+"0008_425_girl-1308309_1920_Pixabay_license_2016-05-03.jpg",thumb:b+"110x110_0017_425_girl-1308309_1920_Pixabay_license_2016-05-03.jpg"},{file:b+"0009_424_apple-256263_1920_Pixabay_license_2016-05-03.jpg",thumb:b+"110x110_0018_424_apple-256263_1920_Pixabay_license_2016-05-03.jpg"},{file:b+"0010_419_store-984393_1920_Pixabay_license_2016-05-03.jpg",thumb:b+"110x110_0002_419_store-984393_1920_Pixabay_license_2016-05-03.jpg"},{file:b+"0011_417_restaurant-690569_1280_Pixabay_license_2016-05-03.jpg",thumb:b+"110x110_0003_417_restaurant-690569_1280_Pixabay_license_2016-05-03.jpg"},{file:b+"0012_414_painting-911804_1920_Pixabay_license_2016-05-03.jpg",thumb:b+"110x110_0004_414_painting-911804_1920_Pixabay_license_2016-05-03.jpg"},{file:b+"0014_409_glass-facade-817732_1920_Pixabay_license_2016-05-03.jpg",thumb:b+"110x110_0005_409_glass-facade-817732_1920_Pixabay_license_2016-05-03.jpg"},{file:b+"0015_408_doctor-563429_1920_Pixabay_license_2016-05-03.jpg",thumb:b+"110x110_0006_408_doctor-563429_1920_Pixabay_license_2016-05-03.jpg"},{file:b+"0016_406_construction-703807_1920_Pixabay_license_2016-05-03.jpg",thumb:b+"110x110_0007_406_construction-703807_1920_Pixabay_license_2016-05-03.jpg"},{file:b+"0017_405_construction-692171_1280_Pixabay_license_2016-05-03.jpg",thumb:b+"110x110_0008_405_construction-692171_1280_Pixabay_license_2016-05-03.jpg"},{file:b+"0018_404_canada-784392_1920_Pixabay_license_2016-05-03.jpg",thumb:b+"110x110_0009_404_canada-784392_1920_Pixabay_license_2016-05-03.jpg"},{file:b+"0019_403_audience-868074_1920_Pixabay_license_2016-05-03.jpg",thumb:b+"110x110_0010_403_audience-868074_1920_Pixabay_license_2016-05-03.jpg"}];a(c)},_mediaOpened:function(){var b=this;if(b.options.hasOwnProperty("selected_ids")){var c=b.media_manager.state().get("selection");a.each(b.options.selected_ids.split(","),function(a,b){var d=wp.media.attachment(b);d.fetch(),c.add(d?[d]:[])})}},_mediaSelected:function(){var b=this,c=b.media_manager.state().get("selection");c&&a.when.apply(a,c.map(function(a){return b.options.hasOwnProperty("selected_ids")?a:void 0},this)).done(function(){var c=[];a.each(arguments,function(a,b){c.push(b.attributes)}),b.options.dfd.resolve({act:"insert",attributes:c})})},_mediaEscaped:function(){var a=this;a.options.dfd.resolve({act:"cancel"})},_startReplacingSwiftyPatternImg:function(){var b=this;b._idReplacingSwiftyPatternImg=setInterval(function(){var b=a(".media-frame-content img:not(.handled)[src*='&swtp=pattern']");b.length>0&&(b.unwrap(),b.replaceWith(function(){return a("<div/>",{style:"background-image: url("+this.src+"); background-repeat: repeat; background-position: center;","class":"thumbnail handled"})}),b.addClass("handled"));var b=a(".media-frame-content .thumbnail .centered img:not(.handled)");b.length>0&&(b.css("max-height","100%"),b.css("max-width","100%"),b.addClass("handled"))},250)},_stopReplacingSwiftyPatternImg:function(){var a=this;clearInterval(a._idReplacingSwiftyPatternImg)},_customizeMediaManager:function(){var b=this,c=this,e=wp.media.view.Settings.AttachmentDisplay,f=wp.media.view.Attachment.Details,g=wp.media.view.AttachmentCompat,h=wp.media.view.AttachmentsBrowser,i=wp.media.view.MediaFrame.Select,j=wp.media.model.Query.extend({sync:function(b){var d=this,e=d.args||{},f=function(a,b,c,e){d.add({id:a,title:"test",url:b,link:a,mime:"image/jpeg",type:"image",subtype:"jpeg",sizes:{full:{url:c}},nonces:{update:!1,"delete":!1,edit:!1},editLink:!1,meta:!1,swifty_cmd:e.cmd,swifty_tp:e.tp,swifty_params:e.params})};return"read"===b&&(c.options.media_image_prefix&&"img_list"===e.cmd&&c.getMediaImages(function(b){a.each(b,function(a,b){f(b.file,b.file,b.thumb,e)})},c.options.media_image_prefix),a.ajax({url:"https://stuff.swifty.online/stuff/data/get.php",type:"POST",data:{"do":e.cmd,tp:e.tp},dataType:"json",xhrFields:{withCredentials:!0}}).then(function(b){a.each(b.result,function(a,b){f(b.file,b.file+(e.tp?"&ssd_tp="+e.tp:""),b.file+e.params,e)
})})),jQuery.Deferred().resolveWith(this).promise()},more:function(a){var b=this;return this.hasMore()?(a=a||{},a.remove=!1,this._hasmore=!1,this._more=this.fetch(a).done(function(){b._hasMore=!1})):jQuery.Deferred().resolveWith(this).promise()}});wp.media.view.AttachmentsBrowser=h.extend({initialize:function(){h.prototype.initialize.apply(this,arguments),b.options.multiple&&this.$el.find("ul").css("top","80px")}}),wp.media.view.AttachmentsBrowserSwifty=wp.media.view.AttachmentsBrowser.extend({initialize:function(){wp.media.view.AttachmentsBrowser.prototype.initialize.apply(this,arguments)},createUploader:function(){this.uploader=new wp.media.View({controller:this.controller,tagName:"p"}),this.uploader.$el.addClass("hidden no-media"),this.uploader.$el.html(d("One moment...")),this.views.add(this.uploader)}}),wp.media.view.MediaFrame.Select=i.extend({initialize:function(){i.prototype.initialize.apply(this,arguments);var a=window.getUserSetting("libraryContent","browse"),c=a;1===b.options.swifty_mode?(this.on("router:render:browse",this.browseRouter2,this),this.on("content:create:header_images",this.browseContent_swifty_header_images,this),a="browse"):"header_images"===a&&(a="browse"),2===b.options.swifty_mode?(this.on("router:render:browse",this.browseRouter3,this),this.on("content:create:header_patterns",this.browseContent_swifty_header_patterns,this),this.on("content:create:header_stripe_patterns",this.browseContent_swifty_header_stripe_patterns,this),this.on("content:create:header_shape_patterns",this.browseContent_swifty_header_shape_patterns,this),"header_patterns"!==a&&"header_stripe_patterns"!==a&&"header_shape_patterns"!==a&&(a="header_patterns")):("header_patterns"===a||"header_stripe_patterns"===a||"header_shape_patterns"===a)&&(a="browse"),1!==b.options.swifty_mode&&(this.off("router:render:browse",this.browseRouter2,this),this.off("content:create:header_images",this.browseContent_swifty_header_images,this)),2!==b.options.swifty_mode&&(this.off("router:render:browse",this.browseRouter3,this),this.off("content:create:header_patterns",this.browseContent_swifty_header_patterns,this),this.off("content:create:header_stripe_patterns",this.browseContent_swifty_header_stripe_patterns,this),this.off("content:create:header_shape_patterns",this.browseContent_swifty_header_shape_patterns,this)),c!==a&&window.setUserSetting("libraryContent",a)},browseRouter2:function(a){a.set({header_images:{text:d("Swifty Images"),priority:40}})},browseRouter3:function(a){a.set({header_patterns:{text:d("Swifty Patterns"),priority:50}}),a.set({header_stripe_patterns:{text:d("Swifty Stripe Patterns"),priority:50}}),a.set({header_shape_patterns:{text:d("Swifty Shape Patterns"),priority:50}})},browseContent_swifty_header_images:function(a){var b={cmd:"img_list",tp:"",params:"&ssw=186"};this.browseContent_swifty(a,"swifty_header_images",b)},browseContent_swifty_header_patterns:function(a){var b={cmd:"pattern_list",tp:"img",params:""};this.browseContent_swifty(a,"swifty_header_patterns",b)},browseContent_swifty_header_stripe_patterns:function(a){var b={cmd:"pattern_list",tp:"stripe",params:"&ssc1=FFFFFF&ssc2=000000"};this.browseContent_swifty(a,"swifty_header_stripe_patterns",b)},browseContent_swifty_header_shape_patterns:function(a){var b={cmd:"pattern_list",tp:"shape",params:"&ssc1=FFFFFF&ssc2=000000"};this.browseContent_swifty(a,"swifty_header_shape_patterns",b)},browseContent_swifty:function(b,c,e){var f=this.state();f.get(c)||f.set(c,new j(null,{props:{query:!0},args:e})),this.$el.removeClass("hide-toolbar"),a(".media-frame-content").html(d("One moment...")),b.view=new wp.media.view.AttachmentsBrowserSwifty({controller:this,collection:f.get(c),selection:f.get("selection"),model:f,sortable:!1,search:!1,filters:!1,sidebar:!1,date:!1,display:f.get(f.has("display")?"display":"displaySettings"),dragInfo:f.get("dragInfo"),idealColumnWidth:f.get("idealColumnWidth"),suggestedWidth:f.get("suggestedWidth"),suggestedHeight:f.get("suggestedHeight"),AttachmentView:f.get("AttachmentView")})}}),wp.media.view.Settings.AttachmentDisplay=e.extend({initialize:function(){e.prototype.initialize.apply(this,arguments),this.$el.hide()}}),wp.media.view.Attachment.Details=f.extend({render:function(){f.prototype.render.apply(this,arguments),this.$el.find(".edit-attachment").hide(),this.$el.find(".setting").hide(),b.options.show_caption&&this.$el.find('.setting[data-setting="caption"]').show(),b.options.show_alt&&this.$el.find('.setting[data-setting="alt"]').show(),this.$el.find(".button-link.delete-attachment").html(d("Permanently remove this image here and from all pages.")),this.$el.find(".button-link.delete-attachment").css({"white-space":"normal","text-align":"left","text-decoration":"underline","margin-top":"50px",color:"black"}),this.$el.find(".button-link.delete-attachment").appendTo(this.$el)}}),wp.media.view.AttachmentCompat=g.extend({render:function(){g.prototype.render.apply(this,arguments),this.$el.hide()}}),wp.media.view.Toolbar.prototype.on("ready",function(){var b=a("."+this.className).filter(function(){return a(this).parent().hasClass("attachments-browser")}),c=b.find(".media-toolbar-secondary");c.find("select:last").css("max-width","100%")})},destroy:function(){this.media_manager=null,this._super()}})}),swifty.define("assets/image_viewer/image_viewer_edit",["jquery","js/panels/edit_asset/edit_asset","swiftylib/media_manager"],function(a,b,c){return b.extend({defaults:{show_caption:!1,show_alt:!1}},{".swc_select_images click":function(){var b=this,d=a("<div></div>").appendTo(this.element),e=new a.Deferred;new c(d,{selected_ids:b.options.asset_data.attr("selected_ids"),multiple:"add",show_caption:b.options.show_caption,show_alt:b.options.show_alt,dfd:e,swifty_mode:"AMH"===scc_data.ss2_hosting_name&&"1"===b.options.asset_data.attr("swc_swifty_on")?1:0,media_image_prefix:scc_data.media_image_prefix}),e.then(function(c){if(c&&"insert"===c.act&&a.isArray(c.attributes)&&c.attributes.length){var e=[],f=[];a.each(c.attributes,function(a,b){"img_list"===b.swifty_cmd&&f.push(b.url)}),f.length?(a("#swc-spinner").show(),a("#swc-screen-cover").show(),a.post(scc_data.ajax_url,{action:"insert_attachment_from_url",urls:JSON.stringify(f),id:scc_data.page_id,ajax_nonce:scc_data.ajax_nonce}).done(function(d){a.each(c.attributes,function(b,c){"img_list"===c.swifty_cmd?a.each(d,function(a,b){b.image_url===c.url&&e.push(b.id)}):e.push(c.id)}),b.options.asset_data.attr({selected_ids:e.join(",")}),b.options.asset_instance.reloadFromServer()}).always(function(){a("#swc-spinner").hide(),a("#swc-screen-cover").hide()})):(a.each(c.attributes,function(a,b){e.push(b.id)}),b.options.asset_data.attr({selected_ids:e.join(",")}),b.options.asset_instance.reloadFromServer())}d.remove()})}})}),swifty.define("assets/image_viewer/image_viewer",["jquery","swiftylib/evt","js/diverse/asset","./image_viewer_edit"],function(a,b,c,d){return c.extend({defaults:{asset_name:"image_viewer",class_edit:d}},{processServerInfo:function(){this._super(),this.options.onchange&&a.each(this.options.onchange,function(a,c){"updateslideshow"===c?b("add_exec",{evt:"update_slideshows"}):"updateslider"===c?b("add_exec",{evt:"update_sliders"}):"updategallerygrid"===c?b("add_exec",{evt:"update_gallery_grid"}):"updategallerygrid"===c?b("add_exec",{evt:"update_gallery_grid"}):"updategalleryflex"===c&&b("add_exec",{evt:"update_gallery_flex"})})}})}),swifty.define("assets/video/video_edit",["jquery","js/panels/edit_asset/edit_asset"],function(a,b){return b.extend({},{init:function(){var a=this;a.options.info_data=a.options.asset_instance.getAssetInfoData(),a._super()}})}),swifty.define("assets/video/video",["jquery","swiftylib/evt","js/diverse/asset","./video_edit","swiftylib/map"],function(a,b,c,d,e){return c.extend({defaults:{asset_name:"video",class_edit:d}},{init:function(){var a,b=this,c=1;b.options.info_data=new e,b._super(),a=b.options.asset_data,parseInt(a.attr("o_width"),10)>0&&parseInt(a.attr("o_height"),10)>0&&(c=0),b.getInfoFromYoutube(c)},"{asset_data} change":function(a,b,c,d,e,f){var g,h=this,i=h.options.asset_data;if("url"===c){var j={is_youtube:!1,video_id:"",o_width:"",o_height:""};e.indexOf("youtu")>=0&&(j.is_youtube=!0,e.indexOf("youtube")>=0?(g=e.match(/v=([^&]+)/i),g&&g.length>1&&""!==g[1]?j.video_id=g[1]:(g=e.match(/\/v\/([^&]+)/i),g&&g.length>1&&""!==g[1]&&(j.video_id=g[1]))):e.indexOf("youtu.be")>=0&&(g=e.split("/"),g&&g.length>0&&""!==g[g.length-1]&&(j.video_id=g[g.length-1]))),i.attr(j),this.getInfoFromYoutube(1)}h._super(a,b,c,d,e,f)},getInfoFromYoutube:function(b){var c=this,d=c.options.asset_data,e=window.location.protocol,f='select * from json where url ="'+e+"//www.youtube.com/oembed?url="+e+"//www.youtube.com/watch?v=";c.options.info_data.attr({typ:"",title:"",author:"",author_url:""}),a.ajax({url:e+"//query.yahooapis.com/v1/public/yql",data:{q:f+d.attr("video_id")+'&format=json"',format:"json"},dataType:"jsonp",success:function(a){if("object"==typeof a&&"object"==typeof a.query&&a.query.results&&"object"==typeof a.query.results){var e=a.query.results.json;if("object"==typeof e){var f={};1===b&&(parseInt(e.width,10)>0&&(f.o_width=parseInt(e.width,10)),parseInt(e.height,10)>0&&(f.o_height=parseInt(e.height,10)),d.attr(f)),c.options.info_data.attr({typ:e.provider_name,title:e.title,author:e.author_name,author_url:e.author_url})}}},error:function(){}})},getAssetInfoData:function(){return this.options.info_data}})}),swifty.define("assets/contact_form/contact_form",["jquery","js/diverse/asset","js/panels/edit_asset/edit_asset"],function(a,b,c){return b.extend({defaults:{asset_name:"contact_form",class_edit:c}},{init:function(){var a,b=this;b._super(),a=b.options.asset_data,"-2"===a.attr("form_id")&&a.attr({form_id:-1})}})}),swifty.define("assets/image/image_edit",["jquery","js/panels/edit_asset/edit_asset","swiftylib/media_manager"],function(a,b,c){return b.extend({},{".swc_select_image click":function(){this.select_image()},select_image:function(){var b=this,d=a("<div></div>").appendTo(this.element),e=new a.Deferred;a.post(scc_data.ajax_url,{action:"get_attachment_id_from_url",url:b.options.asset_data.attr("url"),id:scc_data.page_id,ajax_nonce:scc_data.ajax_nonce}).done(function(f){new c(d,{selected_ids:f||"",multiple:!1,dfd:e,show_caption:!0,show_alt:!0,swifty_mode:"AMH"===scc_data.ss2_hosting_name&&"1"===b.options.asset_data.attr("swc_swifty_on")?1:0,media_image_prefix:scc_data.media_image_prefix}),e.then(function(c){if(c&&"insert"===c.act){if(a.isArray(c.attributes)&&c.attributes.length){var e=[];a.each(c.attributes,function(a,b){"img_list"===b.swifty_cmd&&e.push(b.url)}),e.length?(a("#swc-spinner").show(),a("#swc-screen-cover").show(),a.post(scc_data.ajax_url,{action:"insert_attachment_from_url",urls:JSON.stringify(e),id:scc_data.page_id,ajax_nonce:scc_data.ajax_nonce}).done(function(a){a&&a.length>0&&b.options.asset_data.attr({url:a[0].url,alt:a[0].alt,caption:a[0].caption})}).always(function(){a("#swc-spinner").hide(),a("#swc-screen-cover").hide()})):b.options.asset_data.attr({url:c.attributes[0].url,alt:c.attributes[0].alt,caption:c.attributes[0].caption})}}else c&&"cancel"===c.act&&b.options.mode&&"added_new"===b.options.mode&&(b.options.asset_instance.deleteAsset(),b.closePanel());d.remove()})})},on_load_edit_stache:function(){""===this.options.asset_data.attr("url")&&this.select_image()}})}),swifty.define("assets/image/image",["jquery","swiftylib/evt","js/diverse/asset","./image_edit"],function(a,b,c,d){return c.extend({defaults:{asset_name:"image",class_edit:d,onchange:["checkimages"]}},{processServerInfo:function(){this._super(),this.options.asset_data.attr("url")&&this.element.find("img").css({"vertical-align":"bottom"})}})}),swifty.define("js/diverse/page",["jquery","swiftylib/evt","swiftylib/map","swiftylib/list","swiftylib/sort","js/diverse/asset","js/panels/panel_stack/panel_stack_instance","js/panels/add_content/add_content","js/panels/page_setup/page_setup","js/panels/info/info","swiftylib/control","js/libs/mout/src/function/throttle","js/diverse/utils","swiftylib/i18n/__","swiftylib/deferreds","assets/image_viewer/image_viewer","assets/video/video","assets/contact_form/contact_form","assets/image/image"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){var t=",textual,clipboard,visuals,layout,interactive,others,presets,thirdparty,",u=new d;u.attr("comparator","cat_order");var v=new c({published_content:null,initial_content:null,is_published_same:!0,is_style_changed:!1,publish_title:n("Publish"),show_button_publish:!0,is_saving:!1,area_has_been_edited:!1,show_button_manage_versions:!1,show_button_notifications:!0,show_button_page_options:!0,show_button_swifty:!1,images_sizes_to_be_determined:[]});return k.extend({},{init:function(){var b=this;b.isEditingMain()||(b.getMap().attr("publish_title",n("Publish")+" "+scc_data.area),b.getMap().attr("show_button_publish",!1),b.getMap().attr("show_button_manage_versions",!1),b.getMap().attr("show_button_notifications",!1),b.getMap().attr("show_button_page_options",!1)),"AMH"===scc_data.ss2_hosting_name&&b.getMap().attr("show_button_notifications",!1),b.registerComingSoonAssets(),b.registerAssets(scc_data.asset_list),b.registerAsset({shortcode:"paste_content",name:n("Paste"),category:"clipboard",icon:"fa-paste"},1),b.registerAsset({shortcode:"add_shortcode",name:n("Shortcode"),category:"thirdparty",icon:"fa-edit"},1),b.registerAsset({asset_class:q,trigger_view_fn:!0,shortcode:"swifty_video"},1),b.registerAsset({asset_class:r,shortcode:"swifty_contact_form"},1),b.registerAsset({asset_class:s,shortcode:"swifty_image"},1),b.loadPublishedModel(),b._super(),b.savePageThrottledObject=l(a.proxy(b.savePage,b),5e3),b.addAutosaveFunctionality(),b.on()},loadPublishedModel:function(){var c=this;a.post(scc_data.ajax_url,{action:"swcreator_get_published_data",ajax_nonce:scc_data.ajax_nonce,id:scc_data.page_id}).then(function(a){a&&(a=a.replace(/\r\n/g,"\n")),c.getMap().attr("published_content",a),c.checkPubStatus(null,!1),b("swifty_editor_set_wrappers_height")})},registerSwiftyEditorAssets:function(b){var c=this;a.each(b,function(a,b){c.registerSwiftyEditorAsset(b)})},registerSwiftyEditorAsset:function(a){var b=this,c=1,d=b.getAssetFromCategories(a,c);a.name&&d.attr("name",a.name),d.attr("name")||d.attr("name",a.action),a.category&&d.attr("category",a.category),a.icon&&d.attr("icon",a.icon),d.attr("icon")||d.attr("icon","???"),a.coming&&d.attr("coming",a.coming),a.order&&d.attr("order",parseInt(a.order,10)),d.attr("order")||d.attr("order",9999)},registerComingSoonAssets:function(){var a=this;a.registerAsset({shortcode:"swifty_gallery_flex",name:n("Flex Gallery"),category:"visuals",icon:"&#xe929;",coming:"scvp"},1),a.registerAsset({shortcode:"swifty_gallery_grid",name:n("Grid Gallery"),category:"visuals",icon:"&#xe92a;",coming:"scvp"},1),a.registerAsset({shortcode:"swifty_slider",name:n("Slider"),category:"visuals",icon:"&#xe012;",coming:"scvp"},1),a.registerAsset({shortcode:"swifty_slideshow",name:n("Slideshow"),category:"visuals",icon:"&#xe01c;",coming:"scvp"},1),a.registerAsset({shortcode:"swifty_box",name:n("Box"),category:"layout",icon:"&#xe050;",coming:"scgp"},1),a.registerAsset({shortcode:"swifty_maps",name:n("Map"),category:"interactive",icon:"&#xe043;",coming:"scgp"},1),a.registerAsset({shortcode:"swifty_search_box",name:n("Search box"),category:"interactive",icon:"&#xe01e;",coming:"scgp"},1),a.registerAsset({shortcode:"swifty_sitemap",name:n("Sitemap"),category:"others",icon:"&#xe01d;",coming:"scgp"},1)},registerAssets:function(b){var c=this;a.each(b,function(a,b){c.registerAsset({name:b.name,category:b.category,icon:b.icon,shortcode:a,order:b.order,width:b.width,type:b.type,paid:b.paid,expired:b.expired,coming:b.coming,onchange:b.onchange?b.onchange.split(","):null,force_close_tag:b.force_close_tag},0)})},registerAsset:function(a,b){var c=this,d=0,e=c.getAssetFromCategories(a,d);if(("undefined"==typeof e.attr("class")||1===b)&&(a.asset_class?e.attr("class",a.asset_class):e.attr("class",f)),a.name&&e.attr("name",a.name),!e.attr("name")){var g=a.shortcode;0===g.indexOf("swcreator_")&&(g=g.substr("swcreator_".length)),0===g.indexOf("swifty_")&&(g=g.substr("swifty_".length)),g=(g.charAt(0).toUpperCase()+g.slice(1)).replace("_"," "),e.attr("name",g)}a.category&&e.attr("category",a.category),a.icon&&e.attr("icon",a.icon),e.attr("icon")||e.attr("icon","???"),a.order&&e.attr("order",parseInt(a.order,10)),e.attr("order")||e.attr("order",9999),a.width&&e.attr("width",parseInt(a.width,10)),e.attr("width")||e.attr("width",50),a.type&&e.attr("type",a.type),e.attr("type")||e.attr("type","inline"),a.trigger_view_fn&&e.attr("view",a.trigger_view_fn),a.paid?(e.attr("paid",a.paid),e.attr("coming",null)):a.coming&&e.attr("coming",a.coming),a.expired&&""===scc_data.ss2_hosting_name&&(e.attr("expired",a.expired),e.attr("paid",null),e.attr("coming",null)),a.onchange&&e.attr("onchange",a.onchange),a.force_close_tag&&e.attr("force_close_tag",a.force_close_tag)},getCategoryFromList:function(a){var b=u.filter(function(b){return b.attr("name")===a});return 1===b.length?b.attr(0):null},getAssetFromCategories:function(a,b){var e,f,g=this,h=b?"action":"shortcode";return a.category&&(f=g.getCategoryFromList(a.category),f||u.push({name:a.category,assets:new d,cat_order:t.indexOf(","+a.category+",")})),u.each(function(b){return e?!1:void b.attr("assets").each(function(b){return b.attr(h)===a[h]?(e=b,!1):void 0})}),e||(e=new c,e.attr(h,a[h]),a.category&&(f=g.getCategoryFromList(a.category),f.attr("assets").push(e))),e},getAssetDefOfType:function(a){var b=f;return u.each(function(c){c.attr("assets").each(function(c){var d=c.attr("shortcode");!d||d!==a&&"swcreator_"+d!==a&&"swifty_"+d!==a||(b=c)})}),b},getAssetClassOfType:function(a){var b=this.getAssetDefOfType(a);return"function"==typeof b?b:b.attr("class")},getAssetViewOfType:function(a){var b=this.getAssetDefOfType(a);return"function"==typeof b?null:b.attr("view")},getAssetNameOfType:function(a){var b=this.getAssetDefOfType(a);return"function"==typeof b?"":b.attr("name")},getAssetOnChangeOfType:function(a){var b=this.getAssetDefOfType(a);return"function"==typeof b?null:b.attr("onchange")},getAssetForceCloseTags:function(){var a={};return u.each(function(b){b.attr("assets").each(function(b){var c=b.attr("shortcode");c&&(a[c]="function"==typeof b?0:b.attr("force_close_tag"))})}),a},isEditingMain:function(){return scc_data&&"main"===scc_data.area},createAssetClassForElement:function(b,c){var d=b.closest(".swc_asset,.swc_text"),e=d.attr("data-asset_type"),f=this.getAssetClassOfType(e);if(f){var g=this.getAssetNameOfType(e),h={};h.is_block=c?!1:!0,h.in_grid=b.closest(".swc_grid_row").length>0,g+""!=""&&(h.asset_name=g),e+""!=""&&(h.shortcode=e);var i=new f(b,h),j=this.getAssetOnChangeOfType(e);return j&&(i.options.onchange&&a.each(i.options.onchange,function(b,c){-1===a.inArray(c,j)&&j.push(c)}),i.options.onchange=j),i}return null},openAssetPanel:function(a,b,c,d){var e=this.createAssetClassForElement(a,c);e&&(d&&e.assignCss(),"added_new"===b?e.openEditPanel(b):"icon_resized"===b?e.resizeToCurrentWidth():e.openMainPanel(b))},setAssetLock:function(a,b){var c=this.createAssetClassForElement(a);c&&c.setLocked(b)},contentLocked:function(){g.resetPanelStack({left:!0}),g.addPanel(j,{info_text:n("This content has been locked by an administrator."),info_text2:n("Contact the administrator to change it.")})},setRowLock:function(c,d){var e=a.parseJSON(c.attr("data-grid_data"));if(e){d?(e.swc_locked="1",c.addClass("swc_locked")):(delete e.swc_locked,c.removeClass("swc_locked")),c.attr("data-grid_data",JSON.stringify(e));var f=c.find(".swc_asset,.swc_text");a.each(f,function(b,c){var e=a(c),f=e.children(".swc_asset_cntnt");if(1===f.length){var g=a.parseJSON(m.atou(f.attr("data-asset_data")));d?(g.swc_locked="1",e.addClass("swc_locked")):(delete g.swc_locked,e.removeClass("swc_locked")),f.attr("data-asset_data",m.utoa(JSON.stringify(g)))}}),b("swifty_editor_trigger_save",{})}},copyAsset:function(a){var b=this.createAssetClassForElement(a);b&&b.copyToDB()},copyRow:function(a){var c=this;b("animate_clipboard_copy",{$element:a}),b("convert_from_element_html",{$element:a}).done(function(a){c.swiftyCopyContentToDB({content:a,source:"row"})})},swiftyCopyContentToDB:function(b,c){return c||(c=new a.Deferred),a.post(m.getSWCreatorAjaxUrl(),{action:"set_content_clipboard",id:scc_data.page_id,ajax_nonce:scc_data.ajax_nonce,content:b.content,source:b.source},function(b){scc_data.is_content_clipboard_available=!0,c.resolve(a.parseJSON(b))}),c},swiftyCopyContentFromDB:function(b){return b||(b=new a.Deferred),a.post(m.getSWCreatorAjaxUrl(),{action:"get_content_clipboard",id:scc_data.page_id,ajax_nonce:scc_data.ajax_nonce},function(c){c=a.parseJSON(c),c.status?(delete c.status,b.resolve(c)):(scc_data.is_content_clipboard_available=!1,b.resolve(!1))}),b},"{window} evt_swc_swifty_copy_content_to_db":function(a,b,c,d){this.swiftyCopyContentToDB(c,d)},"{window} evt_swc_swifty_copy_content_from_db":function(a,b,c,d){this.swiftyCopyContentFromDB(d)},"{window} evt_swc_swifty_editor_asset_dialog":function(b,c,d){this.openAssetPanel(a(d.el),d.mod,d.inline,d.init_css)},"{window} evt_swc_swifty_editor_asset_edit_dialog":function(b,c,d){this.openAssetPanel(a(d.el),"directedit",d.inline,d.init_css)},"{window} evt_swc_swifty_editor_asset_delete_dialog":function(b,c,d){this.openAssetPanel(a(d.el),"delete",d.inline,d.init_css)},"{window} evt_swc_swifty_editor_asset_lock":function(b,c,d){this.setAssetLock(a(d.el),d.locked)},"{window} evt_swc_swifty_editor_row_lock":function(b,c,d){this.setRowLock(a(d.$row),d.locked)},"{window} evt_swc_swifty_editor_asset_locked":function(){this.contentLocked()},"{window} evt_swc_swifty_editor_row_locked":function(){this.contentLocked()},"{window} evt_swc_swifty_editor_asset_move_dialog":function(b,c,d){this.openAssetPanel(a(d.el),"move",d.inline,d.init_css)},"{window} evt_swc_swifty_editor_asset_copy":function(b,c,d){this.copyAsset(a(d.el))},"{window} evt_swc_swifty_editor_row_copy":function(b,c,d){this.copyRow(a(d.$row))},"{window} evt_swc_get_asset_force_close_tags":function(a,b,c,d){var e=this;d.resolve(e.getAssetForceCloseTags())},triggerAssetReload:function(a){var b=a.closest(".swc_asset"),c=b.attr("data-asset_type"),d=this.getAssetClassOfType(c);if(d){var e=new d(a,{});e.reloadFromServerNow()}},"{window} evt_swc_swifty_editor_change_window_location":function(a,b,c){window.location=c.url},"{window} evt_swc_swifty_editor_asset_inserted":function(b,c,d){this.triggerAssetReload(a(d.el))},getAssetFromServer:function(c,d,e){var f=this,g=new a.Deferred;return a.post(m.getSWCreatorAjaxUrl(),{action:"get_asset_content_by_data",id:scc_data.page_id,ajax_nonce:scc_data.ajax_nonce,data:JSON.stringify(d.attr())},function(h){try{h=a.parseJSON(h);var i=a(h.html),j=i.html(),k=i.attr("style"),l=i.attr("class"),m=f.getAssetViewOfType(d.swc_shortcode);b("process_css_and_js_additions",{data:h}),b("new_asset_content_received",{container:c,html:j,style:k,classes:l,refreshnr:e}),m&&setTimeout(function(){b("trigger_view_fn",{$el:c.find("."+d.swc_shortcode)})},1),g.resolve(h)}catch(n){b("swifty_editor_remove_refresh_spinner"),g.reject()}}),g},addAutosaveFunctionality:function(){var a,b,c=this;"undefined"!=typeof wp&&wp.autosave&&wp.autosave.__swifty_override&&(c.isEditingMain()?(a=function(){return{post_id:scc_data.page_id,post_type:"page",content:c.newest_content,post_title:scc_data.page_title}},b=function(){var b=a();return b._wpnonce=window.autosaveL10n.swcreator_wp_nonce,null==b.content?!1:b},wp.autosave.__swifty_override(a),wp.autosave.server.__swifty_override(b)):(a=function(){return{post_id:scc_data.page_id,post_type:"page",content:"",post_title:""}},b=function(){return!1},wp.autosave.__swifty_override(a),wp.autosave.server.__swifty_override(b)))},savePage:function(){var a=this;"undefined"!=typeof wp&&wp.autosave&&this.isEditingMain()&&(b("saving_started"),a.getMap().attr("is_saving",!0),wp.autosave.server.triggerSave())},getAssets:function(){return u.each(function(a){a.attr("assets").attr("comparator","order")}),u},getMap:function(){return v},checkPubStatus:function(a,b){var c=this,d=c.getMap().attr("published_content"),e=c.getMap().attr("area_has_been_edited");b&&c.getMap().attr("initial_content",a),"_-NOT-PublisheD-_"===d?(null===c.getMap().attr("initial_content")&&c.getMap().attr("initial_content",a),c.getMap().attr("is_published_same",""===a)):(null===a&&(a=c.getMap().attr("initial_content")),e||c.isEditingMain()?c.getMap().attr("is_published_same",null===a||d===a):c.getMap().attr("is_published_same",!0))},publishPageNow:function(){var b=this;return b.savePageStyleObject(),a.post(scc_data.ajax_url,{action:"swcreator_publish",ajax_nonce:scc_data.ajax_nonce,id:scc_data.page_id}).then(function(a){a&&(a=a.replace(/\r\n/g,"\n")),b.getMap().attr("published_content",a),b.checkPubStatus(a,!0)})},savePageStyleObject:function(){var c="page_";"main"!==scc_data.area&&(c=scc_data.area+"_"+(scc_data.area_template?scc_data.area_template:"")),b("get_page_style_object",c).then(function(b){b&&(b=JSON.stringify(b),a.post(m.getSWCreatorAjaxUrl(),{action:"set_area_template_style",id:scc_data.page_id,ajax_nonce:scc_data.ajax_nonce,style:b,name:"page_"===c?"page":scc_data.area,template:"page_"===c?scc_data.page_id:scc_data.area_template},function(){}))})},publishContentNow:function(){var b=this;return b.savePageStyleObject(),a.post(scc_data.ajax_url,{action:"swcreator_publish",ajax_nonce:scc_data.ajax_nonce,id:scc_data.page_id,view_id:scc_data.view_id,content:b.newest_content,area:scc_data.area,area_template:scc_data.area_template}).then(function(a){a&&(a=a.replace(/\r\n/g,"\n")),b.getMap().attr("published_content",a),b.checkPubStatus(a,!0)})},deleteArea:function(){return a.post(scc_data.ajax_url,{action:"swcreator_delete_area",ajax_nonce:scc_data.ajax_nonce,id:scc_data.page_id})},getPublishedVersions:function(){return a.post(scc_data.ajax_url,{action:"swcreator_get_published_versions",ajax_nonce:scc_data.ajax_nonce,id:scc_data.page_id})},restorePageRevision:function(c){return a.post(scc_data.ajax_url,{action:"swcreator_get_revision",ajax_nonce:scc_data.ajax_nonce,id:scc_data.page_id,revision_id:c}).then(function(a){b("swifty_editor_set_new_content",{content:a})})},getAreaSettings:function(){return a.post(scc_data.ajax_url,{action:"swcreator_get_area_settings",ajax_nonce:scc_data.ajax_nonce,id:scc_data.page_id}).then(function(a){return a})},saveAreaSettings:function(b){return a.post(scc_data.ajax_url,{action:"swcreator_save_area_settings",ajax_nonce:scc_data.ajax_nonce,id:scc_data.page_id,area_settings:b}).then(function(a){return a})},swiftyremovep:function(b){var c=[];if(b+="",-1!==b.indexOf("<!--keep_swifty_content_start-->")){var d=b.split("<!--keep_swifty_content_end-->"),e=d.pop();b="",a.each(d,function(a,d){var e=d.indexOf("<!--keep_swifty_content_start-->");if(-1===e)return b+=d,!1;var f="<!--SwIftrEplace-{"+a+"}-->";c.push({name:f,value:d.slice(e)+"<!--keep_swifty_content_end-->"}),b=b+d.slice(0,e)+f}),b+=e}return window.wp.editor&&window.wp.editor.removep&&(b=window.wp.editor.removep(b)),a.each(c,function(a,c){b=b.split(c.name).join(c.value)}),b},findUsedFonts:function(a){b("get_list_google_fonts").then(function(c){for(var d,e=/font-family:(.*?),/g,f=[];null!==(d=e.exec(a));)if(d.length>1){var g=d[1],h="";c.each(function(a){a.each(function(a){a.toLowerCase()===g.toLowerCase()&&(h=a)})}),""!==h&&f.push(h)}b("apply_found_fonts",f)})},html_to_content:function(a){return a=a.replace(/<figure class="wp-caption (alignnone|alignleft|aligncenter|alignright)"(.*?) style="width: (.+)px">(.*)(\s*)<figcaption class="wp-caption-text">(.*?)<\/figcaption>(\s*)<\/figure>/gi,'[caption$2  align="$1" width="$3"]$4$6[/caption]'),a=a.replace(/<div class="wp-caption (alignnone|alignleft|aligncenter|alignright)"(.*?) style="width: (.+)px">(.*)(\s*)<p class="wp-caption-text">(.*?)<\/p>(\s*)<\/div>/gi,'[caption$2  align="$1" width="$3"]$4$6[/caption]'),a=a.replace(/(<img .*) srcset=".*?"(.*\/>)/gi,"$1$2"),a=a.replace(/(<img .*) sizes=".*?"(.*\/>)/gi,"$1$2"),a=a.replace(/<!--keep_swifty_start-->/gi,""),a=a.replace(/<!--keep_swifty_end-->/gi,""),"1"===scc_data.wpautop_active&&(a=a.replace(/\r\n/g,"\n"),a=a.replace(/<p>(?:<br ?\/?>|\u00a0|\uFEFF| )*<\/p>/g,"<p>&nbsp;</p>"),a=this.swiftyremovep(a)),a=a.replace(/<!--keep_swifty_content_start-->/gi,""),a=a.replace(/<!--keep_swifty_content_end-->/gi,""),a=a.replace("swc_table_outline",""),a=a.replace(/<swifty_(block|inline)_replacer>(\n)*/g,""),a=a.replace(/<\/swifty_(block|inline)_replacer>(\n)*/g,""),a=a.replace(/<swifty_grid_row_replacer data-grid-row-shortcode_data="(([\s\S])*?)">(\s)*/g,"[swifty_grid_row$1]"),a=a.replace(/<\/swifty_grid_row_replacer>/g,"[/swifty_grid_row]"),a=a.replace(/<swifty_grid_column_replacer data-grid-column-shortcode_data="(([\s\S])*?)">(\s)*/g,"[swifty_grid_column$1]"),a=a.replace(/<\/swifty_grid_column_replacer>/g,"[/swifty_grid_column]"),a=a.replace(/<swifty_text_replacer data-text_data="(([\s\S])*?)">(\s)*/g,"[swifty_text$1]"),a=a.replace(/<\/swifty_text_replacer>/g,"[/swifty_text]"),a=a.replace(/_=QUoTe=-/g,'"'),a=a.replace(/(\s)*<div([^<]*?)class="swc_grid_colwrapper([^>]*?)>(\s)*/g,""),a=a.replace(/(\s)*<div([^<]*?)class="swc_grid_colclose([^>]*?)>(\s)*<\/div>(\s)*<\/div>(\s)*/g,""),a=a.replace(/\[swifty_grid_row(([\s\S])*?)](\s)*<p>(\s)*<\/p>(\s)*\[swifty_grid_column/g,"[swifty_grid_row$1][swifty_grid_column"),a=a.replace(/(\s)*<style([^<]*?)class="swc_custom_css"([^>]*?)>([\s\S])*?<\/style>([\s\S])*?<div([^<]*?)class="swc_custom_cssclose"([^>]*?)>(\s)*<\/div>(\s)*/g,""),a=a.replace(/(\s)*<div([^<]*?)class="swc_rw_in_effect"([^>]*?)>([\s\S])(\s)*<\/div>/g,""),a=a.replace(/_=EnTEr=-/g,"\n"),a=a.replace(/]&nbsp;$/g,"]\n\n&nbsp;"),a=a.replace(/<p>(\s)*<\/p>/g,"<p>&nbsp;</p>"),a=a.replace(/<\/p>\n\n\[\/swifty_grid_column/g,"</p>\n[/swifty_grid_column"),a=a.replace(/]<h/g,"]\n<h")},"{window} evt_swc_set_row_lock":function(a,b,c){this.setRowLock(c.$row,c.locked)},"{window} evt_swc_register_asset":function(a,b,c){this.registerAsset(c,1)},"{window} evt_swc_ready_for_register_asset":function(a,b,c,d){d.resolve(1)},"{window} evt_swc_get_amd_items":function(a,b,c,d){var e={};c.asset&&(e.asset=f),c.image_viewer&&(e.image_viewer=p),d.resolve(e)},"{window} evt_swc_get_area_settings":function(a,b,c,d){this.getAreaSettings().then(function(a){d.resolve(a)})},"{window} evt_swc_save_area_settings":function(a,b,c,d){this.saveAreaSettings(c).then(function(a){d.resolve(a)})},"{window} evt_swc_publish_page_now":function(a,b,c,d){this.publishPageNow().then(function(a){d.resolve(a)})},"{window} evt_swc_publish_content_now":function(a,b,c,d){this.publishContentNow().then(function(a){d.resolve(a)})},"{window} evt_swc_delete_area":function(a,b,c,d){this.deleteArea().then(function(a){d.resolve(a)})},"{window} evt_swc_get_published_versions":function(a,b,c,d){this.getPublishedVersions().then(function(a){d.resolve(a)})},"{window} evt_swc_restore_page_revision":function(a,b,c,d){this.restorePageRevision(c.revision_id).then(function(a){d.resolve(a)})},"{window} evt_swc_get_assets":function(a,b,c,d){var e=this.getAssets();d.resolve(e)},"{window} evt_swc_register_swifty_editor_assets":function(a,b,c){this.registerSwiftyEditorAssets(c.assets)},"{window} evt_swc_asset_data_changed":function(a,b,c,d){this.getAssetFromServer(c.container,c.asset_data,c.refreshnr).then(function(a){d.resolve(a)})},"{window} evt_swc_swifty_editor_content_changed":function(a,c,d){d&&null!=d.content&&(this.heartbeat_content=null,d.content=this.html_to_content(d.content),this.findUsedFonts(d.content),this.newest_content=d.content,this.isEditingMain()?(b("saving_throttled_started"),this.getMap().attr("is_saving",!0),this.savePageThrottledObject(),this.checkPubStatus(d.content,!1)):this.getMap().attr("area_has_been_edited",!0)),b("swifty_update_scrolleffect")},"{window} evt_swc_swifty_editor_before_init":function(a,b,c){c&&null!=c.content&&(c.content=this.html_to_content(c.content),this.findUsedFonts(c.content),this.checkPubStatus(c.content,!0))
},"{window} evt_swc_swifty_html_to_content":function(a,b,c,d){d.resolve(c&&null!=c.content?this.html_to_content(c.content):"")},"{document} heartbeat-send":function(a,b,c){c.wp_autosave&&null!=c.wp_autosave.content&&(this.heartbeat_content=c.wp_autosave.content)},"{document} heartbeat-tick":function(a,c,d){var e=this;!d.wp_autosave||d.wp_autosave.success!==!0&&this.newest_content!==e.getMap().attr("published_content")?d.wp_autosave&&d.wp_autosave.success===!1&&b("saving_failed"):this.newest_content===this.heartbeat_content&&b("saving_done").done(function(){e.getMap().attr("is_saving",!1)})},"{window} evt_swc_new_determine_image_sizes":function(a,b,c){c&&c.sizes&&window.swiftyCheckImageSizesToBeDetermined(scc_data.page_id,c.sizes)},"{window} evt_swc_add_content_panel":function(a,b,c){g.addPanel(h,{in_grid:c?c.in_grid:!1,$column:c?c.$column:null,locked:c?c.locked:!1,allowance:c?c.allowance:null})},"{window} evt_swc_show_page_setup":function(){var a=this;a.isEditingMain()?g.addPanel(i,{}):b("swifty_editor_show_tooltip")},convertPresetHtml:function(c){var d=this,e=a.Deferred();return a.post(m.getSWCreatorAjaxUrl(),{action:"convert_html_with_shortcodes",id:scc_data.page_id,ajax_nonce:scc_data.ajax_nonce,data:c.html},function(f){if(f=a.trim(f),"{"===f.substr(0,1))if(f=a.parseJSON(f),f.html=f.html.replace(/\n$/,""),f.plugin_slug){var g=n("Pasting not allowed. Paste content contains expired license content element(s):")+"\n"+f.plugin_slug+"\n\n";"undefined"==typeof swiftyProbe?alert(g):(c.html=g.replace("\n","<br>"),d.replaceHtml(c).done(function(){e.resolve()}))}else b("replace_ids",{html:f.html}).then(function(a){f.html=a,b("get_swifty_ssd_data").then(function(a){d.options.replaceList=[],a&&a.colors&&a.colors.length>2&&d.options.replaceList.push(["#1e3c7c",a.colors[2]]),c.html=f.html,d.replaceHtml(c).done(function(){e.resolve()})})})}),e},replaceHtml:function(b){var c=this,d=o(),e=a.Deferred();d.add(e);for(var f=0;2>f;f++)c._replaceHtmlAll(d,b);return e.resolve(),d},_replaceHtmlAll:function(b,c){var d=this;c.html=d._replaceHtmlHelper(c.html,c),c.html=c.html.replace(/data-asset_data="([A-Za-z0-9+\/=]*?)"/g,function(e,f){f=m.atou(f);var g=JSON.parse(f);if(g&&"string"==typeof g.url&&0===g.url.indexOf("https://stuff.swifty.online/static/")){if(c.replaceImages){if(!d._isInReplaceList(g.url)){var h=a.Deferred();b.add(h),d._addToReplaceList(g.url,"_==PENDING=_=",c);var i=g.url;i.indexOf("?swifty=")>0||(i+="?swifty=1&ssw=1920"),a.post(scc_data.ajax_url,{action:"insert_attachment_from_url",urls:JSON.stringify([i]),id:scc_data.page_id,ajax_nonce:scc_data.ajax_nonce}).done(function(a){a&&a.length>0&&(d._addToReplaceList(g.url,a[0].url,c),d._replaceHtmlAll(b,c)),h.resolve()})}}else g.url.indexOf("?swifty=")>0||(d._addToReplaceList(g.url+'"',g.url+'?swifty=1&ssw=300"',c),d._addToReplaceList(g.url+"'",g.url+"?swifty=1&ssw=300'",c),g.url+="?swifty=1&ssw=300");f=JSON.stringify(g)}return f=d._replaceHtmlHelper(f,c),f=m.utoa(f),'data-asset_data="'+f+'"'})},_replaceHtmlHelper:function(b){var c=this;return a.each(c.options.replaceList,function(a,c){if("_==PENDING=_="!==c[1]){var d=new RegExp(c[0],"g");b=b.replace(d,c[1])}}),b},_isInReplaceList:function(b){var c=this,d=null;return a.each(c.options.replaceList,function(a,c){c[0]===b&&(d=c)}),d},_addToReplaceList:function(a,b){var c=this,d=c._isInReplaceList(a);d?"_==PENDING=_="===d[1]&&(d[1]=b):c.options.replaceList.push([a,b])},"{window} evt_swc_convert_preset_html":function(a,b,c,d){var e=this,f=c.htmlSettings?c.htmlSettings:{replaceImages:!0,html:c.html};e.convertPresetHtml(f).then(function(){d.resolve(f.html)})},"{window} evt_swc_check_swifty_allow_external":function(b,c,d,e){a.post(scc_data.ajax_url,{action:"get_set_swifty_allow_external",swifty_allow_external:"",id:scc_data.page_id,ajax_nonce:scc_data.ajax_nonce}).then(function(a){e.resolve(a.swifty_allow_external)})},"{window} evt_swc_set_swifty_allow_external":function(b,c,d,e){a.post(scc_data.ajax_url,{action:"get_set_swifty_allow_external",swifty_allow_external:d.allow,id:scc_data.page_id,ajax_nonce:scc_data.ajax_nonce}).then(function(a){e.resolve(a.swifty_allow_external)})},"{window} evt_swc_change_scc_data":function(a,b,c){scc_data[c.key]=c.val},"{window} evt_swc_set_is_style_changed":function(a,b,c){this.getMap().attr("is_style_changed",c)},"{window} evt_swc_get_asset_name":function(b,c,d,e){var f=this.createAssetClassForElement(a(d.el),d.inline);e.resolve(f.getAssetNameTranslated())}})}),swifty.define("stache!js/panels/main/main.stache",["can/../can"],function(a){var b="__stache_tmpl_"+"js/panels/main/main.stache".split(".").join("_").split("/").join("_")+"_"+Date.now()+"_"+parseInt(1e6*Math.random())+"__";return a.view.mustache(b,'<div class="swc_panel_content_nowrap swc_panel_main_add_buttons">\n{{#if map.show_main_menu}}\n    <swc_panel_button icon="&#xe031;" action="add_content" name="{{__ \'Add content\'}}"/>\n    <swc_panel_button icon="&#xe031;" action="add_column" name="{{__ \'Add columns\'}}"/>\n    <swc_panel_button icon="&#xe031;" action="add_preset" name="{{__ \'Add preset\'}}"/>\n    {{#if page_model_map.show_button_options}}\n        <div class="swc_panel_btn_divider"></div>\n        <swc_panel_button icon="&#xe031;" action="page_options" name="{{__ \'Options\'}}"/>\n    {{/if}}\n    {{#if page_model_map.show_button_style}}\n        <div class="swc_panel_btn_divider"></div>\n        <swc_panel_button icon="fa-paint-brush" action="change_style" name="{{__ \'Style\'}}"/>\n    {{/if}}\n{{else}}\n    <div class="swc_button swc_main_scrsize swc_enabled swc_spinner_icon">\n        <i class="fa fa-spinner fa-spin fa-fw margin-bottom"></i>\n    </div>\n    <div class="swc_panel_notice_msg">{{page_model_map.show_main_menu_msg}}</div>\n{{/if}}\n</div>'),b}),swifty.define("js/panels/publish/publish",["jquery","swiftylib/evt","../yes_no/yes_no","swiftylib/i18n/__"],function(a,b,c,d){return c.extend({defaults:{title:d("Publish page so it can be seen by others"),yes_name:d("Publish page"),no_name:d("Cancel. Do not publish"),yes_icon:"&#xe033;"}},{".swc_panel_button_yes click":function(){var a=this;a.element.find(".swc_panel_content").css("font-size","18px").html(d("Publishing. Please wait...")),b("publish_page_now").then(function(){b("determine_image_sizes"),a.element.find(".swc_panel_content").css({color:"#00a000","font-weight":"bold"}).html(d("Done! Your page is published and can now be seen by others"))})},".swc_panel_button_no click":function(){this.closePanel()}})}),swifty.define("stache!js/panels/manage_versions/manage_versions.stache",["can/../can"],function(a){var b="__stache_tmpl_"+"js/panels/manage_versions/manage_versions.stache".split(".").join("_").split("/").join("_")+"_"+Date.now()+"_"+parseInt(1e6*Math.random())+"__";return a.view.mustache(b,'<div class="swc_panel_content_nowrap">\n    {{#if revisions.data}}\n        {{^page_model_map.is_published_same}}\n        <div class="swc_revision_warning">\n            {{{__ \'There are unpublished changes on this page.<br />If you restore an older page version,<br />these changes will be lost permanently.\'}}}\n        </div>\n        {{/page_model_map.is_published_same}}\n        {{#each revisions.data}}\n            <div class="swc_revision_button_wrapper">\n                <div class="swc_revision_button" data-revision_id="{{ID}}">\n                    <div class="swc_text">\n                        {{swc_date_string}}<br><br>\n                        {{swc_time_string}}\n                    </div>\n                </div>\n            </div>\n        {{/each}}\n    {{else}}\n        {{__ \'One moment please...\'}}\n    {{/if}}\n</div>'),b}),swifty.define("css!js/panels/manage_versions/manage_versions",[],function(){}),function(a){"function"==typeof swifty.define&&swifty.define.amd?swifty.define("js/libs/stdlib_date",["jquery"],a):a(jQuery)}(function(){Date.nameOfMonths=["January","February","March","April","May","June","July","August","September","October","November","December"],Date.prototype.format=function(a,b){a=a.split("");for(var c=a.length,d="",e=m=null,f=0;c>f;f++)switch(a[f]){case"d":e=b?this.getUTCDate():this.getDate(),10>1*e&&(d+="0"),d+=e;break;case"D":d+=this.getNameOfDay(b).substring(0,3);break;case"j":d+=b?this.getUTCDate():this.getDate();break;case"l":d+=this.getNameOfDay(b);break;case"N":d+=this.getISODay(b);break;case"S":d+=this.getDaySuffix(b);break;case"w":d+=b?this.getUTCDay():this.getDay();break;case"z":e=0,m=b?this.getUTCMonth():this.getMonth();for(var f=0;f<m;f++)e+=Date.daysInMonth[f];this.isLeapYear()&&e++,e+=b?this.getUTCDate():this.getDate(),e--,d+=e;break;case"W":d+=this.getISOWeek(b);break;case"F":d+=this.getNameOfMonth(b);break;case"m":e=b?this.getUTCMonth():this.getMonth(),e++,10>e&&(d+="0"),d+=e;break;case"M":d+=this.getNameOfMonth(b).substring(0,3);break;case"n":e=b?this.getUTCMonth():this.getMonth(),d+=++e;break;case"t":d+=this.getDaysInMonth(b);break;case"L":d+=this.isLeapYear(b)?"1":"0";break;case"Y":d+=b?this.getUTCFullYear():this.getFullYear();break;case"y":e=b?this.getUTCFullYear():this.getFullYear(),d+=(e+"").substring(2);break;case"a":e=b?this.getUTCHours():this.getHours(),d+=12>e?"am":"pm";break;case"A":e=b?this.getUTCHours():this.getHours(),d+=12>e?"AM":"PM";break;case"g":e=b?this.getUTCHours():this.getHours(),e>12&&(e-=12),d+=e;break;case"G":d+=this.getHours();break;case"h":e=b?this.getUTCHours():this.getHours(),e>12&&(e-=12),10>e&&(d+="0"),d+=e;break;case"H":e=b?this.getUTCHours():this.getHours(),10>e&&(d+="0"),d+=e;break;case"i":e=b?this.getUTCMinutes():this.getMinutes(),10>e&&(d+="0"),d+=e;break;case"s":e=b?this.getUTCSeconds():this.getSeconds(),10>e&&(d+="0"),d+=e;break;case"u":d+=b?this.getUTCMilliseconds():this.getMilliseconds();break;case"I":d+=this.getMinutes()!=this.getUTCMinutes?"1":"0";break;case"O":e=this.getTimezoneOffset()/60,d+=e>=0?"+":"-",e=Math.abs(e),Math.abs(e)<10&&(d+="0"),d+=e+"00";break;case"P":e=this.getTimezoneOffset()/60,d+=e>=0?"+":"-",e=Math.abs(e),Math.abs(e)<10&&(d+="0"),d+=e+":00";break;case"Z":d+=60*this.getTimezoneOffset();break;case"c":d+=this.format("Y-m-d",b)+"T"+this.format("H:i:sP",b);break;case"r":d+=this.format("D, j M Y H:i:s P",b);break;case"U":d+=this.getTime();break;default:d+=a[f]}return d},Date.prototype.getDaySuffix=function(a){var b=a?this.getUTCDate():this.getDate();return 11!=b&&(b+"").match(/1$/)?"st":12!=b&&(b+"").match(/2$/)?"nd":13!=b&&(b+"").match(/3$/)?"rd":"th"},Date.prototype.getISODay=function(a){var b=a?this.getUTCDay():this.getDay();return b?b:7},Date.prototype.getISOWeek=function(a){var b=a?this.getUTCFullYear():this.getFullYear(),c=a?this.getUTCMonth()+1:this.getMonth()+1,d=a?this.getUTCDate():this.getDate();if(3>c)var e=b-1,f=(e/4|0)-(e/100|0)+(e/400|0),g=((e-1)/4|0)-((e-1)/100|0)+((e-1)/400|0),h=f-g,i=0,j=d-1+31*(c-1);else var e=b,f=(e/4|0)-(e/100|0)+(e/400|0),g=((e-1)/4|0)-((e-1)/100|0)+((e-1)/400|0),h=f-g,i=h+1,j=d+((153*(c-3)+2)/5|0)+58+h;var k=(e+f)%7,d=(j+k-i)%7,l=j+3-d;if(0>l)var m=53-((k-h)/5|0);else if(l>364+h)var m=1;else var m=(l/7|0)+1;return m},Date.prototype.getNameOfDay=function(a){var b=this.getISODay(a)-1;return Date.nameOfDays[b]},Date.prototype.getNameOfMonth=function(a){var b=a?this.getUTCMonth():this.getMonth();return Date.nameOfMonths[b]},Date.prototype._getTimezoneOffset=Date.prototype.getTimezoneOffset,Date.prototype.getTimezoneOffset=function(){return-1*this._getTimezoneOffset()},Date.prototype.isLeapYear=function(a){var b=a?this.getUTCFullYear():this.getFullYear();return(b%4||!(b%100))&&b%400?!1:!0},Date.nameOfDays=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"]}),swifty.define("js/panels/manage_versions/manage_versions",["jquery","swiftylib/evt","swiftylib/map","js/panels/panel/panel","js/panels/panel_stack/panel_stack_instance","js/panels/yes_no/yes_no","swiftylib/i18n/__","stache!./manage_versions.stache","css!./manage_versions.css","js/libs/stdlib_date"],function(a,b,c,d,e,f,g,h){return d.extend({defaults:{tmpl_content:h,title:g("Manage versions"),revisions:new c}},{init:function(){var c=this;c._super(),b("get_published_versions").then(function(b){var d=[];b=a.parseJSON(b),a.each(b.data,function(a,c){var e=c.post_date_gmt.replace(/\-/g,"/");c.swc_date=new Date(e),c.swc_date=new Date(c.swc_date.getTime()+6e4*c.swc_date.getTimezoneOffset()),c.swc_date_string=c.swc_date.format(b.date_format),c.swc_time_string=c.swc_date.format(b.time_format),d.push(c)}),d=d.sort(function(a,b){return a.ID>b.ID?-1:a.ID<b.ID?1:0}),c.options.revisions.attr("data",d)})},".swc_revision_button click":function(b){this.yesNoPanel=e.addPanel(f,{title:g("Restore page to this version?"),yes_name:g("Restore this version"),no_name:g("Cancel. Do not restore"),evt_el:a(b),yes_icon:"&#xe033;"})}," evt_swc_yes":function(c,d,e){var f=this;f.markCloseOnFocus(),f.element.find(".swc_panel_content").css("font-size","18px").html(g("Restoring. Please wait...")),b("restore_page_revision",{revision_id:a(e.evt_el).attr("data-revision_id")}).then(function(){f.yesNoPanel.element.find(".swc_panel_content").css({color:"#00a000","font-weight":"bold"}).html(g("Done! The content of this page is now set to that previous version.<br><br>This version overwrites any autosaved changes made since the last publish.<br><br>If you do not want that use the undo button now.<br><br>The visitors of your site still see the last published version until you publish this one."))})}," evt_swc_no":function(){this.yesNoPanel.closePanel()}})}),swifty.define("stache!js/panels/move_row/move_row.stache",["can/../can"],function(a){var b="__stache_tmpl_"+"js/panels/move_row/move_row.stache".split(".").join("_").split("/").join("_")+"_"+Date.now()+"_"+parseInt(1e6*Math.random())+"__";return a.view.mustache(b,'<div class="swc_panel_content_nowrap">\n    <swc_panel_button icon="&#xe02d;" action="up" name="{{__ \'Up\'}}"/>\n    <swc_panel_button icon="&#xe02e;" action="down" name="{{__ \'Down\'}}"/>\n</div>\n'),b}),swifty.define("js/panels/move_row/move_row",["jquery","swiftylib/evt","js/panels/panel/panel","swiftylib/i18n/__","stache!./move_row.stache"],function(a,b,c,d,e){return c.extend({defaults:{tmpl_content:e,title:d("Move columns")}},{"swc_panel_button click":function(a){var c=this;b("swifty_editor_move_row",{move:a.attr("action"),$row:c.options.$row})},".swc_back_button click":function(){this._super()}})}),swifty.define("stache!js/panels/background/background.stache",["can/../can"],function(a){var b="__stache_tmpl_"+"js/panels/background/background.stache".split(".").join("_").split("/").join("_")+"_"+Date.now()+"_"+parseInt(1e6*Math.random())+"__";return a.view.mustache(b,'<div class="swc_panel_form_wrapper">\n    <div class="swc_panel_form_wrapper_inner">\n        <form class="swc_content_form swc_panel_content_nowrap" autocomplete="off">\n    <div class="swc_form_column" style="min-width: 200px;">\n        <div {{#if bg_data.bg_img}}class="swc_bg_button_wrapper"{{/if}}>\n        <swc_icon_button action="bg_image" text="{{__ \'Image\'}}" />\n        {{#if bg_data.bg_img}}\n            <swc_icon_button action="bg_image_remove" icon="&#xe00b;" />\n        {{/if}}\n        </div>\n        <div>\n        <swifty_colorpicker name="swc_bg_color" _value="bg_data.color" label="{{__ \'Color\'}}"/>\n        </div>\n    </div>\n    <div class="swc_form_column">\n        <swifty_form_input name="swc_bg_overlay_trans" _value="{bg_data.bg_overlay_trans}" label="{{__ \'Overlay transparency %\'}}" />\n        <swifty_colorpicker name="swc_bg_overlay_color" _value="bg_data.bg_overlay_color" label="{{__ \'Overlay color\'}}"/>\n    </div>\n    <div class="swc_form_column">\n        <swifty_form_radiobutton name="swc_bg_position_h" _value=\'bg_data.bg_position_h\' values="0^{{__ \'Left\'}}^|0.5^{{__ \'Center\'}}|1^{{__ \'Right\'}}" label="{{__ \'Horizontal position\'}}" direction="vertical"/>\n    </div>\n    <div class="swc_form_column">\n        <swifty_form_radiobutton name="swc_bg_position_v" _value=\'bg_data.bg_position_v\' values="0^{{__ \'Top\'}}^|0.5^{{__ \'Center\'}}|1^{{__ \'Bottom\'}}" label="{{__ \'Vertical position\'}}" direction="vertical"/>\n    </div>\n    <div class="swc_form_column">\n        <swifty_form_radiobutton name="swc_bg_repeat" _value=\'bg_data.bg_repeat\' values="no-repeat^{{__ \'No\'}}^|repeat-x^{{__ \'Horizontally\'}}|repeat-y^{{__ \'Verticaly\'}}|repeat^{{__ \'Both\'}}" label="{{__ \'Repeat\'}}" direction="vertical"/>\n    </div>\n    <div class="swc_form_column">\n        <swifty_form_radiobutton name="swc_bg_size" _value=\'{bg_data.bg_size}\' values="cover^{{__ \'Cover\'}}^|contain^{{__ \'Contain\'}}|custom^{{__ \'Percentage\'}}" label="{{__ \'Zoom\'}}" direction="vertical"/>\n    </div>\n    {{#eq bg_data.bg_size \'custom\'}}\n    <div class="swc_form_column swc_form_inputs_w_100">\n        <swifty_form_input name="swc_bg_size_perc" _value="{bg_data.bg_size_perc}" label="{{__ \'Zoom percentage\'}}" />\n    </div>\n    {{/eq}}\n    <div class="swc_form_column">\n        <swifty_form_radiobutton name="swc_scrolleffect" _value=\'bg_data.scrolleffect\' values="none^{{__ \'None\'}}^|parallax0^{{__ \'Fixed\'}}|parallax1^{{__ \'Moving\'}}" label="{{__ \'Parallax effect\'}}" direction="vertical"/>\n    </div>\n    {{#eq bg_data.scrolleffect \'none\'}}\n    {{else}}\n    <div class="swc_form_column swc_form_inputs_w_100">\n        <swifty_form_input name="swc_se_factor" _value="bg_data.se_factor" label="{{__ \'Effect factor\'}}" />\n        <swifty_form_input name="swc_se_offset" _value="bg_data.se_offset" label="{{__ \'Effect offset\'}}" />\n    </div>\n    {{/eq}}\n</div>\n</div>\n</div>\n'),b}),swifty.define("css!js/panels/background/background",[],function(){}),swifty.define("js/panels/background/background",["jquery","swiftylib/evt","swiftylib/map","js/panels/panel/panel","swiftylib/i18n/__","stache!./background.stache","swiftylib/media_manager","css!js/panels/background/background.css"],function(a,b,c,d,e,f,g){return d.extend({defaults:{tmpl_content:f,title:e("Set background")}},{init:function(){var a=this;a.options.bg_data=new c({color:a.options.color,bg_img:a.options.bg_img,scrolleffect:a.options.scrolleffect,se_factor:a.options.se_factor,se_offset:a.options.se_offset,bg_position_h:a.options.bg_position_h,bg_position_v:a.options.bg_position_v,bg_repeat:a.options.bg_repeat,bg_size:a.options.bg_size,bg_size_perc:a.options.bg_size_perc,bg_overlay_trans:a.options.bg_overlay_trans,bg_overlay_color:a.options.bg_overlay_color}),a._super()},"{bg_data} change":function(a,c,d,e,f){var g=this;b("do_change_background",{main_key:g.options.main_key,key:d,val:f})},".swc_bg_image click":function(){this.select_image()},".swc_bg_image_remove click":function(){this.options.bg_data.attr("bg_img","")},select_image:function(){var b=this,c=a("<div></div>").appendTo(this.element),d=new a.Deferred;a.post(scc_data.ajax_url,{action:"get_attachment_id_from_url",url:b.options.bg_data.attr("bg_img"),id:scc_data.page_id,ajax_nonce:scc_data.ajax_nonce}).done(function(e){new g(c,{selected_ids:e||"",multiple:!1,dfd:d,swifty_mode:"AMH"===scc_data.ss2_hosting_name?1:0,media_image_prefix:scc_data.media_image_prefix}),d.then(function(d){if(d&&"insert"===d.act&&a.isArray(d.attributes)&&d.attributes.length){var e=[];a.each(d.attributes,function(a,b){"img_list"===b.swifty_cmd&&e.push(b.url)}),e.length?(a("#swc-spinner").show(),a("#swc-screen-cover").show(),a.post(scc_data.ajax_url,{action:"insert_attachment_from_url",urls:JSON.stringify(e),id:scc_data.page_id,ajax_nonce:scc_data.ajax_nonce}).done(function(a){a&&a.length>0&&b.options.bg_data.attr("bg_img",a[0].url)}).always(function(){a("#swc-spinner").hide(),a("#swc-screen-cover").hide()})):b.options.bg_data.attr("bg_img",d.attributes[0].url)}c.remove()})})}})}),swifty.define("stache!js/panels/edit_row/edit_row.stache",["can/../can"],function(a){var b="__stache_tmpl_"+"js/panels/edit_row/edit_row.stache".split(".").join("_").split("/").join("_")+"_"+Date.now()+"_"+parseInt(1e6*Math.random())+"__";return a.view.mustache(b,'<div class="swc_panel_form_tabs_wrapper">\n    <div class="swc_panel_form_wrapper">\n        <div class="swc_panel_form_wrapper_inner">\n            <form class="swc_content_form swc_panel_content_nowrap" autocomplete="off">\n                <div class="swc_panel_form_tab_pane swc_panel_form_content swc_selected">\n                    <div class="swc_form_column">\n                        <swc_icon_button action="n_columns" text="{{__ \'Change columns layout\'}}" />\n                    </div>\n                </div>\n\n                <div class="swc_panel_form_tab_pane swc_panel_form_position">\n                    <div class="swc_form_column swc_form_inputs_w_100">\n                        <swifty_form_input name="swc_between_cols" _value=\'{row_data.swc_between_cols}\' label="{{__ \'Margin between columns\'}}" />\n                    </div>\n                    <div class="swc_form_column swc_form_inputs_w_100">\n                        <swifty_form_radiobutton name="swc_breakout" _value=\'{row_data.swc_breakout}\' values="none^{{__ \'Normal\'}}^|breakout^{{__ \'Full width\'}}" label="{{__ \'Breakout\'}}" />\n                        <swifty_form_radiobutton name="swc_content_breakout" _value=\'{row_data.swc_content_breakout}\' values="none^{{__ \'Normal\'}}^|breakout^{{__ \'Full width\'}}" label="{{__ \'Content breakout\'}}" />\n                    </div>\n                    <div class="swc_form_column swc_form_inputs_w_100">\n                        <swifty_form_input name="swc_margin_top" _value="row_data.swc_margin_top" label="{{__ \'Margin top\'}}" class="swifty_form_line_below"/>\n                        <swifty_form_input name="swc_margin_bottom" _value="row_data.swc_margin_bottom" label="{{__ \'Margin bottom\'}}" />\n                    </div>\n                    <div class="swc_form_column swc_form_inputs_w_100">\n                        <swifty_form_input name="swc_padding_left" _value="row_data.swc_padding_left" label="{{__ \'Padding left\'}}" />\n                        <swifty_form_input name="swc_padding_right" _value="row_data.swc_padding_right" label="{{__ \'Padding right\'}}" />\n                    </div>\n                    <div class="swc_form_column swc_form_inputs_w_100">\n                        <swifty_form_input name="swc_padding_top" _value="row_data.swc_padding_top" label="{{__ \'Padding top\'}}" />\n                        <swifty_form_input name="swc_padding_bottom" _value="row_data.swc_padding_bottom" label="{{__ \'Padding bottom\'}}" />\n                    </div>\n                    <div class="swc_form_column swc_form_inputs_w_100">\n                        <swifty_form_input name="swc_col_padding_left" _value="row_data.swc_col_padding_left" label="{{__ \'Column padding left\'}}" />\n                        <swifty_form_input name="swc_col_padding_right" _value="row_data.swc_col_padding_right" label="{{__ \'Column padding right\'}}" />\n                    </div>\n                    <div class="swc_form_column swc_form_inputs_w_100">\n                        <swifty_form_input name="swc_col_padding_top" _value="row_data.swc_col_padding_top" label="{{__ \'Column padding top\'}}" />\n                        <swifty_form_input name="swc_col_padding_bottom" _value="row_data.swc_col_padding_bottom" label="{{__ \'Column padding bottom\'}}" />\n                    </div>\n                    <div class="swc_form_column swc_form_inputs_w_100">\n                        <swifty_form_input name="swc_col_min_height" _value="row_data.swc_col_min_height" label="{{__ \'Minimum height\'}}" />\n                        <swifty_form_input name="swc_max_height" _value="row_data.swc_max_height" label="{{__ \'Maximum height\'}}" />\n                    </div>\n                    <div class="swc_form_column swc_form_inputs_w_100">\n                        <swifty_form_radiobutton name="swc_col_pos_vert" _value=\'{row_data.swc_col_pos_vert}\' values="top^{{__ \'Top\'}}^|center^{{__ \'Center\'}}|bottom^{{__ \'Bottom\'}}" label="{{__ \'Center content vertically\'}}" class="swifty_form_line_below"/>\n                        <swifty_form_radiobutton name="swc_overflow" _value=\'{row_data.swc_overflow}\' values="auto^{{__ \'Show scrollbar\'}}^|hidden^{{__ \'Crop\'}}" label="{{__ \'If content too high\'}}" />\n                    </div>\n                </div>\n\n                <div class="swc_panel_form_tab_pane swc_panel_form_style">\n                    <div class="swc_form_column">\n                        <swc_icon_button action="change_background" text="{{__ \'Background\'}}" />\n                        <swc_icon_button action="change_column_background" text="{{__ \'Column background\'}}" />\n                    </div>\n                    <div class="swc_form_column">\n                        <swifty_form_textarea name="swc_custom_css" _value="row_data.swc_custom_css" label="{{__ \'Custom css\'}}" />\n                    </div>\n                </div>\n            </form>\n        </div>\n    </div>\n</div>\n'),b}),swifty.define("stache!js/panels/edit_row/edit_row_tabs.stache",["can/../can"],function(a){var b="__stache_tmpl_"+"js/panels/edit_row/edit_row_tabs.stache".split(".").join("_").split("/").join("_")+"_"+Date.now()+"_"+parseInt(1e6*Math.random())+"__";return a.view.mustache(b,'<div class="swc_panel_form_tabs {{#is swifty_gui_mode \'advanced\'}}{{else}}swc_panel_frm_tabs_hidden{{/is}}">\n    <div class="swc_panel_form_tabs_inner">\n        <div class="swc_panel_form_tab swc_selected" data-swc_for=".swc_panel_form_content">{{__ "Content" }}</div>\n        <div class="swc_panel_form_tab" data-swc_for=".swc_panel_form_position">{{__ "Layout" }}</div>\n        <div class="swc_panel_form_tab" data-swc_for=".swc_panel_form_style">{{__ "Style" }}</div>\n    </div>\n</div>\n'),b}),swifty.define("js/panels/edit_row/edit_row",["jquery","swiftylib/evt","swiftylib/map","js/panels/panel/panel","js/panels/panel_stack/panel_stack_instance","js/panels/pick_columns/pick_columns","js/panels/background/background","swiftylib/i18n/__","stache!./edit_row.stache","stache!./edit_row_tabs.stache"],function(a,b,c,d,e,f,g,h,i,j){return d.extend({defaults:{tmpl_content:i,tmpl_tabs:j,title:h("Edit columns"),swifty_gui_mode:scc_data.swifty_gui_mode,default_attributes_grid:{swc_breakout:"none",swc_content_breakout:"none",swc_pos_vert:"top",swc_overflow:"auto",swc_margin_top:"0",swc_margin_bottom:"20",swc_padding_left:"0",swc_padding_right:"0",swc_padding_top:"0",swc_padding_bottom:"0",swc_min_height:"0",swc_max_height:"0",swc_bg_color:"",swc_bg_img:"",swc_custom_css:"",swc_temporary:"",swc_scrolleffect:"none",swc_se_factor:1,swc_se_offset:0,swc_bg_position_h:.5,swc_bg_position_v:.5,swc_bg_repeat:"no-repeat",swc_bg_size:"cover",swc_bg_size_perc:"100",swc_bg_overlay_trans:100,swc_bg_overlay_color:"#000000"},default_attributes_column:{swc_between_cols:"20",swc_bg_color:"",swc_padding_top:"0",swc_padding_bottom:"0",swc_padding_left:"0",swc_padding_right:"0",swc_min_height:"0",swc_pos_vert:"top",swc_bg_img:"",swc_temporary:"",swc_scrolleffect:"none",swc_se_factor:1,swc_se_offset:0,swc_bg_position_h:.5,swc_bg_position_v:.5,swc_bg_repeat:"no-repeat",swc_bg_size:"cover",swc_bg_size_perc:"100",swc_bg_overlay_trans:100,swc_bg_overlay_color:"#000000"}}},{init:function(){var d=this,e=d.options.$row,f=e.find("> .swc_grid_colwrapper:first .swc_grid_column"),g=a.parseJSON(e.attr("data-grid_data")),h=a.parseJSON(f.attr("data-grid_data"));d.options.row_data=new c(a.extend(!0,{},d.options.default_attributes_grid,g,{swc_between_cols:h.swc_between_cols?h.swc_between_cols:d.options.default_attributes_column.swc_between_cols,swc_col_bg_color:h.swc_bg_color?h.swc_bg_color:d.options.default_attributes_column.swc_bg_color,swc_col_bg_img:h.swc_bg_img?h.swc_bg_img:d.options.default_attributes_column.swc_bg_img,swc_col_padding_top:h.swc_padding_top?h.swc_padding_top:d.options.default_attributes_column.swc_padding_top,swc_col_padding_bottom:h.swc_padding_bottom?h.swc_padding_bottom:d.options.default_attributes_column.swc_padding_bottom,swc_col_padding_left:h.swc_padding_left?h.swc_padding_left:d.options.default_attributes_column.swc_padding_left,swc_col_padding_right:h.swc_padding_right?h.swc_padding_right:d.options.default_attributes_column.swc_padding_right,swc_col_min_height:h.swc_min_height?h.swc_min_height:d.options.default_attributes_column.swc_min_height,swc_col_pos_vert:h.swc_pos_vert?h.swc_pos_vert:d.options.default_attributes_column.swc_pos_vert,swc_col_scrolleffect:h.swc_scrolleffect?h.swc_scrolleffect:d.options.default_attributes_column.swc_scrolleffect,swc_col_se_factor:h.swc_se_factor?h.swc_se_factor:d.options.default_attributes_column.swc_se_factor,swc_col_se_offset:h.swc_se_offset?h.swc_se_offset:d.options.default_attributes_column.swc_se_offset,swc_col_bg_position_h:h.swc_bg_position_h?h.swc_bg_position_h:d.options.default_attributes_column.swc_bg_position_h,swc_col_bg_position_v:h.swc_bg_position_v?h.swc_bg_position_v:d.options.default_attributes_column.swc_bg_position_v,swc_col_bg_repeat:h.swc_bg_repeat?h.swc_bg_repeat:d.options.default_attributes_column.swc_bg_repeat,swc_col_bg_size:h.swc_bg_size?h.swc_bg_size:d.options.default_attributes_column.swc_bg_size,swc_col_bg_size_perc:h.swc_bg_size_perc?h.swc_bg_size_perc:d.options.default_attributes_column.swc_bg_size_perc,swc_col_bg_overlay_trans:h.swc_bg_overlay_trans?h.swc_bg_overlay_trans:d.options.default_attributes_column.swc_bg_overlay_trans,swc_col_bg_overlay_color:h.swc_bg_overlay_color?h.swc_bg_overlay_color:d.options.default_attributes_column.swc_bg_overlay_color})),d._super(),d.options.map.attr("show_undo_redo",!1),a(".swc_panel_form_tab:first").click(),a('.swc_panel_form_tab[data-swc_for=".swc_panel_form_'+this.options.mode+'"]').click(),b("swifty_editor_set_focus",{focus:0}),b("swifty_editor_unlock_selection",{$asset:this.options.$row}),b("swifty_editor_set_asset_in_edit_mode",{$asset:this.options.$row})},".swc_back_button click":function(){b("swifty_editor_set_focus",{focus:1}),b("swifty_editor_set_cursor",{$asset:this.options.$row}),this._super()},".swc_panel_form_tab click":function(c){a(this.element).find(".swc_panel_form_tab").removeClass("swc_selected"),a(c).addClass("swc_selected"),a(this.element).find(".swc_panel_form_tab_pane").removeClass("swc_selected"),a(this.element).find(a(c).attr("data-swc_for")).addClass("swc_selected"),b("fix_panel_heights",{redraw_element:a(this.element).find(a(c).attr("data-swc_for"))})},".swc_n_columns click":function(){var a=this;e.addPanel(f,{$row:a.options.$row,swc_between_cols:a.options.row_data.swc_between_cols})},".swc_change_background click":function(){var a=this;e.addPanel(g,{main_key:"main",color:a.options.row_data.swc_bg_color,bg_img:a.options.row_data.swc_bg_img,scrolleffect:a.options.row_data.swc_scrolleffect,se_factor:a.options.row_data.swc_se_factor,se_offset:a.options.row_data.swc_se_offset,bg_position_h:a.options.row_data.swc_bg_position_h,bg_position_v:a.options.row_data.swc_bg_position_v,bg_repeat:a.options.row_data.swc_bg_repeat,bg_size:a.options.row_data.swc_bg_size,bg_size_perc:a.options.row_data.swc_bg_size_perc,bg_overlay_trans:a.options.row_data.swc_bg_overlay_trans,bg_overlay_color:a.options.row_data.swc_bg_overlay_color})},".swc_change_column_background click":function(){var a=this;e.addPanel(g,{main_key:"column",color:a.options.row_data.swc_col_bg_color,bg_img:a.options.row_data.swc_col_bg_img,scrolleffect:a.options.row_data.swc_col_scrolleffect,se_factor:a.options.row_data.swc_col_se_factor,se_offset:a.options.row_data.swc_col_se_offset,bg_position_h:a.options.row_data.swc_col_bg_position_h,bg_position_v:a.options.row_data.swc_col_bg_position_v,bg_repeat:a.options.row_data.swc_col_bg_repeat,bg_size:a.options.row_data.swc_col_bg_size,bg_size_perc:a.options.row_data.swc_col_bg_size_perc,bg_overlay_trans:a.options.row_data.swc_col_bg_overlay_trans,bg_overlay_color:a.options.row_data.swc_col_bg_overlay_color})},"{window} evt_swc_do_change_background":function(b,c,d){var e=this;"color"===d.key&&("column"===d.main_key?e.options.row_data.attr("swc_col_bg_color",d.val):e.options.row_data.attr("swc_bg_color",d.val)),a.each(["bg_img","scrolleffect","se_factor","se_offset","bg_position_h","bg_position_v","bg_repeat","bg_size","bg_size_perc","bg_overlay_trans","bg_overlay_color"],function(a,b){d.key===b&&("column"===d.main_key?e.options.row_data.attr("swc_col_"+b,d.val):e.options.row_data.attr("swc_"+b,d.val))
})},"{row_data} change":function(a,c,d,e,f){var g=this,h=!0;switch(d){case"swc_between_cols":g.changeColMargin(f);break;case"swc_bg_color":g.changeBGColor(f);break;case"swc_col_bg_color":g.changeColBGColor(f);break;case"swc_bg_img":g.changeBGImg(f,d);break;case"swc_bg_overlay_trans":g.changeBGImg(f,d);break;case"swc_bg_overlay_color":g.changeBGImg(f,d);break;case"swc_bg_position_h":g.changeBGImg(f,d);break;case"swc_bg_position_v":g.changeBGImg(f,d);break;case"swc_bg_repeat":g.changeBGImg(f,d);break;case"swc_bg_size":g.changeBGImg(f,d);break;case"swc_bg_size_perc":g.changeBGImg(f,d);break;case"swc_col_bg_img":g.changeColBGImg(f,d);break;case"swc_col_bg_overlay_trans":g.changeColBGImg(f,d);break;case"swc_col_bg_overlay_color":g.changeColBGImg(f,d);break;case"swc_col_bg_position_h":g.changeColBGImg(f,d);break;case"swc_col_bg_position_v":g.changeColBGImg(f,d);break;case"swc_col_bg_repeat":g.changeColBGImg(f,d);break;case"swc_col_bg_size":g.changeColBGImg(f,d);break;case"swc_col_bg_size_perc":g.changeColBGImg(f,d);break;case"swc_breakout":g.changeBreakout(f,"swc_breakout");break;case"swc_content_breakout":g.changeBreakout(f,"swc_content_breakout");break;case"swc_margin_top":g.changeAttrPx("margin-top",d,f);break;case"swc_margin_bottom":g.changeAttrPx("margin-bottom",d,f);break;case"swc_padding_top":g.changeAttrPx("padding-top",d,f);break;case"swc_padding_bottom":g.changeAttrPx("padding-bottom",d,f);break;case"swc_padding_left":g.changeAttrPx("padding-left",d,f);break;case"swc_padding_right":g.changeAttrPx("padding-right",d,f);break;case"swc_col_padding_top":g.changeColAttrPx("padding-top","swc_padding_top",f);break;case"swc_col_padding_bottom":g.changeColAttrPx("padding-bottom","swc_padding_bottom",f);break;case"swc_col_padding_left":g.changeColAttrPx("padding-left","swc_padding_left",f);break;case"swc_col_padding_right":g.changeColAttrPx("padding-right","swc_padding_right",f);break;case"swc_col_min_height":parseInt(f,10)>0?(g.changeAttrPx("min-height","swc_min_height",f),g.changeColAttrPx("min-height","swc_min_height",f)):(g.changeAttr("","min-height","swc_min_height",f),g.changeColAttr("","min-height","swc_min_height",""));break;case"swc_max_height":g.changeHeightAndOverflow(f,d);break;case"swc_overflow":g.changeHeightAndOverflow(f,d);break;case"swc_col_pos_vert":"center"===f||"bottom"===f?(g.changeColInnerAttr("flex","display","swc_pos_vert",f),g.changeColInnerAttr("column","flex-direction","swc_pos_vert",f),g.changeColInnerAttr("bottom"===f?"flex-end":f,"justify-content","swc_pos_vert",f)):(g.changeColInnerAttr("","display","swc_pos_vert",""),g.changeColInnerAttr("","flex-direction","swc_pos_vert",""),g.changeColInnerAttr("","justify-content","swc_pos_vert",""));break;case"swc_custom_css":g.changeCustomCss(f);break;case"swc_scrolleffect":g.changeScrolleffect(f,"swc_scrolleffect");break;case"swc_se_factor":g.changeScrolleffect(f,"swc_se_factor");break;case"swc_se_offset":g.changeScrolleffect(f,"swc_se_offset");break;case"swc_col_scrolleffect":g.changeColScrolleffect(f,d);break;case"swc_col_se_factor":g.changeColScrolleffect(f,d);break;case"swc_col_se_offset":g.changeColScrolleffect(f,d);break;default:h=!1}if(h){var i=g.options.$row;g.setGridData(i,"swc_temporary",""),g.setAllColData("","","swc_temporary","",0),b("swifty_editor_trigger_save",{})}},setGridData:function(b,c,d){var e=this,f=a.parseJSON(b.attr("data-grid_data"));c in e.options.default_attributes_grid&&(e.options.default_attributes_grid[c]===d||""===d)?delete f[c]:f[c]=d,b.attr("data-grid_data",JSON.stringify(f))},"{window} evt_swc_do_change_col_margin":function(a,b,c){var d=this;d.doChangeColMargin(c.$row,c.value)},changeColMargin:function(a){var b=this,c=b.options.$row;b.doChangeColMargin(c,a)},doChangeColMargin:function(b,c){var d=this,e=b.find("> .swc_grid_colwrapper").length,f=parseInt(c,10);!f>0&&(f=0),b.find("> .swc_grid_colwrapper").each(function(b,c){var g=f;b===e-1&&(g=0),d.setColData(a(c),g+"px","margin-right","swc_between_cols",""+g,0)})},changeAttrPx:function(a,b,c){var d=parseInt(c,10);!d>0&&(d=0),d+="px",this.changeAttr(d,a,b,c)},changeAttr:function(c,d,e,f){var g=this,h=g.options.$row;h.css(d,c),g.setGridData(h,e,f),h.attr("data-"+e,f);var i=a.parseJSON(h.attr("data-grid_data"));b("swifty_set_breakout",{row:h[0],breakout:"breakout"===i.swc_breakout?1:0,contentBreakout:"breakout"===i.swc_content_breakout?1:0})},changeColAttrPx:function(a,b,c){var d=parseInt(c,10);!d>0&&(d=0),d+="px",this.changeColAttr(d,a,b,c)},changeColAttr:function(a,b,c,d){this.setAllColData(a,b,c,d,0)},changeColInnerAttr:function(a,b,c,d){this.setAllColInnerData(a,b,c,d)},changeHeightAndOverflow:function(){var a=this,b=a.options.$row,c=a.options.row_data,d=parseInt(c.attr("swc_max_height"),10),e=c.attr("swc_overflow");d>0?(a.changeAttrPx("max-height","swc_max_height",d+""),a.changeAttr(e,"overflow-y","swc_overflow",e),b.css("overflow-x","hidden")):(a.changeAttr("","max-height","swc_max_height",""),a.changeAttr("visible","overflow-y","swc_overflow",e),b.css("overflow-x","visible"))},changeBGColor:function(a){var b=this,c=b.options.$row;c.css("background-color",a),b.setGridData(c,"swc_bg_color",a)},changeColBGColor:function(a){var b=this;b.setAllColData(a,"background-color","swc_bg_color",a,0)},setAllColData:function(b,c,d,e,f){var g=this;g.options.$row.find("> .swc_grid_colwrapper").each(function(h,i){g.setColData(a(i),b,c,d,e,f)})},setAllColInnerData:function(b,c,d,e){var f=this;f.options.$row.find("> .swc_grid_colwrapper").each(function(g,h){f.setColData(a(h).find(".swc_grid_column"),b,c,d,e,0)})},setColData:function(b,c,d,e,f,g){var h=this;if(d&&""!==d)if(1===g&&b.hasClass("swc_grid_colwrapper")){var i=b.find(".swc_rw_in_effect");i.length<=0&&(i=a('<div class="swc_rw_in_effect"></div>').prependTo(b)),i.css(d,c)}else b.css(d,c);if(e&&""!==e){var j=b;j.hasClass("swc_grid_column")||(j=j.find(".swc_grid_column"));var k=a.parseJSON(j.attr("data-grid_data"));e in h.options.default_attributes_column&&(h.options.default_attributes_column[e]===f||""===f)?delete k[e]:k[e]=""+f,j.attr("data-grid_data",JSON.stringify(k))}},changeBGImg:function(b,c){var d=this,e=d.options.$row,f=d.options.row_data,g=f.attr("swc_bg_img"),h=f.attr("swc_bg_size"),i=f.attr("swc_bg_size"),j=f.attr("swc_bg_size_perc");"cover"!==h&&"contain"!==h&&(i=j+"%"),e.css("background-image",'url("'+g+'")'),e.css("background-size","cover"),e.css("background-position",100*parseFloat(f.attr("swc_bg_position_h"))+"% "+100*parseFloat(f.attr("swc_bg_position_v"))+"%"),e.css("background-repeat",f.attr("swc_bg_repeat")),e.css("background-size",i);var k=e.find(".swc_rw_in_effect");k.length<=0&&(k=a('<div class="swc_rw_in_effect"></div>').prependTo(e)),k.css("opacity",1-parseFloat(f.attr("swc_bg_overlay_trans"))/100),k.css("background-color",f.attr("swc_bg_overlay_color")),d.setGridData(e,c,b)},changeColBGImg:function(a){var b=this,c=b.options.row_data,d=c.attr("swc_col_bg_img"),e=c.attr("swc_col_bg_position_h"),f=c.attr("swc_col_bg_position_v"),g=c.attr("swc_col_bg_repeat"),h=c.attr("swc_col_bg_size"),i=c.attr("swc_col_bg_size"),j=c.attr("swc_col_bg_size_perc");"cover"!==h&&"contain"!==h&&(i=j+"%");var k=c.attr("swc_col_bg_overlay_trans"),l=c.attr("swc_col_bg_overlay_color");b.setAllColData('url("'+d+'")',"background-image","swc_bg_img",d,0),b.setAllColData("cover","background-size","",a,0),b.setAllColData(100*parseFloat(e)+"% "+100*parseFloat(f)+"%","background-position","swc_bg_position_h",e,0),b.setAllColData(100*parseFloat(e)+"% "+100*parseFloat(f)+"%","background-position","swc_bg_position_v",f,0),b.setAllColData(g,"background-repeat","swc_bg_repeat",g,0),b.setAllColData(i,"background-size","swc_bg_size",h,0),b.setAllColData(i,"background-size","swc_bg_size_perc",j,0),b.setAllColData(1-parseFloat(k)/100,"opacity","swc_bg_overlay_trans",k,1),b.setAllColData(l,"background-color","swc_bg_overlay_color",l,1)},changeBreakout:function(c,d){var e=this,f=e.options.$row;e.setGridData(f,d,c);var g=a.parseJSON(f.attr("data-grid_data"));b("swifty_set_breakout",{row:f[0],breakout:"breakout"===g.swc_breakout?1:0,contentBreakout:"breakout"===g.swc_content_breakout?1:0})},changeScrolleffect:function(a,c){var d=this,e=d.options.$row,f=d.options.row_data;d.setGridData(e,c,a),b("swifty_reset_scrolleffect",1);var g=f.attr("swc_scrolleffect");if("none"===g)e.removeAttr("data-swc_scrolleffect");else{var h={effect:g,factor:f.attr("swc_se_factor"),offset:f.attr("swc_se_offset")};e.attr("data-swc_scrolleffect",JSON.stringify(h))}b("swifty_update_scrolleffect")},changeColScrolleffect:function(){var c=this,d=c.options.row_data,e=d.attr("swc_col_scrolleffect"),f=d.attr("swc_col_se_factor"),g=d.attr("swc_col_se_offset");c.setAllColData("","","swc_scrolleffect",e,0),c.setAllColData("","","swc_se_factor",f,0),c.setAllColData("","","swc_se_offset",g,0),c.options.$row.find("> .swc_grid_colwrapper").each(function(b,c){var d=a(c);if("none"===e)d.removeAttr("data-swc_scrolleffect");else{var h={effect:e,factor:f,offset:g};d.attr("data-swc_scrolleffect",JSON.stringify(h))}}),b("swifty_update_scrolleffect")},changeCustomCss:function(b){var c=this,d=c.options.$row;c.setGridData(d,"swc_custom_css",b);var e=a.parseJSON(d.attr("data-grid_data"));e.cssid||(e.cssid=Date.now()+"_"+parseInt(999*Math.random(),10),c.setGridData(d,"cssid",e.cssid),d.attr("id","c"+e.cssid)),a("#css_"+e.cssid).remove(),a("#cssclose_"+e.cssid).remove();var f="#c"+e.cssid,g=0,h=f+" {\n",i=b.split("\n");a.each(i,function(a,b){b.indexOf("{")>=0?(0===g&&(h+="}\n"),h+=f+" "+b+"\n",g++):h+=b+"\n"}),0===g&&(h+="}\n"),h=h.replace(/\n/g," "),a('<style id="css_'+e.cssid+'" class="swc_custom_css">'+h+' }</style><div id="cssclose_'+e.cssid+'" class="swc_custom_cssclose"></div></div>').appendTo(d)}})}),swifty.define("stache!js/panels/row_main/row_main.stache",["can/../can"],function(a){var b="__stache_tmpl_"+"js/panels/row_main/row_main.stache".split(".").join("_").split("/").join("_")+"_"+Date.now()+"_"+parseInt(1e6*Math.random())+"__";return a.view.mustache(b,'<div>\n    <swc_panel_button icon="&#xe03f;" action="edit_row" name="{{__ \'Edit columns\'}}"/>\n    <swc_panel_button icon="fa-exchange" action="change_layout" name="{{__ \'Change layout\'}}"/>\n    <swc_panel_button icon="fa-paint-brush" action="change_style" name="{{__ \'Change style\'}}"/>\n    <swc_panel_button icon="&#xe013;" action="move_row" name="{{__ \'Move columns\'}}"/>\n    <swc_panel_button icon="fa-copy" action="copy_row" name="{{__ \'Copy columns\'}}"/>\n    <swc_panel_button icon="&#xe00b;" action="delete_row" name="{{__ \'Delete columns\'}}"/>\n    {{#if show_lock_ui}}\n    {{#if map.swc_locked}}\n    <swc_panel_button icon="fa-lock" action="unlock_row" name="{{__ \'Columns are now locked\'}}"/>\n    {{/if}}\n    {{#if map.swc_unlocked}}\n    <swc_panel_button icon="fa-unlock" action="lock_row" name="{{__ \'Columns are now unlocked\'}}"/>\n    {{/if}}\n    {{/if}}\n    <!--<swc_panel_button icon="&#xe902" action="insert_p_above_row" name="{{__ \'Insert text above\'}}"/>-->\n    <!--<swc_panel_button icon="&#xe901" action="insert_p_below_row" name="{{__ \'Insert text below\'}}"/>-->\n</div>'),b}),swifty.define("js/panels/row_main/row_main",["jquery","swiftylib/evt","js/panels/panel/panel","js/panels/panel_stack/panel_stack_instance","js/panels/yes_no/yes_no","js/panels/move_row/move_row","js/panels/edit_row/edit_row","swiftylib/i18n/__","stache!js/panels/row_main/row_main.stache"],function(a,b,c,d,e,f,g,h,i){return c.extend({defaults:{tmpl_content:i,title:h("Columns")}},{init:function(){this.options.show_lock_ui=scc_data.swifty_change_lock,this._super(),this.getLocked()?(this.options.map.attr("swc_locked",!0),this.options.map.attr("swc_unlocked",!1)):(this.options.map.attr("swc_locked",!1),this.options.map.attr("swc_unlocked",!0)),b("swifty_editor_set_asset_in_edit_mode",{$asset:this.options.$row}),this.options.mode&&"directedit"===this.options.mode&&(this.markCloseOnFocus(),a(".swc_panel_button_edit_row").click()),this.options.mode&&"delete"===this.options.mode&&(this.markCloseOnFocus(),a(".swc_panel_button_delete_row").click()),this.options.mode&&"move"===this.options.mode&&(this.markCloseOnFocus(),a(".swc_panel_button_move_row").click())},destroy:function(){this._super()},getLocked:function(){var b=this,c=a.parseJSON(b.options.$row.attr("data-grid_data"));return c&&c.swc_locked},".swc_panel_button_edit_row click":function(){var a=this;d.addPanel(g,{$row:a.options.$row})},".swc_panel_button_change_layout click":function(){var a=this;d.addPanel(g,{$row:a.options.$row,mode:"position"})},".swc_panel_button_change_style click":function(){var a=this;d.addPanel(g,{$row:a.options.$row,mode:"style"})},".swc_panel_button_delete_row click":function(){this.yesNoPanel=d.addPanel(e,{title:h("Delete these columns with all the content?"),yes_name:h("Delete these columns with all content permanently"),no_name:h("Cancel, do not delete"),evt_el:a(this.element)})},".swc_panel_button_lock_row click":function(){b("set_row_lock",{$row:this.options.$row,locked:1}),this.options.map.attr("swc_locked",!0),this.options.map.attr("swc_unlocked",!1)},".swc_panel_button_unlock_row click":function(){b("set_row_lock",{$row:this.options.$row,locked:null}),this.options.map.attr("swc_locked",!1),this.options.map.attr("swc_unlocked",!0)},".swc_panel_button_move_row click":function(){var a=this;d.addPanel(f,{$row:a.options.$row})},".swc_panel_button_copy_row click":function(){var a=this;b("swifty_editor_row_copy",{$row:a.options.$row})}," evt_swc_yes":function(){this.deleteRow(),b("swifty_editor_set_asset_in_edit_mode"),this.markCloseOnFocus(),this.yesNoPanel.closePanel()}," evt_swc_no":function(){this.yesNoPanel.closePanel()},".swc_panel_button_insert_p_above_row click":function(){b("swifty_editor_insert_p_asset",{action:"above",$asset:this.options.$row})},".swc_panel_button_insert_p_below_row click":function(){b("swifty_editor_insert_p_asset",{action:"below",$asset:this.options.$row})},deleteRow:function(){var a=this,c=a.options.$row,d=c.closest(".cke_widget_wrapper");d.remove(),b("swifty_editor_set_asset_in_edit_mode"),b("swifty_editor_content_modified")},".swc_back_button click":function(){b("swifty_editor_set_asset_in_edit_mode"),this._super()}})}),swifty.define("js/panels/convert_image/convert_image",["jquery","swiftylib/evt","../yes_no/yes_no","swiftylib/i18n/__"],function(a,b,c,d){return c.extend({defaults:{title:d("Convert to Swifty Content Creator image?"),yes_name:d("Convert"),no_name:d("Do not convert.")}},{".swc_panel_button_yes click":function(){var a=this;b("convert_image_to_asset",a.options),a.closePanel()},".swc_panel_button_no click":function(){this.closePanel()}})}),swifty.define("stache!js/panels/area_settings/area_settings.stache",["can/../can"],function(a){var b="__stache_tmpl_"+"js/panels/area_settings/area_settings.stache".split(".").join("_").split("/").join("_")+"_"+Date.now()+"_"+parseInt(1e6*Math.random())+"__";return a.view.mustache(b,'<div class="swc_panel swc_overlay_panel {{panel_css_class}}">\n    <div class="swc_panel_container">\n        <div class="swc_panel_content">\n            <div class="swc_panel_area_settings swc_panel_content_wrap">\n                <div class="swc_panel_form_wrapper">\n                    <div class="swc_panel_form_wrapper_inner">\n                        <form class="swc_content_form swc_panel_content_nowrap" autocomplete="off">\n                            <div class="swc_panel_form_tab_pane swc_panel_form_content swc_selected">\n                                <div class="swc_form_column">\n                                    <table>\n                                        <tr class="swc_tr_head">\n                                            <th colspan="2"><div class="swc_panel_category_title">{{__ \'Choose how to show each area\'}}</div></th>\n                                            <th><div class="swc_panel_category_title">{{__ \'Pick area variant\'}}</div></th>\n                                        </tr>\n                                        <tr>\n                                            <td class="swc_td_label">{{__ \'Topbar\'}}</td>\n                                            <td class="swc_td_radios">\n                                                <swifty_form_radiobutton name="spm_topbar_visibility" _value="area_settings.topbar.visibility" values="default^{{__ \'Default\'}}^|hide^{{__ \'Hide\'}}^|show^{{__ \'Show\'}}" label="{{__ \'Top Bar\'}}" />\n                                            </td>\n                                            <td class="swc_td_selects">\n                                                {{#if area_data.templates_exist}}\n                                                    {{#if area_settings.topbar.nr_of_templates}}\n                                                        <swifty_form_select name="spm_topbar_template" _value="{area_settings.topbar.active_template}" values="{{area_settings.topbar.template_select_options}}" />\n                                                    {{/if}}\n                                                {{/if}}\n                                            </td>\n                                        </tr>\n                                        <tr>\n                                            <td class="swc_td_label">{{__ \'Header\'}}</td>\n                                            <td class="swc_td_radios">\n                                                <swifty_form_radiobutton name="spm_header_visibility" _value="area_settings.header.visibility" values="default^{{__ \'Default\'}}^|hide^{{__ \'Hide\'}}^|show^{{__ \'Show\'}}" label="{{__ \'Header\'}}" />\n                                            </td>\n                                            <td class="swc_td_selects">\n                                                {{#if area_data.templates_exist}}\n                                                    {{#if area_settings.header.nr_of_templates}}\n                                                        <swifty_form_select name="spm_header_template" _value="{area_settings.header.active_template}" values="{{area_settings.header.template_select_options}}" />\n                                                    {{/if}}\n                                                {{/if}}\n                                            </td>\n                                        </tr>\n                                        <tr>\n                                            <td class="swc_td_label">{{__ \'Navbar\'}}</td>\n                                            <td class="swc_td_radios">\n                                                <swifty_form_radiobutton name="spm_navbar_visibility" _value="area_settings.navbar.visibility" values="default^{{__ \'Default\'}}^|hide^{{__ \'Hide\'}}^|show^{{__ \'Show\'}}" label="{{__ \'Nav Bar\'}}" />\n                                            </td>\n                                            <td class="swc_td_selects">\n                                                {{#if area_data.templates_exist}}\n                                                    {{#if area_settings.navbar.nr_of_templates}}\n                                                        <swifty_form_select name="spm_navbar_template" _value="{area_settings.navbar.active_template}" values="{{area_settings.navbar.template_select_options}}" />\n                                                    {{/if}}\n                                                {{/if}}\n                                            </td>\n                                        </tr>\n                                        <tr>\n                                            <td class="swc_td_label">{{__ \'Sidebar\'}}</td>\n                                            <td class="swc_td_radios">\n                                                <swifty_form_radiobutton name="spm_sidebar_visibility" _value="area_settings.sidebar.visibility" values="default^{{__ \'Default\'}}^|hide^{{__ \'Hide\'}}^|left^{{__ \'Left\'}}^|right^{{__ \'Right\'}}" label="{{__ \'Sidebar\'}}" />\n                                            </td>\n                                            <td class="swc_td_selects">\n                                                {{#if area_data.templates_exist}}\n                                                    {{#if area_settings.sidebar.nr_of_templates}}\n                                                        <swifty_form_select name="spm_sidebar_template" _value="{area_settings.sidebar.active_template}" values="{{area_settings.sidebar.template_select_options}}" />\n                                                    {{/if}}\n                                                {{/if}}\n                                            </td>\n                                        </tr>\n                                        <tr>\n                                            <td class="swc_td_label">{{__ \'Extra Sidebar\'}}</td>\n                                            <td class="swc_td_radios">\n                                                <swifty_form_radiobutton name="spm_extrasidebar_visibility" _value="area_settings.extrasidebar.visibility" values="default^{{__ \'Default\'}}^|hide^{{__ \'Hide\'}}^|left^{{__ \'Left\'}}^|right^{{__ \'Right\'}}" label="{{__ \'Extra Sidebar\'}}" />\n                                            </td>\n                                            <td class="swc_td_selects">\n                                                {{#if area_data.templates_exist}}\n                                                    {{#if area_settings.extrasidebar.nr_of_templates}}\n                                                        <swifty_form_select name="spm_extrasidebar_template" _value="{area_settings.extrasidebar.active_template}" values="{{area_settings.extrasidebar.template_select_options}}" />\n                                                    {{/if}}\n                                                {{/if}}\n                                            </td>\n                                        </tr>\n                                        <tr>\n                                            <td class="swc_td_label">{{__ \'Footer\'}}</td>\n                                            <td class="swc_td_radios">\n                                                <swifty_form_radiobutton name="spm_footer_visibility" _value="area_settings.footer.visibility" values="default^{{__ \'Default\'}}^|hide^{{__ \'Hide\'}}^|show^{{__ \'Show\'}}" label="{{__ \'Footer\'}}" />\n                                            </td>\n                                            <td class="swc_td_selects">\n                                                {{#if area_data.templates_exist}}\n                                                    {{#if area_settings.footer.nr_of_templates}}\n                                                        <swifty_form_select name="spm_footer_template" _value="{area_settings.footer.active_template}" values="{{area_settings.footer.template_select_options}}" />\n                                                    {{/if}}\n                                                {{/if}}\n                                            </td>\n                                        </tr>\n                                        <tr>\n                                            <td class="swc_td_label">{{__ \'Bottombar\'}}</td>\n                                            <td class="swc_td_radios">\n                                                <swifty_form_radiobutton name="spm_bottombar_visibility" _value="area_settings.bottombar.visibility" values="default^{{__ \'Default\'}}^|hide^{{__ \'Hide\'}}^|show^{{__ \'Show\'}}" label="{{__ \'Bottom Bar\'}}" />\n                                            </td>\n                                            <td class="swc_td_selects">\n                                                {{#if area_data.templates_exist}}\n                                                    {{#if area_settings.bottombar.nr_of_templates}}\n                                                        <swifty_form_select name="spm_bottombar_template" _value="{area_settings.bottombar.active_template}" values="{{area_settings.bottombar.template_select_options}}" />\n                                                    {{/if}}\n                                                {{/if}}\n                                            </td>\n                                        </tr>\n                                    </table>\n                                </div>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="clearfix"></div>\n        <div class="swc_iframe_gradient"></div>\n    </div>\n\n    <div class="swc_panel_bottom_container">\n        <div class="swc_panel_back_container {{#eq back_action \'exit\'}}swc_back_exit{{/eq}}">\n            <div class="swc_button swc_back_button">\n                {{#eq panel_css_class \'swc_small_panel\'}}\n                    &#xe900;\n                {{else}}\n                    <i class="fa fa-chevron-left"></i>\n                {{/eq}}\n            </div>\n        </div>\n\n        <div class="swc_panel_title_container">\n            <div class="swc_panel_title_pos">\n                <div class="swc_title">\n                    {{__ title}}\n                </div>\n            </div>\n        </div>\n    </div>\n</div>'),b}),swifty.define("css!js/panels/area_settings/area_settings",[],function(){}),swifty.define("js/panels/area_settings/area_settings",["jquery","swiftylib/evt","js/libs/mout/src/object/deepMatches","swiftylib/map","js/panels/panel/panel","js/panels/panel_stack/panel_stack_instance","swiftylib/i18n/__","stache!./area_settings.stache","css!./area_settings.css"],function(a,b,c,d,e,f,g,h){return e.extend({defaults:{tmpl:h,panel_css_class:"swc_overlay_area_settings_panel",title:g("Manage areas for this page"),area_data:null,area_settings:null,area_settings_init:null}},{init:function(){var a=this;a.options.area_data=new d,a.options.area_settings=new d,a.options.area_settings_init={},a.options.area_data.attr("templates_exist",0),b("get_area_settings").then(function(b){b&&b.success&&(a.options.area_settings.attr(b.data),a.options.area_settings_init=b.data,a.options.area_settings.each(function(b){b.attr("nr_of_templates")&&a.options.area_data.attr("templates_exist",1)}))}),a._super(),b("swifty_editor_set_focus",{focus:0})},".swc_back_button click":function(){var d=this,e=d.options.area_settings.serialize(),g=new a.Deferred;c(d.options.area_settings_init,e)?g.resolve():b("save_area_settings",e).then(function(b){b&&b.success&&(a("#swc_iframe").attr("src",function(a,b){return b}),g.resolve())}),g.done(function(){b("swifty_editor_set_focus",{focus:1}),f.closePanel(d.element)})}})}),swifty.define("stache!js/panels/page_options/page_options.stache",["can/../can"],function(a){var b="__stache_tmpl_"+"js/panels/page_options/page_options.stache".split(".").join("_").split("/").join("_")+"_"+Date.now()+"_"+parseInt(1e6*Math.random())+"__";return a.view.mustache(b,'<div class="swc_panel_content_nowrap">\n    {{#if has_ssd}}\n    <swc_panel_button icon="&#xe007;" action="area_settings" name="{{__ \'Area settings\'}}" />\n    {{/if}}\n    <swc_panel_button icon="&#xe912;" action="manage_versions" name="{{__ \'Previous versions\'}}" />\n</div>\n'),b}),swifty.define("js/panels/page_options/page_options",["jquery","swiftylib/evt","js/panels/panel/panel","swiftylib/i18n/__","js/panels/panel_stack/panel_stack_instance","js/panels/area_settings/area_settings","js/panels/manage_versions/manage_versions","stache!./page_options.stache"],function(a,b,c,d,e,f,g,h){return c.extend({defaults:{tmpl_content:h,title:d("Options"),has_ssd:null}},{init:function(){var a=this,b=scc_data.active_theme;a.options.has_ssd=b&&"swifty-site-designer"===b,a._super()},".swc_panel_button_area_settings click":function(){0===this.options.state_saving?(this.markCloseOnFocus(),e.addPanel(f)):alert(d("We are still saving. Please try again in a minute."))},".swc_panel_button_manage_versions click":function(){this.markCloseOnFocus(),e.addPanel(g,{page_model_map:this.options.page_model_map})}})}),swifty.define("stache!js/panels/area_style/area_style.stache",["can/../can"],function(a){var b="__stache_tmpl_"+"js/panels/area_style/area_style.stache".split(".").join("_").split("/").join("_")+"_"+Date.now()+"_"+parseInt(1e6*Math.random())+"__";return a.view.mustache(b,'<div class="swc_panel_form_tabs_wrapper">\n    <div class="swc_panel_form_wrapper">\n        <div class="swc_panel_form_wrapper_inner">\n            <form class="swc_content_form swc_panel_content_nowrap" autocomplete="off">\n\n                <div class="swc_form_column">\n                    <swifty_form_radiobutton name="bg_type" _value=\'{area_data.bg_type}\' values="default^{{__ \'Default\'}}^|color^{{__ \'Color\'}}|image^{{__ \'Image\'}}" label="{{__ \'Background type\'}}" direction="vertical" />\n                </div>\n                {{#is area_data.bg_type \'color\'}}\n                    <div class="swc_form_column">\n                        <swifty_colorpicker name="bg_color" _value="area_data.bg_color" label="{{__ \'Background color\'}}"/>\n                    </div>\n                {{/is}}\n                {{#is area_data.bg_type \'image\'}}\n                    <div class="swc_form_column">\n                        <swc_icon_button action="bg_image" text="{{__ \'Background image\'}}" />\n                        {{#if area_data.bg_img}}\n                            <swc_icon_button action="bg_image_remove" text="{{__ \'Remove background image\'}}" />\n                        {{/if}}\n                    </div>\n                {{/is}}\n\n                <div class="swc_form_column swc_form_inputs_w_100">\n                    {{#if is_vertical}}\n                        <swifty_form_radiobutton name="set_width" _value=\'{area_data.set_width}\' values="default^{{__ \'Default\'}}^|custom^{{__ \'Custom\'}}" label="{{__ \'Minimum width\'}}" direction="vertical" />\n                        {{#is area_data.set_width \'custom\'}}\n                            <swifty_form_input name="px_width" _value="area_data.px_width" label="" />\n                        {{/is}}\n                    {{else}}\n                        <swifty_form_radiobutton name="set_height" _value=\'{area_data.set_height}\' values="default^{{__ \'Default\'}}^|custom^{{__ \'Custom\'}}" label="{{__ \'Minimum height\'}}" direction="vertical" />\n                        {{#is area_data.set_height \'custom\'}}\n                            <swifty_form_input name="px_height" _value="area_data.px_height" label="" />\n                        {{/is}}\n                    {{/if}}\n                </div>\n\n                <div class="swc_form_column swc_form_inputs_w_100">\n                    <swifty_form_radiobutton name="set_margin" _value=\'{area_data.set_margin}\' values="default^{{__ \'Default\'}}^|custom^{{__ \'Custom\'}}" label="{{__ \'Margin\'}}" direction="vertical" />\n                </div>\n                {{#is area_data.set_margin \'custom\'}}\n                    <div class="swc_form_column swc_form_inputs_w_100">\n                        <swifty_form_input name="margin_left" _value="area_data.margin_left" label="{{__ \'Margin left\'}}" />\n                        <swifty_form_input name="margin_right" _value="area_data.margin_right" label="{{__ \'Margin right\'}}" />\n                    </div>\n                    <div class="swc_form_column swc_form_inputs_w_100">\n                        <swifty_form_input name="margin_top" _value="area_data.margin_top" label="{{__ \'Margin top\'}}" />\n                        <swifty_form_input name="margin_bottom" _value="area_data.margin_bottom" label="{{__ \'Margin bottom\'}}" />\n                    </div>\n                {{/is}}\n\n                <div class="swc_form_column swc_form_inputs_w_100">\n                    <swifty_form_radiobutton name="set_padding" _value=\'{area_data.set_padding}\' values="default^{{__ \'Default\'}}^|custom^{{__ \'Custom\'}}" label="{{__ \'Padding\'}}" direction="vertical" />\n                </div>\n                {{#is area_data.set_padding \'custom\'}}\n                    <div class="swc_form_column swc_form_inputs_w_100">\n                        <swifty_form_input name="padding_left" _value="area_data.padding_left" label="{{__ \'Padding left\'}}" />\n                        <swifty_form_input name="padding_right" _value="area_data.padding_right" label="{{__ \'Padding right\'}}" />\n                    </div>\n                    <div class="swc_form_column swc_form_inputs_w_100">\n                        <swifty_form_input name="padding_top" _value="area_data.padding_top" label="{{__ \'Padding top\'}}" />\n                        <swifty_form_input name="padding_bottom" _value="area_data.padding_bottom" label="{{__ \'Padding bottom\'}}" />\n                    </div>\n                {{/is}}\n\n                <div class="swc_form_column">\n                    <swifty_form_textarea name="custom_css" _value="area_data.custom_css" label="{{__ \'Custom css\'}}" />\n                </div>\n\n            </form>\n        </div>\n    </div>\n</div>'),b
}),swifty.define("js/panels/area_style/area_style",["jquery","swiftylib/evt","swiftylib/map","js/panels/panel/panel","js/panels/panel_stack/panel_stack_instance","swiftylib/i18n/__","stache!./area_style.stache","swiftylib/media_manager"],function(a,b,c,d,e,f,g,h){return d.extend({defaults:{tmpl_content:g,title:f("Area style"),is_vertical:!1,default_settings:{bg_type:"default",bg_color:"#FFF",bg_img:"",set_height:"default",px_height:"0",set_width:"default",px_width:"0",set_margin:"default",margin_left:"0",margin_right:"0",margin_top:"0",margin_bottom:"0",set_padding:"default",padding_left:"0",padding_right:"0",padding_top:"0",padding_bottom:"0",custom_css:""}}},{init:function(){var d=this,e=scc_data.area+"_"+(scc_data.area_template?scc_data.area_template:"");b("get_page_style_object",e).then(function(b){var e={};"undefined"!=typeof b&&b.area_data&&(e=b.area_data),d.options.area_data=new c(a.extend(!0,{},d.options.default_settings,e))}),scc_data.area.indexOf("sidebar")>=0&&(d.options.is_vertical=!0),d._super(),b("swifty_editor_set_focus",{focus:0})},".swc_back_button click":function(){b("swifty_editor_set_focus",{focus:1}),this._super()},dataToCss:function(){var a=this,b=a.options.area_data,c=".swifty_area_"+scc_data.area+" {";"color"===b.attr("bg_type")&&(c+=" background-color: "+b.attr("bg_color")+" !important;"),"image"===b.attr("bg_type")&&(c+=" background-size: cover !important;",c+=" background-repeat: inherit !important;");var d=b.attr("set_height"),e=""+b.attr("px_height");"custom"===d&&""!==d&&(c+=" min-height: "+parseInt(e,10)+"px !important;");var f=b.attr("set_width"),g=""+b.attr("px_width");"custom"===f&&""!==f&&(c+=" min-width: "+parseInt(g,10)+"px !important;");var h=b.attr("set_margin"),i=""+b.attr("margin_left");"custom"===h&&""!==i&&(c+=" margin-left: "+parseInt(i,10)+"px !important;");var j=""+b.attr("margin_right");"custom"===h&&""!==j&&(c+=" margin-right: "+parseInt(j,10)+"px !important;");var k=""+b.attr("margin_top");"custom"===h&&""!==k&&(c+=" margin-top: "+parseInt(k,10)+"px !important;");var l=""+b.attr("margin_bottom");"custom"===h&&""!==l&&(c+=" margin-bottom: "+parseInt(l,10)+"px !important;"),c+=b.attr("custom_css"),c+="}",c+=" .swifty_area_inner_content_"+scc_data.area+" {";var m=b.attr("set_padding"),n=""+b.attr("padding_left");"custom"===m&&""!==n&&(c+=" padding-left: "+parseInt(n,10)+"px !important;");var o=""+b.attr("padding_right");"custom"===m&&""!==o&&(c+=" padding-right: "+parseInt(o,10)+"px !important;");var p=""+b.attr("padding_top");"custom"===m&&""!==p&&(c+=" padding-top: "+parseInt(p,10)+"px !important;");var q=""+b.attr("padding_bottom");"custom"===m&&""!==q&&(c+=" padding-bottom: "+parseInt(q,10)+"px !important;"),c+="}",a.updateCss(c)},updateCss:function(c){var d=this,e=d.options.area_data.attr();a.each(d.options.default_settings,function(a,b){e[a]===b&&delete e[a]}),b("change_style_tag",{id:"swifty_scc_area_"+scc_data.area+"_"+scc_data.area_template+"_css",css:c,area_data:e}),setTimeout(function(){d.checkBackgroundImages()},1)},checkBackgroundImages:function(){var a=this,c=a.options.area_data,d=scc_data.area;b("set_bg_img",{key:d,data:c})},select_image:function(){var b=this,c=a("<div></div>").appendTo(this.element),d=new a.Deferred;a.post(scc_data.ajax_url,{action:"get_attachment_id_from_url",url:b.options.area_data.attr("bg_img"),id:scc_data.page_id,ajax_nonce:scc_data.ajax_nonce}).done(function(e){new h(c,{selected_ids:e||"",multiple:!1,dfd:d,swifty_mode:0}),d.then(function(d){if(d&&"insert"===d.act&&a.isArray(d.attributes)&&d.attributes.length){var e=d.attributes[0].url||"";""!==e&&(e.indexOf("?swifty=")<0&&(e+="?swifty=1"),d.attributes[0].swifty_tp&&(e+="&ssd_tp="+d.attributes[0].swifty_tp)),b.options.area_data.attr("bg_img",e)}c.remove()})})},".swc_bg_image click":function(){this.select_image()},".swc_bg_image_remove click":function(){this.options.area_data.attr("bg_img","")},"{area_data} change":function(){var c=this;c.dataToCss(),b("set_is_style_changed",!0),setTimeout(function(){b("fix_panel_heights",{redraw_element:a(c.element).find(".swc_content_form")})},1)}})}),swifty.define("stache!js/panels/area_select/area_select.stache",["can/../can"],function(a){var b="__stache_tmpl_"+"js/panels/area_select/area_select.stache".split(".").join("_").split("/").join("_")+"_"+Date.now()+"_"+parseInt(1e6*Math.random())+"__";return a.view.mustache(b,'<div class="swc_panel_content_nowrap">\n    <swc_panel_button icon="fa-pencil" action="edit" name="Edit this {{areaname}}"/>\n    <swc_panel_button icon="fa-plus" action="new" name="Create new {{areaname}}"/>\n    <swc_panel_button icon="fa-eye-slash" action="hide" name="Hide this {{areaname}}"/>\n</div>\n'),b}),swifty.define("js/panels/area_select/area_select",["jquery","swiftylib/evt","swiftylib/map","js/panels/panel/panel","stache!./area_select.stache","js/diverse/utils","swiftylib/i18n/__"],function(a,b,c,d,e,f,g){return d.extend({defaults:{tmpl_content:e,title:g("Edit [areaname]?")}},{openAreaTemplate:function(a,c){var d=f.updateQueryString("swcreator_edit",a,scc_data.view_url);d=f.updateQueryString("swcreator_area_template",c,d),b("swifty_editor_change_window_location",{url:d})},".swc_panel_button_new click":function(){var a=this;a.openAreaTemplate(a.options.edit_area,"@"),a.closePanel()},".swc_panel_button_edit click":function(){var a=this;a.openAreaTemplate(a.options.edit_area,a.options.edit_area_template),this.closePanel()},".swc_panel_button_hide click":function(){var a=this;b("store_current_areas"),a.options.preset_areas=new c,a.options.preset_areas.attr(a.options.edit_area,new c({html:"",overrule:"hide"})),b("change_current_areas",{preset_areas:a.options.preset_areas}),b("save_current_areas",{preset_areas:a.options.preset_areas}).done(function(){b("reset_theme_edit_overlay"),a.closePanel()})},".swc_back_button click":function(){b("reset_theme_edit_overlay"),b("swifty_editor_set_cursor"),b("swifty_editor_set_asset_in_edit_mode"),this._super()}})}),swifty.define("stache!js/panels/messages/messages.stache",["can/../can"],function(a){var b="__stache_tmpl_"+"js/panels/messages/messages.stache".split(".").join("_").split("/").join("_")+"_"+Date.now()+"_"+parseInt(1e6*Math.random())+"__";return a.view.mustache(b,'<swc_dialog {(map)}="map"></swc_dialog>'),b}),swifty.define("css!js/panels/messages/messages",[],function(){}),swifty.define("js/panels/messages/messages",["jquery","swiftylib/evt","swiftylib/control","swiftylib/view","swiftylib/map","swiftylib/i18n/__","stache!js/panels/messages/messages.stache","css!js/panels/messages/messages.css"],function(a,b,c,d,e,f,g){return c.extend({defaults:{tmpl:g,map:new e({title:"SwiftySite",html:f("Loading..."),checkbox_delete:0,show_checkbox_delete:!0,active_nr:1,total_nr:0,id:""})}},{init:function(){var b=this,c=b.options.map;c.attr("items",b.options.message_data.attr("items")),c.attr("total_nr",b.options.message_data.attr("items.total_nr")),a(b.element).addClass("swc_messages_dialog"),b.element.html(new d(b.options.tmpl)(b.options,{})),b.updateMessage(),b.dataChanged(),b._super()},updateMessage:function(){var a=this,c=a.options.map,d=c.attr("items.messages."+(c.attr("active_nr")-1));d&&(c.attr("id")!==d.attr("id")&&(c.attr("id",d.attr("id")),b("set_message_read",{id:d.attr("id")}),c.attr("checkbox_delete",d.attr("deleted")>0?"1":"0")),c.attr("title",f(d.attr("titlebar"))),"undefined"!=typeof d.attr("url")&&d.attr("url")+""!=""?(c.attr("html",""),c.attr("show_iframe",!1),setTimeout(function(){c.attr("url",d.attr("url")),c.attr("show_iframe",!0)},1)):(c.attr("html",d.attr("html")),c.attr("url",""),c.attr("show_iframe",!1)),c.attr("show_checkbox_delete",!0))},dataChanged:function(){var a=this,b=a.options.map,c=b.attr("items");b.attr("total_nr",c.attr("total_nr")),0===c.attr("total_nr")?(b.attr("title",f("No messages")),b.attr("html",f("Sorry, my dog ate all your messages...")),b.attr("show_checkbox_delete",!1)):a.updateMessage()},setCheckOn:function(){var b=this,c=a(b.element).find(".swc_dialog_footer_t input");c.prop("checked")||c.click()},"{window} evt_swc_dialog_close":function(){a(this.element).remove()},"{window} evt_swc_dialog_next":function(){var a=this,b=a.options.map,c=b.attr("items");b.attr("active_nr")<c.attr("total_nr")&&(b.attr("active_nr",b.attr("active_nr")+1),a.updateMessage())},"{window} evt_swc_dialog_previous":function(){var a=this,b=a.options.map;b.attr("active_nr")>1&&(b.attr("active_nr",b.attr("active_nr")-1),a.updateMessage())},"{window} evt_swc_dialog_action":function(a,c,d){var e=this,g=d.$el.closest(".swc_msg_buttons"),h=g.closest(".swc_messages_dialog"),i=e.options.map,j=i.attr("items.messages."+(i.attr("active_nr")-1));if("allow_ext"===d.action&&(g.html(f("Okay. Thank you!")),b("set_swifty_allow_external",{allow:"allow"}),e.setCheckOn()),"disallow_ext"===d.action&&(g.html(f("Okay. No problem :-)")),b("set_swifty_allow_external",{allow:"disallow"}),e.setCheckOn()),"update_plugin"===d.action&&b("go_update_plugin",{data:d.data,$buttons:g,msg:j,map:e.options.map,$messageDialog:h}),"update_theme"===d.action&&b("go_update_theme",{data:d.data,$buttons:g,msg:j,map:e.options.map,$messageDialog:h}),"visit_ssm"===d.action){var k=window.open("https://wordpress.org/plugins/swifty-site/","_blank");k&&k.focus()}},"{map} change":function(a,c,d,e,f){var g=this,h=g.options.map;if("checkbox_delete"===d){var i=h.attr("items.messages."+(h.attr("active_nr")-1));if(i){var j="1"===f?1:0;"__perm_ph_home"===i.attr("id")&&1===j&&(j=parseInt((new Date).getTime()/1e3,10)+2592e3),i.attr("deleted")!==j&&b("set_message_deleted",{id:i.attr("id"),deleted:j}),i.attr("deleted",j)}}else"active_nr"===d&&this.dataChanged()}})}),swifty.define("stache!js/panels/welcome/welcome.stache",["can/../can"],function(a){var b="__stache_tmpl_"+"js/panels/welcome/welcome.stache".split(".").join("_").split("/").join("_")+"_"+Date.now()+"_"+parseInt(1e6*Math.random())+"__";return a.view.mustache(b,'<swc_dialog {(map)}="map">\n    <div class="swc_welcome_bottom"></div>\n    <div>\n        {{#is map.step 1}}\n            <div class="swc_welcome_icon">&#xe03d</div>\n            <div class="swc_welcome_title">Thanks for using Swifty</div>\n            <div class="swc_welcome_subtitle">How awesome of you!</div>\n            <div class="swc_welcome_text">\n                It\'s really easy for both professionals and for the rest of us, to create a stunning and amazing website with SwiftySite.<br>\n                Please let us know which of the two you are, and we will provide you with the best user experience.<br>\n            </div>\n            <div class="swc_welcome_buttons">\n                <div class="swc_button swc_btn_welcome_pro">I\'m a&nbsp;<b>pro</b></div>\n                <div class="swc_button swc_btn_welcome_easy">Let\'s go <b>easy</b></div>\n            </div>\n            <div class="swc_welcome_note">(You can always change this later)</div>\n        {{/is}}\n        {{#is map.step 2}}\n            <div class="swc_welcome_icon">&#xe03d</div>\n            <div class="swc_welcome_title">One more question</div>\n            <div class="swc_welcome_subtitle">and you\'re good to go</div>\n            <div class="swc_welcome_text">\n                We want to make your life easy by providing you with the best settings for the way your content will be shown. But at the same time we don\'t want to mess things up if you already have valuable content in this website. So please let us know:<br>\n            </div>\n            <div class="swc_welcome_buttons">\n                <div class="swc_button swc_btn_welcome_existing">This is an existing site with content</div>\n                <div class="swc_button swc_btn_welcome_empty">This is a new & empty site</div>\n            </div>\n            <div class="swc_welcome_note">(You can always change this later)</div>\n        {{/is}}\n        {{#is map.step 3}}\n            <div class="swc_welcome_icon">&#xe03d</div>\n            <div class="swc_welcome_title">Getting your site ready</div>\n            <div class="swc_welcome_subtitle">One second please...</div>\n            <div class="swc_welcome_text">\n                We need to reload this page in order to apply all your preferences.<br>\n            </div>\n        {{/is}}\n    </div>\n    <div class="swc_welcome_laptops"><div class="swc_welcome_laptops_inner"></div></div>\n</swc_dialog>'),b}),swifty.define("css!js/panels/welcome/welcome",[],function(){}),swifty.define("js/panels/welcome/welcome",["jquery","swiftylib/evt","js/diverse/utils","swiftylib/control","swiftylib/view","swiftylib/map","swiftylib/i18n/__","stache!js/panels/welcome/welcome.stache","css!js/panels/welcome/welcome.css"],function(a,b,c,d,e,f,g,h){return d.extend({defaults:{tmpl:h,map:new f({step:1})}},{init:function(){var b=this;a(b.element).addClass("swc_welcome_dialog"),b.element.html(new e(b.options.tmpl)(b.options,{}));var c=scc_data.swcreator_url+"css/welcome_bg.jpg";a(b.element).find(".swc_dialog_window").css("background-image",'url("'+c+'")');var d=scc_data.swcreator_url+"css/welcome_laptops.png";a(b.element).find(".swc_welcome_laptops_inner").css("background-image",'url("'+d+'")'),b._super()},setMode:function(d,e){"1"===scc_data.can_manage_options?this.options.map.attr("step",2):this.options.map.attr("step",3),b("change_scc_data",{key:"swifty_gui_mode",val:d}),b("change_scc_data",{key:"swifty_change_lock",val:e}),a.post(c.getSWCreatorAjaxUrl(),{action:"set_gui_mode",gui_mode:d,id:scc_data.page_id,ajax_nonce:scc_data.ajax_nonce}),a.post(c.getSWCreatorAjaxUrl(),{action:"set_scc_enable_lock_options",lock:e,id:scc_data.page_id,ajax_nonce:scc_data.ajax_nonce}),"0"===scc_data.can_manage_options&&this.setClickedAndReload()},setClickedAndReload:function(){a.post(c.getSWCreatorAjaxUrl(),{action:"set_welcome_state",welcome_state:"clicked",id:scc_data.page_id,ajax_nonce:scc_data.ajax_nonce}).then(function(){location.reload()})},setMode2:function(b,c,d){var e=this;e.options.map.attr("step",3),a.post(scc_data.ajax_url,{action:"set_wpautop_and_ptag_bottom_margin_and_wp_embed",wpautop:b,ptag_bottom_margin:c,wp_embed:d,id:scc_data.page_id,ajax_nonce:scc_data.ajax_nonce}).then(function(){e.setClickedAndReload()})},".swc_btn_welcome_pro click":function(){this.setMode("advanced","enabled")},".swc_btn_welcome_easy click":function(){this.setMode("easy",!1)},".swc_btn_welcome_existing click":function(){this.setMode2("default","0","")},".swc_btn_welcome_empty click":function(){this.setMode2("off","1","disable")}})}),swifty.define("stache!js/panels/help/help.stache",["can/../can"],function(a){var b="__stache_tmpl_"+"js/panels/help/help.stache".split(".").join("_").split("/").join("_")+"_"+Date.now()+"_"+parseInt(1e6*Math.random())+"__";return a.view.mustache(b,'<swc_dialog {(map)}="map"></swc_dialog>'),b}),swifty.define("js/panels/help/help",["jquery","swiftylib/control","swiftylib/view","swiftylib/map","swiftylib/i18n/__","stache!js/panels/help/help.stache"],function(a,b,c,d,e,f){return b.extend({defaults:{tmpl:f,map:new d({title:e("Need help?"),show_iframe:!0,total_nr:0,url:"",small_header:!0})}},{init:function(){var a=this;a.options.map.attr("url",a.options.dialog_data.attr("url")),a.element.html(new c(a.options.tmpl)(a.options,{})),a._super()},"{window} evt_swc_dialog_close":function(){a(this.element).remove()}})}),swifty.define("js/panels/main/main",["jquery","swiftylib/evt","swiftylib/map","js/diverse/page","js/panels/panel/panel","js/panels/panel_stack/panel_stack_instance","stache!js/panels/main/main.stache","js/panels/add_content/add_content","js/panels/publish/publish","js/panels/manage_versions/manage_versions","swiftylib/i18n/__","js/diverse/utils","js/panels/yes_no/yes_no","js/panels/row_main/row_main","js/panels/convert_image/convert_image","js/panels/pick_columns/pick_columns","js/panels/add_preset/add_preset","js/panels/page_options/page_options","js/panels/area_style/area_style","js/panels/area_select/area_select","js/panels/messages/messages","js/panels/welcome/welcome","js/panels/help/help","js/libs/mout/src/function/throttle"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){return e.extend({defaults:{panel_css_class:"swc_small_panel",tmpl_content:g,back_action:"exit",show_panel_extra:!0,options_map:new c({mobile_view:"desktop"}),main_menu_msgs:[k("Hold your breath... at least you're not on hold..."),k("We're testing your patience..."),k("Just a second... (as if you had any other choice)"),k("It's still faster than you could draw it..."),k("Are we there yet?"),k("1,000,000 bottles of beer on the wall..."),k("Hang on a sec... I know your data is here somewhere...")],message_data:new c({items:{total_nr:0,total_nr_unread:0,messages:[]}}),message_server_data:[],message_srv_data_received:!1}},{init:function(){var b=this;b.Page=new d(a("body"),{}),b.options.title=scc_data.admin_page_title,b.options.page_model_map=this.Page.getMap(),b.options.page_model_map.attr("show_button_options","main"===scc_data.area),b.options.page_model_map.attr("show_button_style","main"!==scc_data.area),b.options.page_model_map.attr("show_main_menu_msg",b.options.main_menu_msgs[Math.floor(Math.random()*b.options.main_menu_msgs.length)]),b.saveMsgStateThrottledObject=x(a.proxy(b.sendMessageStatesToServer,b),1e3),b.getLatestMessages(),b._super()},go_location_back:function(){if(scc_data.is_swifty_mode){var a=window.location.href;a=l.updateQueryString("swcreator_edit","main"===scc_data.area?null:"main",a),a=l.updateQueryString("swcreator_area_template",null,a),window.location=a}else window.location.href=scc_data.exit_url},getLatestMessages:function(){{var c=this;c.options.message_data.attr("items")}b("check_swifty_allow_external").then(function(b){"allow"===b?a.ajax({url:"https://stuff.swifty.online/stuff/data/get.php",type:"POST",data:{"do":"messages"},dataType:"json",xhrFields:{withCredentials:!0}}).then(function(a){c.nextGenerateMessage(a.result)}):a.post(l.getSWCreatorAjaxUrl(),{action:"get_default_messages",id:scc_data.page_id,ajax_nonce:scc_data.ajax_nonce}).done(function(d){d=a.trim(d),d="["===d.substr(0,1)?a.parseJSON(d):[],"disallow"!==b&&d.push({id:"__perm_ph_home",titlebar:k("Message"),html:"<h1>"+k("We would love to keep you in the loop")+"</h1>"+k("SwiftySite is constantly improving and expanding and we would love it, if you <b>let us inform you of cool new features and improvements</b> and gather some anonymous stats of how people use our plugin (helps us make it even better).")+"<br><br>"+k("No need to register or give us your email. We'll use this inbox. But first we need your permission to check our server for updates ;-)")+'<br><br><br><div class="swc_msg_buttons"><div class="swc_button swc_dialog_click" data-swc_dialog_action="allow_ext">'+k("Yes, I want to be the first to know")+'</div><br><div class="swc_button_show_as_link swc_dialog_click" data-swc_dialog_action="disallow_ext">'+k("No thanks, do not contact the news server.")+"</div></div>"}),c.nextGenerateMessage(d)})})},nextGenerateMessage:function(b){var c=this;"1"!==scc_data.is_ssm_active&&b.push({id:"__full_ss",titlebar:k("Message"),html:"<h1>"+k("Hi there!")+"</h1>"+k("Awesome of you to use <b>Swifty Content Creator</b> for this website project.")+"<br>"+k("We are honoured :-)")+"<br><br>"+k("But did you know you are now only enjoying part of the full SwifySite experience? Theres way more!")+"<br><br>"+k("<b>Swifty Page Manager</b>")+"<br>"+k("Puts all your pages in an orderly page tree overview. Here you can easily create new pages, edit existing ones and move them around with drag and drop.")+"<br><br>"+k("<b>Swifty Site Designer</b>")+"<br>"+k("This is a free theme that is actually more like a theme generator, because you can create almost any design with it. <i>It works closely together with Swifty Content Creator</i> which you are already using.")+"<br><br>"+k("Now, you can can get each of these indiviually, but when you install the <b>SwiftySite plugin</b>, you get the whole experience of this theme and these plugins working beautifully together.")+"<br><br>"+k("Why not give it a try? Its free :-)")+'<br><br><br><div class="swc_msg_buttons"><div class="swc_button swc_dialog_click" data-swc_dialog_action="visit_ssm">'+k("Yes, I want the full SwiftySite experience!")+"</div></div>"}),a.post(l.getSWCreatorAjaxUrl(),{action:"get_swifty_plugin_versions",id:scc_data.page_id,ajax_nonce:scc_data.ajax_nonce},function(d){d=a.parseJSON(d),a.each(d,function(a,c){var d="",e="__upd_";if("update_available"===c.update_status){var f=a,g="update_plugin";"swifty-content-creator"===a&&(f="scc"),"swifty-content-goodies-pack"===a&&(f="scgp"),"swifty-content-visuals-pack"===a&&(f="scvp"),"swifty-page-manager"===a&&(f="spm"),"swifty-site"===a&&(f="ssm"),"si-contact-form"===a&&(f="scf"),"swifty-site-designer"===a&&(f="ssd",g="update_theme"),e+=f+c.update_version+"_";var h=a.replace(/-/g," ");h=h.replace(/\w\S*/g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()});var i="swc_msg_plugin_msg_"+f,j=JSON.stringify({plugin:c.update_plugin,slug:c.update_slug,cls:i});d+="<b>"+h+"</b><br>"+k("Your version:")+" "+c.version+"<br>"+k("Available version:")+" "+c.update_version+'<br><br><div class="swc_msg_buttons '+i+'"><div class="swc_button swc_dialog_click" data-swc_dialog_action="'+g+"\" data-swc_dialog_data='"+j+"'>"+k("Update")+" "+h+"</div></div><!--butend"+i+"--><br><br>"}""!==d&&(d='<div style="text-align: center;">'+k("There are updates available for these Swifty plugins:")+"<br><br>"+d,d+='<div class="swc_msg_hide_on_succes">'+k("Please update!")+"</div></div>",b.push({id:e,titlebar:k("Message"),html:d}))}),c.updateMessageStates(b)})},updateMessageStates:function(b){var c=this,d=c.options.message_data.attr("items");a.post(l.getSWCreatorAjaxUrl(),{action:"get_message_states",id:scc_data.page_id,ajax_nonce:scc_data.ajax_nonce}).done(function(e){e=a.trim(e),"["===e.substr(0,1)&&(e=a.parseJSON(e),c.options.message_server_data=e,a.each(b,function(b,c){a.each(e,function(a,b){c.id+""==b.id+""&&(c.read=b.read,c.deleted=b.deleted)})})),b=b.sort(function(a,b){return a.read>b.read||1!==a.read&&1===b.read?-1:a.read<b.read||1===a.read&&1!==b.read?1:0}),a.each(b,function(a,b){b.deleted>1&&b.deleted<parseInt((new Date).getTime()/1e3,10)&&(b.deleted=0),!b.deleted>=1&&d.messages.push(b)}),c.updateMessageTotals(),c.options.message_srv_data_received=!0})},updateMessageTotals:function(){var b=this,c=b.options.message_data.attr("items"),d=0;a.each(c.messages,function(a,b){1!==b.attr("read")&&d++}),c.attr("total_nr_unread",d),c.attr("total_nr",c.messages.length)},sendMessageStatesToServer:function(){var b=this,c=b.options.message_data.attr("items");a.each(c.messages,function(c,d){var e=null;a.each(b.options.message_server_data,function(a,b){d.id+""==b.id+""&&(e=b)}),e||(e={id:d.attr("id")},b.options.message_server_data.push(e)),d.attr("read")>=0&&(e.read=d.attr("read")),d.attr("deleted")>=0&&(e.deleted=d.attr("deleted"))}),a.post(l.getSWCreatorAjaxUrl(),{action:"set_message_states",message_states:JSON.stringify(b.options.message_server_data),id:scc_data.page_id,ajax_nonce:scc_data.ajax_nonce}).done(function(){})},setMessageRead:function(b){var c=this,d=c.options.message_data.attr("items");a.each(d.messages,function(a,c){c.attr("id")+""==b+""&&c.attr("read",1)}),c.saveMsgStateThrottledObject(),c.updateMessageTotals()},setMessageDeleted:function(b,c){var d=this,e=d.options.message_data.attr("items");a.each(e.messages,function(a,d){d.attr("id")+""==b+""&&d.attr("deleted",c)}),d.saveMsgStateThrottledObject(),d.updateMessageTotals()},updatePluginFailed:function(a){a.html("<b>"+k("Update FAILED. Please go to the Wordpress admin plugins page.")+"</b>")},updatePlugin:function(a,b,c,d,e){var a=JSON.parse(a),f=this,g=new RegExp(a.cls+'">.*</div><!--butend'+a.cls+"-->");b.html("<b>"+k("Updating...")+"</b>"),wp.ajax.post("update-plugin",{_ajax_nonce:scc_data.ajax_updates_nonce,plugin:a.plugin,slug:a.slug}).done(function(){c.attr("html",c.attr("html").replace(g,a.cls+'"><b>'+k("Update was successful.")+"</b></div><!--butend"+a.cls+"-->")),d.attr("html",c.attr("html"));var b=e.find(".swc_msg_hide_on_succes");b.hide()}).fail(function(){f.updatePluginFailed(b)})},updateThemeFailed:function(a){a.html("<b>"+k("Update FAILED. Please go to the Wordpress admin themes page.")+"</b>")},updateTheme:function(b,c,d,e,f){var b=JSON.parse(b),g=this,h=new RegExp(b.cls+'">.*</div><!--butend'+b.cls+"-->");c.html("<b>"+k("Updating...")+"</b>");var i={id:scc_data.page_id,ajax_nonce:scc_data.ajax_nonce,action:"upgrade_ssd"};a.post(l.getSWCreatorAjaxUrl(),i).done(function(a){if(!a||a&&!a.success)g.updateThemeFailed(c);else{d.attr("html",d.attr("html").replace(h,a.cls+'"><b>'+k("Update was successful.")+"</b></div><!--butend"+a.cls+"-->")),e.attr("html",d.attr("html"));var b=f.find(".swc_msg_hide_on_succes");b.hide()}}).fail(function(){g.updateThemeFailed(c)})},".swc_back_button click":function(){var c=this;b("editor_drag_handlers_hide"),"main"===scc_data.area?0===this.options.state_saving?(c.go_location_back(),this._super()):alert(this.options.save_leave_msg):(c.Page.checkPubStatus(void 0===c.Page.newest_content?null:c.Page.newest_content,!1),this.options.page_model_map.attr("is_published_same")&&!this.options.page_model_map.attr("is_style_changed")?scc_data.area_new_template?b("delete_area").then(function(){c.go_location_back()}):c.go_location_back():c.yesNoPanel=f.addPanel(m,{title:k("Publish changes?"),yes_name:k("Publish"),no_name:k("Cancel. Forget changes"),evt_el:a(this.element),lcname:scc_data.area}))}," evt_swc_yes":function(){var a=this;a.yesNoPanel.closePanel(),a.element.find(".swc_panel_content").css("font-size","18px").html(k("Publishing. Please wait...")),b("publish_content_now").then(function(){a.go_location_back()})}," evt_swc_no":function(){var a=this;a.markCloseOnFocus(),a.yesNoPanel.closePanel(),scc_data.area_new_template?b("delete_area").then(function(){a.go_location_back()}):a.go_location_back()},".swc_notifications click":function(){this.options.message_srv_data_received&&new u(a("<div></div>").appendTo("body"),{message_data:this.options.message_data})},".swc_help_button click":function(){var b="AMH"===scc_data.ss2_hosting_name?"https://www.alphamegahosting.com/swiftysite/help/":"";if(b){var d=window.open(b,"_blank");d&&d.focus()}else new w(a("<div></div>").appendTo("body"),{dialog_data:new c({url:"https://www.swifty.online/plugins_inbox/scc/support-question-mark/?rss3=hlp1"})})},".swc_main_save click":function(){this.Page.savePage()},".swc_panel_button_add_content click":function(){f.addPanel(h,{wrap_at_bottom:!0})},".swc_panel_button_add_column click":function(){f.addPanel(p,{$row:null,swc_between_cols:20})},".swc_panel_button_add_preset click":function(){f.addPanel(q,{})},".swc_panel_button_publish click":function(){0===this.options.state_saving?f.addPanel(i):alert(k("We are still saving. Please try again in a minute."))},".swc_manage_versions click":function(){f.addPanel(j,{page_model_map:this.options.page_model_map})},".swc_panel_button_page_options click":function(){f.addPanel(r,{})},".swc_panel_button_change_style click":function(){f.addPanel(s,{})},"{window} evt_swc_swifty_editor_row_dialog":function(a,b,c){f.addPanel(n,c)},"{window} evt_swc_swifty_editor_row_edit_dialog":function(a,b,c){c.mode="directedit",f.addPanel(n,c)},"{window} evt_swc_swifty_editor_row_delete_dialog":function(a,b,c){c.mode="delete",f.addPanel(n,c)},"{window} evt_swc_swifty_editor_row_move_dialog":function(a,b,c){c.mode="move",f.addPanel(n,c)},"{window} evt_swc_swifty_editor_image_dialog":function(a,b,c){f.addPanel(o,c)},"{window} evt_swc_swifty_area_select":function(a,b,c){f.addPanel(t,c)},"{window} evt_swc_show_main_menu":function(){var b=this;b.options.map.attr("show_main_menu",!0),"clicked"!==scc_data.swifty_welcome_state&&new v(a("<div></div>").appendTo("body"),{})},"{window} evt_swc_set_message_read":function(a,b,c){this.setMessageRead(c.id)},"{window} evt_swc_set_message_deleted":function(a,b,c){this.setMessageDeleted(c.id,c.deleted)},"{window} evt_swc_go_update_plugin":function(a,b,c){this.updatePlugin(c.data,c.$buttons,c.msg,c.map,c.$messageDialog)},"{window} evt_swc_go_update_theme":function(a,b,c){this.updateTheme(c.data,c.$buttons,c.msg,c.map,c.$messageDialog)}})}),"function"==typeof swifty_add_exec&&swifty_add_exec({status:"hold","for":"ck_inited"}),"undefined"!=typeof requirejs&&(requirejs.s.contexts._.config.baseUrl=scc_data.swcreator_url),swifty.define("jquery",[],function(){return jQuery});var swifty_getUrlParameter=function(a){var b=new RegExp("[?&]"+a+"=([^&#]*)").exec(window.location.href);return null==b?null:b[1]||0},swifty_addMustacheHelpers=function(a,b,c){a.registerHelper("__",b),a.registerHelper("eq",function(a,b,c){return"string"!=typeof a&&(a=a()),"string"!=typeof b&&(b=b()),a===b?c.fn(this):c.inverse(this)}),a.registerHelper("renderStache",function(a,b){return"string"!=typeof a&&(a=a()),c.render(a,b.scope)}),a.registerHelper("convertFAIcons",function(){var a=this;a.attr("icon")&&/fa-/.test(a.attr("icon"))&&(a.attr("fa_icon",a.attr("icon")),a.attr("icon",null))}),a.registerHelper("replace",function(a,b,c){"string"!=typeof a&&(a=a()),"string"!=typeof b&&(b=b()),"string"!=typeof c&&(c=c());var d=new RegExp(b,"g");return a.replace(d,c)})};swifty_getUrlParameter("swcreator_iframe")&&(scc_data.in_iframe=!0),scc_data.in_iframe?swifty.require(["jquery","swiftylib/mustache","swiftylib/view","swiftylib/i18n/__","js/diverse/iframe_page","js/components/editor_ckeditor/editor_ckeditor","css!cssDir/swcreator_ui.css","css!//netdna.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css"],function(a,b,c,d,e){swifty_addMustacheHelpers(b,d,c),a(function(){a("body").wrapInner('<div class="swc_display"></div>');var b=new e(a("body"),{}),d="__stache_main_tmpl__";can.view.mustache(d,'<swifty_editor_ckeditor selector="'+b.getMap().selector+'"></swifty_editor_ckeditor>'),a("body").append(new c(d)({},{}))})}):swifty.require(["jquery","swiftylib/mustache","swiftylib/view","js/panels/panel_stack/panel_stack_instance","js/diverse/utils","swiftylib/i18n/__","js/panels/main/main","css!cssDir/swcreator_ui.css","css!//netdna.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css"],function(a,b,c,d,e,f,g){swifty_addMustacheHelpers(b,f,c),a(function(){if(!scc_data.in_iframe&&window.self===window.top){a(".swifty_area_frame").html(""),a("body").css("background-color","#eeeeee");var b=e.updateQueryString("swcreator_edit",null,window.location.href);b=e.updateQueryString("swcreator_iframe",scc_data.area,b),b=e.updateQueryString("swcreator_area_template",scc_data.area_template,b),a('<iframe id="swc_iframe" class="swifty_event_frame" src="'+b+'"></iframe>').appendTo("body")}var c=f("It seems you are using a browser that is not fully compatible with SwiftySite.\n\nRight now only Chrome, Firefox and Safari (version 9 or higher) work completely reliable.\n\nPlease use one of these browsers te work on your site.\n\n(Ofcourse your visitors can view your site with any browser on any device.)","swifty-content-creator");bowser.chrome||bowser.firefox||bowser.safari&&bowser.version>=9||alert(c),d.addPanel(g,{}),"function"==typeof window.swiftyCheckImageSizesToBeDetermined&&window.swiftyCheckImageSizesToBeDetermined(scc_data.page_id)})}),swifty.define("js/swcreator",function(){});